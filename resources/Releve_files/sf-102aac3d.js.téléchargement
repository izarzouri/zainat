!function(e,t,r,n,o){o("sf/appcontext",["jquery"],function(e){return function(t){var r=e(t).data("urlContext");if(void 0===r||null===r)throw new Error("The application context could not be determined.");return r}}),o("sf/csrf",["jquery"],function(t){function r(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r=11,n="";for(e=0;r>e;e++){var o=Math.floor(Math.random()*t.length);n+=t.substring(o,o+1)}return encodeURIComponent(n)}function n(t,r,n){var o=new Date;o.setSeconds(o.getSeconds()+10),e.document.cookie=t+"="+r+"; Path=/; Expires="+o.toGMTString()+(n!==!1?"; Secure":"")}function o(t){var r=new Date;r.setSeconds(0),e.document.cookie=t+"=; Expires="+r.toGMTString()}t.ajaxPrefilter(function(e,t,i){var a=r(),u=encodeURIComponent("CSRF");return e.csrf===!1?(o(u),void 0):(i.setRequestHeader(u,a),n(u,a,e.secure),void 0)})}),o("sf/errlog",[],function(){return{queueError:function(){bnpp.log("errlog.queueError désactivé")},onerror:bnpp.onError,config:function(){bnpp.log("errlog.config désactivé")},reset:function(){bnpp.log("errlog.reset désactivé")}}}),o("sf/fluid",["jquery"],function(t){function r(e,r){r||(r=o);var n=t(e),i=n.outerWidth();n.removeClass(r.breakpointClasses.join(" "));var a=0;for(a=0;a<r.breakpoints.length;a++){var u=r.breakpoints[a];if(u>=i){n.addClass(r.breakpointClasses[a]);break}}}var n={},o={breakpoints:[320,480,768,940,1210],breakpointClasses:["tiny","small","medium","large","huge"]},i={};return n.update=function(e,o){return t(e).each(function(){r(this,o)}),n},n.updateRegistered=function(){var e;for(e in i)i.hasOwnProperty(e)&&n.update(e,i[e]);return n},n.register=function(e,t){return i[e]=t,n},t(e).resize(function(){n.updateRegistered()}),Object.freeze(n),n}),o("sf/form",["jquery"],function(e){return e.fn.protectForm=function(t){var r={type:"POST"},n="protect-form-submitted";return this.each(function(){e(this).data(n,!1).on("submit",function(o){o.preventDefault();var i,a,u=e(this),s=e.extend(!0,{},r,t);s.url=s.url||u.attr("action"),u.data(n)||(u.data(n,!0),s.before&&s.before.apply(u[0]),i={url:s.url,type:s.type},"POST"===s.type&&(i.data=u.serialize()),a=e.ajax(i).always(function(){u.data(n,!1)}),e.each(["done","fail","always"],function(e,t){s[t]&&a[t](s[t])}))})})},function(t,r,n){e(r,t).protectForm(n)}}),o("sf/history",["require"],function(){var t={},r={},n={};return e.onpopstate=function(){var t=e.history.state;console.log("Back button pressed : Restoring full page state "+JSON.stringify(t));var o;for(o in r)if(r.hasOwnProperty(o)){var i=r[o];if(i){var a;t&&(a=t[o]),void 0===a&&(a=n[o]),void 0!==a&&i(a)}}},t.push=function(t,r){var n=e.history.state;n||(n={}),n[t]=r,e.history.pushState&&e.history.pushState(n,"Last state of element id "+t)},t.register=function(e,t,o){return r[e]=t,void 0!==o&&(n[e]=o),e},t.unregister=function(e){r[e]=null},Object.freeze(t),t}),o("sf/messaging",["pagebus"],function(){var t={};return t.subscribeTopic=function(t,r){e.top.PageBus.subscribe(t,this,function(e,t){r(t)})},t.publishTopic=function(t,r){e.top.PageBus.publish(t,r)},t.queryTopic=function(t){for(var r=e.top.PageBus.query(t),n=[],o=0;o<r.length;o++)n.push(r[o].value);return n},t.storeTopic=function(t,r){e.top.PageBus.subscribe(t,function(){},null,{PageBus:{cache:!0}}),e.top.PageBus.store(t,r)},Object.freeze(t),t}),o("wcm",["pagebus","jquery"],function(e,r){var n={};return n.ERROR_TOPIC="wcm.sf.displayError",n.notifyError=function(t){e.publish(n.ERROR_TOPIC,t)},n.load=function(e,n,o,i,a,u){var s=r(e);if(void 0===i&&(i=s.data("wcmcontentType"),void 0===i||null===i))throw new Error("WCM content type could not be determined.");if(void 0===a&&(a=s.data("wcmcontentAsset"),void 0===a||null===a))throw new Error("WCM content asset could not be determined.");void 0===u&&(u=s.data("wcmcontentIframe"));var c=a.split(".").pop();if("html"==c)var f=a;else var f=n+i+"?asset="+a;if(!u){var l=t.createElement("a");l.href=f;var p=l.protocol+"//"+l.host;return r.ajax({type:"GET",url:f,csrf:!1,success:function(e){if(e.indexOf('id="content_indisponible"')>-1)console.log("zone publiable"+f+"non trouvée"),s.html('<div class="errorZP"></div>');else if("html"==c)s.html(e);else{e=e.replace(/(\/rsc\/|\/sites\/)/g,p+"$1");var t=r(e).filter(function(e,t){return 1==t.nodeType&&"sf-master"==t.id});s.html(t)}}}).fail(function(e,t,r){throw new Error("WCM content load error "+t+" "+r+" for  "+f)})}s.html("<iframe seamless='seamless' scrolling='no' style='width:100%; height: 100%;'></iframe>"),r("iframe",s).attr("src",f)},Object.freeze(n),n}),o("axes",[],function(){var e={},r={language:"",territory:"",audience:"",distributionChannel:""},n=null;return e.language=function(){return e.cookieValue("language")},e.territory=function(){return e.cookieValue("territory")},e.audience=function(){return e.cookieValue("audience")},e.distributionChannel=function(){return e.cookieValue("distributionChannel")},e.cookieValue=function(e){var o="axes=",i=t.cookie;if(i!=n&&i.indexOf(o)>=0){for(var a=i.split(";"),u=null,s=0;s<a.length;s++){var c=a[s].trim();if(c.indexOf(o)>=0){u=decodeURIComponent(c.substring(o.length,c.length)+"");break}}if(null!==u&&u.indexOf("|")>=0){var f=u.split("|");f.length>=4&&(r.language=f[0],r.distributionChannel=f[1],r.territory=f[2],r.audience=f[3])}n=i}return r[e]},Object.freeze(e),e}),o("sf",["./sf/appcontext","./sf/csrf","./sf/errlog","./sf/fluid","./sf/form","./sf/history","./sf/messaging","./sf/wcm","./sf/axes"],function(e,t,r,n,o,i,a,u,s){var c={};return c.getApplicationContext=e,c.errlog=r,c.fluid=n,c.protectForm=o,c.history=i,c.messaging=a,c.wcm=u,c.axes=s,c})}(window,document,bnpp.sf31.requirejs,bnpp.sf31.requirejs,bnpp.sf31.define,bnpp.jquery,bnpp.jquery,bnpp.jquery);
//# sourceMappingURL=sf-102aac3d.js.map