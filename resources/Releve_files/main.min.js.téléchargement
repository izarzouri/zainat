function getCarrouselCode(el,datas,type){var code="";if("acsi"==type){code+='<div class="carrousel-left"></div>',code+='<div class="carrousel-right"></div>',code+='<div class="carrousel-wrapper-cards">',code+='<div class="carrousel-itemsContainer">';for(var i=0;i<datas.length;i++)code+='<div class="carrousel-item">',code+='<p class="carrousel-label">',code+="<div>",code+='<span name="name">',code+=datas[i][1],code+='<i class="icon icon-info"></i>',code+='<div class="infobulle hidden">',code+='<div class="arrow"></div>',code+="<span>Laurène Ipsoume</span>",code+="</div>",code+="</span>",code+='<span class="sepBot" name="anonym"></span>',code+="</div>",code+="</p>",code+='<i data-label="'+datas[i][1]+'" class="icon-carte ic-xxl '+datas[i][0]+'">',code+='<div class="checkboxContainer">',code+="<input",el.hasClass("filled")&&"checked"==datas[i][2]&&(code+=" checked"),code+=' required type="radio" id="cb'+i+'" name="selectedCard">',code+='<label for="cb'+i+'" class="cb2"></label>',code+="</div>",code+="</i>",code+="</div>";code+="</div>",code+="</div>"}else{code+='<div class="carrousel-left"></div>',code+='<div class="carrousel-right"></div>',code+='<div class="carrousel-wrapper-cards">',code+='<div class="carrousel-itemsContainer">';for(var i=0;i<datas.length;i++)code+='<div data-original-label="'+datas[i][1]+'" class="carrousel-item">',code+='<p class="carrousel-label">',code+='<span class="text">'+datas[i][1]+'</span>&nbsp;&nbsp;<i class="icon-stylo-small js-editable"></i>',code+="</p>",code+='<i data-label="'+datas[i][1]+'" class="icon-carte ic-xxl '+datas[i][0]+'">',code+='<div class="checkboxContainer">',code+="<input",el.hasClass("filled")&&"checked"==datas[i][2]&&(code+=" checked"),code+=' required type="checkbox" id="cb'+i+'" name="selectedCard">',code+='<label for="cb'+i+'" class="cb2"></label>',code+="</div>",code+="</i>",code+="<div>",code+='<span name="name">'+datas[i][1],code+='<i class="icon icon-info"></i>',code+='<div class="infobulle hidden">',code+='<div class="arrow"></div>',code+='<span>Débit : <span class="green" name="debit">Débit Immédiat</span></span>',code+='<span>Date d\'expiration : <span class="green" name="expiration">11/2016</span></span>',code+='<span>Compte chèque associé : <span class="green" name="numCompte">****9000</span></span>',code+="</div>",code+="</span>",code+='<span class="sepBot" name="anonym">4974********3068</span>',code+='<span class="favoriteRadio">',code+="<input",el.hasClass("filled")&&"fav"==datas[i][3]&&(code+=" checked"),code+=' required type="radio" id="fav'+i+'" name="fav" />',code+='<label for="fav'+i+'">Carte favorite</label>',code+="</span>",code+="</div>",code+="</div>";code+="</div>",code+="</div>"}return code}function find(value,keyword){return searchFormat(value).indexOf(keyword)>=0}function searchFormat(str){if(void 0==str)return"";var new_str=String(str).toLowerCase().stripAccents();return $.trim(new_str)}function sortByDate(field){return function(a,b){return 0==DateHelper.formatDateToObject(b[field])||0==DateHelper.formatDateToObject(a[field])?1:DateHelper.formatDateToObject(b[field]).getTime()-DateHelper.formatDateToObject(a[field]).getTime()}}function sortByNumber(field){return function(a,b){return b[field]-a[field]}}function sortByString(field){return function(a,b){return a[field]<b[field]?-1:a[field]>b[field]?1:0}}function getIndexMaxOfArray(array){return array.indexOf(Math.max.apply(null,array))}function updateTemplate($elem_placeholder,template,data){$elem_placeholder.html(template(data))}function checkValue(keywords,values_to_match){var found=!1,exit=!1;return $.each(keywords,function(idx,keyword){return exit?(found=!1,!1):void $.each(values_to_match,function(index,value){return find(value,keyword)?(found=!0,!1):void(values_to_match.length==index+1&&(exit=!0,found=!1))})}),found}function searchBetweenAmount(value,amount_from,amount_to){return+amount_from<=+value&&+amount_to>=+value}function searchBetweenDate(value,date_from,date_to){return date_from<=value&&date_to>=value}function array_key_exists(key,search){return!(!search||search.constructor!==Array&&search.constructor!==Object)&&key in search}function trace(message,style){if("PROD"!=ENVIRONNEMENT||document.URL.match(/test-page/)){if("object"==typeof message)return void console.log(message);message=String(message),null!=style?(message.match(/^%c/)||(message="%c"+message),"object"==typeof style?console.log(message.substr(0,2)+style.prefix+message.substr(2),style.style):console.log(message,style)):console.log(message)}}function getRGB(color){var result;return(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))?[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])]:(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))?[2.55*parseFloat(result[1]),2.55*parseFloat(result[2]),2.55*parseFloat(result[3])]:(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))?[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)]:(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))?[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)]:void 0}function parseRGBA(color){var result;if(result=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9,\.]{1,})\s*\)/.exec(color))return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3]),parseFloat(result[4])]}function makeRGBColor(arrayOfThreeValues){return Array.isArray(arrayOfThreeValues)&&3==arrayOfThreeValues.length?"rgb("+arrayOfThreeValues[0]+", "+arrayOfThreeValues[1]+", "+arrayOfThreeValues[2]+")":"rgb(0, 0, 0)"}function makeRGBAColor(arrayOfThreeValues,opacity){return Array.isArray(arrayOfThreeValues)&&3==arrayOfThreeValues.length?"rgba("+arrayOfThreeValues[0]+", "+arrayOfThreeValues[1]+", "+arrayOfThreeValues[2]+", "+opacity+")":"rgb(0, 0, 0)"}function waitForFontLoaded(fonts,callback){fonts instanceof Array||(fonts=[fonts]);for(var random="giItT1WQy@!-/#",loader=[],i=0;i<fonts.length;i++){var span=$("<span>").text(random).css({"font-family":"sans-serif","font-variant":"normal","font-style":"normal","font-weight":"normal","font-size":"50px","letter-spacing":"0",position:"absolute",left:"-2000px",top:"-2000px"}).appendTo("body");loader.push([span,span.outerWidth()]),span.css("font-family",fonts[i])}var interval=setInterval(function(){for(var count=0,i=0;i<loader.length;i++)loader[i][0].outerWidth()!=loader[i][1]&&count++;if(count==loader.length){clearInterval(interval);for(var i=0;i<loader.length;i++)loader[i][0].remove();callback()}},50)}function addCookieToGarbage(cookie){cookiesToRemove.push(cookie)}function cookieRemover(){for(var i=0;i<cookiesToRemove.length;i++)GlobalSite.docCookies.removeItem(cookiesToRemove[i])}function loadHandlebarHtml($container_script,filename,json,filters,Module,jsonFilter){if(0!=$container_script.length){var deferred=$.Deferred();return $.ajax({url:filename,dataType:"html"}).done(function(data){$container_script.html(data);var $handlebar_script=$container_script.find(".handlebar-script"),count=0;$handlebar_script.each(function(index){var $template=$(this);initHandlebar($template,json,filters,function(data,onUpdateFn){count+=1,count==$handlebar_script.length&&deferred.resolve(data)},Module,jsonFilter)})}),deferred}}function Filters($buttons_filters){this.buttons=$buttons_filters}function initHandlebar($current_element,json,filters,callback,Module,jsonFilter){function initTemplate(data,onUpdateFn){$sort_by_elem.length>0&&(void 0!==$sort_by_elem.find(".active").data("value")||$.each(keys,function(idx,elem){sortJson(data[elem])}),$sort_by_elem.find(".active").data("value")?$sort_by_elem.on("click","li",function(){sortJson(getBodyData(data,keys),$sort_by_elem.find(".active").data("direction")),updateTemplate($elem_placeholder,template,data),void 0!==Module.tri&&Module.tri()}):$sort_by_elem.on("change.sort-by",function(){$.each(keys,function(idx,elem){sortJson(data[elem])}),updateTemplate($elem_placeholder,template,data);var tmpFN=new Function(onUpdateFn);tmpFN(),void 0!==Module.tri&&Module.tri()})),updateTemplate($elem_placeholder,template,data),filters&&filters.add(),$search_field.length>0&&addKeyUp($elem_placeholder,template,data,$search_field,onUpdateFn),$elem_placeholder.find(".validate-form").each(function(index,elem){$(elem).validate(FormHelper.form_validator_config),FormHelper.resetInput($(elem))}),HelpText.init($elem_placeholder);try{void 0!==Module.advancedSearch&&Module.advancedSearch($elem_placeholder,template,data,$("#recherche-avancee-form"),keys),callback(data)}catch(e){}}function getBodyData(array,parts){for(var new_array=array,i=0;i<parts.length;i++)new_array=new_array[parts[i]];return new_array}function sortJson(data,direction){if($sort_by_elem.find(".active").data("value"))var sort_by=$sort_by_elem.find(".active").data("value");else var sort_by=$sort_by_elem.val();switch($.each(data,function(index,value){value.new_group=!1}),sort_by){case"date_virement":case"date":case"dateReception":case"date_opposition":case"date_fin":default:data.sort(sortByDate(sort_by)),"up"==direction&&data.reverse();break;case"montant":case"statut_code":data.sort(sortByNumber(sort_by));break;case"nom":case"numero":case"motif":case"libelle":case"libelle_compte_receveur":case"statut":case"type":case"objet":case"compte":if(data.sort(sortByString(sort_by)),"numero"===sort_by){var last_index=0;$.each(data,function(index,virement){0==index&&(virement.new_group=!0),index>0&&virement.numero!=data[last_index].numero&&(last_index=index,virement.new_group=!0)})}"up"==direction&&data.reverse()}}function updateTemplate($elem_placeholder,template,data){0==$insert_into.length?$elem_placeholder.html(template(data)):$insert_into.append(template(data))}function noResultsMessage($elem_placeholder){$elem_placeholder.html(messages.no_results)}function errorMessage($elem_placeholder){$elem_placeholder.html(messages.error)}function addKeyUp($elem_placeholder,template,data,$search_field,onUpdateFn){var results={};$search_field.on("keyup.search",function(e){var $this=$(this),$parent=$this.parent(".search");$parent.addClass("is-searching"),delay(function(){if(0==$this.val().length){updateTemplate($elem_placeholder,template,data);var tmpFN=new Function(onUpdateFn);return tmpFN(),hideTotalResults(),$parent.removeClass("is-searching"),void $search_field.trigger("search-done")}var value_array=$this.val().split(" ");formatted_value_array=[],formatted_value_array=$.map(value_array,function(str){var formatted_str=searchFormat(str);if(""!=formatted_str)return formatted_str}),search(data,formatted_value_array,results,onUpdateFn),void 0!==filters&&""!=filters&&filters.reset(),$parent.removeClass("is-searching")},400)})}function search(data,formatted_value_array,results,onUpdateFn){var total_results=0,new_results={};$.each(keys,function(index,key){var json_rows=data[key];if(results[key]=$.map(json_rows,function(value){var values_to_match=[];if($.each(search_in,function(idx,element){void 0!==value[element]&&values_to_match.push(value[element])}),checkValue(formatted_value_array,values_to_match))return total_results++,value}),key.indexOf(".")>-1){var key_array=key.split(".");new_results[key_array[0]]={},new_results[key_array[0]][key_array[1]]=results}}),$.isEmptyObject(new_results)||(results=new_results),updateTemplate($elem_placeholder,template,results);var tmpFN=new Function(onUpdateFn);tmpFN(),displayTotalResults(total_results),$search_field.trigger("search-done")}function displayTotalResults(total_results){$total_results_placeholder.removeClass("hidden"),0==total_results&&$total_results_placeholder.html(messages.no_results),1==total_results&&$total_results_placeholder.html(total_results+" "+messages.results_number_single),total_results>1&&$total_results_placeholder.html(total_results+" "+messages.results_number_multiple)}function hideTotalResults(){$total_results_placeholder.addClass("hidden")}if(0!=$current_element.length){var json_path="/rsc/contrib/dev/json/",source=$current_element.html(),template=Handlebars.compile(source),filename=$current_element.data("filename"),placeholder_elem_selector=$current_element.data("template-placeholder"),$elem_placeholder=$(placeholder_elem_selector),search_elem_selector=$current_element.data("search-field"),$search_field=$(search_elem_selector),messages={no_results:"Pas de résultat",error:"Une erreur s'est produite",results_number_single:"résultat trouvé",results_number_multiple:"résultats trouvés"},keys=$current_element.data("keys"),search_in=$current_element.data("search-in"),total_results_selector=$current_element.data("total-results"),$total_results_placeholder=$(total_results_selector),sort_by_selector=$current_element.data("sort-by"),$sort_by_elem=$(sort_by_selector),insert_into=$current_element.data("insert-into"),$insert_into=$(insert_into),onUpdateFn=$current_element.data("on-update"),data={};json?(data=json,initTemplate(data,onUpdateFn)):$.getJSON(json_path+filename,function(data,status){"undefined"!=typeof jsonFilter?initTemplate(eval("data"+jsonFilter),onUpdateFn):initTemplate(data,onUpdateFn)});var delay=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}();ShowHideHelper.togglePlusMoins(".list-fav li .main-row")}}function getBreadcrumb(){var current_url=document.URL,module=current_url.substr(current_url.lastIndexOf("/")+1);if(""==module){var current_url_parts=current_url.split("/");module=current_url_parts[current_url_parts.length-2]}return module}function GetURLParameter(sParam){for(var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split("=");if(sParameterName[0]==sParam)return sParameterName[1]}}function getUrlAnchor(sParam){var pattern=new RegExp("#"+sParam+"=(.*)"),match=window.location.href.match(pattern);return null==match?null:match.length>0?match[1]:null}function loadNumTel(){var elems=jQuery("[id*=numeroTel_]:not('.numTelLoaded')");if(elems.length>0){var mesParams=null;jQuery.ajax({dataType:"json",url:"/rsc/contrib/script/telephone/telephone.json",success:function(data){mesParams=data},error:function(msg){console.log("une erreur est survenue;"),console.log(msg)},async:!1}),mesParams&&jQuery.each(elems,function(key,obj){for(var curItem=jQuery(obj),tmp=jQuery(obj).attr("id").split("_"),famille=tmp[1],numero=tmp[2],curNum=null,cptI=0;cptI<mesParams.numeros.length&&!curNum;cptI++)numero==mesParams.numeros[cptI].numero&&(curNum=mesParams.numeros[cptI]);for(var curFam=null,cptI=0;cptI<mesParams.familles.length&&!curFam;cptI++)famille==mesParams.familles[cptI].famille&&(curFam=mesParams.familles[cptI]);for(var curType=null,cptI=0;cptI<mesParams.types.length&&!curType;cptI++)curNum.type==mesParams.types[cptI].name&&(curType=mesParams.types[cptI]);for(var curTemplate=null,cptI=0;cptI<mesParams.templates.length&&!curTemplate;cptI++)curFam.template==mesParams.templates[cptI].name&&(curTemplate=mesParams.templates[cptI]);var newObj=jQuery(curTemplate.html).clone();newObj.find(".number span").html(curNum.value),newObj.find(".texte p").html("small"==curFam["class"]?curType.mentions[0]:curType.mentions[1]),newObj.addClass(curFam["class"]),newObj.addClass(curType["class"]),curNum.value.length<=6&&"second"==curTemplate.name&&(newObj.removeClass("second"),newObj.addClass("first")),curItem.addClass("numTelLoaded"),"P"==curItem.prop("tagName")?(curItem.empty(),curItem.append(newObj)):(curItem.before(newObj),curItem.remove())})}}function loadcapitalSocialGroupe(){$(".CapSocialGroupe").each(function(){0==$(this).children().length&&(jQuery(this).html("2 494 005 306 euros"),jQuery(this).css("color","initial"))})}var carrouselDefinitions={cards:[["ic-visa","Carte Visa","checked","fav"]],acsi:[["ic-visa","Visuel 1","checked","fav"],["ic-premier","Visuel 2","checked",""],["ic-infinite","Visuel 3","",""],["ic-bnp-net","Visuel 4","",""],["ic-cirus","Visuel 5","",""],["ic-plus","Visuel 6","",""],["ic-jeune","Visuel 7","",""],["ic-livret","Visuel 8","",""]]},buildCarrousel=function(container,datas,params){if("undefined"==typeof datas)throw new Error("\r\ncarrousel.js, function buildCarrouselCards()\r\nAucun élément fourni pour remplir le carrousel.\r\nLe paramètre datas ne peut pas être vide.");var typeOfCarrousel="cards";"undefined"!=typeof params&&"undefined"!=typeof params.type&&(typeOfCarrousel=params.type),container.each(function(){el=$(this),el.append(getCarrouselCode(el,datas,typeOfCarrousel)),el.removeClass("js-build-carrousel-cards").addClass("js-carrousel-cards-built"),el.find(".carrousel-left").css("display","none");var itemsContainer=el.find(".carrousel-itemsContainer"),lastClick=0,animTime=400,freeSpace=0;el.parent().hasClass("hidden")?(el.parent().css("opacity",0).removeClass("hidden"),freeSpace=el.children(".carrousel-wrapper-cards").width(),el.parent().addClass("hidden").css("opacity",1)):freeSpace=el.children(".carrousel-wrapper-cards").width();var itemWidth=itemsContainer.children().first().outerWidth(!0),nbrOfItemsShown=Math.floor(freeSpace/itemWidth),totalItemsWidth=itemWidth*itemsContainer.children().length,itemsMargin=itemsContainer.children().first().css("margin-right").replace("px",""),tolerance=5;freeSpace>=totalItemsWidth&&el.find(".carrousel-right").css("display","none"),$(window).resize(function(){freeSpace=el.children(".carrousel-wrapper-cards").width(),itemWidth=itemsContainer.children().first().outerWidth(!0),nbrOfItemsShown=Math.floor(freeSpace/itemWidth),totalItemsWidth=itemWidth*itemsContainer.children().length,itemsMargin=itemsContainer.children().first().css("margin-right").replace("px","")}),el.on("click",".carrousel-right",function(){var now=(new Date).getTime();now-lastClick<animTime||(lastClick=now,$(".popover").remove(),itemsContainer.animate({"margin-left":"-="+itemWidth+"px"},animTime/2,function(){Math.abs($(this).css("margin-left").replace("px",""))>=totalItemsWidth-freeSpace-itemsMargin-tolerance&&$(this).parent().siblings(".carrousel-right").fadeOut(100)}),$(this).siblings(".carrousel-left").is(":visible")||$(this).siblings(".carrousel-left").fadeIn(100))}).on("click",".carrousel-left",function(){var now=(new Date).getTime();now-lastClick<animTime||(lastClick=now,$(".popover").remove(),itemsContainer.animate({"margin-left":"+="+itemWidth+"px"},animTime/2,function(){$(this).css("margin-left").replace("px","")>=0&&$(this).parent().siblings(".carrousel-left").fadeOut(100)}),$(this).siblings(".carrousel-right").is(":visible")||$(this).siblings(".carrousel-right").fadeIn(100))}).on("click","i.icon-carte",function(e){var now=(new Date).getTime();if(!(now-lastClick<animTime)){lastClick=now;var _status=!$(this).find("input").prop("checked")&&"checked";if($(this).find("input").prop("checked",_status),0!=_status)0==itemsContainer.find(".favoriteRadio input:checked").length&&$(this).parents(".carrousel-item").find(".favoriteRadio input").prop("checked","checked");else{var currentFavoriteRadio=$(this).parents(".carrousel-item").find(".favoriteRadio input");0!=currentFavoriteRadio.prop("checked")&&currentFavoriteRadio.prop("checked",!1),itemsContainer.find(".checkboxContainer input:checked").length>0&&itemsContainer.find(".checkboxContainer input:checked").first().parents(".carrousel-item").find(".favoriteRadio input").prop("checked","checked")}e.preventDefault()}}).on("click",".js-editable",function(){var $self=$(this).parents(".carrousel-item"),defaultName=$.trim($self.data("original-label"));if($(".carrousel-item.edited").removeClass("edited"),$self.addClass("edited"),!($(".popover").length>0)){$(".popover").remove();var code="";code+='<div class="popover carrousel hidden">',code+='<span class="close">&#10005;</span>',code+="<h3>Modification du libellé</h3>",code+='<div class="form">',code+='<input type="radio" name="edit-label" value="1" class="custom-radio" id="newName" checked="checked">',code+='<label class="radio-label pull-left" for="newName"></label>',code+='<input id="newNameInput" class="form-control radio-left" type="text" placeholder="Modifier le libellé">',code+='<input type="radio" name="edit-label" value="'+defaultName+'" class="custom-radio" id="defaultName">',code+='<label class="radio-label" for="defaultName">Utiliser "'+defaultName+' "</label>',code+='<a class="btn-primary btn-block">Valider</a>',code+="</div>",code+="</div>",$("body").append(code);var popover=$(".popover"),jsEditable=$self.find(".js-editable"),positionLeft=jsEditable.offset().left-popover.outerWidth(!0)/2,positionTop=jsEditable.offset().top+jsEditable.outerHeight()+15;popover.css({left:positionLeft+"px",top:positionTop+"px",opacity:0}).removeClass("hidden"),popover.animate({opacity:1},200)}}).on("click",".icon-info",function(){var _next=$(this).next();_next.hasClass("hidden")?($(this).parents(".carrousel-itemsContainer").find(".infobulle").addClass("hidden"),_next.removeClass("hidden")):(_next.addClass("hidden"),$(this).parents(".carrousel-itemsContainer").find(".infobulle").addClass("hidden"))}).on("change",".favoriteRadio input",function(){var carte=$(this).parents(".carrousel-item").find(".checkboxContainer input").prop("checked","checked");$(this).prop("checked")?carte.prop("checked",!0):carte.prop("checked",!1)}),$("body").on("click",".popover .close",function(){$(this).parent().remove()}).on("click",".popover .btn-primary",function(e){var newText="newName"==$(this).parents(".popover").find("input:checked").attr("id")&&""!=$("#newNameInput").val()?$("#newNameInput").val():$("#defaultName").val();$(".carrousel-item.edited .carrousel-label span.text").html(newText),$(this).parents(".popover").remove(),e.preventDefault()}).on("click",function(e){$(e.target).hasClass("js-editable")||0!=$(e.target).parents(".popover").length||$(".popover").remove(),$(e.target).hasClass("icon-info")||0!=$(e.target).parents(".infobulle").length||$(".infobulle").addClass("hidden")})})};!function(){var month_names=["Jan","Fév","Mars","Avr","Mai","Juin","Juil","Août","Sept","Oct","Nov","Déc"],month_names_full=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];try{Handlebars.registerHelper("sum",function(a,b){return a+b}),Handlebars.registerHelper("if_eq",function(a,b,opts){return a==b?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("if_eq_prefix",function(a,b,opts){return a.substring(0,5)==b?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("if_ar_not_empty",function(ar,opts){return ar.length>0?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("if_string_eq",function(a,b,opts){return String(a).toLowerCase()==String(b).toLowerCase()?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("unless_eq",function(a,b,opts){return a!=b?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("if_gt",function(a,b,opts){return a>b?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("if_lt",function(a,b,opts){return a<b?opts.fn(this):opts.inverse(this)}),Handlebars.registerHelper("abs",function(nbr){return isNaN(nbr)?null:Math.abs(nbr)}),Handlebars.registerHelper("formatDate",function(context,opts){var date=DateHelper.formatDateToObject(context),html=date.getDate()+"<br><span>"+month_names[date.getMonth()]+"</span>";return html}),Handlebars.registerHelper("formatFullDate",function(context,opts){var date=DateHelper.formatDateToObject(context),html=date.getDate()+" "+month_names_full[date.getMonth()]+" "+date.getUTCFullYear();return html}),Handlebars.registerHelper("formatDateAnnee",function(context,opts){var date=DateHelper.formatDateToObject(context);return date.getUTCFullYear()}),Handlebars.registerHelper("formatDateMessagerie",function(context,opts){var date=DateHelper.formatDateToObject(context),html=date.getDate()+" "+month_names[date.getMonth()];return html}),Handlebars.registerHelper("formatDateUDC",function(context,opts){if(void 0!=context){var date=DateHelper.formatDateToObject(context),html=("0"+date.getDate()).slice(-2)+"/"+("0"+(date.getMonth()+1)).slice(-2)+"/"+date.getFullYear();return html}}),Handlebars.registerHelper("formatDateUDCShort",function(context,opts){var date=DateHelper.formatDateToObject(context),html=("0"+date.getDate()).slice(-2)+"/"+("0"+(date.getMonth()+1)).slice(-2);return html}),Handlebars.registerHelper("formatMonthName",function(context,opts){var date=DateHelper.formatDateToObject(context),html=month_names[date.getMonth()];return html}),Handlebars.registerHelper("formatMontant",function(context,opts){return addThousandsSep(formatNumber(Number(context).toFixed(2),2),".")}),Handlebars.registerHelper("formatMontantSpace",function(context,opts){return addThousandsSep(formatNumber(Number(context),0)," ")}),Handlebars.registerHelper("formatDayNum",function(context,opts){var date=DateHelper.formatDateToObject(context),html=("0"+date.getDate()).slice(-2);return html}),Handlebars.registerHelper("anneeMessagerie",function(context,selector,year_number){var date_str="";if(void 0!==context[0]){var date=DateHelper.formatDateToObject(context[0].dateReception);if(void 0===selector)date_str=date.getUTCFullYear();else{var $tri=$(selector);"dateReception"==$tri.find(".active").data("value")&&("up"==$tri.find(".active").data("direction")?date_str=date.getUTCFullYear()+year_number:"down"==$tri.find(".active").data("direction")&&(date_str=date.getUTCFullYear()-year_number))}return date_str}}),Handlebars.registerHelper("getTypeClass",function(context,opts){if(void 0!==context){var class_name="";switch(context){case 1:class_name="flt-conseiller";break;case 2:class_name="flt-compte";break;case 3:class_name="flt-bp";break;case 4:class_name="flt-sd"}return class_name}}),Handlebars.registerHelper("favoriLength",function(context,options){for(var count=0,i=0,j=context.length;i<j;i++)1==context[i].favori&&(count+=1);return count}),Handlebars.registerHelper("RopLogoType",function(context,options){return context.search("PAYLIB")>-1?"op-paylib":context.search("P2P-SCTID")>-1?"op-transfert":context.search("MOTIF E2E")>-1?"op-facture":context.search("Remb LuckyMe")>-1?"op-luckyme":void 0}),Handlebars.registerHelper("PfmFormatMontant",function(montant,devise,type,options){return("string"!=typeof devise||"string"==typeof devise&&"eur"==devise.toLowerCase())&&(devise="€"),"abs"==type&&(montant=Math.abs(montant)),addThousandsSep(formatNumber(montant,2))+" "+devise}),Handlebars.registerHelper("getIconTitle",function(context,options){return getIconTitle(context)}),Handlebars.registerHelper("getPourc",function(val1,val2){return Math.round(val1/val2*100)+"%"}),Handlebars.registerHelper("addOne",function(val){return Number(val)+1}),Handlebars.registerHelper("Magazine",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(showAllArticle&&options.data.index>=8||options.data.index<8)switch(options.data.index%8){case 0:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index0 col-67" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-0"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.big+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+'></img></div><div class="title-article"><h3>'+data.title+'</h3><div style="margin-right:60px;padding: 7px 0;float: right;color: #'+getColorByCategorie(data.category)+';font-size: 33px"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>');case 1:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index1 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div class="content-article">'+shorten(data.article,300)+'</div><div style="margin-right:43px;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 2:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 3:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index3 col-67"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-3"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="detail-article-3" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle" style="margin:25px 0px 31px 27px;">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div style="margin: 11px 45px 0 0;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>');case 4:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index4 col-67" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-0"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.big+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+'></img></div><div class="title-article"><h3>'+data.title+'</h3><div style="margin-right:60px;padding: 7px 0;float: right;color: #'+getColorByCategorie(data.category)+';font-size: 33px"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>');case 5:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index5 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div class="content-article">'+shorten(data.article,300)+'</div><div style="margin-right:43px;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 6:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index6 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 7:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index7 col-67"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-3"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="detail-article-3" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle" style="margin:25px 0px 31px 27px;">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div style="margin: 11px 45px 0 0;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>');
}}),Handlebars.registerHelper("Home",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(options.data.index<4)switch(options.data.index%4){case 0:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index0 col-67" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-0"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.big+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+'></img></div><div class="title-article"><h3>'+data.title+'</h3><div style="margin-right:60px;padding: 7px 0;float: right;color: #'+getColorByCategorie(data.category)+';font-size: 33px"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>');case 1:case 2:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 3:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index3 col-67"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-3"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="detail-article-3" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle" style="margin:25px 0px 31px 27px;">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div style="margin: 11px 45px 0 0;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>')}}),Handlebars.registerHelper("AuthorArticles",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});switch(options.data.index%3){case 0:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,52)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 1:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;margin: 0 5% 24px 5%;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 2:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:right;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}}),Handlebars.registerHelper("Favoris",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});switch(options.data.index%8){case 0:case 1:case 4:case 5:case 6:case 8:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 2:case 3:case 7:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index1 col-30" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,45)+'</h3><div class="content-article">'+shorten(data.article,300)+'</div><div style="margin-right:43px;float: right;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}}),Handlebars.registerHelper("FavorisHome",function(data,options){if(options.data.index<3){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(2==favoris.length&&options.data.index%3==1)return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;margin: 0 5% 24px 5%;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div><div class="col-30 col-hidden"></div></div>');if(1==favoris.length&&options.data.index%3==0)return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div><div class="col-30 col-hidden"></div><div class="col-30 col-hidden"></div></div>');switch(options.data.index%3){case 0:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 1:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;margin: 0 5% 24px 5%;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 2:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:right;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}}}),Handlebars.registerHelper("Actualite",function(data,options){if(showAllActualite&&options.data.index>=5||options.data.index<5)return new Handlebars.SafeString("<a href="+actualites.params.url+actualites.params.accueil+data.url+'><div class="col-100 border-actualite actualite-item '+addColorByCategory(data.categoryId)+'"><div class="date"><div class="day-actu">'+getDayFromDate(data.date)+'</div><div class="month-actu">'+getMonthFromDate(data.date)+'</div></div><div class="titre-actu">'+data.title+'</div><div class="img-actu icon '+updateItemDisplay(data.categoryId)+'" ></div><div class="icon icon-fright detail-actu"></div></div></a>')}),Handlebars.registerHelper("MobileHome",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(options.data.index<4)return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-100" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}),Handlebars.registerHelper("MobileFavoris",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-100" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}),Handlebars.registerHelper("MobileMagazine",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(showAllArticle&&options.data.index>=8||options.data.index<8)return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-100" style="border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>')}),Handlebars.registerHelper("RelArticles",function(data,options){var articleCategory=$(articles.categories).filter(function(i,n){return n.id==data.category});if(options.data.index<3)switch(options.data.index%3){case 0:return new Handlebars.SafeString('<div class="favoris-container"><div id="'+data.idArticle+'" class="index2 col-30" style="float:left;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 1:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:left;margin: 0 5% 24px 5%;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div>');case 2:return new Handlebars.SafeString('<div id="'+data.idArticle+'" class="index2 col-30" style="float:right;border-bottom: 2px solid #'+getColorByCategorie(data.category)+'"><a href="'+articles.params.url+articles.params.accueil+articleCategory[0].lienCat+"/"+data.articleLink+'"><div class="image-article-2"><img src="/rsc/contrib/image/webzine/'+getImageArticleByCategorie(data.category)+"/"+data.images.medium+'"></img></div></a><div class="dateArticle">'+formatDate(data.date)+"<img src="+addFavoriteIcon(data)+"></img></div><h3>"+shorten(data.title,50)+'</h3><div style="float:right;margin-right: 45px;margin-top: -50px;font-size: 33px;color: #'+getColorByCategorie(data.category)+'"class="icon '+getIconArticleByCategorie(data.category)+'"></div></div></div>')}}),Handlebars.registerHelper("list",function(context,options){var ret="<div id='"+context[0].date+"' class='container-items'>";ret+='<div class="day-container"><div class="day">'+getDay(context[0].date)+"</div>",ret+='<div class="dayNumber">'+getDate(context[0].date).getDate()+"</div></div>";for(var imgSource,i=0,j=context.length;i<j;i++)imgSource="1"==context[i].category?"/rsc/contrib/image/webzine/puce-eve.png":"/rsc/contrib/image/webzine/puce-fisc.png",ret+=context.length-1==i?"<div id="+context[i].id+" class='item-list last-item'><span class='puce-agenda'><img src="+imgSource+"></span><p><span>"+context[i].title+"</span></p></div>":"<div id="+context[i].id+" class='item-list'><span class='puce-agenda'><img src="+imgSource+"></span><p><span>"+context[i].title+"</span></p></div>";return ret+"</div>"}),Handlebars.registerHelper("NoteOrentationStrat",function(data,optioins){})}catch(e){}}(),"function"!=typeof Object.assign&&(Object.assign=function(target,varArgs){"use strict";if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to}),Object.keys||(Object.keys=function(){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!=typeof obj&&("function"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}()),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(fNOP.prototype=this.prototype),fBound.prototype=new fNOP,fBound}),String.prototype.stripAccents=function(){var translate_re=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g,translate="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY";return this.replace(translate_re,function(match){return translate.substr(translate_re.source.indexOf(match)-1,1)})},String.prototype.endsWith||(String.prototype.endsWith=function(searchString,position){var subjectString=this.toString();("number"!=typeof position||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length)&&(position=subjectString.length),position-=searchString.length;var lastIndex=subjectString.lastIndexOf(searchString,position);return lastIndex!==-1&&lastIndex===position}),String.prototype.startsWith||(String.prototype.startsWith=function(searchString,position){return position=position||0,this.substr(position,searchString.length)===searchString}),String.prototype.includes||(String.prototype.includes=function(search,start){"use strict";return"number"!=typeof start&&(start=0),!(start+search.length>this.length)&&this.indexOf(search,start)!==-1});var delay=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}(),arrayFunctions={sortMontant:function(a,b){return Number(a)-Number(b)}};String.prototype.stringReverse=function(){return this.split("").reverse().join("")},String.prototype.toTitle=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},String.prototype.uniform=function(){return this.toLowerCase().stripAccents().replace(/(\s|-|')/gi,"_")},String.prototype.stripAccents=function(){for(var accent=[/[\300-\306]/g,/[\340-\346]/g,/[\310-\313]/g,/[\350-\353]/g,/[\314-\317]/g,/[\354-\357]/g,/[\322-\330]/g,/[\362-\370]/g,/[\331-\334]/g,/[\371-\374]/g,/[\321]/g,/[\361]/g,/[\307]/g,/[\347]/g],noaccent=["A","a","E","e","I","i","O","o","U","u","N","n","C","c"],str=this,i=0;i<accent.length;i++)str=str.replace(accent[i],noaccent[i]);return str},Object.size=function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size},$(function(){$.fn.extend({slideOpen:function(delay,callback){return(isNaN(delay)||"undefined"==typeof delay)&&(delay=300),this.each(function(){if("none"==$(this).css("display")){$(this).css({opacity:0,display:"block"}).removeClass("hidden");var currentHeight=$(this).outerHeight();$(this).css({height:0,opacity:1}).animate({height:currentHeight+"px"},delay,function(){$(this).css("height","auto"),"function"==typeof callback&&callback.call(this)})}}),this}})}),helper_ropCateg={1:{name:"Alimentation",color:"#1fcda8"},2:{name:"Divers",color:"#5c47c0"},3:{name:"Enfant(s)",color:"#d240ed"},4:{name:"Epargne",color:"#e72cb1"},5:{name:"Habillement",color:"#d92258"},6:{name:"Impôts",color:"#f13c45"},7:{name:"Logement",color:"#f54c35"},8:{name:"Loisirs",color:"#f26f31"},9:{name:"Transport",color:"#85c21e"},10:{name:"Santé",color:"#c6cc08"},11:{name:"Vacances",color:"#43c370"},12:{name:"Opérations bancaires",color:"#eaae32"},13:{name:"Non défini",color:"#999999"},14:{name:"Multimédia",color:"#ff9000"},15:{name:"Travaux",color:"#65bd40"},16:{name:"Voiture",color:"#27b658"},17:{name:"Animaux",color:"#3ac5d8"},18:{name:"Bien-être",color:"#4dbefa"},19:{name:"Consommation",color:"#556bd1"},20:{name:"Energies",color:"#9543d5"},21:{name:"Frais professionnel",color:"#eb1d77"},22:{name:"Retrait",color:"#e9cb09"},23:{name:"Sorties",color:"#a0c51f"},24:{name:"Cadeaux",color:"#53a0f0"},51:{name:"Prestations sociales",color:"#825ce5"},52:{name:"Salaires",color:"#ff5379"},53:{name:"Rentes",color:"#ff74bf"},54:{name:"Pensions",color:"#2f4acb"},55:{name:"Intérêts",color:"#00e4ff"},56:{name:"Loyers",color:"#0195ff"},57:{name:"Dividendes",color:"#32f1a3"},58:{name:"Non défini",color:"#999999"},59:{name:"Remboursement",color:"#c869e9"},60:{name:"Shopping Deals",color:"#2eB99A"}},Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),function(){for(var lastTime=0,vendors=["webkit","moz"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}(),easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)))},easeOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:1==(t/=1)?1:(p||(p=.3),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*t)*Math.sin((1*t-s)*(2*Math.PI)/p)+1)},easeInOutElastic:function(t){var s=1.70158,p=0,a=1;return 0===t?0:2==(t/=.5)?1:(p||(p=1*(.3*1.5)),a<Math.abs(1)?(a=1,s=p/4):s=p/(2*Math.PI)*Math.asin(1/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p)*.5+1)},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;return(t/=.5)<1?.5*(t*t*(((s*=1.525)+1)*t-s)):.5*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*easingEffects.easeInBounce(2*t):.5*easingEffects.easeOutBounce(2*t-1)+.5}};var cookiesToRemove=[],traceStyles={chat:{style:"background-color:rgba(92, 197, 105, 0.3); color:#222222; padding-left:1em; padding-right:1em; border:1px solid #d93030;",prefix:"Debug Chat  =>  "},debug:{style:"font-size:14px; color:red;",prefix:"Debug  =>  "},session:{style:"background-color: #E4E4E4; color:#222222; padding-left:1em; padding-right:1em; border:1px solid #FF6C00;",prefix:"Debug Session storage  =>  "},erreur:{style:"background-color:#d93030; color : #FFF; font-weight:bold; padding-left:1em; padding-right:1em;",prefix:"ERREUR => "}};Filters.prototype.add=function(){var self=this;self.buttons.on("click.filters",function(){var $current_button=$(this),selector_to_show=$(this).data("filter-show"),$element_to_show=$(selector_to_show),parent=$(this).data("parent"),$parent=$(parent);self.parent=$parent,$current_button.hasClass("active")?self.reset():(self.buttons.removeClass("active"),$current_button.addClass("active"),$parent.addClass("hidden"),$element_to_show.removeClass("hidden"))})},Filters.prototype.reset=function(){this.buttons.removeClass("active"),void 0!==this.parent&&this.parent.removeClass("hidden")};var preventPasteOnConfirm={init:function(){$("[equalto]").each(function(){$me=$(this),$me.on("paste",function(e){e.preventDefault()})})}},canvasBuilder={charts:[],init:function(){ieVersion!==!1&&ieVersion<=8||$(".js-chart-pie").each(function(){var w=$(this).width(),h=$(this).height(),currentPourc=$(this).data("pourcentage");isNaN(currentPourc)&&(currentPourc=0),$(this).html('<canvas width="'+w+'" height="'+h+'"></canvas>');var newChart=new Chart($(this).children("canvas").get(0).getContext("2d")).chartPieWithPourc({pourc:currentPourc});canvasBuilder.charts.push(newChart)}).removeClass("js-chart-pie").addClass("js-chart-pie-built")}},buildCSSLoader=function(el){var code='<div class="spinner">';code+='<div class="spinner-container container1">',code+='<div class="circle1"></div>',code+='<div class="circle2"></div>',code+='<div class="circle3"></div>',code+='<div class="circle4"></div>',code+="</div>",code+='<div class="spinner-container container2">',code+='<div class="circle1"></div>',code+='<div class="circle2"></div>',code+='<div class="circle3"></div>',code+='<div class="circle4"></div>',code+="</div>",code+='<div class="spinner-container container3">',code+='<div class="circle1"></div>',code+='<div class="circle2"></div>',code+='<div class="circle3"></div>',code+='<div class="circle4"></div>',code+="</div>",code+="</div>",el.append(code).addClass("hasCSSLoader")},buildCanvasLoader=function(el,params){function paint(ts){null==start&&(start=ts);var progress=ts-start;if(progress>1e3/defaultParams.fps){start=ts,CTX.clearRect(0,0,w,h);var decalageAngle,rayon="flower"==defaultParams.type?margesL>margesH?(w-2*margesL)/2:(h-2*margesH)/2:margesL>margesH?(w-2*margesL-2*defaultParams.dotWidth)/2:(h-2*margesH-2*defaultParams.dotWidth)/2,stepDecimal=counter/maxStep*defaultParams.speed,ease=easingEffects[defaultParams.ease](stepDecimal),mainAngle=2*Math.PI*ease-Math.PI/2;if("tail"==defaultParams.type){CTX.beginPath(),CTX.strokeStyle=defaultParams.bgcolor,CTX.lineWidth=defaultParams.linewidth-1,CTX.arc(w/2,h/2,rayon,0,2*Math.PI),CTX.stroke(),CTX.closePath();for(var itemLength=2*Math.PI*defaultParams.taillength/defaultParams.precision,opacitySteps=1/defaultParams.precision,i=0;i<defaultParams.precision;i++){var tmpColor,startAngle=mainAngle-(i+1)*itemLength;if(color.length>3){var atten=color[3]-i*opacitySteps*defaultParams.attenuation;atten<0&&(atten=0),tmpColor="rgba("+color[0]+", "+color[1]+", "+color[2]+", "+atten+")"}else tmpColor=makeRGBAColor(color,1-i*opacitySteps*defaultParams.attenuation);CTX.beginPath(),CTX.strokeStyle=tmpColor,CTX.lineWidth=defaultParams.linewidth,CTX.arc(w/2,h/2,rayon,startAngle+itemLength/2,startAngle+1.5*itemLength),CTX.stroke(),CTX.closePath()}}else if("flower"==defaultParams.type){for(var flowerBorderRadius=Math.round(defaultParams.flowerPetalWidth/2),flowerRayon=rayon-defaultParams.flowerEmptyCenter/2,currentPos=Math.floor(8*ease),i=0;i<8;i++){var currentAngle=2*i*Math.PI/8-2*Math.PI/8*2;if(CTX.setTransform(1,0,0,1,0,0),CTX.translate(w/2,h/2),CTX.rotate(currentAngle),CTX.fillStyle=currentPos==i?defaultParams.flowerHighlightColor:defaultParams.bgcolor,CTX.beginPath(),CTX.moveTo(defaultParams.flowerEmptyCenter/2+flowerBorderRadius,-defaultParams.flowerPetalWidth/2),CTX.lineTo(defaultParams.flowerEmptyCenter/2+flowerRayon-flowerBorderRadius,-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+flowerRayon,-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+flowerRayon,flowerBorderRadius-defaultParams.flowerPetalWidth/2,flowerBorderRadius),CTX.lineTo(defaultParams.flowerEmptyCenter/2+flowerRayon,defaultParams.flowerPetalWidth-flowerBorderRadius-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+flowerRayon,defaultParams.flowerPetalWidth-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+flowerRayon-flowerBorderRadius,defaultParams.flowerPetalWidth/2,flowerBorderRadius),CTX.lineTo(defaultParams.flowerEmptyCenter/2+flowerBorderRadius,defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2,defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2,defaultParams.flowerPetalWidth/2-flowerBorderRadius,flowerBorderRadius),
CTX.lineTo(defaultParams.flowerEmptyCenter/2,flowerBorderRadius-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2,-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+flowerBorderRadius,-defaultParams.flowerPetalWidth/2,flowerBorderRadius),CTX.closePath(),CTX.fill(),currentPos!=i){var newWidth=defaultParams.flowerPetalWidth-2*defaultParams.flowerBorder,newBorderRadius=Math.round(newWidth/2),decalage=defaultParams.flowerBorder,newRayon=flowerRayon-2*decalage;CTX.fillStyle=defaultParams.color,CTX.beginPath(),CTX.moveTo(defaultParams.flowerEmptyCenter/2+decalage+newBorderRadius,decalage-defaultParams.flowerPetalWidth/2),CTX.lineTo(defaultParams.flowerEmptyCenter/2+decalage+newRayon-newBorderRadius,decalage-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+decalage+newRayon,decalage-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+decalage+newRayon,decalage+newBorderRadius-defaultParams.flowerPetalWidth/2,newBorderRadius),CTX.lineTo(defaultParams.flowerEmptyCenter/2+decalage+newRayon,decalage+newWidth-newBorderRadius-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+decalage+newRayon,decalage+newWidth-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+decalage+newRayon-newBorderRadius,decalage+newWidth-defaultParams.flowerPetalWidth/2,newBorderRadius),CTX.lineTo(defaultParams.flowerEmptyCenter/2+decalage+newBorderRadius,decalage+newWidth-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+decalage,decalage+newWidth-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+decalage,decalage+newWidth-newBorderRadius-defaultParams.flowerPetalWidth/2,newBorderRadius),CTX.lineTo(defaultParams.flowerEmptyCenter/2+decalage,decalage+newBorderRadius-defaultParams.flowerPetalWidth/2),CTX.arcTo(defaultParams.flowerEmptyCenter/2+decalage,decalage-defaultParams.flowerPetalWidth/2,defaultParams.flowerEmptyCenter/2+decalage+newBorderRadius,decalage-defaultParams.flowerPetalWidth/2,newBorderRadius),CTX.closePath(),CTX.fill()}}CTX.setTransform(1,0,0,1,0,0)}else for(var i=0;i<defaultParams.dotNumber;i++){"linear"==defaultParams.trailMode?decalageAngle=2*i*Math.PI/defaultParams.dotNumber/defaultParams.density:"easeInOut"==defaultParams.trailMode?decalageAngle=stepDecimal<.5?2*i*Math.PI/defaultParams.dotNumber/defaultParams.density*stepDecimal:2*i*Math.PI/defaultParams.dotNumber/defaultParams.density*(1-stepDecimal):"followGlobalEase"==defaultParams.trailMode&&(decalageAngle=stepDecimal<.5?2*i*Math.PI/defaultParams.dotNumber/defaultParams.density*ease:2*i*Math.PI/defaultParams.dotNumber/defaultParams.density*(1-ease));var posX=w/2+Math.cos(mainAngle-decalageAngle)*rayon,posY=h/2+Math.sin(mainAngle-decalageAngle)*rayon;CTX.beginPath(),CTX.fillStyle=makeRGBAColor(color,1-1/defaultParams.dotNumber*i+1*defaultParams.persistence),CTX.arc(posX,posY,defaultParams.dotWidth/defaultParams.dotNumber*(defaultParams.dotNumber-i),0,2*Math.PI),CTX.fill(),CTX.closePath()}counter++,stepDecimal>=1&&(counter=1)}requestAnimationFrame(paint)}if(!(ieVersion!==!1&&ieVersion<=8)){var w=el.width(),h=el.height(),margesL=0,margesH=0;w>h?margesL=(w-h)/2:h>w&&(margesH=(h-w)/2);var defaultParams={fps:30,color:"#FFF",dotNumber:10,dotWidth:15,density:2,persistence:.3,speed:1,ease:"linear",trailMode:"linear",type:"dots",taillength:.9,attenuation:1,precision:50,linewidth:10,bgcolor:"rgba(255, 255, 255, 0)",flowerPetalWidth:10,flowerBorder:2,flowerEmptyCenter:40,flowerHighlightColor:"#ce1e43"};defaultParams=$.extend(defaultParams,params),el.append('<canvas width="'+w+'" height="'+h+'"></canvas>').children("canvas").css({width:w+"px",height:h+"px"});var canvas=el.children("canvas"),CTX=canvas.get(0).getContext("2d"),counter=1,color=null!==defaultParams.color.match(/^rgba/)?parseRGBA(defaultParams.color):getRGB(defaultParams.color),start=null,maxStep=1*defaultParams.fps/defaultParams.speed;requestAnimationFrame(paint)}},formatNumber=function(nbr,digits){var prefix="";if("-"==String(nbr).substr(0,1)&&(nbr=String(nbr).substr(1),prefix="-"),0==digits)return Math.round(nbr);var tempNbr=Math.round(nbr*Math.pow(10,digits))/Math.pow(10,digits),nbrAr=String(tempNbr).split(".");return nbrAr.length<2?(tempNbr=String(nbrAr[0])+String(",00"),prefix+replaceDot(tempNbr)):nbrAr[1].length<2?(tempNbr=String(tempNbr)+String("0"),prefix+replaceDot(tempNbr)):prefix+replaceDot(tempNbr)},addThousandsSep=function(nbr,sep){var prefix="";"-"==String(nbr).substr(0,1)&&(nbr=String(nbr).substr(1),prefix="-");var _nbrTab=String(nbr).split(","),_sep=null!=sep?sep:".";if(_nbrTab[0].length>3){for(var revInt=String(_nbrTab[0]).stringReverse(),returnNbr="",maxLoops=Math.ceil(_nbrTab[0].length/3),i=0;i<=maxLoops;i++)returnNbr+=revInt.substr(0+3*i,3),i<maxLoops-1&&(returnNbr+=_sep);return _nbrTab.length>1?prefix+String(returnNbr).stringReverse()+","+_nbrTab[1]:prefix+String(returnNbr).stringReverse()}return prefix+nbr},replaceDot=function(nbr){return String(nbr).replace(".",",")},replaceComa=function(nbr){return String(nbr).replace(",",".")};!function(factory){"function"==typeof define&&define.amd?define("bnpp_utils_moa",["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement("style"),script=document.getElementsByTagName("script")[0],info=null;style.type="text/css",style.id="matchmediajs-test",script.parentNode.insertBefore(style,script),info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle,styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";return style.styleSheet?style.styleSheet.cssText=text:style.textContent=text,"1px"===info.width}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}()),function(undefined){function dfl(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function printMsg(msg){moment.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(printMsg(msg),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(printMsg(msg),deprecations[name]=!0)}function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function Locale(){}function Moment(config,skipOverflow){skipOverflow!==!1&&checkOverflow(config),copyConfig(this,config),this._d=new Date((+config._d)),updateInProgress===!1&&(updateInProgress=!0,moment.updateOffset(this),updateInProgress=!1)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=moment.localeData(),this._bubble()}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function copyConfig(to,from){var i,prop,val;if("undefined"!=typeof from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),"undefined"!=typeof from._i&&(to._i=from._i),"undefined"!=typeof from._f&&(to._f=from._f),"undefined"!=typeof from._l&&(to._l=from._l),"undefined"!=typeof from._strict&&(to._strict=from._strict),"undefined"!=typeof from._tzm&&(to._tzm=from._tzm),"undefined"!=typeof from._isUTC&&(to._isUTC=from._isUTC),"undefined"!=typeof from._offset&&(to._offset=from._offset),"undefined"!=typeof from._pf&&(to._pf=from._pf),"undefined"!=typeof from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],"undefined"!=typeof val&&(to[prop]=val);return to}function absRound(number){return number<0?Math.ceil(number):Math.floor(number)}function leftZeroFill(number,targetLength,forceSign){for(var output=""+Math.abs(number),sign=number>=0;output.length<targetLength;)output="0"+output;return(sign?forceSign?"+":"":"-")+output}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=makeAs(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=moment.duration(val,period),addOrSubtractDurationFromMoment(this,dur,direction),this}}function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&rawSetter(mom,"Date",rawGetter(mom,"Date")+days*isAdding),months&&rawMonthSetter(mom,rawGetter(mom,"Month")+months*isAdding),updateOffset&&moment.updateOffset(mom,days||months)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)||input instanceof Date}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,"$1");units=unitAliases[units]||camelFunctions[lowered]||lowered}return units}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else{if(0!==field.indexOf("month"))return;count=12,setter="month"}moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if("number"==typeof format&&(index=format,format=undefined),getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||"")},null!=index)return getter(index);for(i=0;i<count;i++)results.push(getter(i));return results}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=coercedNumber>=0?Math.floor(coercedNumber):Math.ceil(coercedNumber)),value}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;m._a&&m._pf.overflow===-2&&(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>24||24===m._a[HOUR]&&(0!==m._a[MINUTE]||0!==m._a[SECOND]||0!==m._a[MILLISECOND])?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),m._pf.overflow=overflow)}function isValid(m){return null==m._isValid&&(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated,m._strict&&(m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length&&m._pf.bigHour===undefined)),m._isValid}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule)try{oldLocale=moment.locale(),require("./locale/"+name),moment.locale(oldLocale)}catch(e){}return locales[name]}function makeAs(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(moment.isMoment(input)||isDate(input)?+input:+moment(input))-+res,res._d.setTime(+res._d+diff),moment.updateOffset(res,!1),res):moment(input).local()}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]||(formatFunctions[format]=makeFormatFunction(format)),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case"Q":return parseTokenOneDigit;case"DDDD":return parseTokenThreeDigits;case"YYYY":case"GGGG":case"gggg":return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case"Y":case"G":case"g":return parseTokenSignedNumber;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case"S":if(strict)return parseTokenOneDigit;case"SS":if(strict)return parseTokenTwoDigits;case"SSS":if(strict)return parseTokenThreeDigits;case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return config._locale._meridiemParse;case"x":return parseTokenOffsetMs;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"SSSS":return parseTokenDigits;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return parseTokenOneOrTwoDigits;case"Do":return strict?config._locale._ordinalParse:config._locale._ordinalParseLenient;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function utcOffsetFromString(string){string=string||"";var possibleTzMatches=string.match(parseTokenTimezone)||[],tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"Q":null!=input&&(datePartArray[MONTH]=3*(toInt(input)-1));break;case"M":case"MM":null!=input&&(datePartArray[MONTH]=toInt(input)-1);break;case"MMM":case"MMMM":a=config._locale.monthsParse(input,token,config._strict),null!=a?datePartArray[MONTH]=a:config._pf.invalidMonth=input;break;case"D":case"DD":null!=input&&(datePartArray[DATE]=toInt(input));break;case"Do":null!=input&&(datePartArray[DATE]=toInt(parseInt(input.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=input&&(config._dayOfYear=toInt(input));break;case"YY":datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case"YYYY":case"YYYYY":case"YYYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._meridiem=input;break;case"h":case"hh":config._pf.bigHour=!0;case"H":case"HH":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":case"SSSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"x":config._d=new Date(toInt(input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=utcOffsetFromString(input);break;case"dd":case"ddd":case"dddd":a=config._locale.weekdaysParse(input),null!=a?(config._w=config._w||{},config._w.d=a):config._pf.invalidWeekday=input;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":token=token.substr(0,1);case"gggg":case"GGGG":case"GGGGG":token=token.substr(0,2),input&&(config._w=config._w||{},config._w[token]=toInt(input));break;case"gg":case"GG":config._w=config._w||{},config._w[token]=moment.parseTwoDigitYear(input)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year),week=dfl(w.W,1),weekday=dfl(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year),week=dfl(w.w,1),null!=w.d?(weekday=w.d,weekday<dow&&++week):weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function dateFromConfig(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=dfl(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(config._pf._overflowDayOfYear=!0),date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dateFromObject(config){var normalizedInput;config._d||(normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day||normalizedInput.date,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config))}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601)return void parseISO(config);config._a=[],config._pf.empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&config._pf.unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?config._pf.empty=!1:config._pf.unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&config._pf.unusedTokens.push(token);config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&config._pf.unusedInput.push(string),config._pf.bigHour===!0&&config._a[HOUR]<=12&&(config._pf.bigHour=undefined),config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return config._pf.invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._pf=defaultParsingFlags(),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){for(config._pf.iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}string.match(parseTokenTimezone)&&(config._f+="Z"),makeDateFromStringAndFormat(config)}else config._isValid=!1}function makeDateFromString(config){parseISO(config),config._isValid===!1&&(delete config._isValid,moment.createFromInputFallback(config))}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function makeDateFromInput(config){var matched,input=config._i;input===undefined?config._d=new Date:isDate(input)?config._d=new Date((+input)):null!==(matched=aspNetJsonRegex.exec(input))?config._d=new Date((+matched[1])):"string"==typeof input?makeDateFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),dateFromConfig(config)):"object"==typeof input?dateFromObject(config):"number"==typeof input?config._d=new Date(input):moment.createFromInputFallback(config)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<1970&&date.setFullYear(y),date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function parseWeekday(input,locale){if("string"==typeof input)if(isNaN(input)){if(input=locale.weekdaysParse(input),"number"!=typeof input)return null}else input=parseInt(input,10);return input}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),args=seconds<relativeTimeThresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<relativeTimeThresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<relativeTimeThresholds.h&&["hh",hours]||1===days&&["d"]||days<relativeTimeThresholds.d&&["dd",days]||1===months&&["M"]||months<relativeTimeThresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=+posNegDuration>0,args[4]=locale,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=moment(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var daysToAdd,dayOfYear,d=makeUTCDate(year,0,1).getUTCDay();return d=0===d?7:d,weekday=null!=weekday?weekday:firstDayOfWeek,daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0),dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1,{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function makeMoment(config){var res,input=config._i,format=config._f;return config._locale=config._locale||moment.localeData(config._l),null===input||format===undefined&&""===input?moment.invalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),moment.isMoment(input)?new Moment(input,(!0)):(format?isArray(format)?makeDateFromStringAndArray(config):makeDateFromStringAndFormat(config):makeDateFromInput(config),res=new Moment(config),res._nextDay&&(res.add(1,"d"),res._nextDay=undefined),res))}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return moment();for(res=moments[0],i=1;i<moments.length;++i)moments[i][fn](res)&&(res=moments[i]);return res}function rawMonthSetter(mom,value){var dayOfMonth;return"string"==typeof value&&(value=mom.localeData().monthsParse(value),"number"!=typeof value)?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function rawGetter(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function rawSetter(mom,unit,value){return"Month"===unit?rawMonthSetter(mom,value):mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function makeAccessor(unit,keepTime){return function(value){return null!=value?(rawSetter(this,unit,value),moment.updateOffset(this,keepTime),this):rawGetter(this,unit)}}function daysToYears(days){return 400*days/146097}function yearsToDays(years){return 146097*years/400}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeGlobal(shouldDeprecate){"undefined"==typeof ender&&(oldGlobalMoment=globalScope.moment,shouldDeprecate?globalScope.moment=deprecate("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",moment):globalScope.moment=moment)}for(var moment,oldGlobalMoment,i,VERSION="2.9.0",globalScope="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule="undefined"!=typeof module&&module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenOffsetMs=/[\+\-]?\d+/,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,unitMillisecondFactors=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),
{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},camelFunctions={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?"+":"-";return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return a<0&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return a<0&&(a=-a,b="-"),b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],updateInProgress=!1;ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Locale.prototype,{set:function(config){var prop,i;for(i in config)prop=config[i],"function"==typeof prop?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=moment.utc([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];return!output&&this._longDateFormat[key.toUpperCase()]&&(output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output),output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.apply(mom,[now]):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._i=input,c._f=format,c._l=locale,c._strict=strict,c._isUTC=!1,c._pf=defaultParsingFlags(),makeMoment(c)},moment.suppressDeprecationWarnings=!1,moment.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),moment.min=function(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)},moment.max=function(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)},moment.utc=function(input,format,locale,strict){var c;return"boolean"==typeof locale&&(strict=locale,locale=undefined),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=locale,c._i=input,c._f=format,c._strict=strict,c._pf=defaultParsingFlags(),makeMoment(c).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var sign,ret,parseIso,diffRes,duration=input,match=null;return moment.isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetTimeSpanJsonRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoDurationRegex.exec(input))?(sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(moment(duration.from),moment(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),moment.isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.ISO_8601=function(){},moment.momentProperties=momentProperties,moment.updateOffset=function(){},moment.relativeTimeThreshold=function(threshold,limit){return relativeTimeThresholds[threshold]!==undefined&&(limit===undefined?relativeTimeThresholds[threshold]:(relativeTimeThresholds[threshold]=limit,!0))},moment.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",function(key,value){return moment.locale(key,value)}),moment.locale=function(key,values){var data;return key&&(data="undefined"!=typeof values?moment.defineLocale(key,values):moment.localeData(key),data&&(moment.duration._locale=moment._locale=data)),moment._locale._abbr},moment.defineLocale=function(name,values){return null!==values?(values.abbr=name,locales[name]||(locales[name]=new Locale),locales[name].set(values),moment.locale(name),locales[name]):(delete locales[name],null)},moment.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",function(key){return moment.localeData(key)}),moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return moment._locale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)},moment.isMoment=function(obj){return obj instanceof Moment||null!=obj&&hasOwnProp(obj,"_isAMomentObject")},moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i)makeList(lists[i]);moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(NaN);return null!=flags?extend(m._pf,flags):m._pf.userInvalidated=!0,m},moment.parseZone=function(){return moment.apply(null,arguments).parseZone()},moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)},moment.isDate=isDate,extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){var m=moment(this).utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0)},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.utcOffset(0,keepLocalTime)},local:function(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,"add"),subtract:createAdder(-1,"subtract"),diff:function(input,units,asFloat){var diff,output,that=makeAs(input,this),zoneDiff=6e4*(that.utcOffset()-this.utcOffset());return units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff),asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this,moment(now)))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day},month:makeAccessor("Month",!0),startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units?this.weekday(0):"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(units){return units=normalizeUnits(units),units===undefined||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")},isAfter:function(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this>+input):(inputMs=moment.isMoment(input)?+input:+moment(input),inputMs<+this.clone().startOf(units))},isBefore:function(input,units){var inputMs;return units=normalizeUnits("undefined"!=typeof units?units:"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this<+input):(inputMs=moment.isMoment(input)?+input:+moment(input),+this.clone().endOf(units)<inputMs)},isBetween:function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)},isSame:function(input,units){var inputMs;return units=normalizeUnits(units||"millisecond"),"millisecond"===units?(input=moment.isMoment(input)?input:moment(input),+this===+input):(inputMs=+moment(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))},min:deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),other<this?this:other}),max:deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(other){return other=moment.apply(null,arguments),other>this?this:other}),zone:deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}),utcOffset:function(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=utcOffsetFromString(input)),Math.abs(input)<16&&(input=60*input),!this._isUTC&&keepLocalTime&&(localAdjust=this._dateUtcOffset()),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?addOrSubtractDurationFromMoment(this,moment.duration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,moment.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(utcOffsetFromString(this._i)),this},hasAlignedHourOffset:function(input){return input=input?moment(input).utcOffset():0,(this.utcOffset()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")},quarter:function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")},week:function(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){return units=normalizeUnits(units),this[units]()},set:function(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else units=normalizeUnits(units),"function"==typeof this[units]&&this[units](value);return this},locale:function(key){var newLocaleData;return key===undefined?this._locale._abbr:(newLocaleData=moment.localeData(key),null!=newLocaleData&&(this._locale=newLocaleData),this)},lang:deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return key===undefined?this.localeData():this.locale(key)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),moment.fn.millisecond=moment.fn.milliseconds=makeAccessor("Milliseconds",!1),moment.fn.second=moment.fn.seconds=makeAccessor("Seconds",!1),moment.fn.minute=moment.fn.minutes=makeAccessor("Minutes",!1),moment.fn.hour=moment.fn.hours=makeAccessor("Hours",!0),moment.fn.date=makeAccessor("Date",!0),moment.fn.dates=deprecate("dates accessor is deprecated. Use date instead.",makeAccessor("Date",!0)),moment.fn.year=makeAccessor("FullYear",!0),moment.fn.years=deprecate("years accessor is deprecated. Use year instead.",makeAccessor("FullYear",!0)),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.quarters=moment.fn.quarter,moment.fn.toJSON=moment.fn.toISOString,moment.fn.isUTC=moment.fn.isUtc,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var seconds,minutes,hours,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,years=0;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),years=absRound(daysToYears(days)),days-=absRound(yearsToDays(years)),months+=absRound(days/30),days%=30,years+=absRound(months/12),months%=12,data.days=days,data.months=months,data.years=years},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());return withSuffix&&(output=this.localeData().pastFuture(+this,output)),this.localeData().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){var days,months;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+this._milliseconds/864e5,months=this._months+12*daysToYears(days),"month"===units?months:months/12;switch(days=this._days+Math.round(yearsToDays(this._months/12)),units){case"week":return days/7+this._milliseconds/6048e5;case"day":return days+this._milliseconds/864e5;case"hour":return 24*days+this._milliseconds/36e5;case"minute":return 24*days*60+this._milliseconds/6e4;case"second":return 24*days*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*days*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+units)}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),moment.duration.fn.toString=moment.duration.fn.toISOString;for(i in unitMillisecondFactors)hasOwnProp(unitMillisecondFactors,i)&&makeDurationGetter(i.toLowerCase());moment.duration.fn.asMilliseconds=function(){return this.as("ms")},moment.duration.fn.asSeconds=function(){return this.as("s")},moment.duration.fn.asMinutes=function(){return this.as("m")},moment.duration.fn.asHours=function(){return this.as("h")},moment.duration.fn.asDays=function(){return this.as("d")},moment.duration.fn.asWeeks=function(){return this.as("weeks")},moment.duration.fn.asMonths=function(){return this.as("M")},moment.duration.fn.asYears=function(){return this.as("y")},moment.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule?module.exports=moment:"function"==typeof define&&define.amd?(define("next_moment_module",function(require,exports,module){return module.config&&module.config()&&module.config().noGlobal===!0&&(globalScope.moment=oldGlobalMoment),moment}),makeGlobal(!0)):makeGlobal()}.call(this),function(factory){factory(moment)}(function(moment){return moment.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(number){return number+(1===number?"er":"")},week:{dow:1,doy:4}})}),jQuery.fn.extend({getUrlParam:function(d){d=escape(unescape(d));var c=[],b=null;if("#document"==$(this).attr("nodeName"))window.location.search.search(d)>-1&&(b=window.location.search.substr(1,window.location.search.length).split("&"));else if("undefined"!=$(this).attr("src")){var a=$(this).attr("src");a.indexOf("?")>-1&&(b=a.substr(a.indexOf("?")+1),b=b.split("&"))}else{if("undefined"==$(this).attr("href"))return null;a=$(this).attr("href"),a.indexOf("?")>-1&&(b=a.substr(a.indexOf("?")+1),b=b.split("&"))}if(null===b)return null;for(a=0;a<b.length;a++)escape(unescape(b[a].split("=")[0]))==d&&c.push(b[a].split("=")[1]);return 0===c.length?null:1==c.length?c[0]:c}});var Redirections={init:function(){if(window.location.pathname.indexOf("redirection")!=-1){var appli=$(document).getUrlParam("redir");"simuAuto"==appli?$.get("/rsc/contrib/html/redirection/simuAuto.html",function(html){$(".wrapper-redirection").parent().html(html),$("#wcm-l-bottom-header-connected").length>0&&($(".wrapper-redirection.notconnected").addClass("hidden"),$(".wrapper-redirection.connected").removeClass("hidden"))}):"simuMRH"==appli?$.get("/rsc/contrib/html/redirection/simuMRH.html",function(html){$(".wrapper-redirection").parent().html(html),$("#wcm-l-bottom-header-connected").length>0&&($(".wrapper-redirection.notconnected").addClass("hidden"),$(".wrapper-redirection.connected").removeClass("hidden"))}):$.getJSON("/rsc/contrib/script/client/redirections.json",function(RedirectionsListe){return void 0!==RedirectionsListe[appli]&&(Redirections.replaceHref("lienNumClient",appli,RedirectionsListe),Redirections.replaceHref("lienNoNumClient",appli,RedirectionsListe),void Redirections.replaceHref("lienNonClient",appli,RedirectionsListe))})}},replaceHref:function(id,appli,RedirectionsListe){var $elem=$("#"+id);$elem.length>0&&$elem.attr("href",RedirectionsListe[appli][id])}},initDate=new Date,DateHelper={todayDate:function(){return initDate},formatDateToObject:function(string){if(void 0===string)return!1;if(string.indexOf("/")>-1)var date_split=string.split("/");else{if(!(string.indexOf("-")>-1))return!1;var date_split=string.split("-")}if(void 0!==date_split[0]&&void 0!==date_split[1]&&void 0!==date_split[2]){var day=date_split[0],month=date_split[1]-1,year=date_split[2],date=new Date(year,month,day);return date}return!1},addToDate:function(current_date,number_of_days){var new_date=new Date(current_date);return new_date.setDate(current_date.getDate()+number_of_days),new_date},isWeekend:function(current_date){var _date=new Date(current_date);return 6==_date.getDay()||0==_date.getDay()},addWDToDate:function(current_date,number_of_days){for(var tempDate=current_date,finalDate=current_date,i=1;i<=number_of_days;){var tempDate=DateHelper.addToDate(tempDate,1);DateHelper.isWeekend(tempDate)||(finalDate=tempDate,i++)}return finalDate}},CustomDropdown={init:function(){if(0!=$(".dropdown-list-select").length){var hidden_value_class=".hidden-value",dropdown_container_class=".dropdown-container",dropdown_selected_class=".dropdown-selected",input_value_class=".input-value",$dropdown=$(".dropdown");$(".dropdown-list-select").on("click.dropdown-list-select","li",function(){if($(this).parents(".recherche-qualifie-container").length>0||$("html").hasClass("maquette")||$("body").find(".save-invest.conseil-enveloppe").length>0){var $container=$(this).parents(dropdown_container_class),$elem=$container.find(dropdown_selected_class);$(this).siblings().removeClass("selected"),$(this).addClass("selected"),$(this).trigger("select-custom-dropdown"),$elem.html($(this).html()),$container.addClass("actif"),updateInput($elem.find(hidden_value_class)),$dropdown.trigger("on-dropdown-close"),"mobile"==DeviceSize.getDeviceState()&&$container.hasClass("submit-dropdown")&&$container.parents("form").first().submit()}}),$(dropdown_container_class).on("click",".nano-pane",function(){if($(this).parents(".recherche-qualifie-container").length>0||$("html").hasClass("maquette")||$("body").find(".save-invest.conseil-enveloppe").length>0)return!1}),$dropdown.on("click.dropdown-toggle",function(){if(!$(this).hasClass("disable")&&($(this).parents(".recherche-qualifie-container").length>0||$("html").hasClass("maquette")||$("body").find(".save-invest.conseil-enveloppe").length>0)){var $dropdown_list=$(this).next(".dropdown-list");return $dropdown_list.hasClass("hidden")?($dropdown_list.removeClass("hidden"),$dropdown_list.hasClass("nano")&&$dropdown_list.nanoScroller({alwaysVisible:!0}),$dropdown.trigger("on-dropdown-open")):($dropdown_list.addClass("hidden"),$dropdown.trigger("on-dropdown-close")),!1}}),$("body").on("click.close-dropdown",function(e){($(e.target).parents(".recherche-qualifie-container").length>0||$("html").hasClass("maquette")||$("body").find(".save-invest.conseil-enveloppe").length>0)&&(0!=$(e.target).parents(".dropdown-container").length||$(".dropdown-list").hasClass("hidden")||$dropdown.trigger("on-dropdown-close"),$(".dropdown-list").addClass("hidden"))});var updateInput=function($el){var _input=$el.parents(dropdown_container_class).find(input_value_class);_input.val($el.text()),FormHelper.storeDatasInSession(_input)}}}},FormHelper={currentSessionStorage:new Object,showResetButton:function($current_element){0==$current_element.siblings(".reset-input").length?$('<span class="reset-input" />').insertAfter($current_element):$current_element.siblings(".reset-input").removeClass("hidden")},hideResetButton:function($current_element){$current_element.siblings(".reset-input").addClass("hidden")},resetInput:function($elem){$elem.on("click.form-reset-field",".reset-input",function(){$(this).addClass("hidden").siblings(".form-control").val("").focus()})},textareaCompteur:function(){function autoGrow(oField){"TEXTAREA"==oField.tagName&&oField.scrollHeight>oField.clientHeight&&(oField.style.height=oField.scrollHeight+"px")}$("textarea[maxlength]").on("keyup blur",function(){var maxlength=$(this).attr("maxlength"),val=$(this).val();val.length>maxlength&&$(this).val(val.slice(0,maxlength))});var $field=$(".js-caractere-restant").parents("form").find("textarea,.js-input-compteur");$field.each(function(index,elem){autoGrow($(this)[0]);var max_char=$(this).attr("maxlength"),$current_field=$(this);
0!=$current_field.parents("form").find(".js-caractere-restant").length&&$current_field.on("keyup",function(){autoGrow($(this)[0]),setTimeout(function(){var str=_get("next.formhelper.charact1","caractères restants"),current_text=$current_field.val(),remaining=max_char-current_text.length;remaining<=1&&(str=_get("next.formhelper.charact2","caractère restant")),$current_field.parents("form").find(".js-caractere-restant").html("<span>"+remaining+"</span> "+str)},10)})})},resetButton:function(){0!=$("form").length&&$('button[type="reset"]').click(function(){$(this).parents("form").find(".valid").each(function(){$(this).removeClass("valid").parent().removeClass("fixFFSelect")})})},autofill:function(){$("form").each(function(){if(currentForm=$(this),formName=$(this).attr("name"),ElToBeClicked=new Array,"undefined"!=typeof _fieldsToStoreInSession&&"undefined"!=typeof _fieldsToStoreInSession[formName]&&null!=sessionStorage.getItem(formName)){formDatas=JSON.parse(sessionStorage.getItem(currentForm.attr("name"))),currentForm.find("input").each(function(){if("text"!=$(this).attr("type")||""==$(this).val()){if("checkbox"==$(this).attr("type"))formDatas[$(this).attr("name")]?$(this).prop("checked","checked"):$(this).removeAttr("checked");else if("hidden"==$(this).attr("type")||$(this).hasClass("typeHidden")){if(formDatas[$(this).attr("name")]){$(this).val(formDatas[$(this).attr("name")]);var currentValue=formDatas[$(this).attr("name")];ElToBeClicked.push($('[name="'+currentForm.attr("name")+'"] [name="'+formDatas[$(this).attr("name")]+'"]'));$(this).parents(".dropdown-container").find(".hidden-value").each(function(){$.trim($(this).html())==currentValue&&ElToBeClicked.push($(this).parents("li").first())})}}else if("radio"==$(this).attr("type")){if(formDatas[$(this).attr("name")]&&($(this).prop("checked",!1),$(this).val()==formDatas[$(this).attr("name")])){$(this).prop("checked",!0);var label=$('label[for="'+$(this).attr("id")+'"]');(label.is("[data-toggle-section]")||label.is("[data-toggle-radio-section]")||label.is("[data-show-section]")||label.is("[data-hide-section]")||label.is("[data-make-active]")||label.is("[data-make-inactive]")||label.is("[data-send-value]"))&&label.length>0&&label.click()}}else $(this).val(formDatas[$(this).attr("name")]),FormHelper.removeGroupValidation($(this),!0);formDatas[$(this).attr("name")]&&(FormHelper.currentSessionStorage[$(this).attr("name")]=formDatas[$(this).attr("name")])}}),currentForm.find("textarea").each(function(){formDatas[$(this).attr("name")]&&$(this).text(formDatas[$(this).attr("name")])}),currentForm.find("select").each(function(){formDatas[$(this).attr("name")]&&($(this).find("option").each(function(){$(this).removeAttr("selected")}),$(this).find('[value="'+formDatas[$(this).attr("name")]+'"]').prop("selected",!0),FormHelper.currentSessionStorage[$(this).attr("name")]=formDatas[$(this).attr("name")])});for(var i=0;i<ElToBeClicked.length;i++)ElToBeClicked[i].click()}})},makeCalculations:function(nbrOfDigits){if("undefined"==typeof nbrOfDigits&&(nbrOfDigits=0),"undefined"!=typeof _calculationGroups)for(p in _calculationGroups)if(_calculationGroups.hasOwnProperty(p)){_calculationGroups[p].valToDisplay=0,currentName=_calculationGroups[p].name,currentGroup=$('[name="'+currentName+'"]');var elToInclude=_calculationGroups[p].addItems.concat(_calculationGroups[p].subItems);if(currentGroup.length>0){for(var i=0;i<elToInclude.length;i++)currentGroup.find('[name="'+elToInclude[i]+'"]').attr("group-num",p).change(function(){groupNum=$(this).attr("group-num"),currentGroup=$('[name="'+_calculationGroups[groupNum].name+'"]'),_calculationGroups[groupNum].valToDisplay=0;for(var l=0;l<_calculationGroups[groupNum].addItems.length;l++)_calculationGroups[groupNum].valToDisplay=Number(_calculationGroups[groupNum].valToDisplay)+Number($.trim(Number(replaceComa(currentGroup.find('input[name="'+_calculationGroups[groupNum].addItems[l]+'"]').val()))));for(var m=0;m<_calculationGroups[groupNum].subItems.length;m++)_calculationGroups[groupNum].valToDisplay=Number(_calculationGroups[groupNum].valToDisplay)-Number($.trim(Number(replaceComa(currentGroup.find('input[name="'+_calculationGroups[groupNum].subItems[m]+'"]').val()))));if(_calculationGroups[groupNum].valToDisplay<0&&(_calculationGroups[groupNum].valToDisplay=0),!isNaN(_calculationGroups[groupNum].valToDisplay))for(var j=0;j<_calculationGroups[groupNum].result.length;j++)currentGroup.find('[name="'+_calculationGroups[groupNum].result[j]+'"]').html(addThousandsSep(formatNumber(_calculationGroups[groupNum].valToDisplay,nbrOfDigits)))});for(var n=0;n<_calculationGroups[p].addItems.length;n++)_calculationGroups[p].valToDisplay=Number(_calculationGroups[p].valToDisplay)+Number($.trim(Number(replaceComa(currentGroup.find('input[name="'+_calculationGroups[p].addItems[n]+'"]').val()))));for(var o=0;o<_calculationGroups[p].subItems.length;o++)_calculationGroups[p].valToDisplay=Number(_calculationGroups[p].valToDisplay)-Number($.trim(Number(replaceComa(currentGroup.find('input[name="'+_calculationGroups[p].subItems[o]+'"]').val()))));if(_calculationGroups[p].valToDisplay<0&&(_calculationGroups[p].valToDisplay=0),!isNaN(_calculationGroups[p].valToDisplay))for(var k=0;k<_calculationGroups[p].result.length;k++)currentGroup.find('[name="'+_calculationGroups[p].result[k]+'"]').html(addThousandsSep(formatNumber(_calculationGroups[p].valToDisplay,nbrOfDigits)))}}},cancelCalculations:function(){if("undefined"!=typeof _calculationGroups)for(p in _calculationGroups)if(_calculationGroups.hasOwnProperty(p)&&(_calculationGroups[p].valToDisplay=0,currentName=_calculationGroups[p].name,currentGroup=$('[name="'+currentName+'"]'),currentGroup.length>0))for(var i=0;i<_calculationGroups[p].addItems.length;i++)currentGroup.find('[name="'+_calculationGroups[p].addItems[i]+'"]').attr("group-num",p).unbind()},formValidation:function(){if("undefined"==typeof $.validator)return void trace("validator undefined");if(jQuery.extend(jQuery.validator.messages,{required:"Veuillez renseigner ce champ.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer une valeur num&eacute;rique.",creditcard:"Veuillez entrer un numéro de carte de crédit valide.",equalTo:"Veuillez entrer une nouvelle fois la même valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caractères."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caractères."),rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caractères."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inférieure ou égale à {0}."),min:jQuery.validator.format("Veuillez entrer une valeur supérieure ou égale à {0}."),portable:"Veuillez renseigner un numéro de téléphone mobile",telephone:"Veuillez renseigner un numéro de téléphone valide","tel-fixe":"Veuillez renseigner un numéro de téléphone valide",postal:"Veuillez entrer un code postal valide","complexe-password":"Le format du mot de passe doit être de 6 à 25 caractères et ne peut pas avoir plus de 3 caractères identiques consécutifs",notequal:"Cette date a déjà été sélectionnée. Merci de la modifier.",alphanum:"Seuls les caractères alphanumériques sont autorisés (lettres, chiffres, aucun accent ni caractère de ponctuation)",pourcentage:"La valeur entrée ne peut dépasser 100%",entier:"Veuillez entrer un nombre sans virgule et supérieur à 0",positive:"Veuillez entrer une valeur supérieure à zéro","js-percent-des-input":"Le total de répartition de votre investissement ne peut pas dépasser 100 %","multiple-500":"Veuillez entrer un multiple de 500","js-date-obseque":"Veuillez renseigner une date de naissance valide","annees-assur":"Vous ne pouvez pas souscrire dans le cadre de la loi Consommation si cela ne concerne pas un logement actuel déjà assuré depuis au moins 1 an et dont l’échéance principale a déjà été renouvelée 1 fois",bnpphamon:"Si vous êtes déjà client BNP Paribas / Hello bank!, vous ne pouvez pas souscrire dans le cadre de la loi Consommation qui nécessite un changement d’assureur",nonehamon:"Dans le cadre de la loi Consommation (Loi Hamon), le nom exact de votre compagnie est nécessaire",oneCheckbox:"Veuillez choisir au moins une option"}),0!=$(".validate-form").length){var $field_montant=($(".validate-form"),$(".js-montant-field"));$field_montant.on("keypress",function(e){var charCode=e.which?e.which:e.keyCode;return!(charCode>31&&44!=charCode&&46!=charCode&&(charCode<48||charCode>57))}),$field_montant.on("paste",function(){var $elem=$(this);setTimeout(function(){var regex=/^(\d|\.|\,)+?$/;regex.test($elem.val())||$elem.val("")},10)}),$.validator.addMethod("multiple-500",function(value,element){return value%500==0}),$.validator.addMethod("annees-assur",function(value,element){return"0"!=value}),$.validator.addMethod("bnpphamon",function(value,element){return"4"!=$("[name=motif-resiliation]").val()||"7"!=$("[name=assureur-actuel]").val()}),$.validator.addMethod("nonehamon",function(value,element){return"4"!=$("[name=motif-resiliation]").val()||""!=$("[name=assureur-actuel]").val()}),$("[name=assureur-actuel]").on("change",function(){$("[name=motif-resiliation]").change()}),$.validator.addMethod("js-percent-des-input",function(value,element){if(0==value)return!0;var totalPourc=0,pourcInputs=$(element).parents(".percent-group-validation").find(".js-percent-des-input");return pourcInputs.each(function(){totalPourc=Number(totalPourc)+Number($(this).val())}),!(totalPourc>100)}),$.validator.addMethod("positive",function(value,element){return!!isNaN(value)||(this.optional(element)||value>0)}),$.validator.addMethod("number",function(value,element){var value=replaceDot(value);return $(element).val(value),this.optional(element)||/^\d+,?\d*$/.test(value)}),$.validator.addMethod("portable",function(value,element){var pattern=/^0(6|7)[0-9]{8}$/gi;return this.optional(element)||pattern.test(value)}),$.validator.addMethod("oneCheckbox",function(value,element){var siblings=$("input[data-name="+$(element).attr("data-name")+"]"),length=0;return siblings.each(function(){$(this)[0].checked&&length++}),console.log(length),length>0}),$.validator.addMethod("telephone",function(value,element){var pattern=/^0[1-9][0-9]{8}$/gi;return this.optional(element)||pattern.test(value)}),$.validator.addMethod("entier",function(value,element){return this.optional(element)||value.indexOf(",")==-1}),$.validator.addMethod("pourcentage",function(value,element){value=value.replace(",",".");var pattern=/^\d+$/;return!pattern.test(value)||(this.optional(element)||value<=100)}),$.validator.addMethod("tel-fixe",function(value,element){var pattern=/^0(1|2|3|4|5|9)[0-9]{8}$/gi;return this.optional(element)||pattern.test(value)}),$.validator.addMethod("postal",function(value,element){var pattern=/^[0-9]{5}$/gi;return this.optional(element)||pattern.test(value)}),$.validator.addMethod("date",function(value,element){var re=/^\d{1,2}\/\d{1,2}\/\d{4}$/,check=!1;if(""==value)return!0;if(re.test(value)){var split=value.split("/"),dd=parseInt(split[0],10),mm=parseInt(split[1],10),yyyy=parseInt(split[2],10),date=new Date(yyyy,mm-1,dd);if(date.getFullYear()!=yyyy||date.getMonth()!=mm-1||date.getDate()!=dd)return!1;check=!0}if($(element).hasClass("js-mindate-today")){var today=new Date,startOfToday=new Date(today.getFullYear(),today.getMonth(),today.getDate());return date.getTime()>startOfToday.getTime()-1}if($(element).hasClass("js-maxdate-today")){var today=new Date,demain=new Date(today.getFullYear(),today.getMonth(),today.getDate()+1);return demain.getTime()>date.getTime()}if($(element).hasClass("js-maxdate-60")){var today=new Date,dans60jours=new Date(today.getTime()+5184e6);return date.getTime()<dans60jours.getTime()}return check}),$.validator.addMethod("complexe-password",function(value,element){var pattern=/^(?!(.)\1\1\1).{6,26}$/;return this.optional(element)||pattern.test(value)}),$.validator.addMethod("notequal",function(value,element){if("undefined"==typeof $(element).attr("data-notequal")||0==$(element).attr("data-notequal"))return this.optional(element)||!0;var cpt=0;return $('[data-notequal="'+$(element).attr("data-notequal")+'"]').each(function(){$(this).val()==value&&cpt++}),this.optional(element)||cpt<=1}),$.validator.addMethod("alphanum",function(value,element){var pattern=/^[a-z0-9]+$/i;return this.optional(element)||pattern.test(value)}),$(".validate-form").each(function(){$(this).validate(FormHelper.form_validator_config),FormHelper.resetInput($(this))}),$(".validate-form select").on("change",function(){$(this).valid(),navigator.userAgent.indexOf("Firefox")!=-1&&($("form select").parent().removeClass("fixFFSelect"),$("form select.valid, form select.error").parent().addClass("fixFFSelect"))}),$("[data-validation-error-msg]").each(function(index){var error_msg=$(this).data("validation-error-msg");$(this).rules("add",{messages:{required:error_msg,digits:error_msg}})}),function(){var $form_custom_dropdown=$("[id^=select-compte-debiter]");0!=$form_custom_dropdown.length&&($form_custom_dropdown.on("select-custom-dropdown",function(){$(this).removeClass("error").addClass("valid").next(".error").remove()}),$(".validate-form").on("submit",function(e){var error=!1;if($form_custom_dropdown.each(function(){if(!$(this).hasClass("valid")&&$(this).is(":visible"))return $(this).addClass("error"),$(this).after('<em class="error">Veuillez sélectioner un compte.</em>').show(),error=!0,!1}),error)return!1}))}()}},form_validator_config:{errorElement:"em",errorPlacement:function(error,element){if(!$(element).hasClass("iban")){if($(element).hasClass("custom-msg")){var errorName="";for(prop in jQuery.validator.messages)jQuery.validator.messages[prop]==error[0].textContent&&(errorName=prop);return void element.trigger("not-valid",[errorName,error])}if("input"==element.get(0).tagName.toLowerCase()&&"checkbox"==$(element).attr("type").toLowerCase()){if($(element).parents(".js-carrousel-cards-built").length>0){var _carrousel=$(element).parents(".js-carrousel-cards-built");if(0==_carrousel.find('input[type="checkbox"]:checked').length)return void _carrousel.after('<em class="error">Veuillez sélectionner au moins une carte</em>');return}var checkboxInputs=$('input[type="checkbox"][name="'+$(element).attr("name")+'"]');if(checkboxInputs.length>1){if(checkboxInputs.first().data("validation-error-msg"))var code='<em class="error">'+checkboxInputs.first().data("validation-error-msg")+"</em>";else var code='<em class="error">Veuillez sélectionner au moins une proposition</em>';for(var checkboxParents=checkboxInputs.first().parents(),i=0;i<checkboxInputs.length;i++)checkboxParents=checkboxParents.has(checkboxInputs[i]);return void checkboxParents.first().after(code)}}if("input"==element.get(0).tagName.toLowerCase()&&"radio"==$(element).attr("type").toLowerCase()){if($(element).parents(".js-carrousel-cards-built").length>0)return;for(var radioInputs=$('input[type="radio"][name="'+$(element).attr("name")+'"]'),radioParents=radioInputs.first().parents(),i=0;i<radioInputs.length;i++)radioParents=radioParents.has(radioInputs[i]);var code='<em class="error">Veuillez sélectionner une proposition</em>';return radioInputs.filter("[data-validation-error-msg]").length>0&&(code='<em class="error">'+radioInputs.filter("[data-validation-error-msg]").first().data("validation-error-msg")+"</em>"),"tbody"==radioParents.get(0).tagName.toLowerCase()?void radioParents.parents("table").after(code):void radioParents.first().after(code)}if($(element).next("button").length>0)return void $(element).parent().after(error);if($(element).parent(".inline-label").length>0)return void error.insertAfter($(element).parent(".inline-label"));if($(element).parent(".checkbox2").length>0)return void error.insertAfter($(element).parent(".checkbox2"));if($(element).hasClass("range-barre"))return void error.insertAfter($(element).closest(".curseur-2"));if($(element).hasClass("oneCheckbox")){var container=$(element).closest(".oneCheckbox-wrapper"),customError=!!$(element).attr("data-validation-error-msg")&&$(element).attr("data-validation-error-msg");return customError&&error.text(customError),void(container.find("em.error").length<1&&container.append(error))}if($(element).hasClass("flag-autocomplete"))return void $(element).parent(".eac-flags").append(error);error.insertAfter(element),navigator.userAgent.indexOf("Firefox")!=-1&&($("form select").parent().removeClass("fixFFSelect"),$("form select.valid, form select.error").parent().addClass("fixFFSelect"))}},ignore:":hidden:not(.validate-item), .js-init-datepicker:not([required])",onfocusout:function(element,event){var $current_element=$(element);$current_element.hasClass("js-disable-auto-validation")||(""!=$current_element.val().trim()||$current_element.prop("required"))&&($current_element.hasClass("hasDatepicker")||($current_element.valid()?($current_element.trigger("is-valid"),FormHelper.storeDatasInSession($current_element),FormHelper.hideResetButton($current_element),"undefined"!=typeof $current_element.attr("data-group-validation")&&""!=$current_element.val()&&FormHelper.checkGroupValidation($current_element,!1)):("undefined"!=typeof $current_element.attr("data-group-validation")&&FormHelper.checkGroupValidation($current_element,!0),""!=$current_element.val()?FormHelper.showResetButton($current_element):FormHelper.hideResetButton($current_element))))},onclick:function(element,event){var $current_element=$(element);$current_element.hasClass("js-disable-auto-validation")||FormHelper.storeDatasInSession($current_element)},onkeyup:function(element,event){var $current_element=$(element);$current_element.hasClass("js-disable-auto-validation")||$current_element.hasClass("error")&&$current_element.valid()&&($current_element.trigger("is-valid"),FormHelper.hideResetButton($current_element))},invalidHandler:function(event,validator){var errors=validator.numberOfInvalids();errors?$(".form-error-messages").removeClass("hidden"):$(".form-error-messages").addClass("hidden")},submitHandler:function(form){return $(form).find(".percent-group-validation").hasClass("error")?($(form).find(".percent-group-validation").find(".valid").removeClass("valid"),!1):!($("#total-montant-erreur").length>0&&!$("#total-montant-erreur").hasClass("hidden"))&&($(form).hasClass("custom-submit")?($(form).trigger("submitting"),!1):void form.submit())},rules:{duree_financement:{min:2,max:30}},messages:{duree_financement:{min:"La valeur de la durée de financement doit être comprise entre 2 et 30"},codeSMS:{required:"Veuillez saisir le code reçu par SMS"}}},checkGroupValidation:function(el,removeEl){var _group=el.attr("data-group-validation");$('[data-group-validation="'+_group+'"]').each(function(){0==removeEl?$(this).attr("required",!1):$(this).attr("required",!0)}),0==removeEl&&el.attr("required",!0)},removeGroupValidation:function(el){var _group=el.attr("data-group-validation");$('[data-group-validation="'+_group+'"]').each(function(){$(this).attr("required",!1)})},storeDatasInSession:function(el){if("undefined"!=typeof _fieldsToStoreInSession){formName=el.parents("form").first().attr("name"),elName=el.attr("name");var v=$.inArray(elName,_fieldsToStoreInSession[formName]);v!=-1&&(FormHelper.currentSessionStorage[elName]=el.val(),sessionStorage.setItem(formName,JSON.stringify(FormHelper.currentSessionStorage)))}},emptyDatasInSession:function(){sessionStorage.clear()},placeholderPolyfill:function(){function _blur(input){""!=input.val()&&input.val()!=input.attr("placeholder")||(input.addClass("placeholder"),input.val(input.attr("placeholder")))}$("[placeholder]").focus(function(){var input=$(this);input.val()==input.attr("placeholder")&&(input.val(""),input.removeClass("placeholder"))}).blur(function(){_blur($(this))}),$("[placeholder]").each(function(){_blur($(this))})}},HelpText={init:function($container){var $all_popups=$(".help-text-popup");return 0!=$all_popups.length&&($container.on("click.help-text",".help-text",function(){return $current_popup=$(this).next(".help-text-popup"),0!=$current_popup.length&&($current_popup.hasClass("hidden")?($all_popups.addClass("hidden"),$current_popup.removeClass("hidden")):$current_popup.addClass("hidden"),!1)}),void $("body").on("click.close-popups",function(){$all_popups.addClass("hidden")}))}},Datepicker={init:function(){if(0!=$(".date-picker input").length){$.datepicker.regional.fr={closeText:"Fermer",prevText:"Pr&eacute;c",nextText:"Suiv",currentText:"Aujourd'hui",monthNames:["janvier","f&eacute;vrier","mars","avril","mai","juin","juillet","ao&ucirc;t","septembre","octobre","novembre","d&eacute;cembre"],monthNamesShort:["janv.","f&eacute;vr.","mars","avril","mai","juin","juil.","ao&ucirc;t","sept.","oct.","nov.","d&eacute;c."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,gotoCurrent:!0,yearSuffix:"",onClose:function(selected_date){(""!=selected_date||$(this).prop("required"))&&$(this).valid()&&FormHelper.storeDatasInSession($(this))}},$.datepicker.setDefaults($.datepicker.regional.fr),$(".js-init-datepicker").datepicker(),$(".js-init-datepicker-auto").datepicker("setDate",DateHelper.todayDate()),$(".js-date-naissance").datepicker("option",{changeMonth:!0,changeYear:!0,yearRange:"-100:+0"}),$("[data-date-min]").each(function(){var $current_element=$(this);$($(this).data("date-min")).datepicker("option",{onClose:function(selected_date){var selected_date_object=DateHelper.formatDateToObject(selected_date);selected_date_object&&$current_element.datepicker("option",{minDate:selected_date})}})});try{$("input.date").attr("maxlength",10),$(".js-mindate-today").datepicker("option","minDate",DateHelper.todayDate()),$(".js-mindate-3-wD").datepicker("option","minDate",DateHelper.addWDToDate(DateHelper.todayDate(),3)),$(".js-maxdate-today").datepicker("option","maxDate",DateHelper.todayDate()),$(".js-maxdate-60").datepicker("option","maxDate",DateHelper.addToDate(DateHelper.todayDate(),60)),$(".js-maxdate-30").datepicker("option","maxDate",DateHelper.addToDate(DateHelper.todayDate(),30)),$(".js-no-weekend").datepicker("option","beforeShowDay",function(date){var we=$.datepicker.noWeekends(date);if(!we[0])return!1;var holidays=Datepicker.holidays(date.getFullYear()),mm=date.getMonth()+1,dd=date.getDate(),string=(dd<=9?"0":"")+dd+"-"+(mm<=9?"0":"")+mm;return[$.inArray(string,holidays)==-1]}),$(".js-no-sunday").datepicker("option","beforeShowDay",function(date){if(0==date.getDay())return!1;var holidays=Datepicker.holidays(date.getFullYear()),mm=date.getMonth()+1,dd=date.getDate(),string=(dd<=9?"0":"")+dd+"-"+(mm<=9?"0":"")+mm;return[$.inArray(string,holidays)==-1]}),$(".js-maxdate-6m").datepicker("option","maxDate",DateHelper.addToDate(DateHelper.todayDate(),180))}catch(e){}}},easterday:function(year,day){var G=year%19,C=Math.floor(year/100),H=(C-Math.floor(C/4)-Math.floor((8*C+13)/25)+19*G+15)%30,I=H-Math.floor(H/28)*(1-Math.floor(H/28)*Math.floor(29/(H+1))*Math.floor((21-G)/11)),J=(1*year+Math.floor(year/4)+I+2-C+Math.floor(C/4))%7,L=I-J,MoisPaques=3+Math.floor((L+40)/44),JourPaques=L+28-31*Math.floor(MoisPaques/4);return new Date(year,MoisPaques-1,JourPaques+day)},holidays:function(year){if(this._holidays&&this._holidays[year])return this._holidays[year];this._holidays||(this._holidays=[]);var mm,dd,tabHolidays=["01-01","01-05","08-05","14-07","15-08","01-11","11-11","25-12"],date=this.easterday(year,1);return mm=date.getMonth()+1,dd=date.getDate(),tabHolidays.push((dd<=9?"0":"")+dd+"-"+(mm<=9?"0":"")+mm),date=this.easterday(year,39),mm=date.getMonth()+1,dd=date.getDate(),tabHolidays.push((dd<=9?"0":"")+dd+"-"+(mm<=9?"0":"")+mm),date=this.easterday(year,50),mm=date.getMonth()+1,dd=date.getDate(),tabHolidays.push((dd<=9?"0":"")+dd+"-"+(mm<=9?"0":"")+mm),this._holidays[year]=tabHolidays,tabHolidays}},ShowHideHelper={init:function(){this.dataToggleSection(),this.dataCheckboxShowSection(),this.dataRadioButtonSection(),this.dataShowHideSection(),this.dataShowHideOverSection(),this.dataShowHideSectionSlider(),this.dataSlideOpenSection(),this.dataMakeActiveInactiveSection(),this.dataToggleActive(),this.dataMakeEnabled(),this.dataGroupMakeEnabled(),this.dataSendValueToInput(),this.dataResetForm(),this.identToggle(),this.callbackMessage(),this.fixBarreRecherche(),this.fixOngletTop(),this.disableNanoClick(),this.initShowHideRules(),this.dataShowHideViewer(),this.autoNanoScroller()},dataToggleSection:function(){$("[data-toggle-section]").on("click.toggle-section",function(){toggle($(this)),$(this).find(".icon-carret-down").length>0?$(this).find(".icon-carret-down").removeClass("icon-carret-down").addClass("icon-carret-up"):$(this).find(".icon-carret-up").length>0&&$(this).find(".icon-carret-up").removeClass("icon-carret-up").addClass("icon-carret-down"),$(this).hasClass("toggled")?$(this).removeClass("toggled"):$(this).addClass("toggled")});var toggle=function($elem){var elem_id=$elem.data("toggle-section"),$elem_to_toggle=$(elem_id);$elem_to_toggle.hasClass("hidden")?$elem_to_toggle.removeClass("hidden"):$elem_to_toggle.addClass("hidden")}},dataToggleSectionCtx:function($ctx){$("[data-toggle-section]",$ctx).on("click.toggle-section",function(){toggle($(this)),$(this).find(".icon-carret-down").length>0?$(this).find(".icon-carret-down").removeClass("icon-carret-down").addClass("icon-carret-up"):$(this).find(".icon-carret-up").length>0&&$(this).find(".icon-carret-up").removeClass("icon-carret-up").addClass("icon-carret-down"),$(this).hasClass("toggled")?$(this).removeClass("toggled"):$(this).addClass("toggled")});var toggle=function($elem){var elem_id=$elem.data("toggle-section"),$elem_to_toggle=$(elem_id,$ctx);$elem_to_toggle.hasClass("hidden")?$elem_to_toggle.removeClass("hidden"):$elem_to_toggle.addClass("hidden")}},dataToggleActive:function(){$("[data-toggle-active]").on("click.toggle-active",function(){toggle($(this))});var toggle=function($elem){var elem_id=$elem.data("toggle-active"),$elem_to_toggle=$(elem_id);$elem_to_toggle.hasClass("active")?$elem_to_toggle.removeClass("active"):$elem_to_toggle.addClass("active")}},dataRadioButtonSection:function(){$("[data-toggle-radio-section]").on("click.toggle-radio-section",function(){toggle($(this),$(this).attr("name"))});var toggle=function($elem){var elem_id=$elem.data("toggle-radio-section"),$elem_to_toggle=$(elem_id);$elem.prop("checked")?$elem_to_toggle.removeClass("hidden"):$elem_to_toggle.addClass("hidden")};$("[data-toggle-radio-section]").each(function(){var $all_radios=$("input[name="+$(this).attr("name")+"]"),elem_id=$(this).data("toggle-radio-section"),$elem_to_toggle=$(elem_id);$all_radios.not($(this)).on("click",function(){$elem_to_toggle.addClass("hidden")})}),toggle($("[data-toggle-radio-section]"))},dataCheckboxShowSection:function(){$("[data-toggle-checkbox-section]").on("click.toggle-checkbox-section",function(){toggle($(this))});var toggle=function($elem){var elem_id=$elem.data("toggle-checkbox-section"),$elem_to_toggle=$(elem_id);$elem.prop("checked")?$elem_to_toggle.removeClass("hidden"):$elem_to_toggle.addClass("hidden")};toggle($("[data-toggle-checkbox-section]"))},dataShowHideSection:function(){$("[data-show-section],[data-hide-section]").on("click.show-hide-section",function(){var show_elem_selector=$(this).data("show-section"),$elem_to_show=$(show_elem_selector),hide_elem_selector=$(this).data("hide-section"),$elem_to_hide=$(hide_elem_selector);$elem_to_hide.addClass("hidden"),$elem_to_show.removeClass("hidden")})},dataShowHideSectionSlider:function(){var targetEvent="mouseenter.show-hide-section";("mobile"==DeviceSize.getDeviceState()||$(window).width()<=1024)&&(targetEvent="click.show-hide-section"),$("[data-show-section-slider],[data-hide-section-slider]").on(targetEvent,function(event){event.preventDefault(),event.stopPropagation();var show_elem_selector=$(this).data("show-section-slider"),$elem_to_show=$(show_elem_selector),hide_elem_selector=$(this).data("hide-section-slider"),$elem_to_hide=$(hide_elem_selector);$elem_to_hide.addClass("hidden"),$elem_to_show.removeClass("hidden")})},dataShowHideOverSection:function(){$("[data-show-section-over],[data-hide-section-over]").on("mouseenter.show-hide-section",function(){var show_elem_selector=$(this).data("show-section-over"),$elem_to_show=$(show_elem_selector),hide_elem_selector=$(this).data("hide-section-over"),$elem_to_hide=$(hide_elem_selector);$elem_to_hide.addClass("hidden"),$elem_to_show.removeClass("hidden")})},dataSlideOpenSection:function(){$("[data-slide-section]").on("click.slide-section",function(){var show_elem_selector=$(this).data("slide-section"),$elem_to_show=$(show_elem_selector);$elem_to_show.slideOpen()})},initShowHideRules:function(){"undefined"!=typeof _showHideRules&&$("form").each(function(){var _currentName=$(this).attr("name");if("undefined"!=typeof _showHideRules[_currentName])for(prop in _showHideRules[_currentName]){var currentEl=$('[name="'+prop+'"]');0!=currentEl.length&&("select"==currentEl[0].tagName.toLowerCase()?(currentEl.change(function(){ShowHideHelper.checkShowHideRules($(this))}),ShowHideHelper.checkShowHideRules(currentEl)):"input"==currentEl[0].tagName.toLowerCase()&&"radio"==currentEl.first().attr("type")&&(currentEl.click(function(){var elName=$(this).attr("name");ShowHideHelper.checkShowHideRules($(this).parents("form").find('[name="'+elName+'"]:checked'))}),ShowHideHelper.checkShowHideRules(currentEl.filter(":checked"))))}})},checkShowHideRules:function(el){if(0!=el.length&&null!=el.val()){var currentType=el.val().toLowerCase(),currentFormName=el.parents("form").attr("name"),currentElName=el.attr("name");for(prop in _showHideRules[currentFormName][currentElName])if(prop==currentType){el.parents("form").first();if("undefined"!=typeof _showHideRules[currentFormName][currentElName][prop].show)for(var _ar=_showHideRules[currentFormName][currentElName][prop].show,i=0;i<_ar.length;i++)$('body [name="'+_ar[i]+'"]').removeClass("hidden");if("undefined"!=typeof _showHideRules[currentFormName][currentElName][prop].hide)for(var _ar2=_showHideRules[currentFormName][currentElName][prop].hide,j=0;j<_ar2.length;j++)$('body [name="'+_ar2[j]+'"]').addClass("hidden")}}},dataMakeActiveInactiveSection:function(){$("[data-make-active],[data-make-inactive]").on("click.make-active-inactive-section",function(){var active_elem_selector=$(this).data("make-active"),$elem_to_make_active=$(active_elem_selector),inactive_elem_selector=$(this).data("make-inactive"),$elem_to_make_inactive=$(inactive_elem_selector);active_elem_selector!=inactive_elem_selector?($elem_to_make_inactive.removeClass("active"),$elem_to_make_active.addClass("active")):$elem_to_make_active.hasClass("active")?$elem_to_make_active.removeClass("active"):$elem_to_make_active.addClass("active")})},dataMakeEnabled:function(){$("[data-make-enabled]").on("click.make-enabled-section",function(){var $me=$(this),enabled_elem_selector=$(this).data("make-enabled"),$elem_to_enable=$(enabled_elem_selector);if("checkbox"==$me.attr("type")||"checkbox"==$("#"+$me.attr("for")).attr("type")){setTimeout(function(){$me.is(":checked")||$("#"+$me.attr("for")).is(":checked")?$elem_to_enable.prop("disabled",!1):$elem_to_enable.prop("disabled","disabled")},10)}else $elem_to_enable.prop("disabled",!1)})},dataGroupMakeEnabled:function(){$("[data-group-make-enabled]").on("click.group-make-enabled-section",function(){var $elsToWatch=($(this),$("[data-group-make-enabled]")),enabled_elem_selector=$(this).data("group-make-enabled"),$elem_to_enable=$(enabled_elem_selector);setTimeout(function(){var ok=1;
$elsToWatch.each(function(){if(!("checkbox"!=$(this).attr("type")&&"checkbox"!=$("#"+$(this).attr("for")).attr("type")||$(this).is(":checked")||$("#"+$(this).attr("for")).is(":checked")))return void(ok=0)}),1==ok?$elem_to_enable.prop("disabled",!1):$elem_to_enable.prop("disabled","disabled")},10)})},dataSendValueToInput:function(){$("select[data-send-value]").on("change.send-value",function(){var $elementToSendTo=$($(this).data("send-value"));"input"==$elementToSendTo.get(0).tagName.toLowerCase()?$elementToSendTo.val($(this).val()):$elementToSendTo.html($(this).val()),FormHelper.storeDatasInSession($elementToSendTo)}),$("[data-send-value]:not(select)").on("click.send-value",function(){var $elementToSendTo=$($(this).data("send-value"));"input"==$elementToSendTo.get(0).tagName.toLowerCase()?$elementToSendTo.val($(this).attr("name")):$elementToSendTo.html($(this).attr("name")),FormHelper.storeDatasInSession($elementToSendTo)})},dataResetForm:function(){$("[data-reset-form]").on("click.reset-form",function(){var form_elem_selector=$(this).data("reset-form"),$form_to_reset=$(form_elem_selector);$form_to_reset[0].reset()})},identToggle:function(){var $ident_layer=$("#identLayer");$ident_layer.on("focus","#client-nbr",function(){$ident_layer.find(".main-content").addClass("no-left-radius"),$ident_layer.find(".col-aside").show()})},callbackMessage:function(){var $row=$("[data-show-message]");$row.find(".link").on("click.show-popup",function(){var selector=$row.data("show-message"),$popup=$(selector);$popup.removeClass("hidden")}),$(".message-retour-popup").find(".js-close-popup").on("click",function(){return $(this).parents(".message-retour-popup").addClass("hidden"),!1})},togglePlusMoins:function(clickable_elements,one_only){$("body").on("click.toggle-folder-btn",clickable_elements,function(){var $li_parent=$(this).parents("li"),$detail_vir=$li_parent.find(".js-detail-toggle"),$indicateur=$li_parent.find(".folder-btn");$detail_vir.hasClass("hidden")?(one_only&&($(".js-detail-toggle").addClass("hidden"),$(".folder-btn").html('<i class="icon-carret-down"></i>')),$(clickable_elements).parents("li").removeClass("hidden"),$detail_vir.removeClass("hidden"),$indicateur.html('<i class="icon-carret-up"></i>'),$li_parent.addClass("open")):($detail_vir.addClass("hidden"),$indicateur.html('<i class="icon-carret-down"></i>'),$li_parent.removeClass("open")),$(".nano").nanoScroller()})},fixBarreRecherche:function(){},fixOngletTop:function(){"mobile"!=DeviceSize.getDeviceState()||$(".onglet").eq(0).hasClass("ancres")||$(".onglet").eq(0).addClass("lien-gellule")},disableNanoClick:function(){$("body").on("click",".nano-pane",function(){return!1})},dataShowHideViewer:function(){0!=$("[data-show-viewer]").length&&$("[data-show-viewer]").on("click.show-hide-section",function(){var show_elem_selector=$(this).data("show-viewer"),$elem_to_show=$(show_elem_selector);$elem_to_show.removeClass("hidden"),$(".full-cache").removeClass("hidden"),$(window).scrollTop(0)})},autoNanoScroller:function(){try{$(".nano-auto").nanoScroller()}catch(e){}}},DeviceSize={class_name:"state-indicator",last_device_state:"",init:function(){var self=this;$("."+this.class_name).length<=0&&$("body").append('<div class="'+this.class_name+'"></div>'),this.last_device_state=this.getDeviceState(),$(window).resize(function(){self.resizeDevice()})},getDeviceState:function(){if(0==$("."+this.class_name).length)return"desktop";var state=this.getContentState();return state||"desktop"},getContentState:function(){var self=this;try{if("undefined"==typeof window.getComputedStyle||"null"==typeof window.getComputedStyle)return;return window.getComputedStyle(document.querySelector("."+self.class_name),":before").getPropertyValue("content").replace(/(\"|\')/g,"")}catch(e){}},resizeDevice:function(){var state=this.getContentState();state!=this.last_device_state&&(this.last_device_state=state,$(document).trigger("breakPointReached",String(state)))}},Popin={popin_class:"popin",popin_cache_class:"popin-cache",popin_auto:"popin-auto",popin_open_active:"popin-open-active",popin_action:"popin-action",init:function(){return 0!=$("."+Popin.popin_class).length&&($("."+Popin.popin_class).find(".popin-close").on("click.popin-close",function(){Popin.hidePopin($(this))}),$(".popin-cache").hasClass("noC")||$("body").on("click.popin-close","."+Popin.popin_cache_class,function(){Popin.hidePopin()}),$("[data-show-popin]").on("click.popin-open",function(){var show_elem_selector=$(this).data("show-popin"),$elem_to_show=$(show_elem_selector);$("body").hasClass("webview")&&"#liste-support"==$(this).data("show-popin")&&$(window).scrollTop(0),Popin.showPopin($elem_to_show)}),void($("."+Popin.popin_class+"."+Popin.popin_auto).length>0&&Popin.showPopin($("."+Popin.popin_class+"."+Popin.popin_auto))))},showPopin:function($popin,cacheParent,forceCacheReCreation){forceCacheReCreation&&$("."+Popin.popin_cache_class).remove(),$popin.removeClass("hidden").addClass(Popin.popin_open_active),0==$("."+Popin.popin_cache_class).length?"undefined"!=typeof cacheParent?$(cacheParent).append($('<div class="'+Popin.popin_cache_class+'" />')):$("body").append($('<div class="'+Popin.popin_cache_class+'" />')):$("."+Popin.popin_cache_class).removeClass("hidden")},hidePopin:function($clicked_elem){return!($("."+Popin.popin_open_active).hasClass(Popin.popin_action)&&!$clicked_elem.is("button"))&&($("."+Popin.popin_open_active).addClass("hidden").removeClass(Popin.popin_open_active),void $("."+Popin.popin_cache_class).addClass("hidden"))}};!function(window,document){"use strict";function Pathformer(element){if("undefined"==typeof element)throw new Error('Pathformer [constructor]: "element" parameter is required');if(element.constructor===String&&(element=document.getElementById(element),!element))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(!(element.constructor instanceof window.SVGElement||/^svg$/i.test(element.nodeName)))throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=element,this.scan(element)}function Vivus(element,options,callback){this.isReady=!1,this.setElement(element,options),this.setOptions(options),this.setCallback(callback),this.isReady&&this.init()}Pathformer.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],Pathformer.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],Pathformer.prototype.scan=function(svg){for(var fn,element,pathData,pathDom,elements=svg.querySelectorAll(this.TYPES.join(",")),i=0;i<elements.length;i++)element=elements[i],fn=this[element.tagName.toLowerCase()+"ToPath"],pathData=fn(this.parseAttr(element.attributes)),pathDom=this.pathMaker(element,pathData),element.parentNode.replaceChild(pathDom,element)},Pathformer.prototype.lineToPath=function(element){var newElement={};return newElement.d="M"+element.x1+","+element.y1+"L"+element.x2+","+element.y2,newElement},Pathformer.prototype.rectToPath=function(element){var newElement={},x=parseFloat(element.x)||0,y=parseFloat(element.y)||0,width=parseFloat(element.width)||0,height=parseFloat(element.height)||0;return newElement.d="M"+x+" "+y+" ",newElement.d+="L"+(x+width)+" "+y+" ",newElement.d+="L"+(x+width)+" "+(y+height)+" ",newElement.d+="L"+x+" "+(y+height)+" Z",newElement},Pathformer.prototype.polylineToPath=function(element){var i,path,newElement={},points=element.points.trim().split(" ");if(element.points.indexOf(",")===-1){var formattedPoints=[];for(i=0;i<points.length;i+=2)formattedPoints.push(points[i]+","+points[i+1]);points=formattedPoints}for(path="M"+points[0],i=1;i<points.length;i++)points[i].indexOf(",")!==-1&&(path+="L"+points[i]);return newElement.d=path,newElement},Pathformer.prototype.polygonToPath=function(element){var newElement=Pathformer.prototype.polylineToPath(element);return newElement.d+="Z",newElement},Pathformer.prototype.ellipseToPath=function(element){var startX=element.cx-element.rx,startY=element.cy,endX=parseFloat(element.cx)+parseFloat(element.rx),endY=element.cy,newElement={};return newElement.d="M"+startX+","+startY+"A"+element.rx+","+element.ry+" 0,1,1 "+endX+","+endY+"A"+element.rx+","+element.ry+" 0,1,1 "+startX+","+endY,newElement},Pathformer.prototype.circleToPath=function(element){var newElement={},startX=element.cx-element.r,startY=element.cy,endX=parseFloat(element.cx)+parseFloat(element.r),endY=element.cy;return newElement.d="M"+startX+","+startY+"A"+element.r+","+element.r+" 0,1,1 "+endX+","+endY+"A"+element.r+","+element.r+" 0,1,1 "+startX+","+endY,newElement},Pathformer.prototype.pathMaker=function(element,pathData){var i,attr,pathTag=document.createElementNS("http://www.w3.org/2000/svg","path");for(i=0;i<element.attributes.length;i++)attr=element.attributes[i],this.ATTR_WATCH.indexOf(attr.name)===-1&&pathTag.setAttribute(attr.name,attr.value);for(i in pathData)pathTag.setAttribute(i,pathData[i]);return pathTag},Pathformer.prototype.parseAttr=function(element){for(var attr,output={},i=0;i<element.length;i++){if(attr=element[i],this.ATTR_WATCH.indexOf(attr.name)!==-1&&attr.value.indexOf("%")!==-1)throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");output[attr.name]=attr.value}return output};var requestAnimFrame,cancelAnimFrame,parsePositiveInt;Vivus.LINEAR=function(x){return x},Vivus.EASE=function(x){return-Math.cos(x*Math.PI)/2+.5},Vivus.EASE_OUT=function(x){return 1-Math.pow(1-x,3)},Vivus.EASE_IN=function(x){return Math.pow(x,3)},Vivus.EASE_OUT_BOUNCE=function(x){var base=-Math.cos(x*(.5*Math.PI))+1,rate=Math.pow(base,1.5),rateR=Math.pow(1-x,2),progress=-Math.abs(Math.cos(rate*(2.5*Math.PI)))+1;return 1-rateR+progress*rateR},Vivus.prototype.setElement=function(element,options){if("undefined"==typeof element)throw new Error('Vivus [constructor]: "element" parameter is required');if(element.constructor===String&&(element=document.getElementById(element),!element))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(this.parentEl=element,options&&options.file){var objElm=document.createElement("object");objElm.setAttribute("type","image/svg+xml"),objElm.setAttribute("data",options.file),objElm.setAttribute("built-by-vivus","true"),element.appendChild(objElm),element=objElm}switch(element.constructor){case window.SVGSVGElement:case window.SVGElement:this.el=element,this.isReady=!0;break;case window.HTMLObjectElement:var onLoad,self;self=this,onLoad=function(e){if(!self.isReady){if(self.el=element.contentDocument&&element.contentDocument.querySelector("svg"),!self.el&&e)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");return self.el?(element.getAttribute("built-by-vivus")&&(self.parentEl.insertBefore(self.el,element),self.parentEl.removeChild(element),self.el.setAttribute("width","100%"),self.el.setAttribute("height","100%")),self.isReady=!0,self.init(),!0):void 0}},onLoad()||element.addEventListener("load",onLoad);break;default:throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')}},Vivus.prototype.setOptions=function(options){var allowedTypes=["delayed","async","oneByOne","scenario","scenario-sync"],allowedStarts=["inViewport","manual","autostart"];if(void 0!==options&&options.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if(options=options||{},options.type&&allowedTypes.indexOf(options.type)===-1)throw new Error("Vivus [constructor]: "+options.type+" is not an existing animation `type`");if(this.type=options.type||allowedTypes[0],options.start&&allowedStarts.indexOf(options.start)===-1)throw new Error("Vivus [constructor]: "+options.start+" is not an existing `start` option");if(this.start=options.start||allowedStarts[0],this.isIE=window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.userAgent.indexOf("Trident/")!==-1||window.navigator.userAgent.indexOf("Edge/")!==-1,this.duration=parsePositiveInt(options.duration,120),this.delay=parsePositiveInt(options.delay,null),this.dashGap=parsePositiveInt(options.dashGap,1),this.forceRender=options.hasOwnProperty("forceRender")?!!options.forceRender:this.isIE,this.selfDestroy=!!options.selfDestroy,this.onReady=options.onReady,this.frameLength=this.currentFrame=this.map=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!options.hasOwnProperty("ignoreInvisible")&&!!options.ignoreInvisible,this.animTimingFunction=options.animTimingFunction||Vivus.LINEAR,this.pathTimingFunction=options.pathTimingFunction||Vivus.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},Vivus.prototype.setCallback=function(callback){if(callback&&callback.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=callback||function(){}},Vivus.prototype.mapping=function(){var i,paths,path,pAttrs,pathObj,totalLength,lengthMeter,timePoint;for(timePoint=totalLength=lengthMeter=0,paths=this.el.querySelectorAll("path"),i=0;i<paths.length;i++)path=paths[i],this.isInvisible(path)||(pathObj={el:path,length:Math.ceil(path.getTotalLength())},isNaN(pathObj.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",path):(this.map.push(pathObj),path.style.strokeDasharray=pathObj.length+" "+(pathObj.length+2*this.dashGap),path.style.strokeDashoffset=pathObj.length+this.dashGap,pathObj.length+=this.dashGap,totalLength+=pathObj.length,this.renderPath(i)));for(totalLength=0===totalLength?1:totalLength,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(paths.length>1?paths.length-1:1),i=0;i<this.map.length;i++){switch(pathObj=this.map[i],this.type){case"delayed":pathObj.startAt=this.delayUnit*i,pathObj.duration=this.duration-this.delay;break;case"oneByOne":pathObj.startAt=lengthMeter/totalLength*this.duration,pathObj.duration=pathObj.length/totalLength*this.duration;break;case"async":pathObj.startAt=0,pathObj.duration=this.duration;break;case"scenario-sync":path=pathObj.el,pAttrs=this.parseAttr(path),pathObj.startAt=timePoint+(parsePositiveInt(pAttrs["data-delay"],this.delayUnit)||0),pathObj.duration=parsePositiveInt(pAttrs["data-duration"],this.duration),timePoint=void 0!==pAttrs["data-async"]?pathObj.startAt:pathObj.startAt+pathObj.duration,this.frameLength=Math.max(this.frameLength,pathObj.startAt+pathObj.duration);break;case"scenario":path=pathObj.el,pAttrs=this.parseAttr(path),pathObj.startAt=parsePositiveInt(pAttrs["data-start"],this.delayUnit)||0,pathObj.duration=parsePositiveInt(pAttrs["data-duration"],this.duration),this.frameLength=Math.max(this.frameLength,pathObj.startAt+pathObj.duration)}lengthMeter+=pathObj.length,this.frameLength=this.frameLength||this.duration}},Vivus.prototype.drawer=function(){var self=this;this.currentFrame+=this.speed,this.currentFrame<=0?(this.stop(),this.reset(),this.callback(this)):this.currentFrame>=this.frameLength?(this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy(),this.callback(this)):(this.trace(),this.handle=requestAnimFrame(function(){self.drawer()}))},Vivus.prototype.trace=function(){var i,progress,path,currentFrame;for(currentFrame=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,i=0;i<this.map.length;i++)path=this.map[i],progress=(currentFrame-path.startAt)/path.duration,progress=this.pathTimingFunction(Math.max(0,Math.min(1,progress))),path.progress!==progress&&(path.progress=progress,path.el.style.strokeDashoffset=Math.floor(path.length*(1-progress)),this.renderPath(i))},Vivus.prototype.renderPath=function(index){if(this.forceRender&&this.map&&this.map[index]){var pathObj=this.map[index],newPath=pathObj.el.cloneNode(!0);pathObj.el.parentNode.replaceChild(newPath,pathObj.el),pathObj.el=newPath}},Vivus.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new Pathformer(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},Vivus.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var self=this,listener=function(){self.isInViewport(self.parentEl,1)&&(self.play(),window.removeEventListener("scroll",listener))};window.addEventListener("scroll",listener),listener()}},Vivus.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},Vivus.prototype.reset=function(){return this.setFrameProgress(0)},Vivus.prototype.finish=function(){return this.setFrameProgress(1)},Vivus.prototype.setFrameProgress=function(progress){return progress=Math.min(1,Math.max(0,progress)),this.currentFrame=Math.round(this.frameLength*progress),this.trace(),this},Vivus.prototype.play=function(speed){if(speed&&"number"!=typeof speed)throw new Error("Vivus [play]: invalid speed");return this.speed=speed||1,this.handle||this.drawer(),this},Vivus.prototype.stop=function(){return this.handle&&(cancelAnimFrame(this.handle),this.handle=null),this},Vivus.prototype.destroy=function(){this.stop();var i,path;for(i=0;i<this.map.length;i++)path=this.map[i],path.el.style.strokeDashoffset=null,path.el.style.strokeDasharray=null,this.renderPath(i)},Vivus.prototype.isInvisible=function(el){var rect,ignoreAttr=el.getAttribute("data-ignore");return null!==ignoreAttr?"false"!==ignoreAttr:!!this.ignoreInvisible&&(rect=el.getBoundingClientRect(),!rect.width&&!rect.height)},Vivus.prototype.parseAttr=function(element){var attr,output={};if(element&&element.attributes)for(var i=0;i<element.attributes.length;i++)attr=element.attributes[i],output[attr.name]=attr.value;return output},Vivus.prototype.isInViewport=function(el,h){var scrolled=this.scrollY(),viewed=scrolled+this.getViewportH(),elBCR=el.getBoundingClientRect(),elHeight=elBCR.height,elTop=scrolled+elBCR.top,elBottom=elTop+elHeight;return h=h||0,elTop+elHeight*h<=viewed&&elBottom>=scrolled},Vivus.prototype.docElem=window.document.documentElement,Vivus.prototype.getViewportH=function(){var client=this.docElem.clientHeight,inner=window.innerHeight;return client<inner?inner:client},Vivus.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(id){return window.clearTimeout(id)}}(),parsePositiveInt=function(value,defaultValue){var output=parseInt(value,10);return output>=0?output:defaultValue},"function"==typeof define&&define.amd?define("next_vivus_module",[],function(){return Vivus}):"object"==typeof exports?module.exports=Vivus:window.Vivus=Vivus}(window,document),function(){var o=$({});$.subscribe=function(){o.on.apply(o,arguments)},$.unsubscribe=function(){o.off.apply(o,arguments)},$.publish=function(){o.trigger.apply(o,arguments)}}(),function(root,doc,factory){"function"==typeof define&&define.amd?define("next_jquery_mobile_module",["jquery"],function($){return factory($,root,doc),$.mobile}):factory(root.jQuery,root,doc)}(this,document,function(jQuery,window,document,undefined){!function($,window,document,undefined){function getNativeEvent(event){for(;event&&"undefined"!=typeof event.originalEvent;)event=event.originalEvent;return event}function createVirtualEvent(event,eventType){var oe,props,ne,prop,ct,touch,i,j,len,t=event.type;if(event=$.Event(event),event.type=eventType,oe=event.originalEvent,props=$.event.props,t.search(/^(mouse|click)/)>-1&&(props=mouseEventProps),oe)for(i=props.length,prop;i;)prop=props[--i],event[prop]=oe[prop];if(t.search(/mouse(down|up)|click/)>-1&&!event.which&&(event.which=1),t.search(/^touch/)!==-1&&(ne=getNativeEvent(oe),t=ne.touches,ct=ne.changedTouches,touch=t&&t.length?t[0]:ct&&ct.length?ct[0]:undefined))for(j=0,len=touchEventProps.length;j<len;j++)prop=touchEventProps[j],event[prop]=touch[prop];return event}function getVirtualBindingFlags(element){for(var b,k,flags={};element;){b=$.data(element,dataPropertyName);for(k in b)b[k]&&(flags[k]=flags.hasVirtualBinding=!0);element=element.parentNode}return flags}function getClosestElementWithVirtualBinding(element,eventType){for(var b;element;){if(b=$.data(element,dataPropertyName),b&&(!eventType||b[eventType]))return element;element=element.parentNode}return null}function enableTouchBindings(){blockTouchTriggers=!1}function disableTouchBindings(){blockTouchTriggers=!0}function enableMouseBindings(){lastTouchID=0,clickBlockList.length=0,blockMouseTriggers=!1,disableTouchBindings()}function disableMouseBindings(){enableTouchBindings()}function startResetTimer(){clearResetTimer(),resetTimerID=setTimeout(function(){resetTimerID=0,enableMouseBindings()},$.vmouse.resetTimerDuration)}function clearResetTimer(){resetTimerID&&(clearTimeout(resetTimerID),resetTimerID=0)}function triggerVirtualEvent(eventType,event,flags){var ve;return(flags&&flags[eventType]||!flags&&getClosestElementWithVirtualBinding(event.target,eventType))&&(ve=createVirtualEvent(event,eventType),$(event.target).trigger(ve)),ve}function mouseEventCallback(event){var ve,touchID=$.data(event.target,touchTargetPropertyName);blockMouseTriggers||lastTouchID&&lastTouchID===touchID||(ve=triggerVirtualEvent("v"+event.type,event),ve&&(ve.isDefaultPrevented()&&event.preventDefault(),ve.isPropagationStopped()&&event.stopPropagation(),ve.isImmediatePropagationStopped()&&event.stopImmediatePropagation()))}function handleTouchStart(event){var target,flags,t,touches=getNativeEvent(event).touches;touches&&1===touches.length&&(target=event.target,flags=getVirtualBindingFlags(target),flags.hasVirtualBinding&&(lastTouchID=nextTouchID++,$.data(target,touchTargetPropertyName,lastTouchID),clearResetTimer(),disableMouseBindings(),didScroll=!1,t=getNativeEvent(event).touches[0],startX=t.pageX,startY=t.pageY,triggerVirtualEvent("vmouseover",event,flags),triggerVirtualEvent("vmousedown",event,flags)))}function handleScroll(event){blockTouchTriggers||(didScroll||triggerVirtualEvent("vmousecancel",event,getVirtualBindingFlags(event.target)),didScroll=!0,startResetTimer())}function handleTouchMove(event){if(!blockTouchTriggers){var t=getNativeEvent(event).touches[0],didCancel=didScroll,moveThreshold=$.vmouse.moveDistanceThreshold,flags=getVirtualBindingFlags(event.target);didScroll=didScroll||Math.abs(t.pageX-startX)>moveThreshold||Math.abs(t.pageY-startY)>moveThreshold,didScroll&&!didCancel&&triggerVirtualEvent("vmousecancel",event,flags),triggerVirtualEvent("vmousemove",event,flags),startResetTimer()}}function handleTouchEnd(event){if(!blockTouchTriggers){disableTouchBindings();var ve,t,flags=getVirtualBindingFlags(event.target);triggerVirtualEvent("vmouseup",event,flags),didScroll||(ve=triggerVirtualEvent("vclick",event,flags),ve&&ve.isDefaultPrevented()&&(t=getNativeEvent(event).changedTouches[0],clickBlockList.push({touchID:lastTouchID,x:t.clientX,y:t.clientY}),blockMouseTriggers=!0)),triggerVirtualEvent("vmouseout",event,flags),didScroll=!1,startResetTimer()}}function hasVirtualBindings(ele){var k,bindings=$.data(ele,dataPropertyName);if(bindings)for(k in bindings)if(bindings[k])return!0;return!1}function dummyMouseHandler(){}function getSpecialEventObject(eventType){var realType=eventType.substr(1);return{setup:function(){hasVirtualBindings(this)||$.data(this,dataPropertyName,{});var bindings=$.data(this,dataPropertyName);bindings[eventType]=!0,activeDocHandlers[eventType]=(activeDocHandlers[eventType]||0)+1,1===activeDocHandlers[eventType]&&$document.bind(realType,mouseEventCallback),$(this).bind(realType,dummyMouseHandler),eventCaptureSupported&&(activeDocHandlers.touchstart=(activeDocHandlers.touchstart||0)+1,1===activeDocHandlers.touchstart&&$document.bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd).bind("touchmove",handleTouchMove).bind("scroll",handleScroll))},teardown:function(){--activeDocHandlers[eventType],activeDocHandlers[eventType]||$document.unbind(realType,mouseEventCallback),eventCaptureSupported&&(--activeDocHandlers.touchstart,activeDocHandlers.touchstart||$document.unbind("touchstart",handleTouchStart).unbind("touchmove",handleTouchMove).unbind("touchend",handleTouchEnd).unbind("scroll",handleScroll));var $this=$(this),bindings=$.data(this,dataPropertyName);bindings&&(bindings[eventType]=!1),$this.unbind(realType,dummyMouseHandler),hasVirtualBindings(this)||$this.removeData(dataPropertyName)}}}var threshold,i,dataPropertyName="virtualMouseBindings",touchTargetPropertyName="virtualTouchID",virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],mouseEventProps=$.event.props.concat(mouseHookProps),activeDocHandlers={},resetTimerID=0,startX=0,startY=0,didScroll=!1,clickBlockList=[],blockMouseTriggers=!1,blockTouchTriggers=!1,eventCaptureSupported="addEventListener"in document,$document=$(document),nextTouchID=1,lastTouchID=0;for($.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<virtualEventNames.length;i++)$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]);eventCaptureSupported&&document.addEventListener("click",function(e){var x,y,ele,i,o,touchID,cnt=clickBlockList.length,target=e.target;if(cnt)for(x=e.clientX,y=e.clientY,threshold=$.vmouse.clickDistanceThreshold,ele=target;ele;){for(i=0;i<cnt;i++)if(o=clickBlockList[i],touchID=0,ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold||$.data(ele,touchTargetPropertyName)===o.touchID)return e.preventDefault(),void e.stopPropagation();ele=ele.parentNode}},!0)}(jQuery,window,document),function($){$.mobile={}}(jQuery),function($,undefined){var support={touch:"ontouchend"in document};$.mobile.support=$.mobile.support||{},$.extend($.support,support),$.extend($.mobile.support,support)}(jQuery),function($,window,undefined){function triggerCustomEvent(obj,eventType,event,bubble){var originalType=event.type;event.type=eventType,bubble?$.event.trigger(event,undefined,obj):$.event.dispatch.call(obj,event),event.type=originalType}var $document=$(document),supportTouch=$.mobile.support.touch,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove";$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(i,name){$.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)},$.attrFn&&($.attrFn[name]=!0)}),$.event.special.scrollstart={enabled:!0,setup:function(){function trigger(event,state){scrolling=state,triggerCustomEvent(thisObject,scrolling?"scrollstart":"scrollstop",event)}var scrolling,timer,thisObject=this,$this=$(thisObject);$this.bind(scrollEvent,function(event){$.event.special.scrollstart.enabled&&(scrolling||trigger(event,!0),clearTimeout(timer),timer=setTimeout(function(){trigger(event,!1)},50))})},teardown:function(){$(this).unbind(scrollEvent)}},$.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var thisObject=this,$this=$(thisObject),isTaphold=!1;$this.bind("vmousedown",function(event){function clearTapTimer(){clearTimeout(timer)}function clearTapHandlers(){clearTapTimer(),$this.unbind("vclick",clickHandler).unbind("vmouseup",clearTapTimer),$document.unbind("vmousecancel",clearTapHandlers)}function clickHandler(event){clearTapHandlers(),isTaphold||origTarget!==event.target?isTaphold&&event.preventDefault():triggerCustomEvent(thisObject,"tap",event)}if(isTaphold=!1,event.which&&1!==event.which)return!1;var timer,origTarget=event.target;$this.bind("vmouseup",clearTapTimer).bind("vclick",clickHandler),$document.bind("vmousecancel",clearTapHandlers),timer=setTimeout(function(){$.event.special.tap.emitTapOnTaphold||(isTaphold=!0),triggerCustomEvent(thisObject,"taphold",$.Event("taphold",{target:origTarget}))},$.event.special.tap.tapholdThreshold)})},teardown:function(){$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),$document.unbind("vmousecancel")}},$.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(event){var winPageX=window.pageXOffset,winPageY=window.pageYOffset,x=event.clientX,y=event.clientY;return 0===event.pageY&&Math.floor(y)>Math.floor(event.pageY)||0===event.pageX&&Math.floor(x)>Math.floor(event.pageX)?(x-=winPageX,y-=winPageY):(y<event.pageY-winPageY||x<event.pageX-winPageX)&&(x=event.pageX-winPageX,y=event.pageY-winPageY),{x:x,y:y}},start:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y],origin:$(event.target)}},stop:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y]}},handleSwipe:function(start,stop,thisObject,origTarget){if(stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold){var direction=start.coords[0]>stop.coords[0]?"swipeleft":"swiperight";return triggerCustomEvent(thisObject,"swipe",$.Event("swipe",{target:origTarget,swipestart:start,swipestop:stop}),!0),triggerCustomEvent(thisObject,direction,$.Event(direction,{target:origTarget,swipestart:start,swipestop:stop}),!0),!0}return!1},eventInProgress:!1,setup:function(){var events,thisObject=this,$this=$(thisObject),context={};events=$.data(this,"mobile-events"),events||(events={length:0},$.data(this,"mobile-events",events)),events.length++,events.swipe=context,context.start=function(event){if(!$.event.special.swipe.eventInProgress){$.event.special.swipe.eventInProgress=!0;var stop,start=$.event.special.swipe.start(event),origTarget=event.target,emitted=!1;context.move=function(event){start&&!event.isDefaultPrevented()&&(stop=$.event.special.swipe.stop(event),emitted||(emitted=$.event.special.swipe.handleSwipe(start,stop,thisObject,origTarget),emitted&&($.event.special.swipe.eventInProgress=!1)),Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold&&event.preventDefault())},context.stop=function(){emitted=!0,$.event.special.swipe.eventInProgress=!1,$document.off(touchMoveEvent,context.move),context.move=null},$document.on(touchMoveEvent,context.move).one(touchStopEvent,context.stop)}},$this.on(touchStartEvent,context.start)},teardown:function(){var events,context;events=$.data(this,"mobile-events"),events&&(context=events.swipe,delete events.swipe,events.length--,0===events.length&&$.removeData(this,"mobile-events")),context&&(context.start&&$(this).off(touchStartEvent,context.start),context.move&&$document.off(touchMoveEvent,context.move),context.stop&&$document.off(touchStopEvent,context.stop))}},$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,$.noop)},teardown:function(){$(this).unbind(sourceEvent)}}})}(jQuery,this)}),function(root,factory){"use strict";"object"==typeof module&&module.exports?module.exports=factory():"function"==typeof define&&define.amd?define("next_uri_ipv6",factory):root.IPv6=factory(root);
}(this,function(root){"use strict";function bestPresentation(address){var _address=address.toLowerCase(),segments=_address.split(":"),length=segments.length,total=8;""===segments[0]&&""===segments[1]&&""===segments[2]?(segments.shift(),segments.shift()):""===segments[0]&&""===segments[1]?segments.shift():""===segments[length-1]&&""===segments[length-2]&&segments.pop(),length=segments.length,segments[length-1].indexOf(".")!==-1&&(total=7);var pos;for(pos=0;pos<length&&""!==segments[pos];pos++);if(pos<total)for(segments.splice(pos,1,"0000");segments.length<total;)segments.splice(pos,0,"0000");for(var _segments,i=0;i<total;i++){_segments=segments[i].split("");for(var j=0;j<3&&("0"===_segments[0]&&_segments.length>1);j++)_segments.splice(0,1);segments[i]=_segments.join("")}var best=-1,_best=0,_current=0,current=-1,inzeroes=!1;for(i=0;i<total;i++)inzeroes?"0"===segments[i]?_current+=1:(inzeroes=!1,_current>_best&&(best=current,_best=_current)):"0"===segments[i]&&(inzeroes=!0,current=i,_current=1);_current>_best&&(best=current,_best=_current),_best>1&&segments.splice(best,_best,""),length=segments.length;var result="";for(""===segments[0]&&(result=":"),i=0;i<length&&(result+=segments[i],i!==length-1);i++)result+=":";return""===segments[length-1]&&(result+=":"),result}function noConflict(){return root.IPv6===this&&(root.IPv6=_IPv6),this}var _IPv6=root&&root.IPv6;return{best:bestPresentation,noConflict:noConflict}}),function(root){function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";parts.length>1&&(result=parts[0]+"@",string=parts[1]),string=string.replace(regexSeparators,".");var labels=string.split("."),encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)value=string.charCodeAt(counter++),value>=55296&&value<=56319&&counter<length?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function basicToDigit(codePoint){return codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for(basic=input.lastIndexOf(delimiter),basic<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;index>=inputLength&&error("invalid-input"),digit=basicToDigit(input.charCodeAt(index++)),(digit>=base||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(digit<t);k+=base)baseMinusT=base-t,w>floor(maxInt/baseMinusT)&&error("overflow"),w*=baseMinusT;out=output.length+1,bias=adapt(i-oldi,out,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(input=ucs2decode(input),inputLength=input.length,n=initialN,delta=0,bias=initialBias,j=0;j<inputLength;++j)currentValue=input[j],currentValue<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)currentValue=input[j],currentValue>=n&&currentValue<m&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((maxInt-delta)/handledCPCountPlusOne)&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if(currentValue=input[j],currentValue<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(q<t);k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule="object"==typeof module&&module&&!module.nodeType&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var punycode,key,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;if(punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return punycode});else if(freeExports&&freeModule)if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode}(this),function(root,factory){"use strict";"object"==typeof module&&module.exports?module.exports=factory():"function"==typeof define&&define.amd?define("next_uri_scndlvl",factory):root.SecondLevelDomains=factory(root)}(this,function(root){"use strict";var _SecondLevelDomains=root&&root.SecondLevelDomains,SLD={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||sldOffset>=tldOffset-1)return!1;var sldList=SLD.list[domain.slice(tldOffset+1)];return!!sldList&&sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")>=0},is:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset>=0)return!1;var sldList=SLD.list[domain.slice(tldOffset+1)];return!!sldList&&sldList.indexOf(" "+domain.slice(0,tldOffset)+" ")>=0},get:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return null;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||sldOffset>=tldOffset-1)return null;var sldList=SLD.list[domain.slice(tldOffset+1)];return sldList?sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")<0?null:domain.slice(sldOffset+1):null},noConflict:function(){return root.SecondLevelDomains===this&&(root.SecondLevelDomains=_SecondLevelDomains),this}};return SLD}),function(root,factory){"use strict";"object"==typeof module&&module.exports?module.exports=factory(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("next_uri",["./punycode","./IPv6","./SecondLevelDomains"],factory):root.URI=factory(root.punycode,root.IPv6,root.SecondLevelDomains,root)}(this,function(punycode,IPv6,SLD,root){"use strict";function URI(url,base){var _urlSupplied=arguments.length>=1,_baseSupplied=arguments.length>=2;if(!(this instanceof URI))return _urlSupplied?_baseSupplied?new URI(url,base):new URI(url):new URI;if(void 0===url){if(_urlSupplied)throw new TypeError("undefined is not a valid argument for URI");url="undefined"!=typeof location?location.href+"":""}return this.href(url),void 0!==base?this.absoluteTo(base):this}function escapeRegEx(string){return string.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function getType(value){return void 0===value?"Undefined":String(Object.prototype.toString.call(value)).slice(8,-1)}function isArray(obj){return"Array"===getType(obj)}function filterArrayValues(data,value){var i,length,lookup={};if("RegExp"===getType(value))lookup=null;else if(isArray(value))for(i=0,length=value.length;i<length;i++)lookup[value[i]]=!0;else lookup[value]=!0;for(i=0,length=data.length;i<length;i++){var _match=lookup&&void 0!==lookup[data[i]]||!lookup&&value.test(data[i]);_match&&(data.splice(i,1),length--,i--)}return data}function arrayContains(list,value){var i,length;if(isArray(value)){for(i=0,length=value.length;i<length;i++)if(!arrayContains(list,value[i]))return!1;return!0}var _type=getType(value);for(i=0,length=list.length;i<length;i++)if("RegExp"===_type){if("string"==typeof list[i]&&list[i].match(value))return!0}else if(list[i]===value)return!0;return!1}function arraysEqual(one,two){if(!isArray(one)||!isArray(two))return!1;if(one.length!==two.length)return!1;one.sort(),two.sort();for(var i=0,l=one.length;i<l;i++)if(one[i]!==two[i])return!1;return!0}function trimSlashes(text){var trim_expression=/^\/+|\/+$/g;return text.replace(trim_expression,"")}function escapeForDumbFirefox36(value){return escape(value)}function strictEncodeURIComponent(string){return encodeURIComponent(string).replace(/[!'()*]/g,escapeForDumbFirefox36).replace(/\*/g,"%2A")}function generateSimpleAccessor(_part){return function(v,build){return void 0===v?this._parts[_part]||"":(this._parts[_part]=v||null,this.build(!build),this)}}function generatePrefixAccessor(_part,_key){return function(v,build){return void 0===v?this._parts[_part]||"":(null!==v&&(v+="",v.charAt(0)===_key&&(v=v.substring(1))),this._parts[_part]=v,this.build(!build),this)}}var _URI=root&&root.URI;URI.version="1.18.4";var p=URI.prototype,hasOwn=Object.prototype.hasOwnProperty;URI._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:URI.duplicateQueryParameters,escapeQuerySpace:URI.escapeQuerySpace}},URI.duplicateQueryParameters=!1,URI.escapeQuerySpace=!0,URI.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,URI.idn_expression=/[^a-z0-9\.-]/i,URI.punycode_expression=/(xn--)/i,URI.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,URI.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,URI.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,URI.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},URI.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},URI.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,URI.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},URI.getDomAttribute=function(node){if(node&&node.nodeName){var nodeName=node.nodeName.toLowerCase();if("input"!==nodeName||"image"===node.type)return URI.domAttributes[nodeName]}},URI.encode=strictEncodeURIComponent,URI.decode=decodeURIComponent,URI.iso8859=function(){URI.encode=escape,URI.decode=unescape},URI.unicode=function(){URI.encode=strictEncodeURIComponent,URI.decode=decodeURIComponent},URI.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},URI.encodeQuery=function(string,escapeQuerySpace){var escaped=URI.encode(string+"");return void 0===escapeQuerySpace&&(escapeQuerySpace=URI.escapeQuerySpace),escapeQuerySpace?escaped.replace(/%20/g,"+"):escaped},URI.decodeQuery=function(string,escapeQuerySpace){string+="",void 0===escapeQuerySpace&&(escapeQuerySpace=URI.escapeQuerySpace);try{return URI.decode(escapeQuerySpace?string.replace(/\+/g,"%20"):string)}catch(e){return string}};var _part,_parts={encode:"encode",decode:"decode"},generateAccessor=function(_group,_part){return function(string){try{return URI[_part](string+"").replace(URI.characters[_group][_part].expression,function(c){return URI.characters[_group][_part].map[c]})}catch(e){return string}}};for(_part in _parts)URI[_part+"PathSegment"]=generateAccessor("pathname",_parts[_part]),URI[_part+"UrnPathSegment"]=generateAccessor("urnpath",_parts[_part]);var generateSegmentedPathFunction=function(_sep,_codingFuncName,_innerCodingFuncName){return function(string){var actualCodingFunc;actualCodingFunc=_innerCodingFuncName?function(string){return URI[_codingFuncName](URI[_innerCodingFuncName](string))}:URI[_codingFuncName];for(var segments=(string+"").split(_sep),i=0,length=segments.length;i<length;i++)segments[i]=actualCodingFunc(segments[i]);return segments.join(_sep)}};URI.decodePath=generateSegmentedPathFunction("/","decodePathSegment"),URI.decodeUrnPath=generateSegmentedPathFunction(":","decodeUrnPathSegment"),URI.recodePath=generateSegmentedPathFunction("/","encodePathSegment","decode"),URI.recodeUrnPath=generateSegmentedPathFunction(":","encodeUrnPathSegment","decode"),URI.encodeReserved=generateAccessor("reserved","encode"),URI.parse=function(string,parts){var pos;return parts||(parts={}),pos=string.indexOf("#"),pos>-1&&(parts.fragment=string.substring(pos+1)||null,string=string.substring(0,pos)),pos=string.indexOf("?"),pos>-1&&(parts.query=string.substring(pos+1)||null,string=string.substring(0,pos)),"//"===string.substring(0,2)?(parts.protocol=null,string=string.substring(2),string=URI.parseAuthority(string,parts)):(pos=string.indexOf(":"),pos>-1&&(parts.protocol=string.substring(0,pos)||null,parts.protocol&&!parts.protocol.match(URI.protocol_expression)?parts.protocol=void 0:"//"===string.substring(pos+1,pos+3)?(string=string.substring(pos+3),string=URI.parseAuthority(string,parts)):(string=string.substring(pos+1),parts.urn=!0))),parts.path=string,parts},URI.parseHost=function(string,parts){string=string.replace(/\\/g,"/");var bracketPos,t,pos=string.indexOf("/");if(pos===-1&&(pos=string.length),"["===string.charAt(0))bracketPos=string.indexOf("]"),parts.hostname=string.substring(1,bracketPos)||null,parts.port=string.substring(bracketPos+2,pos)||null,"/"===parts.port&&(parts.port=null);else{var firstColon=string.indexOf(":"),firstSlash=string.indexOf("/"),nextColon=string.indexOf(":",firstColon+1);nextColon!==-1&&(firstSlash===-1||nextColon<firstSlash)?(parts.hostname=string.substring(0,pos)||null,parts.port=null):(t=string.substring(0,pos).split(":"),parts.hostname=t[0]||null,parts.port=t[1]||null)}return parts.hostname&&"/"!==string.substring(pos).charAt(0)&&(pos++,string="/"+string),string.substring(pos)||"/"},URI.parseAuthority=function(string,parts){return string=URI.parseUserinfo(string,parts),URI.parseHost(string,parts)},URI.parseUserinfo=function(string,parts){var t,firstSlash=string.indexOf("/"),pos=string.lastIndexOf("@",firstSlash>-1?firstSlash:string.length-1);return pos>-1&&(firstSlash===-1||pos<firstSlash)?(t=string.substring(0,pos).split(":"),parts.username=t[0]?URI.decode(t[0]):null,t.shift(),parts.password=t[0]?URI.decode(t.join(":")):null,string=string.substring(pos+1)):(parts.username=null,parts.password=null),string},URI.parseQuery=function(string,escapeQuerySpace){if(!string)return{};if(string=string.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!string)return{};for(var v,name,value,items={},splits=string.split("&"),length=splits.length,i=0;i<length;i++)v=splits[i].split("="),name=URI.decodeQuery(v.shift(),escapeQuerySpace),value=v.length?URI.decodeQuery(v.join("="),escapeQuerySpace):null,hasOwn.call(items,name)?("string"!=typeof items[name]&&null!==items[name]||(items[name]=[items[name]]),items[name].push(value)):items[name]=value;return items},URI.build=function(parts){var t="";return parts.protocol&&(t+=parts.protocol+":"),parts.urn||!t&&!parts.hostname||(t+="//"),t+=URI.buildAuthority(parts)||"","string"==typeof parts.path&&("/"!==parts.path.charAt(0)&&"string"==typeof parts.hostname&&(t+="/"),t+=parts.path),"string"==typeof parts.query&&parts.query&&(t+="?"+parts.query),"string"==typeof parts.fragment&&parts.fragment&&(t+="#"+parts.fragment),t},URI.buildHost=function(parts){var t="";return parts.hostname?(t+=URI.ip6_expression.test(parts.hostname)?"["+parts.hostname+"]":parts.hostname,parts.port&&(t+=":"+parts.port),t):""},URI.buildAuthority=function(parts){return URI.buildUserinfo(parts)+URI.buildHost(parts)},URI.buildUserinfo=function(parts){var t="";return parts.username&&(t+=URI.encode(parts.username)),parts.password&&(t+=":"+URI.encode(parts.password)),t&&(t+="@"),t},URI.buildQuery=function(data,duplicateQueryParameters,escapeQuerySpace){var unique,key,i,length,t="";for(key in data)if(hasOwn.call(data,key)&&key)if(isArray(data[key]))for(unique={},i=0,length=data[key].length;i<length;i++)void 0!==data[key][i]&&void 0===unique[data[key][i]+""]&&(t+="&"+URI.buildQueryParameter(key,data[key][i],escapeQuerySpace),duplicateQueryParameters!==!0&&(unique[data[key][i]+""]=!0));else void 0!==data[key]&&(t+="&"+URI.buildQueryParameter(key,data[key],escapeQuerySpace));return t.substring(1)},URI.buildQueryParameter=function(name,value,escapeQuerySpace){return URI.encodeQuery(name,escapeQuerySpace)+(null!==value?"="+URI.encodeQuery(value,escapeQuerySpace):"")},URI.addQuery=function(data,name,value){if("object"==typeof name)for(var key in name)hasOwn.call(name,key)&&URI.addQuery(data,key,name[key]);else{if("string"!=typeof name)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===data[name])return void(data[name]=value);"string"==typeof data[name]&&(data[name]=[data[name]]),isArray(value)||(value=[value]),data[name]=(data[name]||[]).concat(value)}},URI.removeQuery=function(data,name,value){var i,length,key;if(isArray(name))for(i=0,length=name.length;i<length;i++)data[name[i]]=void 0;else if("RegExp"===getType(name))for(key in data)name.test(key)&&(data[key]=void 0);else if("object"==typeof name)for(key in name)hasOwn.call(name,key)&&URI.removeQuery(data,key,name[key]);else{if("string"!=typeof name)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==value?"RegExp"===getType(value)?!isArray(data[name])&&value.test(data[name])?data[name]=void 0:data[name]=filterArrayValues(data[name],value):data[name]!==String(value)||isArray(value)&&1!==value.length?isArray(data[name])&&(data[name]=filterArrayValues(data[name],value)):data[name]=void 0:data[name]=void 0}},URI.hasQuery=function(data,name,value,withinArray){switch(getType(name)){case"String":break;case"RegExp":for(var key in data)if(hasOwn.call(data,key)&&name.test(key)&&(void 0===value||URI.hasQuery(data,key,value)))return!0;return!1;case"Object":for(var _key in name)if(hasOwn.call(name,_key)&&!URI.hasQuery(data,_key,name[_key]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(getType(value)){case"Undefined":return name in data;case"Boolean":var _booly=Boolean(isArray(data[name])?data[name].length:data[name]);return value===_booly;case"Function":return!!value(data[name],name,data);case"Array":if(!isArray(data[name]))return!1;var op=withinArray?arrayContains:arraysEqual;return op(data[name],value);case"RegExp":return isArray(data[name])?!!withinArray&&arrayContains(data[name],value):Boolean(data[name]&&data[name].match(value));case"Number":value=String(value);case"String":return isArray(data[name])?!!withinArray&&arrayContains(data[name],value):data[name]===value;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},URI.joinPaths=function(){for(var input=[],segments=[],nonEmptySegments=0,i=0;i<arguments.length;i++){var url=new URI(arguments[i]);input.push(url);for(var _segments=url.segment(),s=0;s<_segments.length;s++)"string"==typeof _segments[s]&&segments.push(_segments[s]),_segments[s]&&nonEmptySegments++}if(!segments.length||!nonEmptySegments)return new URI("");var uri=new URI("").segment(segments);return""!==input[0].path()&&"/"!==input[0].path().slice(0,1)||uri.path("/"+uri.path()),uri.normalize()},URI.commonPath=function(one,two){var pos,length=Math.min(one.length,two.length);for(pos=0;pos<length;pos++)if(one.charAt(pos)!==two.charAt(pos)){pos--;break}return pos<1?one.charAt(0)===two.charAt(0)&&"/"===one.charAt(0)?"/":"":("/"===one.charAt(pos)&&"/"===two.charAt(pos)||(pos=one.substring(0,pos).lastIndexOf("/")),one.substring(0,pos+1))},URI.withinString=function(string,callback,options){options||(options={});var _start=options.start||URI.findUri.start,_end=options.end||URI.findUri.end,_trim=options.trim||URI.findUri.trim,_parens=options.parens||URI.findUri.parens,_attributeOpen=/[a-z0-9-]=["']?$/i;for(_start.lastIndex=0;;){var match=_start.exec(string);if(!match)break;var start=match.index;if(options.ignoreHtml){var attributeOpen=string.slice(Math.max(start-3,0),start);if(attributeOpen&&_attributeOpen.test(attributeOpen))continue}for(var end=start+string.slice(start).search(_end),slice=string.slice(start,end),parensEnd=-1;;){var parensMatch=_parens.exec(slice);if(!parensMatch)break;var parensMatchEnd=parensMatch.index+parensMatch[0].length;parensEnd=Math.max(parensEnd,parensMatchEnd)}if(slice=parensEnd>-1?slice.slice(0,parensEnd)+slice.slice(parensEnd+1).replace(_trim,""):slice.replace(_trim,""),!options.ignore||!options.ignore.test(slice)){end=start+slice.length;var result=callback(slice,start,end,string);void 0!==result?(result=String(result),string=string.slice(0,start)+result+string.slice(end),_start.lastIndex=start+result.length):_start.lastIndex=end}}return _start.lastIndex=0,string},URI.ensureValidHostname=function(v){if(v.match(URI.invalid_hostname_characters)){if(!punycode)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(punycode.toASCII(v).match(URI.invalid_hostname_characters))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');
}},URI.noConflict=function(removeAll){if(removeAll){var unconflicted={URI:this.noConflict()};return root.URITemplate&&"function"==typeof root.URITemplate.noConflict&&(unconflicted.URITemplate=root.URITemplate.noConflict()),root.IPv6&&"function"==typeof root.IPv6.noConflict&&(unconflicted.IPv6=root.IPv6.noConflict()),root.SecondLevelDomains&&"function"==typeof root.SecondLevelDomains.noConflict&&(unconflicted.SecondLevelDomains=root.SecondLevelDomains.noConflict()),unconflicted}return root.URI===this&&(root.URI=_URI),this},p.build=function(deferBuild){return deferBuild===!0?this._deferred_build=!0:(void 0===deferBuild||this._deferred_build)&&(this._string=URI.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new URI(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},p.protocol=generateSimpleAccessor("protocol"),p.username=generateSimpleAccessor("username"),p.password=generateSimpleAccessor("password"),p.hostname=generateSimpleAccessor("hostname"),p.port=generateSimpleAccessor("port"),p.query=generatePrefixAccessor("query","?"),p.fragment=generatePrefixAccessor("fragment","#"),p.search=function(v,build){var t=this.query(v,build);return"string"==typeof t&&t.length?"?"+t:t},p.hash=function(v,build){var t=this.fragment(v,build);return"string"==typeof t&&t.length?"#"+t:t},p.pathname=function(v,build){if(void 0===v||v===!0){var res=this._parts.path||(this._parts.hostname?"/":"");return v?(this._parts.urn?URI.decodeUrnPath:URI.decodePath)(res):res}return this._parts.urn?this._parts.path=v?URI.recodeUrnPath(v):"":this._parts.path=v?URI.recodePath(v):"/",this.build(!build),this},p.path=p.pathname,p.href=function(href,build){var key;if(void 0===href)return this.toString();this._string="",this._parts=URI._parts();var _URI=href instanceof URI,_object="object"==typeof href&&(href.hostname||href.path||href.pathname);if(href.nodeName){var attribute=URI.getDomAttribute(href);href=href[attribute]||"",_object=!1}if(!_URI&&_object&&void 0!==href.pathname&&(href=href.toString()),"string"==typeof href||href instanceof String)this._parts=URI.parse(String(href),this._parts);else{if(!_URI&&!_object)throw new TypeError("invalid input");var src=_URI?href._parts:href;for(key in src)hasOwn.call(this._parts,key)&&(this._parts[key]=src[key])}return this.build(!build),this},p.is=function(what){var ip=!1,ip4=!1,ip6=!1,name=!1,sld=!1,idn=!1,punycode=!1,relative=!this._parts.urn;switch(this._parts.hostname&&(relative=!1,ip4=URI.ip4_expression.test(this._parts.hostname),ip6=URI.ip6_expression.test(this._parts.hostname),ip=ip4||ip6,name=!ip,sld=name&&SLD&&SLD.has(this._parts.hostname),idn=name&&URI.idn_expression.test(this._parts.hostname),punycode=name&&URI.punycode_expression.test(this._parts.hostname)),what.toLowerCase()){case"relative":return relative;case"absolute":return!relative;case"domain":case"name":return name;case"sld":return sld;case"ip":return ip;case"ip4":case"ipv4":case"inet4":return ip4;case"ip6":case"ipv6":case"inet6":return ip6;case"idn":return idn;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return punycode}return null};var _protocol=p.protocol,_port=p.port,_hostname=p.hostname;p.protocol=function(v,build){if(void 0!==v&&v&&(v=v.replace(/:(\/\/)?$/,""),!v.match(URI.protocol_expression)))throw new TypeError('Protocol "'+v+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _protocol.call(this,v,build)},p.scheme=p.protocol,p.port=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0!==v&&(0===v&&(v=null),v&&(v+="",":"===v.charAt(0)&&(v=v.substring(1)),v.match(/[^0-9]/))))throw new TypeError('Port "'+v+'" contains characters other than [0-9]');return _port.call(this,v,build)},p.hostname=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0!==v){var x={},res=URI.parseHost(v,x);if("/"!==res)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');v=x.hostname}return _hostname.call(this,v,build)},p.origin=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){var protocol=this.protocol(),authority=this.authority();return authority?(protocol?protocol+"://":"")+this.authority():""}var origin=URI(v);return this.protocol(origin.protocol()).authority(origin.authority()).build(!build),this},p.host=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v)return this._parts.hostname?URI.buildHost(this._parts):"";var res=URI.parseHost(v,this._parts);if("/"!==res)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!build),this},p.authority=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v)return this._parts.hostname?URI.buildAuthority(this._parts):"";var res=URI.parseAuthority(v,this._parts);if("/"!==res)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!build),this},p.userinfo=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){var t=URI.buildUserinfo(this._parts);return t?t.substring(0,t.length-1):t}return"@"!==v[v.length-1]&&(v+="@"),URI.parseUserinfo(v,this._parts),this.build(!build),this},p.resource=function(v,build){var parts;return void 0===v?this.path()+this.search()+this.hash():(parts=URI.parse(v),this._parts.path=parts.path,this._parts.query=parts.query,this._parts.fragment=parts.fragment,this.build(!build),this)},p.subdomain=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var end=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,end)||""}var e=this._parts.hostname.length-this.domain().length,sub=this._parts.hostname.substring(0,e),replace=new RegExp("^"+escapeRegEx(sub));return v&&"."!==v.charAt(v.length-1)&&(v+="."),v&&URI.ensureValidHostname(v),this._parts.hostname=this._parts.hostname.replace(replace,v),this.build(!build),this},p.domain=function(v,build){if(this._parts.urn)return void 0===v?"":this;if("boolean"==typeof v&&(build=v,v=void 0),void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var t=this._parts.hostname.match(/\./g);if(t&&t.length<2)return this._parts.hostname;var end=this._parts.hostname.length-this.tld(build).length-1;return end=this._parts.hostname.lastIndexOf(".",end-1)+1,this._parts.hostname.substring(end)||""}if(!v)throw new TypeError("cannot set domain empty");if(URI.ensureValidHostname(v),!this._parts.hostname||this.is("IP"))this._parts.hostname=v;else{var replace=new RegExp(escapeRegEx(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(replace,v)}return this.build(!build),this},p.tld=function(v,build){if(this._parts.urn)return void 0===v?"":this;if("boolean"==typeof v&&(build=v,v=void 0),void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var pos=this._parts.hostname.lastIndexOf("."),tld=this._parts.hostname.substring(pos+1);return build!==!0&&SLD&&SLD.list[tld.toLowerCase()]?SLD.get(this._parts.hostname)||tld:tld}var replace;if(!v)throw new TypeError("cannot set TLD empty");if(v.match(/[^a-zA-Z0-9-]/)){if(!SLD||!SLD.is(v))throw new TypeError('TLD "'+v+'" contains characters other than [A-Z0-9]');replace=new RegExp(escapeRegEx(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(replace,v)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");replace=new RegExp(escapeRegEx(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(replace,v)}return this.build(!build),this},p.directory=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v||v===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var end=this._parts.path.length-this.filename().length-1,res=this._parts.path.substring(0,end)||(this._parts.hostname?"/":"");return v?URI.decodePath(res):res}var e=this._parts.path.length-this.filename().length,directory=this._parts.path.substring(0,e),replace=new RegExp("^"+escapeRegEx(directory));return this.is("relative")||(v||(v="/"),"/"!==v.charAt(0)&&(v="/"+v)),v&&"/"!==v.charAt(v.length-1)&&(v+="/"),v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v),this.build(!build),this},p.filename=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v||v===!0){if(!this._parts.path||"/"===this._parts.path)return"";var pos=this._parts.path.lastIndexOf("/"),res=this._parts.path.substring(pos+1);return v?URI.decodePathSegment(res):res}var mutatedDirectory=!1;"/"===v.charAt(0)&&(v=v.substring(1)),v.match(/\.?\//)&&(mutatedDirectory=!0);var replace=new RegExp(escapeRegEx(this.filename())+"$");return v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v),mutatedDirectory?this.normalizePath(build):this.build(!build),this},p.suffix=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v||v===!0){if(!this._parts.path||"/"===this._parts.path)return"";var s,res,filename=this.filename(),pos=filename.lastIndexOf(".");return pos===-1?"":(s=filename.substring(pos+1),res=/^[a-z0-9%]+$/i.test(s)?s:"",v?URI.decodePathSegment(res):res)}"."===v.charAt(0)&&(v=v.substring(1));var replace,suffix=this.suffix();if(suffix)replace=v?new RegExp(escapeRegEx(suffix)+"$"):new RegExp(escapeRegEx("."+suffix)+"$");else{if(!v)return this;this._parts.path+="."+URI.recodePath(v)}return replace&&(v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v)),this.build(!build),this},p.segment=function(segment,v,build){var separator=this._parts.urn?":":"/",path=this.path(),absolute="/"===path.substring(0,1),segments=path.split(separator);if(void 0!==segment&&"number"!=typeof segment&&(build=v,v=segment,segment=void 0),void 0!==segment&&"number"!=typeof segment)throw new Error('Bad segment "'+segment+'", must be 0-based integer');if(absolute&&segments.shift(),segment<0&&(segment=Math.max(segments.length+segment,0)),void 0===v)return void 0===segment?segments:segments[segment];if(null===segment||void 0===segments[segment])if(isArray(v)){segments=[];for(var i=0,l=v.length;i<l;i++)(v[i].length||segments.length&&segments[segments.length-1].length)&&(segments.length&&!segments[segments.length-1].length&&segments.pop(),segments.push(trimSlashes(v[i])))}else(v||"string"==typeof v)&&(v=trimSlashes(v),""===segments[segments.length-1]?segments[segments.length-1]=v:segments.push(v));else v?segments[segment]=trimSlashes(v):segments.splice(segment,1);return absolute&&segments.unshift(""),this.path(segments.join(separator),build)},p.segmentCoded=function(segment,v,build){var segments,i,l;if("number"!=typeof segment&&(build=v,v=segment,segment=void 0),void 0===v){if(segments=this.segment(segment,v,build),isArray(segments))for(i=0,l=segments.length;i<l;i++)segments[i]=URI.decode(segments[i]);else segments=void 0!==segments?URI.decode(segments):void 0;return segments}if(isArray(v))for(i=0,l=v.length;i<l;i++)v[i]=URI.encode(v[i]);else v="string"==typeof v||v instanceof String?URI.encode(v):v;return this.segment(segment,v,build)};var q=p.query;return p.query=function(v,build){if(v===!0)return URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof v){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace),result=v.call(this,data);return this._parts.query=URI.buildQuery(result||data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!build),this}return void 0!==v&&"string"!=typeof v?(this._parts.query=URI.buildQuery(v,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!build),this):q.call(this,v,build)},p.setQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof name||name instanceof String)data[name]=void 0!==value?value:null;else{if("object"!=typeof name)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var key in name)hasOwn.call(name,key)&&(data[key]=name[key])}return this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.addQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.addQuery(data,name,void 0===value?null:value),this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.removeQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.removeQuery(data,name,value),this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.hasQuery=function(name,value,withinArray){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.hasQuery(data,name,value,withinArray)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(build){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!build)),this},p.normalizeHostname=function(build){return this._parts.hostname&&(this.is("IDN")&&punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!build)),this},p.normalizePort=function(build){return"string"==typeof this._parts.protocol&&this._parts.port===URI.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!build)),this},p.normalizePath=function(build){var _path=this._parts.path;if(!_path)return this;if(this._parts.urn)return this._parts.path=URI.recodeUrnPath(this._parts.path),this.build(!build),this;if("/"===this._parts.path)return this;_path=URI.recodePath(_path);var _was_relative,_parent,_pos,_leadingParents="";for("/"!==_path.charAt(0)&&(_was_relative=!0,_path="/"+_path),"/.."!==_path.slice(-3)&&"/."!==_path.slice(-2)||(_path+="/"),_path=_path.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),_was_relative&&(_leadingParents=_path.substring(1).match(/^(\.\.\/)+/)||"",_leadingParents&&(_leadingParents=_leadingParents[0]));;){if(_parent=_path.search(/\/\.\.(\/|$)/),_parent===-1)break;0!==_parent?(_pos=_path.substring(0,_parent).lastIndexOf("/"),_pos===-1&&(_pos=_parent),_path=_path.substring(0,_pos)+_path.substring(_parent+3)):_path=_path.substring(3)}return _was_relative&&this.is("relative")&&(_path=_leadingParents+_path.substring(1)),this._parts.path=_path,this.build(!build),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(build){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!build)),this},p.normalizeFragment=function(build){return this._parts.fragment||(this._parts.fragment=null,this.build(!build)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var e=URI.encode,d=URI.decode;URI.encode=escape,URI.decode=decodeURIComponent;try{this.normalize()}finally{URI.encode=e,URI.decode=d}return this},p.unicode=function(){var e=URI.encode,d=URI.decode;URI.encode=strictEncodeURIComponent,URI.decode=unescape;try{this.normalize()}finally{URI.encode=e,URI.decode=d}return this},p.readable=function(){var uri=this.clone();uri.username("").password("").normalize();var t="";if(uri._parts.protocol&&(t+=uri._parts.protocol+"://"),uri._parts.hostname&&(uri.is("punycode")&&punycode?(t+=punycode.toUnicode(uri._parts.hostname),uri._parts.port&&(t+=":"+uri._parts.port)):t+=uri.host()),uri._parts.hostname&&uri._parts.path&&"/"!==uri._parts.path.charAt(0)&&(t+="/"),t+=uri.path(!0),uri._parts.query){for(var q="",i=0,qp=uri._parts.query.split("&"),l=qp.length;i<l;i++){var kv=(qp[i]||"").split("=");q+="&"+URI.decodeQuery(kv[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==kv[1]&&(q+="="+URI.decodeQuery(kv[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}t+="?"+q.substring(1)}return t+=URI.decodeQuery(uri.hash(),!0)},p.absoluteTo=function(base){var basedir,i,p,resolved=this.clone(),properties=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(base instanceof URI||(base=new URI(base)),resolved._parts.protocol||(resolved._parts.protocol=base._parts.protocol),this._parts.hostname)return resolved;for(i=0;p=properties[i];i++)resolved._parts[p]=base._parts[p];return resolved._parts.path?(".."===resolved._parts.path.substring(-2)&&(resolved._parts.path+="/"),"/"!==resolved.path().charAt(0)&&(basedir=base.directory(),basedir=basedir?basedir:0===base.path().indexOf("/")?"/":"",resolved._parts.path=(basedir?basedir+"/":"")+resolved._parts.path,resolved.normalizePath())):(resolved._parts.path=base._parts.path,resolved._parts.query||(resolved._parts.query=base._parts.query)),resolved.build(),resolved},p.relativeTo=function(base){var relativeParts,baseParts,common,relativePath,basePath,relative=this.clone().normalize();if(relative._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(base=new URI(base).normalize(),relativeParts=relative._parts,baseParts=base._parts,relativePath=relative.path(),basePath=base.path(),"/"!==relativePath.charAt(0))throw new Error("URI is already relative");if("/"!==basePath.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(relativeParts.protocol===baseParts.protocol&&(relativeParts.protocol=null),relativeParts.username!==baseParts.username||relativeParts.password!==baseParts.password)return relative.build();if(null!==relativeParts.protocol||null!==relativeParts.username||null!==relativeParts.password)return relative.build();if(relativeParts.hostname!==baseParts.hostname||relativeParts.port!==baseParts.port)return relative.build();if(relativeParts.hostname=null,relativeParts.port=null,relativePath===basePath)return relativeParts.path="",relative.build();if(common=URI.commonPath(relativePath,basePath),!common)return relative.build();var parents=baseParts.path.substring(common.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return relativeParts.path=parents+relativeParts.path.substring(common.length)||"./",relative.build()},p.equals=function(uri){var one_query,two_query,key,one=this.clone(),two=new URI(uri),one_map={},two_map={},checked={};if(one.normalize(),two.normalize(),one.toString()===two.toString())return!0;if(one_query=one.query(),two_query=two.query(),one.query(""),two.query(""),one.toString()!==two.toString())return!1;if(one_query.length!==two_query.length)return!1;one_map=URI.parseQuery(one_query,this._parts.escapeQuerySpace),two_map=URI.parseQuery(two_query,this._parts.escapeQuerySpace);for(key in one_map)if(hasOwn.call(one_map,key)){if(isArray(one_map[key])){if(!arraysEqual(one_map[key],two_map[key]))return!1}else if(one_map[key]!==two_map[key])return!1;checked[key]=!0}for(key in two_map)if(hasOwn.call(two_map,key)&&!checked[key])return!1;return!0},p.duplicateQueryParameters=function(v){return this._parts.duplicateQueryParameters=!!v,this},p.escapeQuerySpace=function(v){return this._parts.escapeQuerySpace=!!v,this},URI}),function(root,factory){"use strict";"object"==typeof module&&module.exports?module.exports=factory(require("./URI")):"function"==typeof define&&define.amd?define("next_uri_template",["./URI"],factory):root.URITemplate=factory(root.URI,root)}(this,function(URI,root){"use strict";function URITemplate(expression){return URITemplate._cache[expression]?URITemplate._cache[expression]:this instanceof URITemplate?(this.expression=expression,URITemplate._cache[expression]=this,this):new URITemplate(expression)}function Data(data){this.data=data,this.cache={}}var _URITemplate=root&&root.URITemplate,hasOwn=Object.prototype.hasOwnProperty,p=URITemplate.prototype,operators={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return URITemplate._cache={},URITemplate.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,URITemplate.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/,URITemplate.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/,URITemplate.LITERAL_PATTERN=/[<>{}'"`^| \\]/,URITemplate.expand=function(expression,data){var d,variable,i,options=operators[expression.operator],type=options.named?"Named":"Unnamed",variables=expression.variables,buffer=[];for(i=0;variable=variables[i];i++)if(d=data.get(variable.name),d.val.length){if(d.type>1&&variable.maxlength)throw new Error('Invalid expression: Prefix modifier not applicable to variable "'+variable.name+'"');buffer.push(URITemplate["expand"+type](d,options,variable.explode,variable.explode&&options.separator||",",variable.maxlength,variable.name))}else d.type&&buffer.push("");return buffer.length?options.prefix+buffer.join(options.separator):""},URITemplate.expandNamed=function(d,options,explode,separator,length,name){var _value,i,l,result="",encode=options.encode,empty_name_separator=options.empty_name_separator,_encode=!d[encode].length,_name=2===d.type?"":URI[encode](name);for(i=0,l=d.val.length;i<l;i++)length?(_value=URI[encode](d.val[i][1].substring(0,length)),2===d.type&&(_name=URI[encode](d.val[i][0].substring(0,length)))):_encode?(_value=URI[encode](d.val[i][1]),2===d.type?(_name=URI[encode](d.val[i][0]),d[encode].push([_name,_value])):d[encode].push([void 0,_value])):(_value=d[encode][i][1],2===d.type&&(_name=d[encode][i][0])),result&&(result+=separator),explode?result+=_name+(empty_name_separator||_value?"=":"")+_value:(i||(result+=URI[encode](name)+(empty_name_separator||_value?"=":"")),2===d.type&&(result+=_name+","),result+=_value);return result},URITemplate.expandUnnamed=function(d,options,explode,separator,length){var _name,_value,i,l,result="",encode=options.encode,empty_name_separator=options.empty_name_separator,_encode=!d[encode].length;for(i=0,l=d.val.length;i<l;i++)length?_value=URI[encode](d.val[i][1].substring(0,length)):_encode?(_value=URI[encode](d.val[i][1]),d[encode].push([2===d.type?URI[encode](d.val[i][0]):void 0,_value])):_value=d[encode][i][1],result&&(result+=separator),2===d.type&&(_name=length?URI[encode](d.val[i][0].substring(0,length)):d[encode][i][0],result+=_name,result+=explode?empty_name_separator||_value?"=":"":","),result+=_value;return result},URITemplate.noConflict=function(){return root.URITemplate===URITemplate&&(root.URITemplate=_URITemplate),URITemplate},p.expand=function(data){var result="";this.parts&&this.parts.length||this.parse(),data instanceof Data||(data=new Data(data));for(var i=0,l=this.parts.length;i<l;i++)result+="string"==typeof this.parts[i]?this.parts[i]:URITemplate.expand(this.parts[i],data);return result},p.parse=function(){var variables,eMatch,vMatch,expression=this.expression,ePattern=URITemplate.EXPRESSION_PATTERN,vPattern=URITemplate.VARIABLE_PATTERN,nPattern=URITemplate.VARIABLE_NAME_PATTERN,lPattern=URITemplate.LITERAL_PATTERN,parts=[],pos=0,checkLiteral=function(literal){if(literal.match(lPattern))throw new Error('Invalid Literal "'+literal+'"');return literal};for(ePattern.lastIndex=0;;){if(eMatch=ePattern.exec(expression),null===eMatch){parts.push(checkLiteral(expression.substring(pos)));break}if(parts.push(checkLiteral(expression.substring(pos,eMatch.index))),pos=eMatch.index+eMatch[0].length,!operators[eMatch[1]])throw new Error('Unknown Operator "'+eMatch[1]+'" in "'+eMatch[0]+'"');if(!eMatch[3])throw new Error('Unclosed Expression "'+eMatch[0]+'"');variables=eMatch[2].split(",");for(var i=0,l=variables.length;i<l;i++){if(vMatch=variables[i].match(vPattern),null===vMatch)throw new Error('Invalid Variable "'+variables[i]+'" in "'+eMatch[0]+'"');if(vMatch[1].match(nPattern))throw new Error('Invalid Variable Name "'+vMatch[1]+'" in "'+eMatch[0]+'"');variables[i]={name:vMatch[1],explode:!!vMatch[3],maxlength:vMatch[4]&&parseInt(vMatch[4],10)}}if(!variables.length)throw new Error('Expression Missing Variable(s) "'+eMatch[0]+'"');parts.push({expression:eMatch[0],operator:eMatch[1],variables:variables})}return parts.length||parts.push(checkLiteral(expression)),this.parts=parts,this},Data.prototype.get=function(key){var i,l,value,data=this.data,d={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[key])return this.cache[key];if(this.cache[key]=d,value="[object Function]"===String(Object.prototype.toString.call(data))?data(key):"[object Function]"===String(Object.prototype.toString.call(data[key]))?data[key](key):data[key],void 0===value||null===value)return d;if("[object Array]"===String(Object.prototype.toString.call(value))){for(i=0,l=value.length;i<l;i++)void 0!==value[i]&&null!==value[i]&&d.val.push([void 0,String(value[i])]);d.val.length&&(d.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(value))){for(i in value)hasOwn.call(value,i)&&void 0!==value[i]&&null!==value[i]&&d.val.push([i,String(value[i])]);d.val.length&&(d.type=2)}else d.type=1,d.val.push([void 0,String(value)]);return d},URI.expand=function(expression,data){var template=new URITemplate(expression),expansion=template.expand(data);return new URI(expansion)},URITemplate});var ENVIRONNEMENT="NO_ENV";null!==window.location.host.match(/mabanque/)&&(ENVIRONNEMENT="PROD"),null!==window.location.host.match(/canalnet-(part|pro|bpf)-inte/)&&(ENVIRONNEMENT="INTE"),null!==window.location.host.match(/canalnet-(part|pro|bpf)-qual/)&&(ENVIRONNEMENT="QUALIF"),null!==window.location.host.match(/localhost/)&&(ENVIRONNEMENT="LOCAL"),null!==window.location.host.match(/prod/)&&(ENVIRONNEMENT="MACHINE"),/prev-(.)*.canalnet-(part|pro|bpf).bnpparibas.net/.test(window.location.host)&&(ENVIRONNEMENT="PREVIEW"),/m-service.bnpparibas.net/.test(window.location.host)&&(ENVIRONNEMENT="MOBILE"),$(function(){"QUALIF"===window.ENVIRONNEMENT&&$("body").addClass("qualif")});var LANGUAGE="fr",LABELS={},IS_TRANSLATION_ACTIVATED=!0,languageManagement=function(){var initLanguage,getLanguage,init,get,isEnglish,isLabelEnglish,LABELS_PATH="/rsc/contrib/script/client/labels.json",LOCAL_STORAGE_ITEM_NAME="labels_cache";return isEnglish=function(){return"en"===window.LANGUAGE},isLabelEnglish=function(){return"en"===LABELS["label.language"]},initLanguage=function(){var _location,isFrench,isEnglish,result;return _location=document.location,isFrench=0===_location.pathname.indexOf("/fr/")||$("body").hasClass("fr"),isEnglish=0===_location.pathname.indexOf("/en/")||$("body").hasClass("en"),result=isFrench&&"fr"||isEnglish&&"en"||"fr",window.LANGUAGE=result,result},initLanguage(),getLanguage=initLanguage,init=function(callBack){$(function(){var langue,isHomePage,isConnectionPage,isPageForDownloading,_callBack,initLabelsFromServer;_callBack=function(){var result=function(){};return"function"==typeof callBack&&(result=callBack),result}(),isHomePage="/"===document.location.pathname,isConnectionPage=document.location.pathname.endsWith("connexion")||document.location.pathname.endsWith("login"),isPageForDownloading=isHomePage||isConnectionPage,langue=getLanguage(),initLabelsFromServer=function(){$.ajax({cache:!1,url:LABELS_PATH,dataType:"json"}).done(function(data){data&&data[langue]?(LABELS=data[langue],localStorage.setItem(LOCAL_STORAGE_ITEM_NAME,JSON.stringify(LABELS)),_callBack()):LABELS=JSON.parse(localStorage.getItem(LOCAL_STORAGE_ITEM_NAME))}).fail(function(){trace("Echec de chargement des traductions!")})},isPageForDownloading?initLabelsFromServer():(LABELS=JSON.parse(localStorage.getItem(LOCAL_STORAGE_ITEM_NAME)),LABELS?!function(){var isPageEnglish=isEnglish(),_isLabelEnglish=isLabelEnglish();isPageEnglish===_isLabelEnglish?_callBack():initLabelsFromServer()}():initLabelsFromServer())})},get=function(key,_default){var result=LABELS[key]||_default||key;return result},{init:init,initLanguage:initLanguage,getLanguage:getLanguage,get:get,isEnglish:isEnglish,isLabelEnglish:isLabelEnglish}}(),lgMgt=languageManagement,_get=lgMgt.get,typeClientPourMultilingue="part",clientHB=!1;"undefined"==typeof window.console&&(console={log:function(msg){},info:function(msg){},warn:function(msg){},error:function(msg){}}),function(window,undefined){"$:nomunge";var jq_throttle,$=window.jQuery;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){function wrapper(){function exec(){last_exec=+new Date,callback.apply(that,args)}function clear(){timeout_id=undefined}var that=this,elapsed=+new Date-last_exec,args=arguments;debounce_mode&&!timeout_id&&exec(),timeout_id&&clearTimeout(timeout_id),debounce_mode===undefined&&elapsed>delay?exec():no_trailing!==!0&&(timeout_id=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay))}var timeout_id,last_exec=0;return"boolean"!=typeof no_trailing&&(debounce_mode=callback,callback=no_trailing,no_trailing=undefined),$.guid&&(wrapper.guid=callback.guid=callback.guid||$.guid++),wrapper}}(this),$(function(){"function"!=typeof tagguageNext&&(window.tagguageNext=function(){})});var hasStorage=function(){try{return localStorage.setItem("foo","bar"),localStorage.removeItem("foo"),!0}catch(exception){return!1}}();$(function(){$("body").hasClass("bpf")&&(window.typeClientPourMultilingue="bpf"),$("body").hasClass("pro")&&(window.typeClientPourMultilingue="pro"),null===document.URL.match(/\/rsc\/contrib\/dev\//)&&"LOCAL"!=ENVIRONNEMENT||$("html").addClass("maquette"),window.location.pathname.indexOf("/fr/connexion")==-1&&window.location.pathname.indexOf("/fr/espace-pro")==-1&&window.location.pathname.indexOf("/fr/espace-prive")==-1||$("body").addClass("espace-client"),window.location.pathname.indexOf("/fr/notre-offre")!=-1&&$(".onglet-nav").length&&$("body").addClass("fp"),setTimeout(function(){($(".detail-article-return").length||$("body").hasClass("bpf")&&$(".onglet-nav").length&&$(".onglet-nav").is(":visible")&&!$("body").hasClass("espace-client"))&&$("body").addClass("fp")},1e3),$("body").hasClass("part")&&$("#mesTitres").attr("href","/fr/connexion/comptes-et-contrats/mes-titres"),$("body").hasClass("bpf")&&$("#mesTitres").attr("href","/fr/espace-prive/portefeuille-et-bourse/synthese"),$("body").hasClass("pro")&&$("#mesTitres").attr("href","/fr/espace-pro/portefeuille-et-bourse/synthese")});var appli_check=!1,GlobalSite={insertedDomListener:function(node){try{if(this.insertedDomListener.alreadyLaunched)return;var _node,nodeType,that=this;_node=void 0===node||null===node||!(nodeType=node.nodeType)||nodeType!==Node.ELEMENT_NODE&&nodeType!==Node.DOCUMENT_NODE?document:node,this.insertedDomListener.callBacks=this.insertedDomListener.callBacks||{},"function"==typeof window.MutationObserver?!function(){var target=$(_node)[0],observer=new MutationObserver(function(mutations){var callBacks=that.insertedDomListener.callBacks,selectorsArray=Object.keys(callBacks)||[],selectorsStr=selectorsArray.join(",");0!==selectorsArray.length&&mutations.forEach(function(mutation){
var newNodes=mutation.addedNodes;if(null!==newNodes){var $nodes=$(newNodes);$nodes.is(selectorsStr)&&$nodes.each(function(){var $node=$(this);$.each(callBacks,function(selector,callBack){$node.is(selector)&&callBack($node)})})}})}),config={childList:!0,attributes:!1,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1};observer.observe(target,config)}():$(_node).on("DOMNodeInserted",function(e){var $target=$(e.target),callBacks=that.insertedDomListener.callBacks,selectorsArray=Object.keys(callBacks)||[],selectorsStr=selectorsArray.join(",");0!==selectorsArray.length&&$target.is(selectorsStr)&&$.each(callBacks,function(selector,callBack){$target.is(selector)&&callBack($target)})}),this.insertedDomListener.control={callBacksBkp:that.insertedDomListener.callBacks,start:function(){that.insertedDomListener.callBacks=this.callBacksBkp},stop:function(){this.callBacksBkp=that.insertedDomListener.callBacks,that.insertedDomListener.callBacks={}}},this.insertedDomListener.alreadyLaunched=!0}catch(e){trace(e)}return this.insertedDomListener},waitForDom:function(selector,callBack){try{var $elt,o,that=this,doNothing=function(){};return that.insertedDomListener.alreadyLaunched||that.insertedDomListener(),o={stop:doNothing,start:doNothing,remove:doNothing},"function"==typeof callBack&&(that.insertedDomListener.callBacks=that.insertedDomListener.callBacks||{},that.insertedDomListener.callBacks[selector]=callBack,$elt=$(selector),$elt.length>0&&callBack($elt),o={_callBack:that.insertedDomListener.callBacks[selector],stop:function(){that.insertedDomListener.callBacks[selector]=doNothing},start:function(){that.insertedDomListener.callBacks[selector]=this._callBack},remove:function(){delete that.insertedDomListener.callBacks[selector]}}),o}catch(e){trace(e)}},waitFor:function(predicat,delay){var _delay="undefined"!=typeof delay&&null!==delay?delay:500,deferred=$.Deferred(function(d){var waitIntervalId=window.setInterval(function(){var _predicate=predicat||function(){return!1},predicateRes=_predicate();predicateRes&&(window.clearInterval(waitIntervalId),d.resolve())},_delay)});return deferred.promise()},headerInfos:{},init:function(){this.insertedDomListener(),this.oldBrowser(),"LOCAL"!=ENVIRONNEMENT&&this.siteSize(),this.replaceHeaderClient(),this.makeOngletActive(),"mobile"==DeviceSize.getDeviceState()&&$("#bouton-espace-client-mobile").on("click",function(){$("body").is(".part.fr")&&(window.location.href="/fr/connexion"),$("body").is(".part.en")&&(window.location.href="/en/login"),$("body").hasClass("bpf")&&(window.location.href="/fr/espace-prive"),$("body").hasClass("pro")&&(window.location.href="/fr/espace-pro")}),this.launchPrint(),this.removeMultiSiteElements(),this.mobileUserAgent(),this.increaseFontSize(),this.erreurTechnique(),this.ribPrint(),"PREVIEW"==ENVIRONNEMENT&&this.menuMobile(),this.popinActions(),"PREVIEW"==ENVIRONNEMENT&&this.sliderFP(),this.counterListe(),this.accordionListe(),this.accordionListeDiag(),"PREVIEW"==ENVIRONNEMENT&&this.paramRC(),this.initAnchorFix(),this.priorityHub(),this.initJsLoader(),this.initCarouselBuilder(),this.fixPPI(),this.playerVideo(),this.activateROP(),$.getScript("/rsc/contrib/script/Colonne_contact/createColonneDroite.js"),this.highlithCell(),"webview"!=$(document).getUrlParam("rc")&&"mobile"!=$(document).getUrlParam("rc")&&this.cookieNav(),this.globalRecherche(),this.fixAssuranceVie(),this.pageMaintenance(),this.siteDemo(),this.sliderVideo(),this.popinAssos(),this.bannierePokap(),$(window).on("load",GlobalSite.slideOnglet),this.initLightApps(),this.tagByPage()},highlithCell:function(){$(".hl-cell [type=radio]").click(function(event){$(this).parents("tr").find(".hl-cell").removeClass("active"),$(this).prop("checked")&&$(this).parent(".hl-cell").addClass(" active ")})},getBrowser:function(){var tem,ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(M[1])?(tem=/\brv[ :]+(\d+)/g.exec(ua)||[],"IE "+(tem[1]||"")):"Chrome"===M[1]&&(tem=ua.match(/\bOPR\/(\d+)/),null!=tem)?"Opera "+tem[1]:(M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(tem=ua.match(/version\/(\d+)/i))&&M.splice(1,1,tem[1]),M.join(" "))},isMobileTablet:function(){var check=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0)}(navigator.userAgent||navigator.vendor||window.opera),check},oldBrowser:function(){function _loadPopinIe9Bourse(){sessionStorage.getItem("popinDisplayed")||sessionStorage.getItem("oldBrowserBourse")||$.ajax({url:"/rsc/contrib/dev/navigateur-obsolete/navigateur-obsolete-bourse.html",dataType:"html"}).done(function(html){$("body").append(html),0==$(".popin-cache").length?$("body").append('<div class="popin-cache navigateur-obsolete"></div>'):$(".popin-cache").addClass("navigateur-obsolete"),Popin.init(),sessionStorage.setItem("oldBrowserBourse",1),sessionStorage.setItem("popinDisplayed",!0)})}function _loadPopinBourse(){}function _loadPopinNavigateurObsolete(){sessionStorage.getItem("popinDisplayed")||sessionStorage.getItem("oldBrowser")||$.ajax({url:"/rsc/contrib/dev/navigateur-obsolete/navigateur-obsolete.html",dataType:"html"}).done(function(html){$("body").append(html),0==$(".popin-cache").length?$("body").append('<div class="popin-cache navigateur-obsolete"></div>'):$(".popin-cache").addClass("navigateur-obsolete"),Popin.init(),isMac&&$(".popin-navigateur-obsolete").addClass("is-mac"),sessionStorage.setItem("oldBrowser",1),sessionStorage.setItem("popinDisplayed",!0)})}function __loadPopProMess(isDebug){var displayPop,waitForAction,action,isGoodContext,isPro,iGoodEnv,isLigneComptes,isAlreadyDisplayed,LOCAL_STORAGE_ITEM_NAME="popProMessDisplayed";isPro=$("body").hasClass("pro"),iGoodEnv=!0,isLigneComptes=window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats")>=0,isAlreadyDisplayed=isDebug||1===parseInt(localStorage.getItem(LOCAL_STORAGE_ITEM_NAME),10),isGoodContext=isPro&&iGoodEnv&&isLigneComptes&&!isAlreadyDisplayed,isGoodContext&&(displayPop=function(){var POPIN_ID,getTpl,getData,display;POPIN_ID="#popMessagerie",getData=function(){var data,isPlural;return data={nbr:$(".round-img").first().text(),connexionClient:"espace-pro"},isPlural=data.nbr>1,data.msgTxt=isPlural?_get("next.main.popinpromess1","messages"):_get("next.main.popinpromess2","message"),data},getTpl=function(){var tplB;return tplB=function(){var popinBHtmlTpl="";return popinBHtmlTpl+="<style>",popinBHtmlTpl+="#popMessagerie .arrow:before {",popinBHtmlTpl+="       border-bottom-color: #A33467;",popinBHtmlTpl+="}",popinBHtmlTpl+="",popinBHtmlTpl+="#popMessagerie .arrow:after {",popinBHtmlTpl+="   border-bottom-color: transparent;",popinBHtmlTpl+="}",popinBHtmlTpl+="</style>",popinBHtmlTpl+='<div class="help-text-container no-mob" id="popMessagerie" style="position: absolute;top: -25px;right: 360px;"><!-- type B -->',popinBHtmlTpl+='    <div class="help-text-popup" style="width: 325px;background-color: #A33467;color: #fff">',popinBHtmlTpl+='        <div class="arrow" style="left: 168px;"></div>',popinBHtmlTpl+='        <div class="help-text-popup-content">',popinBHtmlTpl+='            <div class="row text-right">',popinBHtmlTpl+="            </div>",popinBHtmlTpl+='            <div class="row">',popinBHtmlTpl+='                <div class="col-25" style="padding-top: 20px;padding-left: 20px;"><i class="icon icon-enveloppe" style="font-size: 25px;"></i></div>',popinBHtmlTpl+='                <div class="col-75">',popinBHtmlTpl+='                    <div class="close pull-right" style="position:relative;top:-7px;right:-7px;margin-left: 3px;">x</div>',popinBHtmlTpl+="                    <p>"+_get("next.main.popinpromess3","Vous avez")+' <span class="nbMessages">{{nbr}} {{msgTxt}}</span> '+_get("next.main.popinpromess4","en attente dans votre messagerie."),popinBHtmlTpl+="                    </p>",popinBHtmlTpl+='                    <a class="popin-close consult-mess pointer" data-href="/fr/{{connexionClient}}/mes-outils/messagerie" style="color:#fff;border-bottom: solid 1px #fff;">'+_get("next.main.popinpromess5","Consulter mes"),popinBHtmlTpl+="                        "+_get("next.main.popinpromess6","messages")+'</a> <i class="icon icon-fright mls"></i>',popinBHtmlTpl+="                </div>",popinBHtmlTpl+="            </div>",popinBHtmlTpl+="        </div>",popinBHtmlTpl+="    </div>",popinBHtmlTpl+="</div>",Handlebars.compile(popinBHtmlTpl)}()},display=function(){var tpl=getTpl(),data=getData(),output=tpl(data),$output=$(output);$("#wrapper").append($output),window.setTimeout(function(params){var argsa;argsa=["WT.dl","0","dcsuri","push_ocnet/gabarit_info-bulle/affichage","WT.ti","Push OCNet - Affichage Info Bulle"],Webtrends.multiTrack({element:this,argsa:argsa})},500),$(POPIN_ID+" .close").on("click",function(event){var argsa;event.stopImmediatePropagation(),$(POPIN_ID).remove(),argsa=["WT.dl","99","dcsuri","push_ocnet/gabarit_info-bulle/clic-fermeture","WT.ti","Push OCNet - Fermeture Info Bulle"],Webtrends.multiTrack({element:this,argsa:argsa})}),$(POPIN_ID+" a").on("click",function(event){var argsa,location;event.stopImmediatePropagation(),argsa=["WT.dl","99","dcsuri","push_ocnet/gabarit_info-bulle/clic-messagerie","WT.ti","Push OCNet - Consulter messagerie Info Bulle"],Webtrends.multiTrack({element:this,argsa:argsa}),location=$(this).data("href"),window.setTimeout(function(){document.location=location+"/?WT.mc_id=test-push-ocnet-info-bulle"},500)})},display(),!isDebug&&localStorage.setItem(LOCAL_STORAGE_ITEM_NAME,1)},action=function(){displayPop()},waitForAction=function(predicat){var _predicate=predicat||function(){return!1},intervalId=window.setInterval(function(){var predicateRes=_predicate()&&void 0!==action&&null!==action&&"function"==typeof action;predicateRes&&(action(),action=null,window.clearInterval(intervalId))},500)},waitForAction(function(){return $(".round-img").length>0&&""!=$(".round-img").first().text()}),!isDebug&&localStorage.setItem("popinMessagerie",!0),isDebug&&(window.displayPop=displayPop))}function _loadPopinDematInterst(countDisplaymax,debug){function displayPopin(){var $popinCache,ie11Class,displayedCounter=localStorage.getItem(STORAGE_ITEM_NAME)||0,$wrapper=$("#wrapper");if(ie11Class=ieVersion?"ie11":"",!(!_debug&&displayedCounter&&displayedCounter>=_countDisplaymax)){var popinHtmlStr="";popinHtmlStr+='<div class="popin popin-full well interstitiel popin-open-active no-mob '+ie11Class+'" id="dematInterstPopin">',popinHtmlStr+='<div id="rel_6_months_selection"></div>',popinHtmlStr+='<div id="retrouv_rel_selection"></div>',popinHtmlStr+='<div id="consul_rel_selection"></div>',popinHtmlStr+='            <a class="close popin-close">✕</a>',popinHtmlStr+='            <div id="animed_container">',popinHtmlStr+='                <div id="changed_space" class="changed center w300 bnpp_sans_condensedregular">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container">',popinHtmlStr+="                            "+_get("next.main.popindematinterst1","Votre espace")+" <br>",popinHtmlStr+='                            <span class="w700">'+_get("next.main.popindematinterst2","Mes documents")+"</span> <br> "+_get("next.main.popindematinterst3","A changé"),popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="rel_6_months" class="center">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+="                        "+_get("next.main.popindematinterst4","Vos relevés")+' <span class="w700">'+_get("next.main.popindematinterst5","des 6 derniers mois")+"</span><br>",popinHtmlStr+='                        <span class="coup">'+_get("next.main.popindematinterst6","en un coup d'oeil")+"</span>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="consul_rel">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container">',popinHtmlStr+="                            "+_get("next.main.popindematinterst7","Consultez")+' <span class="w700">'+_get("next.main.popindematinterst8","vos relevés")+"</span>",popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="retrouv_rel" class="center">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container">',popinHtmlStr+="                            "+_get("next.main.popindematinterst9","Retrouvez vos relevés")+'<br><span class="w700">'+_get("next.main.popindematinterst10","plus anciens")+"</span>",popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+="            </div>",popinHtmlStr+="        </div>",popinHtml=$.parseHTML(popinHtmlStr),$wrapper.append(popinHtml),$wrapper.addClass("relative"),$dematInterstPopin=$("#dematInterstPopin"),Popin.init(),Popin.showPopin($dematInterstPopin),$popinCache=$(".popin-cache"),$popinCache.addClass("interst-opacity");for(var displayOrders=[{selector:"#changed_space",jalon:delay,show:!0},{selector:"#changed_space",jalon:3*delay,show:!1},{selector:"#rel_6_months",jalon:3.5*delay,show:!0},{selector:"#rel_6_months_selection",jalon:3.5*delay+1e3,show:!0},{selector:"#rel_6_months, #rel_6_months_selection",jalon:7.5*delay+1e3,show:!1},{selector:"#consul_rel",jalon:8*delay,show:!0},{selector:"#consul_rel_selection",jalon:8*delay+1e3,show:!0},{selector:"#consul_rel, #consul_rel_selection",jalon:11*delay+1e3,show:!1},{selector:"#retrouv_rel",jalon:13*delay,show:!0},{selector:"#retrouv_rel_selection",jalon:13*delay+1e3,show:!0},{selector:"#retrouv_rel",jalon:16*delay,show:!1},{selector:"#retrouv_rel_selection",jalon:16*delay+1e3,show:!1}],idx=0;idx<displayOrders.length;idx++)!function(index){var item,selector,jalon,toShow;item=displayOrders[index],selector=item.selector,jalon=item.jalon,toShow=!!item.show,window.setTimeout(function(){$(selector).addClass(toShow?"show":"disappear")},jalon)}(idx);window.setTimeout(function(){$popinCache.removeClass("interst-opacity"),Popin.hidePopin($dematInterstPopin),$("#wrapper").removeClass("relative")},16*delay+3e3),debug||(localStorage.setItem(STORAGE_ITEM_NAME,++displayedCounter),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,!0))}}var popinHtml,$dematInterstPopin,_countDisplaymax,_debug,STORAGE_ITEM_NAME="dematPopinDisplayedCount",SESSION_STORAGE_ITEM_NAME="dematPopinDisplayed",delay=1e3;_debug=debug||!1,_countDisplaymax=countDisplaymax||3,displayPopin()}function _loadPopinVirementInterst(countDisplaymax,debug){function displayPopin(){var $virementInterstPopin,popinHtml,$popinCache,displayedCounter=localStorage.getItem(STORAGE_ITEM_NAME)||0,$wrapper=$("#wrapper");if(!(!_debug&&displayedCounter&&displayedCounter>=_countDisplaymax)){var popinHtmlStr="";popinHtmlStr+='<div class="popin popin-full well interstitiel popin-open-active no-mob" id="virementInterstPopin">',popinHtmlStr+='            <a class="close popin-close">✕</a>',popinHtmlStr+='            <div id="animed_container">',popinHtmlStr+='                <div id="interst-bloc2-selections">',popinHtmlStr+='                    <div id="interst-bloc2-selection1"></div>',popinHtmlStr+='                    <div id="interst-bloc2-selection2"></div>',popinHtmlStr+='                    <div id="interst-bloc2-selection3"></div>',popinHtmlStr+='                    <div id="interst-bloc2-selection4"></div>',popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="interst-bloc3-selection1"></div>',popinHtmlStr+='                <div id="interst-bloc1" class="center w300 bnpp_sans_condensedregular">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container w300">',popinHtmlStr+="                            <span>"+_get("next.main.popinvirinterst1","Votre espace")+"</span>",popinHtmlStr+="                            <br>",popinHtmlStr+='                            <span class="w700">'+_get("next.main.popinvirinterst2","Virements et services")+"</span>",popinHtmlStr+="                            <br>",popinHtmlStr+="                            <span>"+_get("next.main.popinvirinterst3","change !")+"</span>",popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="interst-bloc2" class="w300 bnp_typelight">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container w300">',popinHtmlStr+="                            <span>"+_get("next.main.popinvirinterst4","En un clic,<br/>retrouvez")+"</span>",popinHtmlStr+='                            <span class="w700">'+_get("next.main.popinvirinterst5","toutes<br/>vos fonctionnalités<br/>de virement")+"</span>",popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+='                <div id="interst-bloc3" class="w300 bnp_typelight">',popinHtmlStr+='                    <div class="anim-container">',popinHtmlStr+='                        <div class="anime-text-container w300">',popinHtmlStr+="                            <span>"+_get("next.main.popinvirinterst6","Ainsi que les autres services")+"</span>",popinHtmlStr+="                        </div>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+="            </div>",popinHtmlStr+="        </div>",popinHtml=$.parseHTML(popinHtmlStr),$wrapper.append(popinHtml),$wrapper.addClass("relative"),$virementInterstPopin=$("#virementInterstPopin"),Popin.init(),Popin.showPopin($virementInterstPopin),$popinCache=$(".popin-cache"),$popinCache.addClass("interst-opacity").addClass("intersticiel-z-index");for(var delay=1e3,displayOrders=[{selector:"#interst-bloc1",jalon:delay,show:!0},{selector:"#interst-bloc1",jalon:3*delay,show:!1},{selector:"#interst-bloc2",jalon:3.5*delay,show:!0},{selector:"#interst-bloc2-selection1",jalon:4*delay,show:!0},{selector:"#interst-bloc2-selection2",jalon:4.5*delay,show:!0},{selector:"#interst-bloc2-selection3",jalon:5*delay,show:!0},{selector:"#interst-bloc2-selection4",jalon:6*delay,show:!0},{selector:"#interst-bloc2, #interst-bloc2-selection1, #interst-bloc2-selection2, #interst-bloc2-selection3, #interst-bloc2-selection4",jalon:9*delay,show:!1},{selector:"#interst-bloc3",jalon:11*delay,show:!0},{selector:"#interst-bloc3-selection1",jalon:11.5*delay,show:!0},{selector:"#interst-bloc3, #interst-bloc3-selection1",jalon:15*delay,show:!1}],idx=0;idx<displayOrders.length;idx++)!function(index){var item,selector,jalon,toShow;item=displayOrders[index],selector=item.selector,jalon=item.jalon,toShow=!!item.show,window.setTimeout(function(){$(selector).addClass(toShow?"show":"disappear")},jalon)}(idx);window.setTimeout(function(){$popinCache.removeClass("interst-opacity").removeClass("intersticiel-z-index"),Popin.hidePopin($virementInterstPopin),$("#wrapper").removeClass("relative")},15*delay+3e3),debug||(localStorage.setItem(STORAGE_ITEM_NAME,++displayedCounter),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,!0))}}var _countDisplaymax,_debug,STORAGE_ITEM_NAME="virementPopinDisplayedCount",SESSION_STORAGE_ITEM_NAME="virementPopinDisplayed";_debug=debug||!1,_countDisplaymax=countDisplaymax||3,displayPopin()}function _loadPopinBourseInterst(countDisplaymax,debug){function displayPopin(){var $bourseInterstPopin,popinHtml,$popinCache,displayedCounter=localStorage.getItem(STORAGE_ITEM_NAME)||0,$wrapper=$("#wrapper");if(!(!_debug&&displayedCounter&&displayedCounter>=_countDisplaymax)){var popinHtmlStr="";popinHtmlStr+='<div class="popin popin-full well interstitiel popin-open-active no-mob '+ie11Class+'" id="bourseInterstPopin">',popinHtmlStr+='        <a class="close popin-close">✕</a>',popinHtmlStr+='        <div id="animed_container">',popinHtmlStr+='            <div id="interst-bourse-bloc2-selection1"></div>',popinHtmlStr+='            <div id="interst-bourse-bloc3-selection1"></div>',popinHtmlStr+='            <div id="interst-bourse-bloc4-selection1"></div>',popinHtmlStr+='            <div id="interst-bourse-bloc1" class="center w300 bnpp_sans_condensedregular">',popinHtmlStr+='                <div class="anim-container">',popinHtmlStr+='                    <div class="anime-text-container w300">',popinHtmlStr+="                        <span>"+_get("next.main.popinbourinterst1","Retrouvez en 1 clic")+"</span>",popinHtmlStr+="                        <br>",popinHtmlStr+='                        <span class="w700">'+_get("next.main.popinbourinterst2","tous vos contenus")+"</span>",popinHtmlStr+="                        <br>",popinHtmlStr+="                        <span>"+_get("next.main.popinbourinterst3","sur la même page")+"</span>",popinHtmlStr+="                    </div>",popinHtmlStr+="                </div>",popinHtmlStr+="            </div>",popinHtmlStr+='            <div id="interst-bourse-bloc2"></div>',popinHtmlStr+='            <div id="interst-bourse-bloc3"></div>',popinHtmlStr+='            <div id="interst-bourse-bloc4"></div>',popinHtmlStr+="        </div>",popinHtmlStr+="    </div>",window.bourseTPL=popinHtmlStr,popinHtml=$.parseHTML(popinHtmlStr),$wrapper.append(popinHtml),$wrapper.addClass("relative"),$bourseInterstPopin=$("#bourseInterstPopin"),Popin.init(),Popin.showPopin($bourseInterstPopin),$popinCache=$(".popin-cache"),$popinCache.addClass("interst-opacity").addClass("intersticiel-z-index");for(var delay=1e3,incr=function(){var val,f;return val=0,f=function(idx){return val+=idx||0}}(),displayOrders=[{selector:"#interst-bourse-bloc1",jalon:incr(delay),show:!0},{selector:"#interst-bourse-bloc1",jalon:incr(3500),show:!1},{selector:"#interst-bourse-bloc2",jalon:incr(2e3),show:!0},{selector:"#interst-bourse-bloc2-selection1",jalon:incr(1e3),show:!0},{selector:"#interst-bourse-bloc2",jalon:incr(1e3),show:!1},{selector:"#interst-bourse-bloc3",jalon:incr(),show:!0},{selector:"#interst-bourse-bloc3-selection1",jalon:incr(1e3),show:!0},{selector:"#interst-bourse-bloc3",jalon:incr(1e3),show:!1},{selector:"#interst-bourse-bloc4",jalon:incr(2e3),show:!isBourseSynthesePage},{selector:"#interst-bourse-bloc4-selection1",jalon:incr(1e3),show:!isBourseSynthesePage},{selector:"#interst-bourse-bloc4",jalon:isBourseSynthesePage?0:incr(1e3),show:!1},{selector:"#interst-bourse-bloc2-selection1, #interst-bourse-bloc3-selection1, #interst-bourse-bloc4-selection1",jalon:incr(2e3),show:!1}],idx=0;idx<displayOrders.length;idx++)!function(index){var item,selector,jalon,toShow;item=displayOrders[index],selector=item.selector,jalon=item.jalon,toShow=!!item.show,window.setTimeout(function(){$(selector).addClass(toShow?"show":"disappear")},jalon)}(idx);window.setTimeout(function(){$popinCache.removeClass("interst-opacity").removeClass("intersticiel-z-index"),Popin.hidePopin($bourseInterstPopin),$("#wrapper").removeClass("relative")},incr(3e3)),debug||(localStorage.setItem(STORAGE_ITEM_NAME,++displayedCounter),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,!0))}}var _countDisplaymax,_debug,ie11Class,isBourseSynthesePage=bourseTargetPage.isBourseSynthesePage(),STORAGE_ITEM_NAME="boursePopinDisplayedCount",SESSION_STORAGE_ITEM_NAME="boursePopinDisplayed";ie11Class=ieVersion?"ie11":"",_debug=debug||!1,_countDisplaymax=countDisplaymax||3,displayPopin()}var __loadPopProMessPart;if("webview"==$(document).getUrlParam("rc")&&sessionStorage.setItem("nopopin",!0),"nopopin"==$(document).getUrlParam("rc")&&sessionStorage.setItem("nopopin",!0),!("nopopin"==$(document).getUrlParam("rc")||"mobile"==DeviceSize.getDeviceState()||sessionStorage.getItem("nopopin")||window.location.pathname.indexOf("/fr/souscription/epargne-bourse/cif-pea")!=-1&&"PREVIEW"==ENVIRONNEMENT)){var supportedBrowser={msie:9,chrome:30,firefox:30,safari:7,opera:20},isMobileTablet=this.isMobileTablet();if(!isMobileTablet){var isMac=navigator.platform.toLowerCase().indexOf("mac")>=0,browser=this.getBrowser(),browser_split=browser.split(" "),browser_name=browser_split[0].toLowerCase(),browser_version=browser_split[1],bourseTargetPage=function(){var isPath,isNotPath,isBourseActionPage,isBourseSynthesePage,isBourseTargetPage;return isPath=function(_path){return window.location.pathname.indexOf(_path)>=0},isNotPath=function(_path){return!isPath(_path)},isBourseActionPage=function(){var condBpfAction=isPath("/informations-marches/les-marches-en-direct/actions"),condActionsOthers=isPath("/bourse/les-marches-en-direct/actions");return condBpfAction||condActionsOthers},isBourseSynthesePage=function(){var condBpfSynthese,condPartSynthese,condProSynthese;return condBpfSynthese=function(){var condBpfSyntheseAnd1=isPath("/informations-marches/les-marches-en-direct"),condBpfSyntheseAnd2=isNotPath("/informations-marches/les-marches-en-direct/"),condBpfSyntheseAnd=condBpfSyntheseAnd1&&condBpfSyntheseAnd2,condBpfSyntheseOr=isPath("/informations-marches/les-marches-en-direct/synthese");return condBpfSyntheseAnd||condBpfSyntheseOr}(),condPartSynthese=isPath("/bourse/les-marches-en-direct/synthese"),condProSynthese=function(){var condAnd1=isPath("/espace-pro/bourse/les-marches-en-direct"),condAnd2=isNotPath("/espace-pro/bourse/les-marches-en-direct/"),condAnd=condAnd1&&condAnd2,condOr=isPath("/espace-pro/bourse/les-marches-en-direct/synthese");return condAnd||condOr}(),condBpfSynthese||condPartSynthese||condProSynthese},isBourseTargetPage=function(){return isBourseActionPage()||isBourseSynthesePage()},{isBourseActionPage:isBourseActionPage,isBourseSynthesePage:isBourseSynthesePage,isBourseTargetPage:isBourseTargetPage}}();if(window.bourseTargetPage=bourseTargetPage,__loadPopProMessPart=function(isDebug){var f,IS_GOOD_ENV=!0,IS_DEBUG=!!isDebug,ANALYTICS_ACTIVATED=!0,LOCAL_STORAGE_ITEM_NAME="popProMessPartDisplayed",LOCAL_STORAGE_CASE="popProMessPartCase",IS_GOOD_PAGE=function(){var c1=window.location.pathname.endsWith("/fr/connexion/comptes-et-contrats"),c2=window.location.pathname.endsWith("/en/login/accounts-and-contracts");return c1||c2}(),IS_GOOD_APP=$("body").hasClass("part");f=function(){var displayPop,waitForAction,action,isAlreadyDisplayed,isGoodContext,choosenCase,hasChoosenCase;choosenCase=localStorage.getItem(LOCAL_STORAGE_CASE),hasChoosenCase=!!choosenCase,hasChoosenCase&&(choosenCase=parseInt(choosenCase,10)),isAlreadyDisplayed=1===parseInt(localStorage.getItem(LOCAL_STORAGE_ITEM_NAME),10),isGoodContext=IS_GOOD_APP&&IS_GOOD_ENV&&IS_GOOD_PAGE&&(IS_DEBUG||!isAlreadyDisplayed),IS_DEBUG&&trace({context:"__loadPopProMessPart -> f",IS_GOOD_APP:IS_GOOD_APP,IS_GOOD_ENV:IS_GOOD_ENV,IS_GOOD_PAGE:IS_GOOD_PAGE,isAlreadyDisplayed:isAlreadyDisplayed,isGoodContext:isGoodContext}),isGoodContext&&(displayPop=function(){var POPIN_ID,getTpl,getData,display;POPIN_ID="#popMessagerie",getData=function(){var data,isPlural;return data={nbr:$(".round-img").first().text(),connexionClient:"connexion",messagerieLink:lgMgt.isEnglish()?"/en/login/tools/inbox":"/fr/connexion/mes-outils/messagerie"},isPlural=data.nbr>1,data.msgTxt=isPlural?_get("next.main.popinmesspart1","messages"):_get("next.main.popinmesspart2","message"),data},getTpl=function(){var tplB;return tplB=function(){var popinBHtmlTpl="";return popinBHtmlTpl+='<div class="help-text-container no-mob" id="popMessagerie">',popinBHtmlTpl+='    <div class="help-text-popup up-arrow">',popinBHtmlTpl+='        <div class="help-text-popup-content">',popinBHtmlTpl+='            <div class="row text-right">',popinBHtmlTpl+="            </div>",popinBHtmlTpl+='            <div class="row">',popinBHtmlTpl+='                <div class="col-25"><i class="icon icon-enveloppe"></i></div>',popinBHtmlTpl+='                <div class="col-75">',popinBHtmlTpl+='                    <div class="close pull-right">x</div>',popinBHtmlTpl+="                    <p>"+_get("next.main.popinmesspart6","Vous avez")+' <span class="nbMessages">{{nbr}} {{msgTxt}}</span> '+_get("next.main.popinmesspart7","en attente dans votre messagerie."),popinBHtmlTpl+="                    </p>",popinBHtmlTpl+='                    <div class="goto-msg"><a class="popin-close consult-mess pointer" data-href="{{messagerieLink}}">'+_get("next.main.popinmesspart5","Consulter mes messages")+'</a> <i class="icon icon-fright mls"></i></div>',popinBHtmlTpl+="                </div>",popinBHtmlTpl+="            </div>",popinBHtmlTpl+="        </div>",popinBHtmlTpl+="    </div>",popinBHtmlTpl+="</div>",Handlebars.compile(popinBHtmlTpl)}()},display=function(){var tpl,data,output,$output;tpl=getTpl(),data=getData(),output=tpl(data),$output=$(output),$("#wrapper").append($output),ANALYTICS_ACTIVATED&&function(){var argsa=["WT.dl","0","dcsuri","push_ocnetV2/gabarit_info-bulle/affichage","WT.ti","Push OCNet V2 - Affichage Info Bulle"];Webtrends.multiTrack({element:this,argsa:argsa})}(),$(POPIN_ID+" .close").on("click",function(event){event.stopImmediatePropagation(),$(POPIN_ID).remove(),ANALYTICS_ACTIVATED&&function(){var argsa;argsa=["WT.dl","99","dcsuri","push_ocnetV2/gabarit_info-bulle/clic-fermeture","WT.ti","Push OCNet V2 - Fermeture Info Bulle"],Webtrends.multiTrack({element:this,argsa:argsa})}()}),$(POPIN_ID+" a").on("click",function(event){event.stopImmediatePropagation(),ANALYTICS_ACTIVATED&&function(){var argsa;argsa=["WT.dl","99","dcsuri","push_ocnetV2/gabarit_info-bulle/clic-messagerie","WT.ti","Push OCNet V2 - Consulter messagerie Info Bulle"],Webtrends.multiTrack({element:this,argsa:argsa})}();var location=$(this).data("href");window.setTimeout(function(){document.location=ANALYTICS_ACTIVATED?location+"/?WT.mc_id=test-push-ocnetV2-info-bulle":location},500)})},display(),!isDebug&&localStorage.setItem(LOCAL_STORAGE_ITEM_NAME,1)},action=function(){
displayPop()},waitForAction=function(predicat){var _predicate=predicat||function(){return!1},intervalId=window.setInterval(function(){var predicateRes=_predicate()&&void 0!==action&&null!==action&&"function"==typeof action;predicateRes&&(action(),action=null,window.clearInterval(intervalId))},500)},waitForAction(function(){return $(".round-img").length>0&&""!=$(".round-img").first().text()}),IS_DEBUG||localStorage.setItem("popinMessagerie",!0),IS_DEBUG&&(window.displayPop=displayPop))},f(),$(".bottom-header-logoff").on("click",function(event){localStorage.removeItem(LOCAL_STORAGE_ITEM_NAME)})},window.__loadPopProMessPart=__loadPopProMessPart,window._loadPopinVirementInterst=_loadPopinVirementInterst,window._loadPopinDematInterst=_loadPopinDematInterst,window._loadPopinBourseInterst=_loadPopinBourseInterst,window.__loadPopProMess=__loadPopProMess,$("#wcm-l-bottom-header-connected").length>0){__loadPopProMess(!1),$(".bottom-header-logoff").on("click",function(event){var LOCAL_STORAGE_ITEM_NAME="popProMessDisplayed";localStorage.removeItem(LOCAL_STORAGE_ITEM_NAME)}),__loadPopProMessPart(!1);var titreOnglet=setInterval(function(){$("#mesTitres").is(":visible")&&!sessionStorage.getItem("popinDisplayed")&&(clearInterval(titreOnglet),_loadPopinBourse())},500);!function(isDebug,isGoodEnv){var hasToDisplayDematPopin;if(hasToDisplayDematPopin=function(){var isDematPage,isGoodPopinCtx,result;return isDematPage=window.location.pathname.indexOf("/mes-outils/dematerialisation")>=0,isGoodPopinCtx=!(Number(browser_version)<Number(supportedBrowser[browser_name])),result=!1,isGoodEnv&&(result=isDebug?isDematPage:isDematPage&&isGoodPopinCtx),result}()){var isBpf=window.location.pathname.indexOf("/espace-prive")>=0;isBpf?window.setTimeout(function(){_loadPopinDematInterst(1,isDebug),_loadPopinDematInterst=function(){}},1e3):subscribeToCheckStatus(function(){window.setTimeout(function(){_loadPopinDematInterst(1,isDebug),_loadPopinDematInterst=function(){}},1e3)})}}(!1,!1),function(isDebug,isGoodEnv){var hasToDisplaVirPopin;hasToDisplaVirPopin=function(){var isVirementPage,isGoodPopinCtx,result;return isVirementPage=window.location.pathname.indexOf("/virements-services/virements")>=0,isGoodPopinCtx=!(Number(browser_version)<Number(supportedBrowser[browser_name])),result=!1,isGoodEnv&&(result=isDebug?isVirementPage:isVirementPage&&isGoodPopinCtx),result}(),hasToDisplaVirPopin&&subscribeToCheckStatus(function(){_loadPopinVirementInterst(1,isDebug),_loadPopinVirementInterst=function(){}})}(!1,!1),function(isDebug,isGoodEnv){var hasToDisplBoursePopin,checkInterst;hasToDisplBoursePopin=function(){var isBourseTargetPage,isGoodPopinCtx,result;return isBourseTargetPage=bourseTargetPage.isBourseTargetPage(),isGoodPopinCtx=!(Number(browser_version)<Number(supportedBrowser[browser_name])),result=!1,isGoodEnv&&(result=isDebug?isBourseTargetPage:isBourseTargetPage&&isGoodPopinCtx),result}(),hasToDisplBoursePopin&&(checkInterst=setInterval(function(){var $CCiWaitContainer=$(".CCiWaitContainer"),hasClass=$CCiWaitContainer.length>0,isWaitOver=hasClass&&"none"===$CCiWaitContainer.css("display");isDebug&&console.log("Checking if the wait is over ... => "+isWaitOver),isWaitOver&&(isDebug&&console.log("The wait is over..."),window.clearInterval(checkInterst),window.setTimeout(function(){_loadPopinBourseInterst(isDebug?99:1,isDebug),_loadPopinBourseInterst=function(){}},500))},500))}(!1,!1),0!=GlobalSite.docCookies.hasItem("nbrOfConnexions")||sessionStorage.getItem("popinDisplayed")||sessionStorage.setItem("popinDisplayed",!0)}return 9!=Number(browser_version)||"msie"!=browser_name||sessionStorage.getItem("oldBrowserBourse")?Number(browser_version)<Number(supportedBrowser[browser_name])?void _loadPopinNavigateurObsolete():void 0:void(window.location.pathname.indexOf("/fr/connexion/comptes-et-contrats/mes-titres")===-1&&window.location.pathname.indexOf("/fr/connexion/bourse/")===-1&&window.location.pathname.indexOf("/fr/connexion/portefeuille-et-bourse/")===-1&&window.location.pathname.indexOf("/fr/espace-prive/informations-marches/")===-1&&window.location.pathname.indexOf("/fr/espace-prive/portefeuille-et-bourse/")===-1&&window.location.pathname.indexOf("/fr/espace-pro/bourse/")===-1&&window.location.pathname.indexOf("/fr/espace-pro/portefeuille-et-bourse/")===-1||_loadPopinIe9Bourse())}}},slideOnglet:function(){function getNextLi(){return $(".js-onglet-current").nextAll("li:visible")}function getPrevLi(){return $(".js-onglet-current").prevAll("li:visible")}function setCurrentLi(dir){"next"==dir&&$(".js-onglet-current").removeClass("js-onglet-current").nextAll("li:visible").eq(0).addClass("js-onglet-current"),"prev"==dir&&$(".js-onglet-current").removeClass("js-onglet-current").prevAll("li:visible").eq(0).addClass("js-onglet-current")}function setMargin(current_width){$(".onglet").eq(0).css("margin-left","-"+current_width+"px")}function togglePaginationButtons($elem){0==$elem.nextAll("li:visible").eq(0).length?$onglet_next.addClass("disabled"):$onglet_next.removeClass("disabled"),0==$elem.prevAll("li:visible").eq(0).length?$onglet_prev.addClass("disabled"):$onglet_prev.removeClass("disabled")}if(0!=$(".onglet-nav .onglet").length){0==$(".onglet-pagination").length&&$(".onglet-nav .onglet").eq(0).after('<div class="onglet-pagination unselectable"><span class="onglet-prev pointer"></span><span class="onglet-next pointer"></span></div>');var current_width=($(".onglet-nav .onglet").eq(0).find("li:first-child").addClass("js-onglet-current"),0),selector_hidden=".hidden",$onglet_prev=$(".onglet-prev"),$onglet_next=$(".onglet-next"),total_width=$(".onglet-nav").width(),li_total_width=0;"mobile"==DeviceSize.getDeviceState()&&(selector_hidden+=",.no-mob"),$(".onglet-nav").hasClass("has-back")&&(total_width-=$(".onglet-back").outerWidth()),total_width-=$(".list-outils").width(),trace("total_width"),trace(total_width),$(".onglet-nav .onglet li:visible").each(function(){li_total_width+=$(this).outerWidth(!0),trace("li_total_width"),trace(li_total_width)}),trace("li_total_width 2s"),trace(li_total_width);"<a href="+(lgMgt.isEnglish()?"/en/bank-contacts/en-pratique":"/fr/banque-contacts/en-pratique")+' class="no-mob btn-help"><i class="icon icon-info"></i>'+_get("next.main.slideonglet1","besoin d'aide")+"</a>";trace(li_total_width),function(){if($(".onglet.sous-section").length){var total_width=$(".onglet.sous-section").width(),li_total_width=0;$(".onglet.sous-section li:visible").each(function(){li_total_width+=$(this).outerWidth(!0)}),li_total_width>total_width&&($('<div class="onglet-sous-section-pagination"><span class="sous-section-prev pointer"></span><span class="sous-section-next pointer"></span></div>').insertAfter(".onglet.sous-section"),$(".onglet.sous-section").find("li").eq(0).addClass("js-onglet-soussection-current"),$(".sous-section-prev").on("click",function(){if($(".js-onglet-soussection-current").prev("li").length&&$(".js-onglet-soussection-current").prev("li").is(":visible")){var li_current_width=$(".js-onglet-soussection-current").prev("li").outerWidth(!0),margin_left=Number($(".onglet.sous-section").css("margin-left").replace("px","")),new_margin_left=margin_left+li_current_width,new_width=$(".onglet.sous-section").outerWidth()+Math.abs(margin_left)*-1;$(".onglet.sous-section").css({"margin-left":new_margin_left,width:new_width}),$(".js-onglet-soussection-current").removeClass("js-onglet-soussection-current").prev("li").addClass("js-onglet-soussection-current")}}),$(".sous-section-next").on("click",function(){if($(".js-onglet-soussection-current").next("li").length&&$(".js-onglet-soussection-current").next("li").is(":visible")){var li_current_width=$(".js-onglet-soussection-current").outerWidth(!0),margin_left=Number($(".onglet.sous-section").css("margin-left").replace("px","")),new_margin_left=li_current_width*-1+Math.abs(margin_left)*-1,new_width=$(".onglet.sous-section").outerWidth()+Math.abs(new_margin_left);$(".onglet.sous-section").css({"margin-left":new_margin_left,width:new_width}),$(".js-onglet-soussection-current").removeClass("js-onglet-soussection-current").next("li").addClass("js-onglet-soussection-current")}}))}}(),$onglet_prev.addClass("disabled"),0==getNextLi().length&&$onglet_next.addClass("disabled"),window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-vacances")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-maison")!=-1||$onglet_next.addClass("disabled"),$(".onglet-pagination .onglet-next").on("click",function(){window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-vacances")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-maison")==-1?(getNextLi().eq(0).length>0&&(current_width+=$(".js-onglet-current").outerWidth(!0),setCurrentLi("next"),setMargin(current_width)),togglePaginationButtons($(".js-onglet-current"))):$onglet_next.addClass("disabled")}),window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-vacances")==-1&&window.location.pathname.indexOf("/souscrire-en-ligne/compte-epargne-maison")==-1?$(".onglet-pagination .onglet-prev").on("click",function(){getPrevLi().eq(0).length>0&&(current_width-=getPrevLi().eq(0).outerWidth(!0),setCurrentLi("prev"),setMargin(current_width)),togglePaginationButtons($(".js-onglet-current"))}):$onglet_next.addClass("disabled")}},replaceHeaderClient:function(){function updateNombreMessage(nombre_message){var $elem=$(".list-header-connected .nb-messages .round-img");nombre_message>0?$elem.text(nombre_message).removeClass("hidden"):$elem.addClass("hidden")}function updateProfileImage(civilite){var $elem=$(".js-profil-icon-civilite, .bottom-header-connected .header-connecte-profil a");$elem.length>0&&(2==civilite||3==civilite?$elem.find("i").removeClass().addClass("icon icon-woman"):$elem.find("i").removeClass().addClass("icon icon-man"))}function updateGlobalHeaderInfo(info_client){if(updateNombreMessage(info_client.data.abonnement.nombreMessageBMMNonLus),updateProfileImage(info_client.data.client.civilite),GlobalSite.headerInfos.nom=lgMgt.isEnglish()?(info_client.data.client.nomComplet||"").replace(/(Mlle|Mme|M)/,function(match,p){switch(p){case"Mlle":return"Ms";case"Mme":return"Mrs";case"M":return"Mr";default:return p}}):info_client.data.client.nomComplet||"",GlobalSite.headerInfos.nom=GlobalSite.headerInfos.nom.replace(" null "," "),GlobalSite.headerInfos.derniereConnexion=info_client.data.informationsIdentification,GlobalSite.headerInfos.civilite=info_client.data.client.civilite,null!==info_client.data.abonnement.datePriseEffetBD&&(clientHB=!0),"02"!=info_client.data.abonnement.typeOffreDetenue&&"03"!=info_client.data.abonnement.typeOffreDetenue){setInterval(function(){$("a[href$=recherche-thescreener]").parent("li").remove(),$("a[href$=recherche-TheScreener]").parent("li").remove(),$("#newtabs-navigation-market").find(".recherche-thescreener").remove(),$("#newtabs-navigation-market").find(".recherche-TheScreener").remove(),$('a[href$="/alertes-techniques"]').parent("li").remove(),$(".tabs-navigation .alerte-technique").remove(),$('a[href$="/recommandations"]').parent("li").remove()},500)}try{1==info_client.data.indicateurs.indicPriority&&$("body").addClass("priority"),1==info_client.data.indicateurs.indicAgenceNet&&$("body").addClass("netagence")}catch(e){}$("#mon-profil").find("big").text(GlobalSite.headerInfos.nom);var dateDerniereConnexion=info_client.data.informationsIdentification.dateDerniereIdentification,jour=dateDerniereConnexion.substr(0,2)+"/"+dateDerniereConnexion.substr(2,2)+"/"+dateDerniereConnexion.substr(4,4);$("#mon-profil").find(".date-derniere-connexion").text(jour)}if($("#wcm-l-bottom-header-connected").length>0)$("body").hasClass("pro")&&$.get("/mefav-wspl/rest/natioViePro",function(mefav_pro,status,request){if("OK"==mefav_pro.message){var mefav_pro_url="https://www.clients.assurance-vie.fr/servlets/helios.cinrj.htmlnav.runtime.FrontServlet?app=BNPNET&init=true&multiInit=false&hageGroup=consultationBnpnet";$.each(mefav_pro.data.nationVieProInfos.listeP,function(i,item){mefav_pro_url+="&"+i+"="+item}),mefav_pro_url+="&a0="+mefav_pro.data.nationVieProInfos.a0;var mefav_pro_interval=setInterval(function(){$("#mesAssurancesVie").length>0&&($("#mesAssurancesVie").parent().removeClass("hidden"),$("#mesAssurancesVie").attr("href",mefav_pro_url),clearInterval(mefav_pro_interval))},500)}}),$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(info_client,status,request){var now_time=new Date(request.getResponseHeader("date")).getTime(),href=$(".bottom-header-logoff").find("a").attr("href");$(".bottom-header-logoff").find("a").attr("href",href+"?param="+(new Date).getTime()),$("body").addClass("client");var infoclient_session=sessionStorage.getItem("info_client"),expired=!1;if(infoclient_session){trace("session storage existe",traceStyles.session);var infoclient_session_json=JSON.parse(infoclient_session);trace("comparaison date",traceStyles.session),trace((now_time-new Date(infoclient_session_json.dateServeur).getTime())/1e3,traceStyles.session),now_time-new Date(infoclient_session_json.dateServeur).getTime()>18e4&&(expired=!0,trace("session expiré : "+expired,traceStyles.session))}if(sessionStorage.getItem("info_client")&&!expired){trace("session ok",traceStyles.session);var info_client=JSON.parse(sessionStorage.getItem("info_client"));updateGlobalHeaderInfo(info_client);try{webtrendsInfo(info_client)}catch(e){}}else $.get("/serviceinfosclient-wspl/rpc/InfosClient?modeAppel=0",function(info_client,status,request){if("OK"==info_client.message){trace("info client appelé",traceStyles.session),info_client.dateServeur=now_time;try{updateGlobalHeaderInfo(info_client)}catch(e){}sessionStorage.setItem("info_client",JSON.stringify(info_client)),null!==info_client.data.abonnement.datePriseEffetBD&&(clientHB=!0),GlobalSite.docCookies.setItem("connected","true",1/0,"/",document.domain);var nbrOfConnexions=0;GlobalSite.docCookies.hasItem("nbrOfConnexions")&&(nbrOfConnexions=GlobalSite.docCookies.getItem("nbrOfConnexions")),nbrOfConnexions++,GlobalSite.docCookies.setItem("nbrOfConnexions",nbrOfConnexions,1/0,"/",document.domain);try{webtrendsInfo(info_client)}catch(e){}GlobalSite.cookieSiteSize()}else{trace("infoclient.message pas OK suppression de sessionsStorage",traceStyles.session),sessionStorage.removeItem("info_client"),sessionStorage.removeItem("profilCompteClient"),sessionStorage.removeItem("newPopin"),localStorage.removeItem("ongletTitre"),GlobalSite.headerInfos={};try{webtrendsInfo()}catch(e){}}})}});else{hasStorage&&(sessionStorage.removeItem("info_client"),localStorage.removeItem("ongletAssuranceVie"),localStorage.removeItem("ongletTitre"),localStorage.removeItem("ongletAutresComptes")),GlobalSite.docCookies.setItem("connected","false",1/0,"/",document.domain);setTimeout(function(){cookieRemover()},500);GlobalSite.headerInfos={};try{webtrendsInfo()}catch(e){}}},makeOngletActive:function(){if(window.location.pathname.indexOf("comptes-et-contrats/mes-titre")!=-1||window.location.pathname.indexOf("portefeuille-et-bourse/releve")!=-1||window.location.pathname.indexOf("portefeuille-et-bourse/synthese")!=-1)var cciOngletNavInterval=setInterval(function(){console.log("interval"),$("#autresComptes").length&&(clearInterval(cciOngletNavInterval),console.log("clear interval"),localStorage.getItem("ongletAutresComptes")&&$("#autresComptes").parent("li").removeClass("hidden"),localStorage.getItem("ongletAssuranceVie")&&($("#mesAssurancesVie").parent("li").removeClass("hidden"),console.log("mes assurance vie remove class")),null!==window.location.host.match(/bnpparibas/)&&localStorage.getItem("ongletTitre")&&$("#mesTitres").parent("li").removeClass("hidden"))},500);var module=getBreadcrumb();if($(".onglet-nav").length>0){setInterval(function(){$(".header-page").length>0&&($(".onglet-nav").hasClass("static")||$(".header-page").addClass("has-onglet"))},200)}if($(".onglet").length>0){if(console.log("onglet"),$("#fp_nav").length>0){$(".onglet li").find("a").removeClass("active"),$("body").addClass("fp");var link=!0,listeOnglets=$("#fp_nav").find("ul").removeClass("onglet-nav").addClass("ancres");listeOnglets.find("li").each(function(){if(0==$(this).has("a").length){var texte=$(this).text(),href=$(this).text().stripAccents().toLowerCase().replace(/[ \']/g,"_");$(this).html($("<a/>").attr("href","#"+href).text(texte)),link=!1}else if($(this).has("a").length>0){var attr=$(this).find("a").attr("href");if("undefined"==typeof attr&&attr===!1||"#"==attr){var texte=$(this).find("a").text(),href=$(this).find("a").text().stripAccents().toLowerCase().replace(/[ \']/g,"_");$(this).html($("<a/>").attr("href","#"+href).text(texte)),link=!1}}})}if($(".onglet").eq(0).hasClass("ancres")){$(".onglet li").find("a").removeClass("active");var anchor_list=[];return $(".onglet li:first-child").find("a").addClass("active"),$(".onglet li a").on("click",function(){$.waypoints("disable"),$(".onglet li a").removeClass("active"),$(this).addClass("active"),setTimeout(function(){$.waypoints("enable")},500)}),$(".onglet li a").each(function(){if($(this).is(":visible")){var elem_id=$(this).attr("href");"#"==elem_id.substr(0,1)&&0!=$(elem_id).length&&anchor_list.push({anchor:$(this),section:$(elem_id)})}}),void $.each(anchor_list,function(index,item){item.section.waypoint(function(dir){$(".onglet li a").removeClass("active"),item.anchor.addClass("active")},{offset:NavigationGlobal.getHeaderHeight()+$(".onglet-nav").height()})})}if(window.location.pathname.indexOf("/fr/notre-offre/comptes-cartes-et-services/cartes-…nt/decouvrir-toutes-les-cartes/carte-visa-premier")==-1&&$("#fp_nav").removeClass("onglet"),window.location.pathname.indexOf("/fr/espace-prive/gestion/modegestion/synthese-patrimoniale")!=-1&&(localStorage.getItem("ongletTitre")&&$("#mesTitres").parent("li").removeClass("hidden"),localStorage.getItem("ongletAssuranceVie")&&$("#mesAssurancesVie").parent("li").removeClass("hidden")),module.indexOf("comptes-et-contrats")!==-1||module.indexOf("accounts-and-contracts")!==-1)return hasStorage&&(localStorage.getItem("ongletAutresComptes")&&$("#autresComptes").parent("li").removeClass("hidden"),localStorage.getItem("ongletAssuranceVie")&&$("#mesAssurancesVie").parent("li").removeClass("hidden"),null!==window.location.host.match(/bnpparibas/)&&localStorage.getItem("ongletTitre")&&$("#mesTitres").parent("li").removeClass("hidden")),"A-C-R"==GetURLParameter("types")?($("#mesComptes").removeClass("active"),$("#mesAssurancesVie").addClass("active"),GlobalSite.slideOnglet(),void $("#list-sort-by").find("option[value=inputAVenir],option[value=inputPrevisionnel]").remove()):"181-189-185"==GetURLParameter("types")?($("#mesComptes").removeClass("active"),$("#mesTitres").addClass("active"),GlobalSite.slideOnglet(),void $("#list-sort-by").find("option[value=inputAVenir],option[value=inputPrevisionnel]").remove()):void("comptestiers"==GetURLParameter("redir")?($("#autresComptes").addClass("active"),$("#mesComptes").removeClass("active")):$("#mesComptes").addClass("active"));if(module.indexOf("mes-cartes")!==-1)return $("#mesCartes").addClass("active"),localStorage.getItem("ongletAutresComptes")&&$("#autresComptes").parent("li").removeClass("hidden"),localStorage.getItem("ongletAssuranceVie")&&$("#mesAssurancesVie").parent("li").removeClass("hidden"),void(null!==window.location.host.match(/bnpparibas/)&&localStorage.getItem("ongletTitre")&&$("#mesTitres").parent("li").removeClass("hidden"));if(module.indexOf("mes-contrats")!==-1&&hasStorage)return localStorage.getItem("ongletAutresComptes")&&$("#autresComptes").parent("li").removeClass("hidden"),localStorage.getItem("ongletAssuranceVie")&&$("#mesAssurancesVie").parent("li").removeClass("hidden"),null!==window.location.host.match(/bnpparibas/)&&localStorage.getItem("ongletTitre")&&$("#mesTitres").parent("li").removeClass("hidden"),void $("#mesContrats").addClass("active");if(module.indexOf("historique")!==-1&&module.indexOf("historique-des-oppositions")==-1)return void $("#historiqueVirement").addClass("active");if(module.indexOf("historique")!==-1&&module.indexOf("historique-des-oppositions")==-1)return void $("#historiqueVirement").addClass("active");if(module.indexOf("virements")!==-1)return void $("#virementUnitaire").addClass("active");if(module.indexOf("virement-permanent")!==-1)return void $("#virementPermanent").addClass("active");if(module.indexOf("virement-international")!==-1)return void $("#virementInternational").addClass("active");if(module.indexOf("historique-des-oppositions")!==-1)return void $("#histOppo").addClass("active");if(module.indexOf("oppositions")!==-1)return void $("#homeOppo").addClass("active");if(module.indexOf("paylib")!==-1)return void $("#onglet-paylib").addClass("active");if(module.indexOf("mes-beneficiaires")!==-1)return void $("#mesBeneficiaires").addClass("active");if(module.indexOf("autorisation-de-prelevement")!==-1)return void("listecompte"==GetURLParameter("redir")?$("#wl-histo").find("a").addClass("active"):$("#wl-autorisations").find("a").addClass("active"));if(module.indexOf("liste-des-portefeuilles")!==-1||module.indexOf("mouvements-titres")!==-1||module.indexOf("releve-cessions")!==-1||module.indexOf("recherche-valeur")!==-1)return void $("#hbc-releves").addClass("active");if(module.indexOf("achat-euronext")!==-1||module.indexOf("vente-euronext")!==-1||module.indexOf("annulation-euronext")!==-1||module.indexOf("achat-etranger")!==-1||module.indexOf("vente-etranger")!==-1)return void $("#hbc-passageOrdres").addClass("active");if(module.indexOf("espace-opcvm")!==-1||module.indexOf("souscription-opcvm")!==-1||module.indexOf("rachat-opcvm")!==-1||module.indexOf("annulation-opcvm")!==-1)return void $("#hbc-opcvm").addClass("active");var pathname_with_parameters=document.location.pathname+document.location.search;return void $(".onglet a").each(function(){if(pathname_with_parameters==$(this).attr("href"))return $(this).parent("li").hasClass("disable-active")||$(this).addClass("active"),!1})}},activateROP:function(){if(window.location.pathname.indexOf("/fr/connexion/comptes-et-contrats/releve-operations")!=-1||window.location.pathname.indexOf("/fr/espace-prive/comptes-et-contrats/releve-operations")!=-1||window.location.pathname.indexOf("/en/login/accounts-and-contracts/transaction-statement")!=-1||window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats/releve-operations")!=-1||window.location.pathname.indexOf("pfm-rop")!=-1||window.location.pathname.indexOf("/rsc/contrib/dev/rop/rop-2-json.html")!=-1||window.location.pathname.indexOf("/rsc/contrib/dev/rop/rop-pro-json.html")!=-1||window.location.pathname.indexOf("/rsc/contrib/dev/rop/rop-pro-ave.html")!=-1||window.location.pathname.indexOf("/rsc/contrib/dev/rop/rop-a-venir.html")!=-1){$("body").addClass("comptes-contrats");setInterval(function(){$(".active-liste").hasClass("active")&&($(".active-liste").hide(),$(".active-timeline").show(),$(".barre-recherche").removeClass("barre-recherche-timeline")),$(".active-timeline").hasClass("active")&&($(".active-timeline").hide(),$(".active-liste").show(),$(".barre-recherche").addClass("barre-recherche-timeline"))},100),setInterval(function(){$("#input-search-rop").length&&$("#input-search-rop").attr("placeholder",_get("next.fix.rop.seachplaceholder","Rechercher une opération"))},100);if($("body.part,body.bpf").length){var ropGraphData={listCatRopDebit:null,listCatRopCredit:null,debit:{operations:{},sorted:[]},credit:{operations:{},sorted:[]},containerId:"#template-liste-rop",rowClass:".row",debitClass:"js-toggle-categorie-debit",creditClass:"js-toggle-categorie-credit",init:function(){var _this=this;null!=this.listCatRopDebit&&null!=this.listCatRopCredit||$.getJSON("/rsc/contrib/script/client/rop-operations-graph.json",function(datas){$("body.part").length?(_this.listCatRopDebit=datas.part.listCatRopDebit,_this.listCatRopCredit=datas.part.listCatRopCredit):(_this.listCatRopDebit=datas.bpf.listCatRopDebit,_this.listCatRopCredit=datas.bpf.listCatRopCredit)})},getDatas:function(){var _this=this;this.debit.operations={},this.debit.sorted=[],this.credit.operations={},this.credit.sorted=[];var dates=[];$(this.containerId+" "+this.rowClass).each(function(index,rop){var cat=$(rop).find(".rop-cat"),balance=null;cat.hasClass(_this.creditClass)&&(balance="credit"),cat.hasClass(_this.debitClass)&&(balance="debit");var ropCat=_this.getRopCat(rop);if(null!=ropCat){var montant=$(rop).find(".rop-action i").attr("data-montant");montant=montant.replace(".",""),montant=montant.replace(",","."),montant=Math.abs(parseFloat(montant));var date=$(rop).find(".date-operation").text();if(dates.push(date),"undefined"==typeof _this[balance].operations["rop-cat-"+ropCat]){var color="credit"==balance?_this.listCatRopCredit["rop-"+ropCat].color:_this.listCatRopDebit["rop-"+ropCat].color,label="credit"==balance?_this.listCatRopCredit["rop-"+ropCat].name:_this.listCatRopDebit["rop-"+ropCat].name;_this[balance].operations["rop-cat-"+ropCat]={title:"icon  irop-"+ropCat,id:ropCat,label:label,color:color,montant:montant}}else _this[balance].operations["rop-cat-"+ropCat].montant+=montant}});var ends=this.getDatesEnds(dates);return this.start_date=ends.start,this.end_date=ends.end,this.getPourcentage(),this.formatMontant(),this.triPourcentage(),{start_date:this.start_date,end_date:this.end_date,debit:{total:this.debit.total,operations:this.debit.sorted},credit:{total:this.credit.total,operations:this.credit.sorted}}},getDatesEnds:function(dates){function checkDateEnds(date){for(var i=0;i<length;i++)null!=start_date?(start_date=compareDate(dates[i],start_date,"<"),end_date=compareDate(dates[i],end_date,">")):(start_date=dates[i],end_date=dates[i])}function compareDate(date1,date2,compare){function comparaison(a,b,compare){return">"==compare?a>b:"<"==compare?a<b:void 0}var jd1=parseInt(date1.split("/")[0]),md1=parseInt(date1.split("/")[1]),ad1=parseInt(date1.split("/")[2]),jd2=parseInt(date2.split("/")[0]),md2=parseInt(date2.split("/")[1]),ad2=parseInt(date2.split("/")[2]);if(ad1&&comparaison(ad1,ad2,compare))return date1;if(ad1==ad2||!ad1){if(comparaison(md1,md2,compare))return date1;if(md1==md2&&comparaison(jd1,jd2,compare))return date1}return date2}var i=0,length=dates.length,maxDiff=null,start_date=null,end_date=null;if(dates.sort(function(a,b){var aMois=(a.split("/")[0],a.split("/")[1]),bMois=(b.split("/")[0],b.split("/")[1]),diff=Math.abs(aMois-bMois);diff>maxDiff&&(maxDiff=diff)}),maxDiff>4){for(i=0;i<length;i++){var mois=dates[i].split("/")[1];mois>6?dates[i]+="/2":dates[i]+="/3"}checkDateEnds(dates)}else checkDateEnds(dates);return{start:start_date,end:end_date}},getPourcentage:function(){var debit=this.debit.operations;this.debit.total=0;for(operation in this.debit.operations)this.debit.total+=debit[operation].montant;var credit=this.credit.operations;this.credit.total=0;for(operation in this.credit.operations)this.credit.total+=credit[operation].montant;for(operation in this.debit.operations)debit[operation].value=100*debit[operation].montant/this.debit.total,debit[operation].value=parseFloat(debit[operation].value.toFixed(2));for(operation in this.credit.operations)credit[operation].value=100*credit[operation].montant/this.credit.total,credit[operation].value=parseFloat(credit[operation].value.toFixed(2))},formatMontant:function(){this.debit.total=addThousandsSep(formatNumber(this.debit.total,2));for(op in this.debit.operations){var montant=this.debit.operations[op].montant;montant=formatNumber(montant,2),this.debit.operations[op].montant=addThousandsSep(montant)}this.credit.total=addThousandsSep(formatNumber(this.credit.total,2));for(op in this.credit.operations){var montant=this.credit.operations[op].montant;montant=formatNumber(montant,2),this.credit.operations[op].montant=addThousandsSep(montant)}},triPourcentage:function(){var _this=this,debitTri=Object.keys(this.debit.operations).sort(function(a,b){return _this.debit.operations[b].value-_this.debit.operations[a].value}),i=0,length=debitTri.length;for(i;i<length;i++)this.debit.sorted.push(this.debit.operations[debitTri[i]]);var creditTri=Object.keys(this.credit.operations).sort(function(a,b){return _this.credit.operations[b].value-_this.credit.operations[a].value}),i=0,length=creditTri.length;for(i;i<length;i++)this.credit.sorted.push(this.credit.operations[creditTri[i]])},getRopCat:function(rop){var _this=this,ropClasses=$(rop).find(".rop-cat .icon").attr("class").split(" "),catID=null;return $.each(ropClasses,function(index,ropClass){if(_this.hasCatID(ropClass))return catID=ropClass.split("-")[1],!1}),catID},hasCatID:function(ropClass){var regex=/irop-/g,hasID=regex.test(ropClass);return hasID}};ropGraphData.init();var ropOperationsGraph={ropDatas:null,showGraphInterval:null,navRop:null,init:function(){var _this=this;$(".comptes-contrats").on("click",".rop-wrapper .categories-menu .cap",function(e){if(e.preventDefault(),$(this).hasClass("active")||$(this).hasClass("disable"))return!1;if(null!=_this.getDatas&&"undefined"!=typeof ropOperationsGraph&&$("#template-liste-rop").length&&_this.getDatas(),$(this).hasClass("rop-graph")){var el=$(this);_this.navRop=$(".barre-recherche").clone(),null==_this.showGraphInterval&&(_this.showGraphInterval=setInterval(function(){null!=_this.getDatas&&(_this.changeDisplayRopNav(),_this.watchKeyPress(),_this.watchTimeLine(),clearInterval(_this.showGraphInterval),_this.showGraphInterval=null,$(".rop-wrapper .categories-menu .cap.active").addClass("prev-active"),$(".rop-wrapper .categories-menu .cap").removeClass("active"),el.addClass("active"),$("#template-liste-rop, #template-avenir-rop").addClass("hidden"),$("#rop-operations-graph").remove(),_this.injectCharts())},100))}else $(this).hasClass("prev-active")?($(".rop-wrapper .categories-menu .cap").removeClass("active prev-ative"),$("#template-liste-rop, #template-avenir-rop").removeClass("hidden"),$("#template-liste-rop").length?_this.changeDisplayRopList():_this.changeDisplayRopAvenir(),$(this).addClass("active"),$("#rop-operations-graph").remove()):($(".rop-wrapper .categories-menu .cap").removeClass("active prev-ative"),$("#nav-rop-graph").remove(),$("a.row.rop-avenir-header")[0].click())})},changeDisplayRopNav:function(){$(".barre-recherche").find(".filtre-tri").addClass("hidden"),$(".barre-recherche").find("#button-show-categorie-pointee").addClass("hidden"),$(".barre-recherche").find(".recherche-avancee").removeClass("hidden"),$("body.part").length?$(".barre-recherche").find(".key-word-search").css("width","calc(100% - 520px)"):$(".barre-recherche").find(".key-word-search").css("width","calc(100% - 505px)")},watchKeyPress:function(){$("#input-search-rop").on("keyup",function(){document.getElementsByClassName("rop-2-json")[0].click()})},watchTimeLine:function(){function enableRedirection(){watchTimeLineInterval=setInterval(function(){$(".active-timeline").length&&$(".active-timeline").hasClass("active")&&(clearInterval(watchTimeLineInterval),$(".active-liste").on("click",redirectToRopGraph))},500)}function disableRedirection(){watchTimeLineInterval=setInterval(function(){$(".active-timeline").length&&$(".active-timeline").hasClass("active")&&(clearInterval(watchTimeLineInterval),$(".active-liste").off("click",redirectToRopGraph))},500)}var watchTimeLineInterval;enableRedirection(),$("#id_balise_div").delegate(".rop-2-json, .rop-a-venir","click",function(){clearInterval(watchTimeLineInterval),disableRedirection()});var redirectToRopGraph=function(){window.setTimeout(function(){document.getElementsByClassName("rop-graph")[0].click()},200)}},changeDisplayRopAvenir:function(){$(".barre-recherche").find(".filtre-tri").removeClass("hidden"),$(".barre-recherche").find("#button-show-categorie-pointee").addClass("hidden"),$(".barre-recherche").find(".recherche-avancee").addClass("hidden"),
$("body.part").length?$(".barre-recherche").find(".key-word-search, .filtre-tri").css("width","calc((100% - 222px)/2)"):$(".barre-recherche").find(".key-word-search, .filtre-tri").css("width","calc((100% - 185px)/2)")},changeDisplayRopList:function(){$(".barre-recherche").find(".filtre-tri").removeClass("hidden"),$(".barre-recherche").find("#button-show-categorie-pointee").removeClass("hidden"),$(".barre-recherche").find(".recherche-avancee").removeClass("hidden"),$("body.part").length?$(".barre-recherche").find(".key-word-search, .recherche-avancee, .filtre-tri").css("width","calc((100% - 300px)/3)"):$(".barre-recherche").find(".key-word-search, .recherche-avancee, .filtre-tri").css("width","calc((100% - 245px)/3)")},injectCharts:function(){var containerGraph=$('<section class="wrap pfm-container evolution" id="rop-operations-graph"></section>'),datas=this.ropDatas,creditGraph="",debitGraph="";datas.debit.operations.length&&datas.credit.operations.length&&containerGraph.append('<div class="mobile-pages-wrap icon icon-fright pull-right"></div>'),datas.debit.operations.length&&(debitGraph='<section class="pfm-wrapper depenses block-1">\n                                <h2>'+_get("next.main.rop.expenses_breakdown","Répartition des dépenses")+"<span> "+_get("next.main.rop.from","du")+' <span class="js-date-from">'+datas.start_date+"</span> "+_get("next.main.rop.to","au")+' <span class="js-date-to">'+datas.end_date+'</span></span></h2>\n                                <div class="row">\n                                    <div class="col-60 mob-100 unselectable">\n                                        <figure class="doughnut-figure unselectable">\n                                            <div id="detailsSpendings" class="custom-tooltip"></div>\n                                            <canvas width="400" height="400" style="height: 400px; width: 400px" id="spendingDoughnut" name="spendingDoughnut" ></canvas>\n                                        </figure>\n                                    </div>\n                                    <div class="col-40 mob-100">\n                                        <p><strong class="libelle">'+_get("next.main.rop.expenditure","Total de vos dépenses")+' : <span class="pull-right" id="total-spendings">'+datas.debit.total+' €</span></strong></p>\n                                        <div id="js-legend-spendings" class="chart-legend"></div>\n                                    </div>\n                                </div>\n                            </section>'),datas.credit.operations.length&&(creditGraph='<section class="pfm-wrapper recette block-2">\n                                <h2>'+_get("next.main.rop.income_breakdown","Répartition des recettes")+"<span> "+_get("next.main.rop.from","du")+' <span class="js-date-from">'+datas.start_date+"</span> "+_get("next.main.rop.to","du")+' <span class="js-date-to">'+datas.end_date+'</span></span></h2>\n                                <div class="row">\n                                    <div class="col-60 mob-100 unselectable">\n                                        <figure class="doughnut-figure unselectable">\n                                            <div id="detailsEvolutions" class="custom-tooltip-evol"></div>\n                                            <canvas width="400" height="400" style="height: 400px; width: 400px" id="spendingDoughnutEvolutions" ></canvas>\n                                        </figure>\n                                    </div>\n                                    <div class="col-40 mob-100">\n                                        <p><strong class="libelle">'+_get("next.main.rop.income","Total de vos recettes")+': <span class="pull-right" id="total-evolutions">'+datas.credit.total+' €</span></strong></p>\n                                        <div id="js-legend-evolutions" class="chart-legend"></div>\n                                    </div>\n                                </div>\n                            </section>'),(datas.debit.operations.length||datas.credit.operations.length)&&(containerGraph.append(debitGraph+creditGraph),$(".wrapper-rop-1 .categories-menu").after(containerGraph)),document.getElementById("spendingDoughnut")&&this.creaCharts({chartId:"spendingDoughnut",legendId:"js-legend-spendings",detailsId:"detailsSpendings",totalId:"total-spendings",datas:{operations:datas.debit.operations,total:datas.debit.total}}),document.getElementById("spendingDoughnutEvolutions")&&this.creaCharts({chartId:"spendingDoughnutEvolutions",legendId:"js-legend-evolutions",detailsId:"detailsEvolutions",totalId:"total-evolutions",datas:{operations:datas.credit.operations,total:datas.credit.total}}),this.controlles(),$(".chart-0-legend > li").first().addClass("actived"),$(".doughnut-legend > li").first().addClass("actived"),$(".doughnut-legend > a").first().addClass("actived"),$("#spendingDoughnutscat , #spendingDoughnut , .doughnut-legend li").on("mousemove",function(){$(".doughnut-legend > li").hasClass("actived")&&$(".doughnut-legend > li").removeClass("actived"),$(".doughnut-legend > a").hasClass("actived")&&$(".doughnut-legend > a").removeClass("actived")})},getDatas:function(){this.ropDatas=ropGraphData.getDatas()},creaCharts:function(options){if(options.chartOptions)var chartOptions=options.chartOptions;else var chartOptions={showTooltips:!0,percentageInnerCutout:50,tooltipTemplate:"<%= value %>%",tooltipFontFamily:"'bnp_bold', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipCornerRadius:0,tooltipFillColor:"#424242",tooltipFontSize:24,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend list-rop <%=id.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li class="<%=segments[i].title%> row rop-<%=segments[i].ropID%>"><i class="<%=segments[i].title%>"></i><span class="keyword"><%if(segments[i].label){%><%=segments[i].label%><%}%></span><span class="montant-total"><%=segments[i].montant%><span> €</span></span></li><%}%></ul>'};var chartCanvas=document.getElementById(options.chartId).getContext("2d"),chart=new Chart(chartCanvas).Doughnut(options.datas.operations,chartOptions),segments=chart.segments;$.each(segments,function(index){segments[index].title=options.datas.operations[index].title,segments[index].ropID=options.datas.operations[index].id}),document.getElementById(options.legendId).innerHTML=chart.generateLegend(),$("#"+options.totalId+" p .pull-right").text(options.datas.total+" €");var detailsSpendings=$("#"+options.detailsId);$("#"+options.chartId).on("mousemove",function(evt){var activePoints=chart.getSegmentsAtEvent(evt),currentList=$("."+chart.id+"-legend");if("undefined"!=typeof activePoints[0]?(currentList.find("li").css("opacity",.5),currentList.find("li:eq("+activePoints[0].index+")").css("opacity",1),detailsSpendings.css("opacity",1)):(currentList.find("li").css("opacity",1),detailsSpendings.css("opacity",0)),activePoints.length){var detailsHTMLSpending='<div class="'+activePoints[0].title+'">'+activePoints[0].montant+"  €</div><div>"+activePoints[0].label+"</div>";detailsSpendings.html(detailsHTMLSpending)}}),$("#"+options.legendId+" li").on("mousemove",function(){detailsSpendings.css("opacity",1);var currentClass=$(this).attr("class"),currentIndex=$(this).index(),detailsHTMLSpending='<div class="'+currentClass+'">'+options.datas.operations[currentIndex].value+"  %</div><div>"+options.datas.operations[currentIndex].label+"</div>";detailsSpendings.html(detailsHTMLSpending),$("#"+options.legendId).find("li").css("opacity",.5),$(this).css("opacity",1),detailsSpendings.css("opacity",1),$(".doughnut-legend > li").hasClass("actived")&&$(".doughnut-legend > li").removeClass("actived")}),$("#"+options.legendId+" li:first-child").trigger("mousemove"),$("#"+options.legendId+" li").mouseout(function(){$("#"+options.legendId+" li").css("opacity",.5),detailsSpendings.css("opacity",0)})},controlles:function(){$(".mobile-pages-wrap").click(function(){$(this).toggleClass("go-back"),$(".pfm-container > section").toggleClass("mobile-change")})}};ropOperationsGraph.init()}var intervalRop=setInterval(function(){$(".rop-wrapper").length&&(clearInterval(intervalRop),$("body").on("click",".resetRecherche",function(){$("body.part,body.bpf").length&&window.location.reload();var resetRechercheInterval=($(this),setInterval(function(){if($(".wrapper-main-rop-list + section.row").length){clearInterval(resetRechercheInterval),$(".wrapper-main-rop-list + section.row").insertBefore($(".wrapper-main-rop-list"));var operationAvenir=_get("next.fix.rop.opav","Opérations à venir");$(".noAVE").length&&(operationAvenir=_get("next.fix.rop.noopav","Aucune opération à venir")),$("body.part,body.bpf").length?$("<section class='row categories-menu'><a  href='#' class='col-35 center degrade-hover cap rop-2-json'><div class='icon icon-ok-valid'></div><span class='label-name no-text-in-mobile'>"+_get("next.fix.rop.opcomp","Opérations Comptabilisées")+" </span></a><a href='#' class='col-30 center degrade-hover cap rop-a-venir'><div class='icon icon-time'></div><span class='label-name no-text-in-mobile'>"+operationAvenir+"</span></a><a  href='#' class='col-35 center degrade-hover cap rop-graph'><div class='icon icon-camembert'></div><span class='label-name no-text-in-mobile'>"+_get("next.main.rop.charts","Graphiques")+".</span></a></section>").insertAfter("#total-results"):$("<section class='row categories-menu'><a  href='#' class='col-50 center degrade-hover cap rop-2-json'><div class='icon icon-ok-valid'></div><span class='label-name no-text-in-mobile'>"+_get("next.fix.rop.opcomp","Opérations Comptabilisées")+"  </span></a><a href='#' class='col-50 center degrade-hover cap rop-a-venir'><div class='icon icon-time'></div><span class='label-name no-text-in-mobile'>"+operationAvenir+"</span></a></section>").insertAfter("#total-results"),$(".section-list-operation").hasClass("avenir")?($(".categories-menu a.rop-2-json").removeClass("active"),$(".categories-menu a.rop-a-venir").addClass("active")):($(".categories-menu a.rop-a-venir").removeClass("active"),$(".categories-menu a.rop-2-json").addClass("active"))}},200))}),$(".dropdown-header .btn-select").click(function(){$(".dropdown-container-header .dropdown-list-header ul li").css("height","65px");var singleHeight=65,accountsNumber=$(".dropdown-container-header .dropdown-list-header ul li").length,totalHeight=singleHeight*accountsNumber;console.log(totalHeight),$(".dropdown-container-header .dropdown-list-header").css("height",totalHeight+"px")}))},100);setInterval(function(){if(($(".rop-wrapper").length||$(".wrapper-rop-1").length)&&0==$("html.maquette").length){if($(".debit-duree").length&&($("#autre-compte-container").css("top","185px"),$(".header-pro .libelle-compte .dropdown-list-header").css("top","190px")),0==$(".categories-menu").length&&!$(".section-list-operation").hasClass("rop-timeline")){$("body.part,body.bpf").length&&"undefined"!=typeof ropOperationsGraph&&$("#template-liste-rop").length&&ropOperationsGraph.getDatas();var operationAvenir=_get("next.fix.rop.opav","Opérations à venir");if($(".noAVE").length&&(operationAvenir=_get("next.fix.rop.noopav","Aucune opération à venir")),$("body.part,body.bpf").length){var operationAvenirDisable="";$(".noAVE").length&&(operationAvenirDisable=" disable"),$("<section class='row categories-menu'><a  href='#' class='col-35 center degrade-hover cap rop-2-json'><div class='icon icon-ok-valid'></div><span class='label-name no-text-in-mobile'> "+_get("next.fix.rop.opcomp","Opérations Comptabilisées")+"  </span></a><a href='#' class='col-30 center degrade-hover cap rop-a-venir"+operationAvenirDisable+"'><div class='icon icon-time'></div><span class='label-name no-text-in-mobile'>"+operationAvenir+"</span></a><a  href='#' class='col-35 center degrade-hover cap rop-graph'><div class='icon icon-camembert'></div><span class='label-name no-text-in-mobile'>"+_get("next.main.rop.charts","Graphiques")+"</span></a></section>").insertAfter("a.rop-avenir-header"),""!=$("#total-results").text()&&($(".barre-recherche .recherche-avancee").hasClass("active")&&($(".barre-recherche .recherche-avancee").click(),$("body, html").scrollTop(0)),$("<section class='row categories-menu'><a  href='#' class='col-35 center degrade-hover cap rop-2-json'><div class='icon icon-ok-valid'></div><span class='label-name no-text-in-mobile'>"+_get("next.fix.rop.opcomp","Opérations Comptabilisées")+"  </span></a><a href='#' class='col-30 center degrade-hover cap rop-a-venir disable"+operationAvenirDisable+"'><div class='icon icon-time'></div><span class='label-name no-text-in-mobile'>"+operationAvenir+"</span></a><a  href='#' class='col-35 center degrade-hover cap rop-graph'><div class='icon icon-camembert'></div><span class='label-name no-text-in-mobile'>"+_get("next.main.rop.charts","Graphiques")+"</span></a></section>").insertAfter("#total-results"))}else $("<section class='row categories-menu'><a  href='#' class='col-50 center degrade-hover cap rop-2-json'><div class='icon icon-ok-valid'></div><span class='label-name no-text-in-mobile'>"+_get("next.fix.rop.opcomp","Opérations Comptabilisées")+" </span></a><a href='#' class='col-50 center degrade-hover cap rop-a-venir'><div class='icon icon-time'></div><span class='label-name no-text-in-mobile'>"+operationAvenir+"</span></a></section>").insertAfter("a.rop-avenir-header");$(".categories-menu .rop-2-json").addClass("active"),$(".section-list-operation").hasClass("avenir")?($(".categories-menu a.rop-2-json").removeClass("active"),$(".categories-menu a.rop-a-venir").addClass("active")):($(".categories-menu a.rop-a-venir").removeClass("active"),$(".categories-menu a.rop-2-json").addClass("active")),$("body.part,body.bpf").length?$(".section-list-operation a.rop-avenir-header").addClass("hidden"):($(".section-list-operation a.rop-avenir-header").css({position:"absolute",top:"15px",left:"50%","z-index":"1",width:"48%","margin-bottom":"0",height:"75px",overflow:"hidden",opacity:"0"}),$(".section-list-operation.avenir a.rop-avenir-header").css({left:"30px"})),$("#ActionsRapides").addClass("hidden"),$("section.action-rapide").addClass("hidden"),$("#AncreActionsRapides").addClass("hidden")}0==$(".js-close-caracteristique").length&&($(".action-caracteristiques").on("click",function(){setTimeout(function(){$("#Caracteristiques").is(":visible")||$("#rop-caracteristiques").is(":visible")?($(".action-caracteristiques").addClass("active"),$("#Caracteristiques,#rop-caracteristiques").prepend('<span class="close js-close-caracteristique" style="position: absolute;right: 10px;top: 17px;">&#10005;</span>')):$(".action-caracteristiques").removeClass("active")},100)}),$("body").on("click",".js-close-caracteristique",function(){$(".action-caracteristiques").removeClass("active"),$("#rop-caracteristiques").hide(),$("#Caracteristiques").hide()}))}},100),setInterval(function(){($(".rop-wrapper").length||$(".wrapper-rop-1").length)&&($("html.maquette").length||($("body").hasClass("pro")?$(".wrapper-main-rop-list").length>0&&0==$("#rop-caracteristiques + .wrapper-main-rop-list").length&&($("section.action-rapide").insertBefore($(".wrapper-main-rop-list")),$("#rop-caracteristiques").insertBefore($(".wrapper-main-rop-list"))):($(".wrapper-main-rop-list").length>0&&0==$("#Caracteristiques + .wrapper-main-rop-list").length&&($("#ActionsRapides").insertBefore($(".wrapper-main-rop-list")),$("#Caracteristiques").insertBefore($(".wrapper-main-rop-list"))),$(".wrapper-timeline-rop").length>0&&0==$("#Caracteristiques + .wrapper-timeline-rop").length&&($("#ActionsRapides").insertBefore($(".wrapper-timeline-rop")),$("#Caracteristiques").insertBefore($(".wrapper-timeline-rop")))),$("button.recherche-avancee").find("i").text(_get("next.fix.rop.advsearch","Recherche avancée")),$("body").hasClass("pro")&&$("button.recherche-avancee").text(_get("next.fix.rop.advsearch","Recherche avancée")),$("#ActionsRapides.actions-rapides-top").hide()),0==$(".toggle-cube-button").length&&($("#button-show-categorie-pointee").attr("title",_get("next.fix.rop.pointage","Pointage")),$(".recherche-rop .row").append("<div class='col-10 pointage toggle-cube-button' title='"+_get("next.fix.rop.morefunc","Plus de fonctionnalités")+"'><span class='icon plus-moins'></span></div>"),$("body").hasClass("pro")&&$(".barre-recherche .row").append("<div class='col-10 pointage toggle-cube-button' title='"+_get("next.fix.rop.morefunc","Plus de fonctionnalités")+"'><span class='icon plus-moins'></span></div>"),$(".toggle-cube-button").click(function(){$(this).find("span").toggleClass("plus"),$(this).find("span").hasClass("plus")?($("#ActionsRapides").show().removeClass("hidden"),$("section.action-rapide").show().removeClass("hidden")):($("#ActionsRapides").hide().addClass("hidden"),$("section.action-rapide").hide().addClass("hidden"),$("#Caracteristiques").hide(),$("#rop-caracteristiques").hide(),$(".action-caracteristiques").removeClass("active"))})),($("body").hasClass("bpf")||$(window.top.document.body).hasClass("bpf"))&&0==$(".toggle-print").length&&($("<div class='col-10 pointage toggle-cube-button toggle-print' title='Imprimer'><span class='icon icon-printer'></span></div>").insertAfter("#downloadReleveRop"),$(".toggle-print").on("click",function(){window.print()})))},100)}},updateNomClient:function(){$("#nomTitulaire").length>0&&$("#nomTitulaire").html(GlobalSite.headerInfos.nom)},identLayer:function(){},launchPrint:function(){$(".icon-print, .js-print").on("click",function(){window.print()})},ribPrint:function(){var added_rib=!1;$("body").on("click.print",".button-print-rib",function(){var contenu=$("#rib-format-html").html();added_rib||($("#rib-format-html").append('<hr><div class="rib-added">'+contenu+"</div>"),$(".rib-added").addClass("hidden display-on-print"),added_rib=!0),window.print()})},removeMultiSiteElements:function(){$("body").hasClass("part")&&$("a").each(function(){$(this).attr("href")&&(this.href=this.href.replace("/espace-pro","/connexion"),this.href=this.href.replace("/espace-prive","/connexion"))}),$("body").hasClass("bpf")&&$("a").each(function(){$(this).attr("href")&&(this.href=this.href.replace("/connexion","/espace-prive"),this.href=this.href.replace("/espace-pro","/espace-prive"))}),$("body").hasClass("pro")&&$("a").each(function(){$(this).attr("href")&&(this.href=this.href.replace("/connexion","/espace-pro"),this.href=this.href.replace("/espace-prive","/espace-pros"))})},mobileUserAgent:function(){var ua=window.navigator.userAgent;return ua.match(/.*android.*/i)?this.globalAndroid():ua.match(/.*iphone.*/i)?this.globalIphone():ua.match(/.*iemobile.*/i)?this.globalWindowsPhone():void 0},globalAndroid:function(){$(".icon-g-play").removeClass("hidden")},globalIphone:function(){$(".icon-app-store").removeClass("hidden")},globalWindowsPhone:function(){$(".icon-windows-store").removeClass("hidden")},increaseFontSize:function(){if(hasStorage){var $control_font_small=$(".fontSmall"),$control_font_big=$(".fontBig"),class_big_font="bigFontMode",class_small_font="smallFontMode",storage_key="changeFontSize",increase=function(){$("html").addClass(class_big_font).removeClass(class_small_font),localStorage.setItem(storage_key,1),$control_font_small.removeClass("hidden"),$control_font_big.addClass("hidden")},decrease=function(){$("html").addClass(class_small_font).removeClass(class_big_font),localStorage.setItem(storage_key,-1),$control_font_small.addClass("hidden"),$control_font_big.removeClass("hidden")},default_font=function(){$("html").removeClass(class_big_font+" "+class_small_font),localStorage.removeItem(storage_key),$control_font_big.removeClass("hidden"),$control_font_small.removeClass("hidden")},font_size_onload=function(){return 1==localStorage.getItem("changeFontSize")?void increase():localStorage.getItem("changeFontSize")==-1?void decrease():void default_font()};font_size_onload(),$(".fontSmall").on("click",function(){return 1==localStorage.getItem("changeFontSize")?(default_font(),!1):(decrease(),!1)}),$(".fontBig").on("click",function(){return localStorage.getItem("changeFontSize")==-1?(default_font(),!1):(increase(),!1)})}},cookieSiteSize:function(){},siteSize:function(){var sizes={1:"mw-1920",2:"mw-1600",3:"mw-1400"};hasStorage&&localStorage.getItem("siteSize")&&void 0!==sizes[localStorage.getItem("siteSize")]?$("body").addClass(sizes[localStorage.getItem("siteSize")]):$("body").addClass(sizes[3]),1===$(".onglet-nav").length&&($(".list-outils").before('<div class="site-size-container no-mob pointer"><i class="icon icon-resize" title="'+_get("next.main.sitesize1","Largeur du site")+'"></i></div>'),$(".site-size-container .icon-resize").on("click",function(){$("#choose-size").hasClass("hidden")?$("#choose-size").removeClass("hidden"):$("#choose-size").addClass("hidden")}),$(".onglet-nav").before('<div class="popover hidden" id="choose-size"><div class="popover-content form-tooltip "><span class="close" data-hide-section="#choose-size">&#10005;</span><fieldset><div class="row"><label>'+_get("next.main.sitesize1","Largeur du site")+'</label><div class="radio-inline"><input id="mw2" type="radio" name="select-site-size" value="1" class="custom-radio"><label for="mw2" class="radio-label"><small>'+_get("next.main.sitesize2","Grand")+'</small></label><br><input id="mw3" type="radio" name="select-site-size" value="2" class="custom-radio"><label for="mw3" class="radio-label"><small>'+_get("next.main.sitesize3","Moyen")+'</small></label><br><input id="mw4" type="radio" name="select-site-size" value="3" class="custom-radio" checked><label for="mw4" class="radio-label"><small>'+_get("next.main.sitesize4","Petit")+"</small></label></div></div></fieldset></div>"),$("#new-resize").find(".close").on("click",function(){$("#new-resize").addClass("hidden")}),$("#choose-size").find(".close").on("click",function(){$("#choose-size").addClass("hidden")}),$("[name=select-site-size]").length>0&&(hasStorage&&localStorage.getItem("siteSize")&&($("[name=select-site-size]").prop("checked",!1),$("[name=select-site-size][value="+localStorage.getItem("siteSize")+"]").prop("checked",!0)),$("[name=select-site-size]").on("click",function(){$("body").removeClass("mw-1920 mw-1600 mw-1400"),void 0!==sizes[$(this).val()]&&($("body").addClass(sizes[$(this).val()]),hasStorage&&localStorage.setItem("siteSize",$(this).val()))})),$("#open-site-size-popup").on("click",function(){$("#new-resize").addClass("hidden"),setTimeout(function(){$("#choose-size").removeClass("hidden")},50)}))},erreurTechnique:function(){var current_url=document.URL,module=current_url.substr(current_url.lastIndexOf("/")+1);if(""==module){var current_url_parts=current_url.split("/");module=current_url_parts[current_url_parts.length-2]}if(module.indexOf("erreur-technique")!=-1){var id=$(document).getUrlParam("ID"),eq=$(document).getUrlParam("eq");if("INTE"==ENVIRONNEMENT||"QUALIF"==ENVIRONNEMENT)return void $("#mainContent").append('<p id="tech-error-log">(ID: '+id+" / eq: "+eq+")</p>");$("#content_indisponible").append('<p id="tech-error-log">(ID: '+id+" / eq: "+eq+")</p>")}},menuMobile:function(){$(window).width()>751?($("#fp_hero>.wcm-image").width("100%"),$("#fp_nav").show(),$("#fp_infos_hero h1").off("click")):($("#fp_hero>.wcm-image").width($(window).width()),$("#fp_infos_hero h1").append($("<span/>").addClass("icon-white-triangle-left")).on("click",function(){"none"==$("#fp_nav").css("display")?$("#fp_nav").show():$("#fp_nav").hide()})),$("#fp_hero").append($("#fp_infos_hero ul")),$(window).on("resize",function(){$(window).width()>751?($("#fp_hero>.wcm-image").width("100%"),$("#fp_nav").show(),$("#fp_infos_hero h1").off("click")):($("#fp_hero>.wcm-image").width($(window).width()),$("#fp_infos_hero h1").append($("<span/>").addClass("icon-white-triangle-left")).on("click",function(){"none"==$("#fp_nav").css("display")?$("#fp_nav").show():$("#fp_nav").hide()}))})},popinActions:function(){if(0!=$("#fp_plus_details").length){var li=$("#fp_plus_details_sommaire ul li"),size=li.length,height=[0];$("body").append($("<div/>").addClass("fp_popin").append($("#fp_plus_details"))),$("#fp_endetail .btn-primary").on("click",function(){$(".fp_popin").show(),$("#wrapper").addClass("hidden"),$("#fp_plus_details").addClass("nano has-scrollbar mw-1400"),$("#fp_plus_details_content").addClass("nano-content").append($("#fp_plus_details_content").nextAll().removeClass("hidden")).animate({scrollTop:height[0]},1e3).find(".close-fp-popup").on("click",function(){$(".fp_popin").hide(),$("#wrapper").removeClass("hidden"),$("#mainMenu nav ul").removeAttr("style")}),li.each(function(index){var i=index+1;height.push(height[index]+$("#fp_plus_details"+i).height()),$(this).on("click",function(){$("#fp_plus_details_content").animate({scrollTop:height[index]},1e3),li.removeClass("actif"),$(this).addClass("actif")})})}),li.first().addClass("actif"),$("#fp_plus_details_content").on("scroll",function(){var that=$(this);$(this).children().each(function(){$(this).index()+1<size&&($(this).position().top+$(this).height()-that.height()<0?(li.removeClass("actif"),li.eq($(this).index()+1).addClass("actif")):0==$(this).index()&&(li.removeClass("actif"),li.eq(0).addClass("actif")))})})}},sliderFP:function(){var ul=$("<ul/>").addClass("nav_slider");$("#fp_slider div").addClass("fp_slider_list").find("ul > li").each(function(index,elem){0==index?$(elem).addClass("fp_actif").css("left","0px"):$(elem).css("left",100*index+"%"),ul.append($("<li/>").on("click",function(){}))}),ul.find("li").first().addClass("nav_actif"),$("#fp_slider").append(ul);var next_slide=function(index){index<$("#fp_slider div.fp_slider_list ul li").length?($("#fp_slider div.fp_slider_list ul").animate({left:"-=100%"}),$("#fp_slider ul.nav_slider li.nav_actif").removeClass("nav_actif").next().addClass("nav_actif"),index++):($("#fp_slider div.fp_slider_list ul").animate({left:"0"}),$("#fp_slider ul.nav_slider li").removeClass("nav_actif").first().addClass("nav_actif"),index=1),setTimeout(next_slide,3e3,index)};setTimeout(next_slide,3e3,1)},counterListe:function(){$("#fp_faq").length>0&&$("#fp_faq").find("h2 span").text($("#fp_faqListe").find("li").has("span.icon-bulle").length),$("#fp_outilsSim").length>0&&$("#fp_outilsSim").find("h2 span").text($("#fp_outilsSimliste").find("li").has("a").length)},accordionListe:function(){$("#fp_faq").length>0&&($("#fp_faqListe li:not(:has(span.icon-bulle))").addClass("hidden"),$("#fp_faqListe li:has(span.icon-bulle)").on("click",function(){if($("#fp_faqListe li:has(span.icon-bulle)").find(".icon-carret-right").removeClass("rotation-icone"),$(this).next().hasClass("hidden")){$(this).find(".icon-carret-right").addClass("rotation-icone");var hidden=!0}return $("#fp_faqListe li:not(:has(span.icon-bulle))").removeClass("hidden").addClass("hidden"),hidden&&$(this).next().toggleClass("hidden"),!1}))},accordionListeDiag:function(){$("#diag_celibataire, #diag_sans-enfants, #diag_avec-enfants, #diag_monoparentale, #diag_retraite").length>0&&($(".fp_diag li:not(:has(span.icon-bulle))").addClass("hidden"),$(".fp_diag li:has(span.icon-bulle)").on("click",function(){if($(".fp_diag li:has(span.icon-bulle)").find(".icon-carret-right").removeClass("rotation-icone"),$(this).next().hasClass("hidden")){$(this).find(".icon-carret-right").addClass("rotation-icone");var hidden=!0}return $(".fp_diag li:not(:has(span.icon-bulle))").removeClass("hidden").addClass("hidden"),hidden&&$(this).next().toggleClass("hidden"),!1}))},initMenuFP:function(){},navBPF:function(){},paramRC:function(){"priority"==GetURLParameter("rc")&&$("body").addClass("priority")},initAnchorFix:function(){var $ongletNav=$(".onglet-nav");$ongletNav.length>0&&$ongletNav.find("a").on("click",function(e){if(void 0!==$(this).attr("href")&&$(this).attr("href").match(/^#.*/)){e.preventDefault(),$target=$($(this).attr("href"));var offset=$target.offset().top,ongletNavOffset=Number($ongletNav.css("top").replace("px",""))+$ongletNav.outerHeight(!0);$("html, body").animate({scrollTop:offset-ongletNavOffset},200)}})},priorityHub:function(){$(".btn-decouvrir-priority").on("click",function(){return $(this).parents("div").eq(0).hide().prev("div").hide(),$(this).parents("div").eq(0).next("div").show(),!1}),$(".back-priority-bonsplans a").on("click",function(){return $(this).parents("div").eq(0).hide(),$(this).parents("div").prev("div").show().prev("div").show(),!1}),$(".hub-priority").find("a").each(function(){window.location.pathname==$(this).attr("href")&&$(this).addClass("active")})},initPopinDeconnexion:function(){try{if(void 0===cp)return;if(!$("body").hasClass("deconnexion"))return;cp.show_popin("deco")}catch(e){}},initJsLoader:function(){$("[data-jsloader]").each(function(){$(this).click(function(){var target=$($(this).data("jsloader"));target.is(":visible")?GlobalSite.endJsLoader(target):GlobalSite.startJsLoader(target)})}),GlobalSite.startJsLoader()},startJsLoader:function(loaderEl){GlobalSite.jsLoaders=$(".jsloader"),"undefined"==typeof loaderEl&&GlobalSite.jsLoaders.length>0?(GlobalSite.loaderClockCounter=0,GlobalSite.loaderClock=setInterval(function(){GlobalSite.jsLoaders.each(function(){GlobalSite.loaderClockCounter++,GlobalSite.loaderClockCounter>=29&&(GlobalSite.loaderClockCounter=0),$(this).css({"background-position":"-"+String(40*GlobalSite.loaderClockCounter)+"px 0"})})},1e3/29)):"undefined"!=typeof loaderEl&&(GlobalSite.loaderClockCounter=0,GlobalSite.loaderClock=setInterval(function(){GlobalSite.loaderClockCounter++,GlobalSite.loaderClockCounter>=29&&(GlobalSite.loaderClockCounter=0),loaderEl.css({"background-position":"-"+String(40*GlobalSite.loaderClockCounter)+"px 0"})},1e3/29)),GlobalSite.canvasLoaders=$(".js-canvas-loader"),GlobalSite.canvasLoaders.each(function(){var canvasLoaderParams={};null!=$(this).data("js-canvas-loader-fps")&&(canvasLoaderParams.fps=$(this).data("js-canvas-loader-fps")),null!=$(this).data("js-canvas-loader-color")&&(canvasLoaderParams.color=$(this).data("js-canvas-loader-color")),null!=$(this).data("js-canvas-loader-dotnumber")&&(canvasLoaderParams.dotNumber=$(this).data("js-canvas-loader-dotnumber")),null!=$(this).data("js-canvas-loader-dotwidth")&&(canvasLoaderParams.dotWidth=$(this).data("js-canvas-loader-dotwidth")),null!=$(this).data("js-canvas-loader-density")&&(canvasLoaderParams.density=$(this).data("js-canvas-loader-density")),null!=$(this).data("js-canvas-loader-persistence")&&(canvasLoaderParams.persistence=$(this).data("js-canvas-loader-persistence")),null!=$(this).data("js-canvas-loader-speed")&&(canvasLoaderParams.speed=$(this).data("js-canvas-loader-speed")),null!=$(this).data("js-canvas-loader-ease")&&(canvasLoaderParams.ease=$(this).data("js-canvas-loader-ease")),null!=$(this).data("js-canvas-loader-trailmode")&&(canvasLoaderParams.trailMode=$(this).data("js-canvas-loader-trailmode")),null!=$(this).data("js-canvas-loader-taillength")&&(canvasLoaderParams.taillength=$(this).data("js-canvas-loader-taillength")>1?1:$(this).data("js-canvas-loader-taillength")),null!=$(this).data("js-canvas-loader-attenuation")&&(canvasLoaderParams.attenuation=$(this).data("js-canvas-loader-attenuation")>1?1:$(this).data("js-canvas-loader-attenuation")),null!=$(this).data("js-canvas-loader-precision")&&(canvasLoaderParams.precision=$(this).data("js-canvas-loader-precision")),null!=$(this).data("js-canvas-loader-type")&&(canvasLoaderParams.type=$(this).data("js-canvas-loader-type")),null!=$(this).data("js-canvas-loader-linewidth")&&(canvasLoaderParams.linewidth=$(this).data("js-canvas-loader-linewidth")),null!=$(this).data("js-canvas-loader-bgcolor")&&(canvasLoaderParams.bgcolor=$(this).data("js-canvas-loader-bgcolor")),null!=$(this).data("js-canvas-loader-flowerpetalwidth")&&(canvasLoaderParams.flowerPetalWidth=$(this).data("js-canvas-loader-flowerpetalwidth")),null!=$(this).data("js-canvas-loader-flowerborder")&&(canvasLoaderParams.flowerBorder=$(this).data("js-canvas-loader-flowerborder")),null!=$(this).data("js-canvas-loader-floweremptycenter")&&(canvasLoaderParams.flowerEmptyCenter=$(this).data("js-canvas-loader-floweremptycenter")),
null!=$(this).data("js-canvas-loader-flowerhighlightcolor")&&(canvasLoaderParams.flowerHighlightColor=$(this).data("js-canvas-loader-flowerhighlightcolor")),buildCanvasLoader($(this),canvasLoaderParams)})},endJsLoader:function(loaderEl){GlobalSite.jsLoaders.length>0&&GlobalSite.jsLoaders.hide(),null!=loaderEl&&loaderEl.hide();try{clearInterval(GlobalSite.loaderClock)}catch(e){trace(e)}},initCarouselBuilder:function(){setTimeout(function(){$("#bpf_accueil_carousel_1 a").fadeIn("slow")},500),setTimeout(function(){$("#bpf_accueil_carousel_2, #bpf_accueil_carousel_3, #bpf_accueil_carousel_4").css("display","block")},1500),$(".js-build-carousel").each(function(){var _nav=null==$(this).data("carousel-nav")||$(this).data("carousel-nav"),_handlers=null==$(this).data("carousel-handlers")||$(this).data("carousel-handlers"),_handlercolor=null!=$(this).data("carousel-handlercolor")?$(this).data("carousel-handlercolor"):"rgba(255, 255, 255, 0.7)",_handlerhovercolor=null!=$(this).data("carousel-handlerhovercolor")?$(this).data("carousel-handlerhovercolor"):"rgba(255, 255, 255, 1)",_handlerclickcolor=null!=$(this).data("carousel-handlerclickcolor")?$(this).data("carousel-handlerclickcolor"):"rgba(255, 255, 255, 1)",_handlerblur=null!=$(this).data("carousel-handlerblur")&&$(this).data("carousel-handlerblur"),_autorun=null!=$(this).data("carousel-autorun")&&$(this).data("carousel-autorun"),_delay=null!=$(this).data("carousel-delay")&&$(this).data("carousel-delay");GlobalSite.buildCarousel($(this),{nav:_nav,handlers:_handlers,handlerColor:_handlercolor,handlerhoverColor:_handlerhovercolor,handlerClickColor:_handlerclickcolor,handlerBlur:_handlerblur,autorun:_autorun,delay:_delay})})},buildCarousel:function(el,params){function initiateAutorun(){autorun>0&&(autorunClock=setInterval(function(){var items=el.find(".item");currentIndex=items.filter(".active").index(),currentIndex<items.length-1?(moveCarouselRight(items.filter(":nth-child("+(currentIndex+1)+")"),items.filter(":nth-child("+(currentIndex+2)+")")),activateIndicators(currentIndex+2,items.filter(".active")),activateHandlers(currentIndex+2)):(moveCarouselLeft(items.filter(":nth-child("+(currentIndex+1)+")"),items.filter(":nth-child(1)")),activateIndicators(1,items.filter(".active")),activateHandlers(1))},1e3*delay))}function moveCarouselLeft(currentSlide,targetSlide){handlers&&(currentSlide.finish().animate({left:"100%"},300).removeClass("active"),targetSlide.finish().css({left:"-100%"}).animate({left:0},300).addClass("active"),$(document).trigger("carouselmove",{elem:targetSlide}))}function moveCarouselRight(currentSlide,targetSlide){handlers&&(currentSlide.finish().animate({left:"-100%"},300).removeClass("active"),targetSlide.finish().css({left:"100%"}).animate({left:0},300).addClass("active"),$(document).trigger("carouselmove",{elem:targetSlide}))}function activateIndicators(index,elem){var indicators=el.find(".carousel-indicators li");indicators.removeClass("active").filter(":nth-child("+index+")").addClass("active")}function activateHandlers(index){handlers&&("undefined"!=typeof right&&(index>=el.find(".item").length?right.addClass("hidden"):right.removeClass("hidden")),"undefined"!=typeof left&&(index<=1?left.addClass("hidden"):left.removeClass("hidden")))}if(!(ieVersion!==!1&&ieVersion<=8)){var nav=!0,handlers=!0,handlerColor="rgba(255, 255, 255, 0.7)",handlerhoverColor="rgba(255, 255, 255, 1)",handlerClickColor="rgba(255, 255, 255, 1)",handlerBlur=!1,autorun=0,delay=2,autorunClock=null;if(el.css("opacity",0).removeClass("hidden"),null!=params&&("undefined"!=typeof params.nav&&0==params.nav&&(nav=!1),"undefined"!=typeof params.handlers&&0==params.handlers&&(handlers=!1),"undefined"!=typeof params.handlerColor&&(handlerColor=params.handlerColor),"undefined"!=typeof params.handlerhoverColor&&(handlerhoverColor=params.handlerhoverColor),"undefined"!=typeof params.handlerClickColor&&(handlerClickColor=params.handlerClickColor),"undefined"!=typeof params.handlerBlur&&1==params.handlerBlur&&(handlerBlur=!0),"undefined"!=typeof params.autorun&&0!=params.autorun&&(autorun=params.autorun),"undefined"!=typeof params.delay&&params.delay>0&&(delay=params.delay)),nav){for(var code='<ol class="carousel-indicators list-">',i=0;i<el.find(".item").length;i++)code+="<li ",0==i&&(code+='class="active" '),code+="></li>";code+="</ol>",el.prepend(code)}el.on("click",".carousel-indicators li",function(){null!=autorunClock&&clearInterval(autorunClock);var targetIndex=$(this).index(),targetSlide=el.find(".item:nth-child("+(targetIndex+1)+")"),currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();targetIndex!=currentIndex&&(targetIndex>currentIndex?moveCarouselRight(currentSlide,targetSlide):moveCarouselLeft(currentSlide,targetSlide),$(this).addClass("active").siblings().removeClass("active"),activateHandlers(targetIndex+1),initiateAutorun())}).on("click",".left",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();0==currentIndex?($(".js-build-carousel .carousel-inner .item:last").after($(".js-build-carousel .carousel-inner .item:first")),$(".js-build-carousel .carousel-indicators li:last").addClass("active")):moveCarouselLeft(currentSlide,el.find(".item:nth-child("+currentIndex+")")),activateIndicators(currentIndex),activateHandlers(currentIndex),initiateAutorun()}).on("click",".right",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();currentIndex==el.find(".item").length-1?($("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:first").before($("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:last")),$(".js-build-carousel .carousel-indicators li:first").addClass("active")):moveCarouselRight(currentSlide,el.find(".item:nth-child("+(currentIndex+2)+")")),activateIndicators(currentIndex+2),activateHandlers(currentIndex+2),initiateAutorun()}).on("click","#hp-video2",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();3!=currentIndex&&2!=currentIndex&&(activateIndicators(currentIndex+2),activateHandlers(currentIndex+2),initiateAutorun())}).on("click","#hp-video1",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();0!=currentIndex&&2!=currentIndex&&(activateIndicators(currentIndex+2),activateHandlers(currentIndex+2),initiateAutorun())}).on("swiperight",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();0==currentIndex?$("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:first").before($("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:last")):moveCarouselLeft(currentSlide,el.find(".item:nth-child("+currentIndex+")")),activateIndicators(currentIndex),activateHandlers(currentIndex),initiateAutorun()}).on("swipeleft",function(){null!=autorunClock&&clearInterval(autorunClock);var currentSlide=el.find(".item.active"),currentIndex=currentSlide.index();currentIndex==el.find(".item").length-1?$("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:last").after($("#bpf_accueil_carousel .js-build-carousel .carousel-inner .item:first")):moveCarouselRight(currentSlide,el.find(".item:nth-child("+(currentIndex+2)+")")),activateIndicators(currentIndex+2),activateHandlers(currentIndex+2),initiateAutorun()}).find(".item").each(function(){$(this).attr("data-carousel-index",$(this).index()).css({left:"100%"})}).first().addClass("active").css("left",0),activateIndicators(1,el.find(".item").filter(".active")),el.animate({opacity:1}),initiateAutorun(),el.find(".item").each(function(index,elem){if(void 0!=$(elem).find(".slideHome").attr("class")){var classArray=$(elem).find(".slideHome").attr("class").split(" "),currentFamilleClass="";$.each(classArray,function(index,className){className.indexOf("fam-")!=-1&&(currentFamilleClass=className)}),$(".carousel-indicators li").eq(index).addClass(currentFamilleClass)}})}},fixPPI:function(){setInterval(function(){$("#ia-capri").length>0&&($("#calcGroup1bis").find(".inline-label").each(function(index){index>=2&&$(this).addClass("hidden")}),$("#calcGroup2bis").find(".row,.total-box").addClass("hidden"),$("#calcGroup2bis").find("[name=impots]").val("0").attr("value","0").trigger("change"))},1e3)},playerVideo:function(){function createPlayerKewego(idVideo,hauteur,largeur,player_key_keywego){var playervideo='<object data="https://sssl.kewego.com/swf/fp.swf" height="'+hauteur+'"" width="'+largeur+'" id="'+idVideo+'" name="'+idVideo+'" type="application/x-shockwave-flash">';return playervideo+='<param name="flashVars" value="picto=009966&amp;border=cccccc&amp;btn=000000&amp;cbar=000000&amp;width='+largeur+"&amp;height="+hauteur+"&amp;sig="+idVideo+"&amp;playerkey="+player_key_keywego+'&amp;autostart=false&amp;suffix=">',playervideo+='<param name="movie" value="https://sassl.kewego.com/swf/fp.swf">',playervideo+='<param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always">',playervideo+='<param name="bgcolor" value="000000">',playervideo+='<video controls="controls" height="'+hauteur+'" poster="https://apissl.kewego.com/video/getHTML5Thumbnail/?playerKey='+player_key_keywego+"&amp;sig="+idVideo+'" preload="none" width="'+largeur+'">',playervideo+='<script src="https://sssl.kewego.com/embed/assets/kplayer-standalone.js"></script>',playervideo+='<source  src="http://apissl.kewego.com/video/getHTML5Stream/?playerKey='+player_key_keywego+"&sig="+idVideo+'" type="video/mp4"  width='+largeur+' height="'+hauteur+'"  />',playervideo+="</object>"}function createPlayerYoutube(idVideo,hauteur,largeur){var playervideo='<iframe style="width:'+largeur+'px" width="'+largeur+'" height="'+hauteur+'" src="https://www.youtube.com/embed/'+idVideo+' "frameborder="0" allowfullscreen  ></iframe>';return playervideo}function createPlayerBrightCove(idVideo,hauteur,largeur){var playervideo='<script language="JavaScript" src="https://sadmin.brightcove.com/js/BrightcoveExperiences.js" type="text/javascript"></script>';return playervideo+='<object class="BrightcoveExperience" id="myExperience4296695403001">',playervideo+='<param name="bgcolor" value="#FFFFFF">',playervideo+='<param name="width" value="'+largeur+'">',playervideo+='<param name="height" value="'+hauteur+'"> ',playervideo+='<param name="playerID" value="'+idVideo+'">',playervideo+='<param name="playerKey" value="AQ~~,AAABuCBi49E~,jZN_jMtu6O5UcaBjAS51YPOuxnzvHrVZ">',playervideo+='<param name="isVid" value="true">',playervideo+='<param name="isUI" value="true">',playervideo+='<param name="dynamicStreaming" value="true">',playervideo+='<param name="@videoPlayer" value="4296695403001">',playervideo+='<param name="secureConnections" value="true">',playervideo+='<param name="secureHTMLConnections" value="true">',playervideo+='<param name="wmode" value="opaque">',playervideo+='</object><script type="text/javascript">brightcove.createExperiences();</script>'}var players=$('[id^="playerVideo"]'),launchers=$('[id^="launcherVideo"]'),launchersMessagerie=$('a[href^="#launcherVideo"]'),ocnetLink=!1;return 0==players.length&&0==launchers.length&&0==launchersMessagerie.length?void trace("pas de video"):(launchersMessagerie.length>0&&(launchers=launchersMessagerie,ocnetLink=!0,trace("lien video "+ocnetLink)),$.each(players,function(index,value){var video_id=value.id,res=video_id.split("_");switch(res[1]){case"kewego":var player_key_keywego="587e2f97270b";void 0!==res[3]&&(player_key_keywego=res[3]),$(this).html(createPlayerKewego(res[2],256,320,player_key_keywego));break;case"youtube":$(this).html(createPlayerYoutube(res[2],180,320));break;case"brightcove":$(this).html(createPlayerBrightCove(res[2],180,320))}}),void $(launchers).click(function(e){if(trace("ocnet click"),e.preventDefault(),ocnetLink)var video_id=this.getAttribute("href");else var video_id=this.getAttribute("id");trace("video "+video_id);var res=video_id.split("_"),playervideo="";switch(res[1]){case"kewego":var player_key_keywego="587e2f97270b";void 0!==res[3]&&(player_key_keywego=res[3]),playervideo=createPlayerKewego(res[2],480,600,player_key_keywego);break;case"youtube":playervideo=createPlayerYoutube(res[2],480,853);break;case"brightcove":playervideo=createPlayerBrightCove(res[2],480,853)}$("body").append('<div class="popin-cache"></div><div class="topMiddle popin" id="videopopin"><a class="close popin-close">✕</a>'+playervideo+"</div>"),$("#videopopin").css({width:"853px",height:"480px","z-index":999}).find(".popin-close").css({position:"absolute",top:"-30px",right:0}),$(".popin-cache").css({"z-index":998}),$("#videopopin .popin-close").add($(".popin-cache")).on("click",function(){$("#videopopin").add($(".popin-cache")).remove()})}))},docCookies:{getItem:function(sKey){return sKey?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey))return!1;var sExpires="";if(vEnd)switch(vEnd.constructor){case Number:sExpires=vEnd===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString()}return document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":""),!0},removeItem:function(sKey,sPath,sDomain){return!!this.hasItem(sKey)&&(document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:""),!0)},hasItem:function(sKey){return!!sKey&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++)aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);return aKeys}},webtrendsTag:function(map){dcsMultiTrack("WT.dl",map.WTdl,"WT.ti",map.WTti,"WT.ti_es",map.WTti_es,"WT.si_n",map.WTsi_n,"WT.si_x",map.WTsi_x,"WT.z_outil",map.WTz_outil),console.log(map)},colonneContactManager:function(){function updateFpSouscrire(mode){"mobile"!=DeviceSize.getDeviceState()&&($("#fp_souscrire").prepend('<span class="js-bientot-disponible">Bientôt <br>disponible</span>').removeClass("hidden"),$.getJSON("/rsc/contrib/script/client/bientotDisponible.json",function(data){$.each(data.souscription,function(index,urlData){if(window.location.pathname==urlData.url&&urlData.environnement.indexOf(ENVIRONNEMENT)!=-1)return $("#fp_souscrire").find(".js-bientot-disponible").addClass("hidden"),!1})}),"disabled"==mode||($("#fp_souscrire #fp_infosSouscrire .btn-primary").length>0&&($("#fp_souscrire #fp_infosSouscrire .btn-primary").first().addClass("forceColor"),$("#fp_souscrire #fp_infosSouscrire .btn-").removeClass("btn-").addClass("btn-primary").addClass("js-chatLauncher").before('<p style="clear:both;" class="btn-primary js-webCallback">'+_get("next.main.updatefpsouscrire1","Contacter un spécialiste")+"</p>")),$("#fp_souscrire").removeClass("hidden"),$("#fp_souscrire").find(".hidden").removeClass("hidden")))}function createButtons($el,putHr){if(null==window.location.pathname.match("comparateur")){var boutons="";0==$("#souscrire-btns").length?boutons="<span>"+_get("next.main.createbuttons1","Bientôt <br>disponible")+'</span><a class="btn-primary forceColor">'+_get("next.main.createbuttons2","Souscrire en ligne")+'</a><a class="btn-primary">'+_get("next.main.createbuttons3","Effectuer une simulation")+"</a>":($("#souscrire-btns .btn-primary").addClass("forceColor"),$("#souscrire-btns .btn-secondary").addClass("btn-primary").removeClass("btn-secondary"),boutons=$("#souscrire-btns").html());var hr=0!=putHr?"<hr>":"";$el.prepend('<section class="colonne-contact">'+boutons+hr+"</section>").find(".hidden").removeClass("hidden"),0==$("#souscrire-btns").length&&$el.find(".colonne-contact").first().addClass("disabled"),$("#fp-rightCol").addClass("hidden")}}function createColonneContact(config){return trace("Recuperation de la config de la colonne contact",traceStyles.chat),"mobile"==DeviceSize.getDeviceState()?(trace("Pas de colonne contact en mode mobile",traceStyles.chat),void colonneContactOK(setUpChatButtons(config))):1==config.connectedOnly&&0==$("#wcm-l-bottom-header-connected").length?(trace("Colonne contact uniquement en mode connecte",traceStyles.chat),void colonneContactOK(setUpChatButtons(config))):($.get(htmlColonneContact[config.typeColonne],null,function(data){if($("#ct-conseiller-en-ligne").length>0)$("#ct-conseiller-en-ligne").after('<div class="hidden" id="colonneContactContainer">'+data+"</div>"),$("#ct-conseiller-en-ligne").parent().children(":not(#colonneContactContainer)").css({width:"calc( 100% - "+$("#colonneContactContainer").css("width")+" )","float":"left"});else if($("#wrapper-conditions-cartes, #wrapper-conditions-generales, #wrapper-conditions-tarifaires").length>0){var elToInsertAfter=$("#wrapper-conditions-cartes, #wrapper-conditions-generales, #wrapper-conditions-tarifaires").find("#wrapper-col80");elToInsertAfter.after('<div class="hidden" id="colonneContactContainer">'+data+"</div>"),elToInsertAfter.css({width:"calc( 100% - "+$("#colonneContactContainer").css("width")+" )","float":"left"})}else{$("#fp-rightCol").addClass("hidden"),elToInsertIn.before('<div class="hidden" id="colonneContactContainer">'+data+"</div>"),elToInsertIn.css({width:"calc( 100% - "+$("#colonneContactContainer").css("width")+" )","float":"left"});var id=elToInsertIn.attr("id");"undefined"!=typeof id&&id.indexOf("comparateur")!=-1&&$("#colonneContactContainer").css("margin-top",0),createButtons($("#colonneContactContainer")),trace("Creation de la colonne contact",traceStyles.chat)}var arClasseAppel=setUpChatButtons(config);if("PREVIEW"==!window.ENVIRONNEMENT){var urlPopinWCB="undefined"!=typeof config.typeWCB?popinWebcallback[config.typeWCB]:popinWebcallback[1];$.get(urlPopinWCB,null,function(data){$("body").append(data),$("body .popin-webcallback").on("click",".js-webCallback",function(){$(".popin-webcallback").addClass("hidden")}).on("click",".close",function(){Popin.hidePopin($(".popin-webcallback"))}),$("#colonneContactContainer, #fp-rightCol, #fp_souscrire").find(".js-webCallback").removeClass("disable").on("click",function(){Popin.showPopin($(".popin-webcallback"))}),"undefined"!=typeof config.webCallback&&0!=config.webCallback?(trace("Bouton webcallback detecte : "+config.webCallback,traceStyles.chat),$("#colonneContactContainer, #fp-rightCol, #fp_souscrire").first().after('<div id="nextoutils_webcallback_callback"></div>'),$("body .popin-webcallback").find(".js-webCallback").attr("id","nextcallback_"+config.webCallback),"undefined"==typeof OApp?$.getScript("/rsc/contrib/script/simulateur/app.js",function(data){window.OApp=new AppInit,colonneContactOK(arClasseAppel)}):(window.OApp=new AppInit,colonneContactOK(arClasseAppel))):(trace("Pas de bouton webcallback detecte",traceStyles.chat),$("body .popin-webcallback").find(".js-webCallback").removeClass("js-webCallback").addClass("disable"),colonneContactOK(arClasseAppel))})}else $("#colonneContactContainer, #fp-rightCol, #fp_souscrire").first().after('<div id="nextoutils_webcallback_callback"></div>'),$(".js-webCallback").attr("id","nextcallback_"+config.webCallback),"undefined"==typeof OApp?$.getScript("/rsc/contrib/script/simulateur/app.js",function(data){window.OApp=new AppInit,colonneContactOK(arClasseAppel)}):(window.OApp=new AppInit,colonneContactOK(arClasseAppel));"undefined"!=typeof config.emailBtn&&0!=config.emailBtn||$(".mailLink").remove()},"html"),void $.getScript("/rsc/contrib/script/inbenta/faqracine-mb.js"))}function setUpChatButtons(config){var arClasseAppel=[],$autreContainers=$("#ct-conseiller-en-ligne"),$autreBtn=$autreContainers.find(".js-chatLauncher");if("undefined"==typeof config.autreBtn)trace("pas de config pour le bouton chat secondaire : suppression",traceStyles.chat),$autreBtn.remove();else{var classeAppel="openChat_";classeAppel+="undefined"!=typeof config.autreBtn.classeAppel&&"undefined"!=config.autreBtn.classeAppel?config.autreBtn.classeAppel:"undefined"!=typeof config.classeAppel&&""!=config.classeAppel?config.classeAppel:"chatnext","undefined"!=typeof config.autreBtn.zonesPubliables&&""!=config.autreBtn.zonesPubliables||(config.autreBtn.zonesPubliables="undefined"!=typeof config.zonesPubliables&&""!=config.zonesPubliables?config.zonesPubliables:"Default"),classeAppel+="_config"+config.autreBtn.zonesPubliables,trace("classe appel du bouton chat secondaire detectee : "+classeAppel,traceStyles.chat),$autreBtn.removeClass("openChat_chatnext").removeClass("js-chatLauncher").addClass(classeAppel).addClass("hidden"),arClasseAppel.push(classeAppel),config.requerdDAC3&&$autreBtn.addClass("openWithRequiredDAC3"),"mobile"==DeviceSize.getDeviceState()&&$autreBtn.removeClass("hidden")}var containers=$("#colonneContactContainer, #fp-rightCol, #fp_infosSouscrire, #fp_souscrire"),btnAppelChat=containers.find(".js-chatLauncher");if(containers.find(".forceColor").each(function(){$(this).hasClass("btn-primary")||($(this).addClass("btn-primary"),"mobile"==DeviceSize.getDeviceState()&&$autreBtn.removeClass("hidden").css("width","100%").css("display","block").css("margin","7px 0"))}),btnAppelChat.each(function(){$(this).is('[class*="btn-"]')||$(this).addClass("btn-primary")}),btnAppelChat.length<1)return arClasseAppel;var classeAppel="openChat_";return"undefined"!=typeof config.classeAppel&&""!=config.classeAppel||(config.classeAppel="chatnext"),classeAppel+=config.classeAppel,"undefined"!=typeof config.zonesPubliables&&""!=config.zonesPubliables||(config.zonesPubliables="Default"),classeAppel+="_config"+config.zonesPubliables,trace("classe appel du bouton chat detectee : "+config.classeAppel,traceStyles.chat),trace("zonesPubliables du bouton chat detectees : "+config.zonesPubliables,traceStyles.chat),btnAppelChat.removeClass("openChat_chatnext").removeClass("js-chatLauncher").addClass(classeAppel).addClass("hidden"),config.requerdDAC3&&btnAppelChat.addClass("openWithRequiredDAC3"),"mobile"==DeviceSize.getDeviceState()&&btnAppelChat.removeClass("hidden").css("width","100%").css("display","block").css("margin","7px 0"),arClasseAppel.push(classeAppel),arClasseAppel}function colonneContactOK(classeAppel){$("#fp_main_content").addClass("colonneContact"),$("#colonneContactContainer").removeClass("hidden"),GlobalSite.colonneContactInitResize()&&$(window).scroll(colonneContactResizeHandler),"undefined"!=typeof chatCore&&chatCore.init(classeAppel)}if("/fr/banque-contacts/faire-une-reclamation"!=window.location.pathname&&($("#fp_main_content, #ct-conseiller-en-ligne, #wrapper-gabarit-libre, #wrapper-conditions-cartes, #wrapper-conditions-generales, #wrapper-conditions-tarifaires").length>0||window.location.pathname.indexOf("comparateur")!=-1)){var htmlColonneContact,popinWebcallback,elToInsertIn=$("#fp_main_content").add($("#wrapper-gabarit-libre > div > div:last-child")).add($("#wrapper-conditions-cartes, #wrapper-conditions-generales, #wrapper-conditions-tarifaires").find("#wrapper-col80")).add($("[id^=wcm-l-comparateur] section.wrap").eq(0)),forceColonne=getUrlAnchor("forceColonne");if(null!=forceColonne)return trace("Forçage du chargement de la colonne "+forceColonne,traceStyles.chat),void createColonneContact({typeColonne:forceColonne,classeAppel:"chatnext",zonesPubliables:"Default",emailLink:0});var urlfile="/rsc/contrib/script/chat/colonneContactConfig.json";"newfile"==GetURLParameter("mode")&&sessionStorage.setItem("newfile",1),sessionStorage.getItem("newfile")&&(urlfile="/rsc/contrib/script/chat/colonneContactConfig_temporaire.json"),$.getJSON(urlfile,function(data){htmlColonneContact=data.htmlColonneContact,popinWebcallback=data.popinWebcallback;var docURL=document.location.pathname;"/"==docURL.substr(docURL.length-1)&&(docURL=docURL.substr(0,docURL.length-1));for(var page in data.colonneConfig){var currentURL=data.colonneConfig[page].url;"/"==currentURL.substr(currentURL.length-1)&&(currentURL=currentURL.substr(0,currentURL.length-1));var reg=new RegExp(currentURL.replace("/","/")+"$");if(docURL.match(reg))return trace("Une colonne contact a ete detectee pour cette page",traceStyles.chat),updateFpSouscrire("normal"),void createColonneContact(data.colonneConfig[page])}if(trace("Pas de colonne contact prevue pour cette page",traceStyles.chat),updateFpSouscrire("disabled"),!elToInsertIn.hasClass("noContact")){elToInsertIn.before('<div id="colonneContactContainer"></div>');var colonneContactContainer=$("#colonneContactContainer");elToInsertIn.css({width:"calc( 100% - "+colonneContactContainer.css("width")+" )","float":"left"}),createButtons(colonneContactContainer,!1),colonneContactContainer.css("height","auto"),"undefined"!=typeof chatCore&&chatCore.init()}}).fail(function(){trace("Attention, fichier colonneContactConfig.json non chargé. Vérifiez qu'il ne contient pas d'erreur.",traceStyles.erreur)})}},colonneContactInitResize:function(){var initialScrollTop=$(document).scrollTop();$(document).scrollTop(0);var colonneContact=$("#colonneContactContainer");if(colonneContact.length<1)return!1;if(colonneContact.css({height:"auto",top:"auto",position:"absolute",bottom:"auto",right:0}),!(colonneContact.length<1)){var screenHeight=$(window).height(),barreFpNav=$("#fp_nav"),barreFpNavHeight=barreFpNav.length>0?barreFpNav.outerHeight(!0):0,bottomHeader=$(".bottom-header").length>0?$(".bottom-header"):$(".bottom-header-connected"),topLimit=barreFpNav.length>0?barreFpNav.offset().top+barreFpNav.outerHeight(!0):bottomHeader.offset().top+bottomHeader.outerHeight(!0),DEBOUNCING=20,debouncedTime=0,fpSouscrire=$("#fp_souscrire"),footer=$("#footer"),bottomLimit=fpSouscrire.length>0?fpSouscrire.offset().top:footer.offset().top,colContInitialTop=colonneContact.offset().top,colContMargTop=colonneContact.css("margin-top").replace("px",""),topWrapper=$("#wrapper").offset().top;return window.bodyMarginRight=($("body").outerWidth(!0)-$("#ls-canvas").width())/2,window.colContHeight=colonneContact.outerHeight(!0),$(window).resize(function(){window.bodyMarginRight=($("body").outerWidth(!0)-$("#ls-canvas").outerWidth(!0))/2,colonneContactResizeHandler()}),window.colonneContactResizeHandler=function(){var time=(new Date).getTime();if(time-debouncedTime>DEBOUNCING){debouncedTime=time;var scrollTop=Math.max($("body").scrollTop(),$("html").scrollTop());1==window.debugGraphiqueAllowed&&window.debugGraphiqueColContBot.css({top:String(scrollTop+window.colContHeight+topWrapper-window.debugGraphiqueColContBot.outerHeight(!0))+"px"}),scrollTop+window.colContHeight+topWrapper>=bottomLimit?colonneContact.css({top:bottomLimit-topWrapper-window.colContHeight+barreFpNavHeight+"px",position:"absolute",bottom:"auto","margin-top":0,"z-index":2,right:0}):scrollTop>=colContInitialTop-topLimit?colonneContact.css({top:topLimit+"px",position:"fixed",bottom:"auto","margin-top":0,right:String(window.bodyMarginRight)+"px"}):colonneContact.css({top:"auto",position:"absolute",bottom:"auto","margin-top":colContMargTop,right:0})}},initialScrollTop>0&&$(document).scrollTop(initialScrollTop),window.debugGraphiqueAllowed=!1,this.debug=function(){console.log("screenHeight = "+screenHeight),console.log("barreFpNavHeight = "+barreFpNavHeight),console.log("topLimit = "+topLimit),console.log("bottomLimit = "+bottomLimit),console.log("colContInitialTop = "+colContInitialTop),console.log("colContMargTop = "+colContMargTop),console.log("topWrapper = "+topWrapper),console.log("window.bodyMarginRight = "+window.bodyMarginRight),console.log("window.colContHeight = "+window.colContHeight),$("body").append('<div id="debugGraphiqueBottomLimit">bottomLimit ---</div>').find("#debugGraphiqueBottomLimit").css({position:"absolute",color:"magenta",padding:0,margin:0,right:0,top:String(bottomLimit-$("#debugGraphiqueBottomLimit").outerHeight(!0))+"px"}),$("body").append('<div id="debugGraphiqueColContBot">Colonne contact bottom ---</div>'),window.debugGraphiqueColContBot=$("#debugGraphiqueColContBot"),window.debugGraphiqueColContBot.css({position:"absolute",color:"magenta",padding:0,margin:0,right:String(Number(colonneContact.outerWidth(!0))+20)+"px",top:String(window.colContHeight+topLimit-Number($("#debugGraphiqueColContBot").outerHeight(!0)))+"px"}),window.debugGraphiqueAllowed=!0},!0}},cookieNav:function(){if(window.location.pathname.indexOf("/fr/Bourse/Sujets-Orphelins/")==-1&&window.location.pathname.indexOf("portefeuille-et-bourse")==-1&&window.location.pathname.indexOf("/fr/souscription/epargne-bourse/cif-pea")==-1&&"nopopin"!=$(document).getUrlParam("rc")&&!sessionStorage.getItem("nopopin")&&!GlobalSite.docCookies.getItem("cookieNav")){var cookies_html="/rsc/contrib/html/cookies.html";$("body").hasClass("en")&&(cookies_html="/rsc/contrib/html/cookies_en.html"),$.get(cookies_html,function(html){$("body").append(html),$("body").hasClass("bpf")&&$("body>.cookies").find("a").eq(0).attr("href","/fr/banque-contact/engagement-chartes-et-conventions/cookies"),$("body").hasClass("pro")&&$("body>.cookies").find("a").eq(0).attr("href","/fr/banque-contacts-pro/engagement-chartes-et-conventions/cookie"),$(".setcookie-nav").on("click",function(){var date=new Date,oneYear=31536e6;date.setTime(date.getTime()+oneYear),GlobalSite.docCookies.setItem("cookieNav",1,date.toGMTString(),"/",document.domain),$("body>.cookies:not(.avertissement)").addClass("hidden")})})}},globalRecherche:function(){if("mobile"!=DeviceSize.getDeviceState()){var $select_type_client=$("#select-type-client"),$col_recherche_libre=$(".col-recherche-libre"),$select_whish=$("#select-whish"),$or=$(".or"),$dot=$(".dot"),$col_retour=$(".col-retour"),$col_recherche_type=$(".col-recherche-type"),$recherche_libre=$("#recherche-libre"),$list_auto_completion=$(".section-auto-completion"),$btn_ok=$(".btn-ok");$select_type_client.click(function(){$select_whish.hasClass("activated")||($select_whish.addClass("activated"),$col_recherche_libre.add($or).add($dot).fadeOut(100,function(){$col_recherche_type.css({width:"100%"}),$select_whish.add($btn_ok).fadeIn(100),$col_retour.css({display:"block"}).animate({left:0},100),$col_recherche_type.animate({"margin-left":"6%"},100)}))}),$col_retour.click(function(){return $list_auto_completion.find("li").unbind(),$list_auto_completion.fadeOut(100,function(){$(this).addClass("hidden")}),$(this).animate({left:"-6%"},100,function(){$(this).css("display","none")}),$recherche_libre.hasClass("activated")?void $col_recherche_libre.animate({width:"42%"},200,function(){$recherche_libre.removeClass("activated"),$col_recherche_libre.css({"margin-left":"0",width:"41%"}),$col_recherche_type.add($or).fadeIn(100)}):void $select_whish.add($btn_ok).fadeOut(100,function(){$col_recherche_type.animate({"margin-left":0},100,function(){$(this).css({width:"50%"}),$col_recherche_libre.css({"margin-left":"0",width:"41%"}),$col_recherche_libre.add($or).add($dot).fadeIn(100,function(){$select_whish.removeClass("activated")})})})}),$(".wrapper-resultats-recherche:not('.recherche-avancee')").addClass("resultats-list"),$(window).width()<768&&$(".list-filtres").prependTo(".recherche-avancee"),$(".active-liste").click(function(){$(".wrapper-resultats-recherche:not('.recherche-avancee')").addClass("resultats-list"),$(".active-liste").removeClass("active"),$(".active-block").addClass("active")}),$(".active-block").click(function(){$(".wrapper-resultats-recherche:not('.recherche-avancee')").removeClass("resultats-list"),$(".active-block").removeClass("active"),$(".active-liste").addClass("active")}),$(".cache-recherche-qualifiee").length||$("body").append('<div class="full-cache cache-recherche-qualifiee hidden"></div>'),
$("#open-recherche-nonconnecte").on("click",function(){return $("#recherche-site").removeClass("hidden"),$(".cache-recherche-qualifiee").removeClass("hidden"),!1}),$("#recherche-site .close").on("click",function(){$(".cache-recherche-qualifiee").addClass("hidden")}),$.getJSON("/rsc/contrib/script/client/rechercheConfig"+(lgMgt.isEnglish()?"_en":"")+".json",function(data){$.each(data.recherche,function(index,elem){$("#recherche-jesuis").append('<li data-recherche-type="'+elem.type+'">'+elem.libelle+"</li>")});var recherche_location="";$("[data-recherche-type]").on("click",function(){$("#select-whish").find(".dropdown-selected").html(_get("next.main.globalsearch1","Sélectionnez un projet")),recherche_location="",$("#recherche-jesouhaite").html("");var type=$(this).data("recherche-type");$.each(data.recherche,function(index,elem){elem.type==type&&$.each(elem.souhait,function(index,souhait){$("#recherche-jesouhaite").append('<li data-recherche-location="'+souhait.lien+'">'+souhait.libelle+"</li>")})}),setTimeout(function(){$("#select-whish").find(".dropdown-list").removeClass("hidden")},50),$("#recherche-jesouhaite").on("click","li",function(){recherche_location=$(this).data("recherche-location")}),$(".col-recherche-type").find(".btn-ok").on("click",function(){return recherche_location&&(window.location.href=recherche_location),!1})})})}},fixAssuranceVie:function(){window.location.pathname.indexOf("comptes-et-contrats/mes-assurances-vie")===-1&&window.location.pathname.indexOf("assurance/assurance-vie")===-1||$("#id_balise_div").on("click","[data-isin]",function(e){if(e.preventDefault(),"C001"==$(this).data("isin")&&"PROD"==ENVIRONNEMENT)return!1;if("C001"==$(this).data("isin"))var url_fv="/aiguillage-wspl/redirect/fichefondseuropdm";else{var url_fv="/fr/connexion/bourse/fiche-valeur?redir="+$(this).data("isin");$("body").hasClass("part")&&(url_fv="/fr/connexion/bourse/fiche-valeur?redir="+$(this).data("isin")),$("body").hasClass("bpf")&&(url_fv="/fr/espace-prive/informations-marches/fiche-valeur?redir="+$(this).data("isin")),$("body").hasClass("pro")&&(url_fv="/fr/espace-pro/bourse/fiche-valeur?redir="+$(this).data("isin"))}window.open(url_fv)})},pageMaintenance:function(){window.location.pathname.indexOf("/fr/connexion")==-1&&window.location.pathname.indexOf("/fr/espace-prive")==-1&&window.location.pathname.indexOf("/fr/espace-pro")==-1&&window.location.pathname.indexOf("/fr/souscription")==-1||$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(response,status,request){var now=new Date(request.getResponseHeader("date")).getTime();$.getJSON("/rsc/contrib/script/client/maintenanceConfig.json",function(data){$.each(data.Maintenance,function(index,elem){var is_url=!1;if($.each(elem.url,function(idx,url){window.location.pathname.indexOf(url)!=-1&&(is_url=!0)}),elem.environnement==ENVIRONNEMENT&&$("#"+elem.id).length&&is_url){var dateFromArray=elem.from.match(/.{1,2}/g),dateToArray=elem.to.match(/.{1,2}/g),dateFrom=new Date("20"+dateFromArray[0],Number(dateFromArray[1])-1,dateFromArray[2],dateFromArray[3],dateFromArray[4]).getTime(),dateTo=new Date("20"+dateToArray[0],Number(dateToArray[1])-1,dateToArray[2],dateToArray[3],dateToArray[4]).getTime();now>=dateFrom&&now<=dateTo&&($("#"+elem.id).remove(),$.get(elem.html,function(html){$("#mainContent").html(html)}))}})})}})},siteDemo:function(){if("INTE"!=ENVIRONNEMENT){if($(window.parent.document).find("body").hasClass("site-demo")){$(window.parent.document).find("body").removeClass("nonav");var allClasses=$("body").attr("class");$(window.parent.document).find("body").addClass(allClasses)}if($("body").hasClass("part")||$("body").hasClass("bpf")||$("body").hasClass("pro")){var espaceClt,isPart=$("body").hasClass("part"),isBpf=$("body").hasClass("bpf"),isPro=$("body").hasClass("pro"),isEnglish=lgMgt.isEnglish(),popinUrl=function(){var result;return isPart&&(result=isEnglish?"/rsc/contrib/dev/mode-demo/popin-en.html":"/rsc/contrib/dev/mode-demo/popin.html"),isBpf&&(result="/rsc/contrib/dev/mode-demo/popin-bpf.html"),isPro&&(result="/rsc/contrib/dev/mode-demo/popin-pro.html"),result}();isPart&&(espaceClt="/rsc/contrib/dev/mode-demo/popin-espace-client"+(lgMgt.isEnglish()?"-en":"")+".html"),isBpf&&(espaceClt="/rsc/contrib/dev/mode-demo/popin-espace-client-bpf.html"),isPro&&(espaceClt="/rsc/contrib/dev/mode-demo/popin-espace-client-pro.html"),$(".bouton-devenir-client").on("click",function(e){e.preventDefault(),$.ajax({url:popinUrl}).done(function(data){$("bottom-header").append(data)})});var is_hover=!1;$(".bouton-devenir-client").on("mouseleave",function(){is_hover=!1,setTimeout(function(){is_hover||$(".wrapper-popin-demo").addClass("hidden")},1e3)}),$(".bouton-devenir-client").on("mouseenter",function(){is_hover=!0,$(".wrapper-popin-demo").length?$(".wrapper-popin-demo").removeClass("hidden"):$.ajax({url:popinUrl}).done(function(data){var $html=$(data);$html.find("a").each(function(){var $this=$(this),href=$this.attr("href");$this.attr("data-href",href).css({cursor:"pointer"}).removeAttr("href")}),$(".bottom-header").append($html),$(".wrapper-popin-demo").on("mouseleave",function(){$(this).addClass("hidden"),is_hover=!1,trace("popin leave")}),$(".wrapper-popin-demo").on("mouseenter",function(){is_hover=!0,$(this).removeClass("hidden"),trace("popin enter")}),$(".wrapper-popin-demo").css({position:"absolute",right:"200px",top:"60px"}),"/fr/connexion"==window.location.pathname&&$(".wrapper-popin-demo").css("right","0"),$(".wrapper-popin-demo #btn-modedemo").on("click",function(){$("#popin-modedemo").length?($("#popin-modedemo").removeClass("hidden"),$(".popin-cache").removeClass("hidden")):$.ajax({url:espaceClt}).done(function(data){var $html=$(data);$html.find(".popin-content.confirmation a").each(function(){var $this=$(this),href=$this.attr("href");$this.attr("data-href",href).removeAttr("href"),$this.css({cursor:"pointer"})}),$("body").append($html),$("#popin-modedemo .popin-close").on("click",function(){$("#popin-modedemo").addClass("hidden"),$(".popin-cache").addClass("hidden")})})})})})}}},sliderVideo:function(){function createSliderFp(sliderId,el){trace("Recuperation de la config du slider"),$.getJSON("/rsc/contrib/dev/json/slider-videosConfig.json",function(json){$.each(json.sliderConfig,function(index,cas){if(void 0!==cas[sliderId]){var slider=cas[sliderId];el.html('<div class="js-build-carousel"> <div class="left hidden"> <i class="icon icon-back"></i> </div> <div class="right"> <i class="icon icon-fleche"></i> </div> <div class="carousel-inner"></div></div>'),$.each(slider.slides,function(index,slides){var code="";code+='<div class="item">',code+='<div class="col-50">',code+='<iframe width="100%" height="224" src="'+slides.urlVideo+'" frameborder="0" allowfullscreen></iframe>',code+="</div>",code+='<div class="col-50 slider-video-description">',code+="<h3>"+slides.titre+"</h3>",code+="<p class=>"+slides.resume+"</p>",code+="</div>",code+="</div>",$(".carousel-inner").append(code)}),GlobalSite.initCarouselBuilder()}})})}$('[id^="sliderVideo"]').length>0&&(el=$('[id^="sliderVideo"]'),el.addClass("slider-page-produits"),sliders=$('[id^="sliderVideo"]'),sliders.each(function(){createSliderFp($(this).attr("id"),$(this))}))},popinAssos:function(){$(".pro .nav-asso a").on("click",function(){return $("#popin-asso").length?($("#popin-asso").removeClass("hidden"),$(".popin-cache").removeClass("hidden")):$.ajax({url:"/rsc/contrib/dev/popin/popin-asso.html"}).done(function(data){$("body").append(data),$("#popin-asso .popin-close, .popin-cache").on("click",function(){$("#popin-asso").addClass("hidden"),$(".popin-cache").addClass("hidden")})}),!1})},initLightApps:function(){try{"PREVIEW"===window.ENVIRONNEMENT&&!function(){var wfd=GlobalSite.waitForDom.bind(GlobalSite);wfd(".ah-que-coucou",function($elt){trace({$elt:$elt,message:"element ajouté..."}),$(".logoBNP-container").css({backgroundColor:"yellow"})})}()}catch(error){trace("error")}!function(){var $mlImop=$("#ml-imop"),$col50=$mlImop.find(".col-50");$col50.on("click",function(event){$col50.removeClass("active"),$(this).addClass("active")})}(),function(){$(".deb-diff-timeline-plus").on("click",function(event){var closest;closest=$(this).closest(".deb-diff-row-timeline"),closest&&closest.toggleClass("open")})}(),window.subscribeToCheckStatus&&subscribeToCheckStatus(function(){var isGoodEnv,isGoodPage,isGoodUnivers,isGoodContext,HTML_POPIN,HTML_BANDEAU,CONFIG_JSON_PATH,language,univers,isPart,isBpf,isPro,displayBandeau,displayPopIn,$body,LOCAL_STORAGE_POPIN_DATE_KEY,SESSION_STORAGE_BANDEAU_DISPLAYED_KEY,LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_KEY,isGoodDate,MAX_BANDEAU_DISPLAY=4;$body=$("body"),isPart=$body.hasClass("part"),isBpf=$body.hasClass("bpf"),isPro=$body.hasClass("pro"),isGoodEnv=!0,isGoodUnivers=isPart||isBpf||isPro,isGoodPage=$("body").hasClass("ident")&&$("#ia-identification").length>0,isGoodContext=isGoodEnv&&isGoodUnivers&&isGoodPage,isGoodContext&&(!function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function(){function delayed(){execAsap||func.apply(obj,args),timeout=null}var obj=this,args=arguments;timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||100)}};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr)}}(jQuery,"securitySmartresize"),CONFIG_JSON_PATH="/rsc/contrib/script/client/alertSecurityConfig.json",language=function(){var _location,isFrench,isEnglish,result;return _location=document.location,isFrench=0===_location.pathname.indexOf("/fr/"),isEnglish=0===_location.pathname.indexOf("/en/"),result=isFrench&&"fr"||isEnglish&&"en"}(),univers=function(){var result;return result=isPart&&"part"||isBpf&&"bpf"||isPro&&"pro"}(),isGoodDate=function(){var latestSecurityAlerteDate,localStorageValue,mLatest,mNow,deltaDays,result;return localStorageValue=localStorage.getItem(LOCAL_STORAGE_POPIN_DATE_KEY),!(latestSecurityAlerteDate=JSON.parse(localStorageValue))||(mNow=moment(),mLatest=moment(latestSecurityAlerteDate),deltaDays=mLatest.diff(mNow,"days"),result=Math.abs(deltaDays)>=60)}(),$.ajax({dataType:"json",url:CONFIG_JSON_PATH,cache:!1}).done(function(json){var displayBandeauSecurityConfig,displayBandeauSecurity,displayPopinSecurity,startBandeauDate,endBandeauDate,campaignId,bandeauTxt1,bandeauTxt2,bandeauTxt3,popinTxt1,jsonUniversObj,wordingObj,f=function(){if(trace({alertSecurityNext:{usecase:"obtension du json de config",json:json}}),wordingObj=json.wording[language],jsonUniversObj=json.config[univers],displayBandeauSecurityConfig=jsonUniversObj.displayBandeauSecurity||{},MAX_BANDEAU_DISPLAY=function(){var max,ref;return max=("undefined"!=typeof displayBandeauSecurityConfig&&null!==displayBandeauSecurityConfig&&null!=(ref=displayBandeauSecurityConfig.range)?ref.maxcount:void 0)||1/0}(),displayBandeauSecurity=!!displayBandeauSecurityConfig.display,displayPopinSecurity=jsonUniversObj.displayPopinSecurity,startBandeauDate=function(){var ref;return("undefined"!=typeof displayBandeauSecurityConfig&&null!==displayBandeauSecurityConfig&&null!=(ref=displayBandeauSecurityConfig.range)?ref.start:void 0)||null}(),endBandeauDate=function(){var ref;return("undefined"!=typeof displayBandeauSecurityConfig&&null!==displayBandeauSecurityConfig&&null!=(ref=displayBandeauSecurityConfig.range)?ref.end:void 0)||null}(),campaignId=jsonUniversObj.campaignId,bandeauTxt1=wordingObj.bandeau.text1,bandeauTxt2=wordingObj.bandeau.text2,bandeauTxt3=wordingObj.bandeau.text3,popinTxt1=wordingObj.popin.text1,!campaignId)throw"campaignId non défini";LOCAL_STORAGE_POPIN_DATE_KEY={part:"latestSecurityAlerteDatePart"+campaignId,bpf:"latestSecurityAlerteDateBpf"+campaignId,pro:"latestSecurityAlerteDatePro"+campaignId}[univers],SESSION_STORAGE_BANDEAU_DISPLAYED_KEY={part:"ALERT_SECURITY_BANDEAU_DISPLAYED_PART"+campaignId,bpf:"ALERT_SECURITY_BANDEAU_DISPLAYED_BPF"+campaignId,pro:"ALERT_SECURITY_BANDEAU_DISPLAYED_PRO"+campaignId}[univers],LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_KEY={part:"LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_PART"+campaignId,bpf:"LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_BPF"+campaignId,pro:"LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_PRO"+campaignId}[univers],trace({alertSecurityNext:{usecase:"informations de bandeau et autre",data:{displayBandeauSecurity:displayBandeauSecurity,displayPopinSecurity:displayPopinSecurity,campaignId:campaignId,bandeauTxt1:bandeauTxt1,bandeauTxt2:bandeauTxt2,bandeauTxt3:bandeauTxt3,popinTxt1:popinTxt1}}}),displayBandeau=function(){var isAlreadyinSessionDisplayed,displayBandeauCounter,mStart,mEnd,hasMatchingRange;if(HTML_BANDEAU='<section class="cookies phishing clearfix" id="bandeau-phishing">\n\t<i class="securite pull-left"></i><p class="pull-left"><strong>$BANDEAU_TEXT1</strong><br />\n\t<small>$BANDEAU_TEXT2</small><br />\n\t<small>$BANDEAU_TEXT3</small>\n\t</p>\n\t<span class="close setcookie-nav">x</span>\n\t</section>\n\t<section class="phishing layer no-mob" id="phishing-layer">\n\t</section>',HTML_BANDEAU=HTML_BANDEAU.replace("$BANDEAU_TEXT1",bandeauTxt1).replace("$BANDEAU_TEXT2",bandeauTxt2).replace("$BANDEAU_TEXT3",bandeauTxt3).replace("${url}",document.location),trace({alertSecurityNext:{usecase:"Génération bandeau html",HTML_BANDEAU:HTML_BANDEAU}}),isAlreadyinSessionDisplayed=!!sessionStorage.getItem(SESSION_STORAGE_BANDEAU_DISPLAYED_KEY))return void trace({alertSecurityNext:{usecase:"isAlreadyinSessionDisplayed"}});if(displayBandeauCounter=JSON.parse(localStorage.getItem(LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_KEY))||0,displayBandeauCounter>=MAX_BANDEAU_DISPLAY)return void trace({alertSecurityNext:{usecase:"displayBandeauCounter >= MAX_BANDEAU_DISPLAY"}});if(mStart=moment(startBandeauDate,"DD/MM/YYYY HH:mm"),mEnd=moment(endBandeauDate,"DD/MM/YYYY HH:mm"),hasMatchingRange=function(mStart,mEnd){var hasNoRange=!mStart.isValid()&&!mEnd.isValid(),hasNoStart=!mStart.isValid()&&mEnd.isValid(),hasNoEnd=mStart.isValid()&&!mEnd.isValid();return hasNoRange?(trace({alertSecurityNext:{usecase:"hasNoRange"}}),!0):hasNoStart?(trace({alertSecurityNext:{usecase:"hasNoStart"}}),moment().isBefore(mEnd)):hasNoEnd?(trace({alertSecurityNext:{usecase:"hasNoEnd"}}),moment().isAfter(mStart)):(trace({alertSecurityNext:{usecase:"hasRange"}}),moment().isBetween(mStart,mEnd))},!hasMatchingRange(mStart,mEnd))return void trace({alertSecurityNext:{usecase:"!hasMatchingRange(mStart, mEnd)"}});$("header.bottom-header").after(HTML_BANDEAU);var $wrapper=$("#wrapper"),$bandeauPhishing=$("#bandeau-phishing"),margeBkp=$wrapper.css("marginTop"),updateWrappermargeTop=function(){var marge;$bandeauPhishing.length>0&&(marge=$bandeauPhishing.outerHeight(),$wrapper.css("marginTop",marge+"px"))};updateWrappermargeTop(),$(window).securitySmartresize(function(){trace("smartresize..."),updateWrappermargeTop()});var $close=$bandeauPhishing.find(".close");$close.on("click",function(){var $phishingLayer=$("#phishing-layer");$phishingLayer.remove(),$bandeauPhishing.remove(),$wrapper.css("marginTop",margeBkp)}),sessionStorage.setItem(SESSION_STORAGE_BANDEAU_DISPLAYED_KEY,!0),localStorage.setItem(LOCAL_STORAGE_BANDEAU_DISPLAY_COUNT_KEY,displayBandeauCounter+1)},displayPopIn=function(){HTML_POPIN='<section class="wrapper-popin-demo wrap phishing" id="alert-security-popin">\n        <div class="row fleche"></div>\n        <a href="#">\n            <div class="col-10"><div class="row form-info">\n              <i class="icon icon-info pull-left"></i>\n          </div></div>\n          <div class="col-80"><p>$POPIN_TEXT1<br /> <strong>$url</strong></p>\n        </div>\n        <div class="col-10">\n          <span class="close pull-right setcookie-nav">x</span>\n      </div>\n  </a>\n</section>',HTML_POPIN=HTML_POPIN.replace("$POPIN_TEXT1",popinTxt1).replace("$url",document.location);var $placementPopin=$("#wcm-l-header > .wcm-html.ident"),$clientNbr=$("#client-nbr"),popHandlerIncr=0,popHandler=function popHandler(){var $alertSecurityPopin;trace("client-nbr focus... incr = "+popHandlerIncr),popHandlerIncr>=0&&($placementPopin.prepend(HTML_POPIN),$alertSecurityPopin=$("#alert-security-popin"),$alertSecurityPopin.find(".close").on("click",function(event){event.preventDefault(),$alertSecurityPopin.remove()}),$clientNbr.off("click",popHandler),popHandler=function(){}),popHandlerIncr++};$clientNbr.on("click",popHandler);var $alertSecurityPopin=$("#alert-security-popin"),$popinClose=$alertSecurityPopin.find(".close");$popinClose.on("click",function(event){event.preventDefault(),$alertSecurityPopin.remove()}),localStorage.setItem(LOCAL_STORAGE_POPIN_DATE_KEY,Date.now())},function(){displayBandeauSecurity&&displayBandeau(),displayPopinSecurity&&isGoodDate&&displayPopIn()}()};try{f()}catch(error){trace({alertSecurityNext:{usecase:"Erreur",error:"phishing alert config :"+error}})}}).fail(function(jqxhr,textStatus,error){var err=textStatus+", "+error;trace({alertSecurityNext:{usecase:"Erreur",error:"Request Failed: "+err}})}))}),function(){var isGoodContext,$devenirClient,isGoodEnv=!0;isGoodContext=$("body").hasClass("bpf")&&isGoodEnv,isGoodContext&&($devenirClient=$("a.bouton-devenir-client.bpf-only"),$devenirClient.off().text(_get("Nous contacter")))}(),$(function(){$("#activ-meteo").on("click",function(){$("#param-meteo").toggleClass("active")})}),function(){var isGoodContext,$devenirClient,isGoodEnv=!0;isGoodContext=$("body").hasClass("bpf")&&isGoodEnv,isGoodContext&&($devenirClient=$("a.bouton-devenir-client.bpf-only"),$devenirClient.off().text(_get("Nous contacter")))}();var targetSelect=$(".wrapper-upload.elp1 .wrap form select");$(targetSelect).on("change",function(){$(this).parent().find(".btn-secondary").removeClass("hidden")}),function(){var wf=GlobalSite.waitFor.bind(GlobalSite),$body=$("body"),isPart=$body.is(".part"),isBpf=$body.is(".bpf"),isGoodUnivers=isPart||isBpf;isGoodUnivers&&wf(function(){return $("#ia-mobilite-bancaire #iframe-bloc:not(.hidden)").length>0}).then(function(){$("#wcm-l-nav-facilimouv header.header-page").addClass("hidden"),$("#wcm-l-nav-facilimouv .onglet-nav .onglet-container .onglet").clone().prependTo("#wcm-l-nav-facilimouv .onglet-nav .onglet-container"),$("#wcm-l-nav-facilimouv .onglet-nav .onglet-container .onglet:first-child").remove(),$("#wcm-l-nav-facilimouv .onglet-nav .onglet-container .onglet").removeClass("onglet").addClass("newOnglet"),$("#wcm-l-nav-facilimouv .onglet-nav .onglet-container .newOnglet li").addClass("hidden"),$("#wcm-l-nav-facilimouv .onglet-nav .onglet-container .newOnglet li.abort").removeClass("hidden")})}(),function(){var wf=GlobalSite.waitFor.bind(GlobalSite);wf(function(){return $("#suivantMonAssurance").length>0},500,!0).then(function(){$("#suivantMonAssurance").on("click",function(){wf(function(){return $("#contenuDemandePret .validate-form .offre").length>0}).then(function(){var $elt=$("#contenuDemandePret .validate-form .offre");$elt.on("click",function(){var $this=$(this);$this.not(".active")&&($("#contenuDemandePret .validate-form .offre").removeClass("active"),$this.addClass("active"))})})})})}(),$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(response,status,request){"use strict";$(document).ready(function(){var PAGE_URL="/fr/a-la-une-bpf",isGoodPage=document.location.pathname.endsWith(PAGE_URL),isGoodEnv="PREVIEW"===window.ENVIRONNEMENT,isGoodContext=isGoodEnv&&isGoodPage;isGoodContext&&($("#bpf_accueil_carousel .js-build-carousel .carousel-inner #bpf_accueil_carousel_4 .bouton-play").on("click",function(){$("#bpf_accueil_carousel .js-build-carousel").attr("data-carousel-autorun","0")}),$("#bpf_accueil_carousel .js-build-carousel .left, #bpf_accueil_carousel .js-build-carousel .right").on("click",function(){0==$("#bpf_accueil_carousel .js-build-carousel").attr("data-carousel-autorun")&&$("#bpf_accueil_carousel .js-build-carousel").attr("data-carousel-autorun","1")}))})}}),$(function(){var isGoodEnv=!0,$body=$("body"),isPart=$body.is(".part"),isBpf=$body.is(".bpf"),isPro=$body.is(".pro"),isGoodUnivers=isPart||isBpf||isPro,isGoodPage=function(){var isGoodForPart=isPart&&window.location.pathname.endsWith("/fr/connexion/virements-services/virements/mes-beneficiaires"),isGoodForBpf=isBpf&&window.location.pathname.endsWith("/fr/espace-prive/virements-services/virements/mes-beneficiaires"),isGoodForPro=isPro&&window.location.pathname.endsWith("/fr/espace-pro/virements-services/virements/mes-beneficiaires");return isGoodForPart||isGoodForBpf||isGoodForPro}(),isGoodContext=isGoodEnv&&isGoodUnivers&&isGoodPage;if(isGoodContext){var wf=GlobalSite.waitFor,waitForBlocBenef=function(selector){wf(function(){return $(selector).length>0}).then(function(){$(selector).on("click",function(){$.ajax({url:"/rsc/contrib/html/espaceclient/virements/difficulte-validation.html",cache:!1,dataType:"html"}).done(function(html){trace("debug"),wf(function(){return $("#activation-par-cle-digitale .wrapper-virement").length>0}).then(function(){var $elt=$("#activation-par-cle-digitale .wrapper-virement");$elt.append(html),wf(function(){return $("#difficulte-validation .col-10").length>0}).then(function(){$("#difficulte-validation .col-90 h3, #difficulte-validation .col-10").on("click",function(){$("#difficulte-validation").toggleClass("open"),$("#difficulte-validation .msg-details").slideToggle("slow")})})})}).fail(function(error){trace("erreur ajax "+error)})})})};waitForBlocBenef("#ajouter-benef-activ-af"),waitForBlocBenef("#valider-demande-code")}}),$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(response,status,request){"use strict";$(document).ready(function(){var PAGE_URL1="/fr/nous-contacter/nous-contacter",PAGE_URL2="/fr/connexion/mes-outils/conseiller",isGoodPage=document.location.pathname.endsWith(PAGE_URL1)||document.location.pathname.endsWith(PAGE_URL2),isGoodUnivers=$("body").is(".part"),isGoodEnv=!0,isGoodContext=isGoodEnv&&isGoodUnivers&&isGoodPage;if(isGoodContext){var now=new Date(request.getResponseHeader("date")),dD=now,weekday=new Array(7);weekday[0]="Dimanche",weekday[1]="Lundi",weekday[2]="Mardi",weekday[3]="Mercredi",weekday[4]="Jeudi",weekday[5]="Vendredi",weekday[6]="Samedi";var nD=weekday[dD.getDay()];document.getElementById("activeDay").innerHTML=nD,console.log("nD : "+nD);var dateObj=now,month=dateObj.getUTCMonth()+1,day=dateObj.getUTCDate(),year=dateObj.getUTCFullYear(),newdate=day+"/"+month+"/"+year,dH=now,nH=dH.getHours();$.getJSON("/rsc/contrib/dev/json/trafic-crc.json",function(json){for(var $listHours,couleurs=json.couleurs,$listHoursTest=$("#listHours"),jours=json.jours,lenJour=jours.length,i=0;i<lenJour-1;i++)$listHours=$('<ul class="list-horaires"></ul>'),function(jIndex){var idx,hour,jour=jours[i],datasets=jour.datasets,hours=[],len=datasets.length;len.width;for(idx=0;idx<len;idx++){!function(){var myFillcolor=datasets[idx].fillColor;datasets[idx].fillColor=couleurs[myFillcolor];var myStrokeColor=datasets[idx].strokeColor;datasets[idx].strokeColor=couleurs[myStrokeColor]}(),hour=datasets[idx].label,hours.push(hour);var $contentListHours=$("<li></li>").text(hour);$listHours.append($contentListHours)}$listHoursTest.append($listHours)}(i);var dayoffNewDate=["01/11/2016","11/11/2016","25/12/2016","01/01/2017","17/04/2017","01/05/2017","08/05/2017","25/05/2017","04/06/2017","14/07/2017","15/08/2017","01/11/2017","11/11/2017","25/12/2017","01/01/2018","02/04/2018","01/05/2018","08/05/2018","10/05/2018","21/06/2018","14/07/2018","15/08/2018","01/11/2018","11/11/2018","25/12/2018","01/01/2019","22/04/2019","01/05/2019","08/05/2019","30/05/2019","10/06/2019","14/07/2019","15/08/2019","01/11/2019","11/11/2019","25/12/2019","01/01/2020","13/04/2020","01/05/2020","08/05/2020","21/05/2020","01/06/2020","14/07/2020","15/08/2020","01/11/2020","11/11/2020","25/12/2020","01/01/2021","05/04/2021","01/05/2021","08/05/2021","13/05/2021","24/05/2021","14/07/2021","15/08/2021","01/11/2021","11/11/2021","25/12/2021"],ControllDayOff=dayoffNewDate.indexOf(newdate),getBarChartDataForDay=function(dayNumber){return{labels:[json.jours[dayNumber].labels],day:[json.jours[dayNumber].day],datasets:json.jours[dayNumber].datasets}};console.log("var nH détermine l'heure : "+nH),console.log("var nD détermine le jour : "+nD),console.log("Affichage label dynamique : "+json.jours[0].datasets[0].label);var getBarChartDataForDayAndHour=function(beginHour,beginDay){var _datasets,_datasetsNext,listeHours=["8h","9h","10h","11h","12h","13h","14h","15h","16h","17h","18h","19h","20h","21h"],_beginDay=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"].indexOf(beginDay),fullDataSets=json.jours[_beginDay].datasets,fullDataSetsNextDay=json.jours[Math.min(_beginDay+1,6)].datasets,beginHourIndex=listeHours.indexOf(beginHour+"h");console.log("heure de début : "+beginHourIndex),_datasets=fullDataSets.slice(beginHourIndex);var endHour=22-_datasets.length,endHourIndex=listeHours.indexOf(endHour+"h");_datasetsNext=fullDataSetsNextDay.slice(0,endHourIndex);for(var plages=listeHours.slice(beginHourIndex).concat(["&nbsp;"]).concat(listeHours.slice(0,endHourIndex)),listHours=$('<ul class="list-horaires2"></ul>'),listHoursTest=$("#listHours"),i=0;i<=plages.length-1;i++)!function(i){var contentListHours=$("<li></li>");contentListHours.html(plages[i]),listHours.append(contentListHours),listHoursTest.append(listHours)}(i);var calcTable=[],calcHoraire1=listeHours.slice(beginHourIndex),indexcalcHoraire1=calcHoraire1.push(calcTable),widthFirstTranche=7*indexcalcHoraire1,widthSecondTranche=100-widthFirstTranche;$("#activeDay").css("width",widthFirstTranche+"%"),$("#nextDay").css("width",widthSecondTranche+"%"),"Samedi"===nD&&nH>=11&&($("#imgDayOff").css("position","relative"),$("#imgDayOff").css("left","0"),$("#dayOffContainer").css("position","absolute"),$("#dayOffContainer").css("right","0"),$("#dayOffContainer").css("float","right"),$("#dayOffContainer").css("width",widthSecondTranche+"%"));var textNextDay=json.jours[Math.min(_beginDay+1,6)].labels;return document.getElementById("activeDay").innerHTML=nD,document.getElementById("nextDay").innerHTML=textNextDay,{labels:[json.jours[_beginDay].labels],day:[json.jours[_beginDay].day],datasets:_datasets.concat(_datasetsNext)}};if(nH<=10){var barChartData;json.jours[0].datasets.pop(),json.jours[1].datasets.pop(),json.jours[2].datasets.pop(),json.jours[3].datasets.pop(),json.jours[4].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),$("#activeDay").css("width","100%"),$("#nextDay").css("display","none"),ControllDayOff>=0?($("#imgDayOff").removeClass("hidden"),$("#listHours .list-horaires").removeClass("current"),barChart.removeData()):"Lundi"===nD?(barChartData=getBarChartDataForDay(0),$("#listHours .list-horaires:nth-child(1)").addClass("current")):"Mardi"===nD?(barChartData=getBarChartDataForDay(1),$("#listHours .list-horaires:nth-child(2)").addClass("current")):"Mercredi"===nD?(barChartData=getBarChartDataForDay(2),$("#listHours .list-horaires:nth-child(3)").addClass("current")):"Jeudi"===nD?(barChartData=getBarChartDataForDay(3),$("#listHours .list-horaires:nth-child(4)").addClass("current")):"Vendredi"===nD?(barChartData=getBarChartDataForDay(4),$("#listHours .list-horaires:nth-child(5)").addClass("current")):"Samedi"===nD?(barChartData=getBarChartDataForDay(5),$("#listHours .list-horaires:nth-child(6)").addClass("current")):"Dimanche"===nD&&(barChartData=getBarChartDataForDay(6),$("#listHours .list-horaires").removeClass("current"),$("#imgDayOff").removeClass("hidden"))}else if(nH>10&&nH<=22)if(ControllDayOff>=0)$("#imgDayOff").removeClass("hidden"),$("#listHours .list-horaires").removeClass("current"),barChart.removeData();else{var barChartData=getBarChartDataForDayAndHour(nH,nD);$("#listHours .list-horaires2").addClass("current")}if(nH>22){var barChartData;json.jours[0].datasets.pop(),json.jours[1].datasets.pop(),json.jours[2].datasets.pop(),json.jours[3].datasets.pop(),json.jours[4].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),$("#activeDay").css("width","100%"),$("#nextDay").css("display","none"),$("#listHours .list-horaires2").removeClass("current"),ControllDayOff>=0?($("#imgDayOff").removeClass("hidden"),$("#listHours .list-horaires").removeClass("current"),barChart.removeData()):"Lundi"===nD?(barChartData=getBarChartDataForDay(1),$("#listHours .list-horaires:nth-child(1)").addClass("current"),nD="Mardi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden")):"Mardi"===nD?(barChartData=getBarChartDataForDay(2),$("#listHours .list-horaires:nth-child(2)").addClass("current"),nD="Mercredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden")):"Mercredi"===nD?(barChartData=getBarChartDataForDay(3),$("#listHours .list-horaires:nth-child(3)").addClass("current"),nD="Jeudi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden")):"Jeudi"===nD?(barChartData=getBarChartDataForDay(4),$("#listHours .list-horaires:nth-child(4)").addClass("current"),nD="Vendredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden")):"Vendredi"===nD?(barChartData=getBarChartDataForDay(5),$("#listHours .list-horaires:nth-child(5)").addClass("current"),nD="Samedi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden")):"Samedi"===nD?(barChartData=getBarChartDataForDay(6),$("#listHours .list-horaires:nth-child(6)").removeClass("current"),nD="Dimanche",document.getElementById("activeDay").innerHTML=nD,$("#dayOffContainer").css("width","100%"),$("#imgDayOff").removeClass("hidden")):"Dimanche"===nD&&(barChartData=getBarChartDataForDay(0),$("#listHours .list-horaires:nth-child(1)").addClass("current"),nD="Lundi",document.getElementById("activeDay").innerHTML=nD,$("#dayOffContainer").css("width","100%"),$("#imgDayOff").addClass("hidden"))}"Samedi"===nD&&(11===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("eleven"),$("#imgDayOff").removeClass("hidden")):12===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("twelve"),$("#imgDayOff").removeClass("hidden")):13===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("thirteen"),$("#imgDayOff").removeClass("hidden")):14===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("fourteen"),$("#imgDayOff").removeClass("hidden")):15===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("fifteen"),$("#imgDayOff").removeClass("hidden")):16===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("sixteen"),$("#imgDayOff").removeClass("hidden")):17===nH?($(".list-horaires2").addClass("saturday"),$(".list-horaires2").addClass("seventeen"),$("#imgDayOff").removeClass("hidden")):nH>=18&&(barChartData=getBarChartDataForDay(6),$("#dayOffContainer").css("width","100%"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires2").removeClass("current"),$("#nextDay").css("display","none"),$("#activeDay").css("width","100%"),$("#imgDayOff").removeClass("hidden"),nD="Dimanche",document.getElementById("activeDay").innerHTML=nD)),"Dimanche"===nD&&nH>=11&&($("#dayOffContainer").css("width","100%"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires2").removeClass("current"),$("#nextDay").css("display","none"),$("#activeDay").css("width","100%"),$("#imgDayOff").removeClass("hidden"));var barOptions={scaleOverride:!0,scaleSteps:5,scaleStepWidth:15,scaleStartValue:.5,scaleFontSize:0,showXAxisLabel:!1,scaleShowLabels:!1,responsive:!1,showTooltips:!1,scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleShowUnitStepSize:2,scaleShowGridLineWidth:Array[5],scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:10,barDatasetSpacing:2,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'
},clickArrow=function(){json.jours[0].datasets.pop(),json.jours[1].datasets.pop(),json.jours[2].datasets.pop(),json.jours[3].datasets.pop(),json.jours[4].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),json.jours[5].datasets.pop(),$("#navigation .left button").on("click",function(){if($("#nextDay").css("display","none"),$("#listHours .list-horaires2").removeClass("current"),$("#activeDay").css("width","100%"),"Lundi"===nD){barChart.removeData();var barChartData={labels:[json.jours[6].labels],day:[json.jours[6].day],datasets:json.jours[6].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Dimanche",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").removeClass("hidden"),$("#listHours .list-horaires").removeClass("current")}else if("Mardi"===nD){barChart.removeData();var barChartData={labels:[json.jours[0].labels],day:[json.jours[0].day],datasets:json.jours[0].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Lundi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(1)").addClass("current")}else if("Mercredi"===nD){barChart.removeData();var barChartData={labels:[json.jours[1].labels],day:[json.jours[1].day],datasets:json.jours[1].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Mardi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(2)").addClass("current")}else if("Jeudi"===nD){barChart.removeData();var barChartData={labels:[json.jours[2].labels],day:[json.jours[2].day],datasets:json.jours[2].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Mercredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(3)").addClass("current")}else if("Vendredi"===nD){barChart.removeData();var barChartData={labels:[json.jours[3].labels],day:[json.jours[3].day],datasets:json.jours[3].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Jeudi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(4)").addClass("current")}else if("Samedi"===nD){barChart.removeData();var barChartData={labels:[json.jours[4].labels],day:[json.jours[4].day],datasets:json.jours[4].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Vendredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(5)").addClass("current"),$("#dayOffContainer").css("width","100%")}else if("Dimanche"===nD){barChart.removeData();var barChartData={labels:[json.jours[5].labels],day:[json.jours[5].day],datasets:json.jours[5].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Samedi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(6)").addClass("current")}}),$("#navigation .right button").on("click",function(){if($("#nextDay").css("display","none"),$("#listHours .list-horaires2").removeClass("current"),$("#activeDay").css("width","100%"),"Lundi"===nD){barChart.removeData();var barChartData={labels:[json.jours[1].labels],day:[json.jours[1].day],datasets:json.jours[1].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Mardi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(2)").addClass("current")}else if("Mardi"===nD){barChart.removeData();var barChartData={labels:[json.jours[2].labels],day:[json.jours[2].day],datasets:json.jours[2].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Mercredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(3)").addClass("current")}else if("Mercredi"===nD){barChart.removeData();var barChartData={labels:[json.jours[3].labels],day:[json.jours[3].day],datasets:json.jours[3].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Jeudi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(4)").addClass("current")}else if("Jeudi"===nD){barChart.removeData();var barChartData={labels:[json.jours[4].labels],day:[json.jours[4].day],datasets:json.jours[4].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Vendredi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(5)").addClass("current")}else if("Vendredi"===nD){barChart.removeData();var barChartData={labels:[json.jours[5].labels],day:[json.jours[5].day],datasets:json.jours[5].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Samedi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(6)").addClass("current")}else if("Samedi"===nD){barChart.removeData();var barChartData={labels:[json.jours[6].labels],day:[json.jours[6].day],datasets:json.jours[6].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Dimanche",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").removeClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#dayOffContainer").css("width","100%")}else if("Dimanche"===nD){barChart.removeData();var barChartData={labels:[json.jours[0].labels],day:[json.jours[0].day],datasets:json.jours[0].datasets};barChart=new Chart(ctx).Bar(barChartData,barOptions),nD="Lundi",document.getElementById("activeDay").innerHTML=nD,$("#imgDayOff").addClass("hidden"),$("#listHours .list-horaires").removeClass("current"),$("#listHours .list-horaires:nth-child(1)").addClass("current")}})},ctx=document.getElementById("traffic").getContext("2d"),barChart=new Chart(ctx).Bar(barChartData,barOptions);clickArrow()})}})}}),$(function(){"use strict";var $body=$("body"),html="";html+='<div class="cookies avertissement">',html+="  <p>Please note that the English content on this site is for informational purposes only and does not apply from a legal perspective. </p>",html+="</div>",lgMgt.isEnglish()&&$body.is(".part")&&$body.append(html)}),function(){var switchEspaceClient=function(appendCallBack,isGoodPage){var isEnglish,html,isConnected,isGoodUnivers,isGoodContext,isGoodEnv,$body;$body=$("body"),isConnected=$body.is(".client"),isGoodUnivers=$body.is(".part"),isGoodEnv=!0,isGoodContext=isGoodEnv&&isConnected&&isGoodUnivers&&isGoodPage(),isGoodContext&&(isEnglish=lgMgt.isEnglish(),html="",html+='<ul id="select-langues-connecte">',html+='    <li data-toggle-section="'+(isEnglish?"#lg-en":"#lg-fr")+' ">'+(isEnglish?"EN":"FR")+"</li>",html+='    <li id="'+(isEnglish?"lg-en":"lg-fr")+'" class="'+(isEnglish?"lg-en":"lg-fr")+' hidden"><a href="'+(isEnglish?"/fr/connexion/comptes-et-contrats":"/en/login/accounts-and-contracts")+'">'+(isEnglish?"FR":"EN")+" </a></li>",html+="</ul>",appendCallBack(html),ShowHideHelper.dataToggleSectionCtx($("#select-langues-connecte")))};$(function(){switchEspaceClient(function(html){var $ongletNav=$(".onglet-nav");$ongletNav.append(html)},function(){var $body=$("body"),cond=$body.is(".ec-profil")||$body.is(".ec-conseiller")||$body.is(".ec-messagerie")||$body.is(".ec-mesdocuments");return!cond})}),$(function(){switchEspaceClient(function(html){var $listOutils=$(".list-outils");$listOutils.after(html)},function(){var $body=$("body"),cond=$body.is(".ec-profil")||$body.is(".ec-conseiller")||$body.is(".ec-messagerie")||$body.is(".ec-mesdocuments");return cond})})}(),function(strTest){var SESSION_STORAGE_ITEM_NAME="PUSH_APP_ALREADY",LOCAL_STORAGE_ITEM_NAME="PUSH_APP_COUNTER",f=function(){var _strTest=strTest||"",url=_strTest.match(/Android/i)&&"https://play.google.com/store/apps/details?id=net.bnpparibas.mescomptes&hl=fr"||_strTest.match(/iPhone|iPad|iPod/i)&&"https://itunes.apple.com/fr/app/mes-comptes-bnp-paribas/id377884617?mt=8"||_strTest.match(/Windows Phone/i)&&"http://www.windowsphone.com/fr-fr/store/app/bnp-paribas-mes-comptes/e1b6449c-4525-4782-bd32-c18a3c44bbf7"||"",isGoodDevice=""!==url,isGoodMod=function(){var uri=new URI,isWebView=function(){var result,ref,ref1;return result="webview"===(null!=(ref="undefined"!=typeof uri&&null!==uri&&null!=(ref1=uri.search(!0))?ref1.rc:void 0)?ref.toLowerCase():void 0)}();return!isWebView}(),isGoodEnv=!0,isGoodUnivers=$("body").is(".part, .bpf"),displayCounter=parseInt(JSON.parse(localStorage.getItem(LOCAL_STORAGE_ITEM_NAME))||"0",10),hasToDisplay=function(){var isNotAlreadyDisplayed=!JSON.parse(sessionStorage.getItem(SESSION_STORAGE_ITEM_NAME));return isNotAlreadyDisplayed&&displayCounter<=2}(),isGoodContext=isGoodDevice&&isGoodEnv&&isGoodUnivers&&isGoodMod&&hasToDisplay;if(isGoodContext){var html="";html+='<div class="row mobile-only" id="push-app">',html+='    <div class="row">',html+='        <div class="fermer">',html+="            <span>x</span>",html+="        </div>",html+="    </div>",html+='    <div class="row">',html+='        <div class="colonne-logo">',html+='            <div class="logo">&nbsp;</div>',html+="        </div>",html+='        <div class="colonne-message">',html+="            <strong>App. Mes comptes BNP Paribas</strong><br /> Client Banque Privée, accédez à un espace personnalisé",html+="            et profitez de fonctionnalités avancées. App. Gratuite. </div>",html+='        <div class="colonne-button relative">',html+='            <a class="installer" href="{url}">',html+="                Installer",html+="            </a>",html+="        </div>",html+="    </div>",html+="</div>",html=html.replace("{url}",url),$("#header").after(html);var $pushApp=$("#push-app");$pushApp.find(".fermer").on("click",function(event){$pushApp.remove()}),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,"true"),localStorage.setItem(LOCAL_STORAGE_ITEM_NAME,JSON.stringify(++displayCounter))}};$(f)}(navigator.userAgent)},tagByPage:function(){!function(){var $body=$("body"),isEC=$body.is(".espace-client");if(!isEC){var tagging=function(argsa,callBack){Webtrends&&Webtrends.multiTrack({element:this,argsa:argsa}),"function"==typeof callBack&&window.setTimeout(callBack,500)},isPro=$body.is(".pro"),isPart=$body.is(".part"),isGoodUnivers=isPart||isPro,isGoodEnv=!0,isGoodContext=isGoodUnivers&&isGoodEnv;isGoodContext&&($("a.logoBNP-alone").on("click",function(event){var $this=$(this),href=$this.get(0).href,redirect=function(){window.location=href};event.preventDefault(),isPart&&tagging(["WT.dl","99","WT.ti","barre-navigation/logo-BNP","WT.es","barre-navigation/logo-BNP","WT.mc_id","barre-navigation/logo-BNP"],redirect),isPro&&tagging(["WT.dl","99","WT.ti","barre-navigation-pro/logo-BNP","WT.es","barre-navigation-pro/logo-BNP","WT.mc_id","barre-navigation-pro/logo-BNP"],redirect)}),$(".nav-part > a, .nav-pro > a").on("click",function(event){var $this=$(this),href=$this.get(0).href,redirect=function(){window.location=href},libelle=$this.text();event.preventDefault(),isPart&&tagging(["WT.dl","99","WT.ti","barre-navigation/lien-%libelleLien%".replace("%libelleLien%",libelle),"WT.es","barre-navigation/lien-%libelleLien%".replace("%libelleLien%",libelle),"WT.mc_id","barre-navigation/lien-%libelleLien%".replace("%libelleLien%",libelle)],redirect),isPro&&tagging(["WT.dl","99","WT.ti","barre-navigation-pro/lien-%libelleLien%".replace("%libelleLien%",libelle),"WT.es","barre-navigation-pro/lien-%libelleLien%".replace("%libelleLien%",libelle),"WT.mc_id","barre-navigation-pro/lien-%libelleLien%".replace("%libelleLien%",libelle)],redirect)}))}}(),function(params){var isGoodPage;isGoodPage=window.location.pathname.indexOf("/fr/notre-offre/comptes-cartes-et-services/vente-flash-cartes")>=0,isGoodPage&&$("#wrapper #wcm-l-vente-flash-cartes").delegate("a[class*=btn-]","click",function(event){var href,isBtn1,isBtn2,isBtn3,isBtn4,isBtn,PATH1,PATH2,PATH3,PATH4,tagging;event.preventDefault(),PATH1="/fr/notre-offre/comptes-cartes-et-services/cartes-et-moyens-de-paiement/decouvrir-toutes-les-cartes/carte-visa-classic",PATH2="/fr/souscription/comptes-cartes-services/montee-en-gamme-carte?carte=CBI",PATH3="/fr/notre-offre/comptes-cartes-et-services/cartes-et-moyens-de-paiement/decouvrir-toutes-les-cartes/carte-visa-premier",PATH4="/fr/souscription/comptes-cartes-services/montee-en-gamme-carte?carte=CPR",href=$(this).attr("href")||"",isBtn1=href.indexOf(PATH1)>=0,isBtn2=href.indexOf(PATH2)>=0,isBtn3=href.indexOf(PATH3)>=0,isBtn4=href.indexOf(PATH4)>=0,isBtn=isBtn1||isBtn2||isBtn3||isBtn4,tagging=function(argsa){Webtrends&&window.setTimeout(function(){Webtrends.multiTrack({element:this,argsa:argsa})},500)},isBtn1&&tagging([].concat(["WT.dl","99"],["dcsuri","vfcartes/cta-carte-visa-classic/en-savoir-plus"],["WT.ti","VF Cartes - Carte Visa Classic - En Savoir +"],["WT.es","vfcartes/cta-carte-visa-classic/en-savoir-plus"])),isBtn2&&tagging([].concat(["WT.dl","99"],["dcsuri","vfcartes/cta-carte-visa-classic/souscrire-en-ligne"],["WT.ti","VF Cartes - Carte Visa Classic - Souscrire en ligne"],["WT.es","vfcartes/cta-carte-visa-classic/souscrire-en-ligne"])),isBtn3&&tagging([].concat(["WT.dl","99"],["dcsuri","vfcartes/cta-carte-visa-premier/en-savoir-plus"],["WT.ti","VF Cartes - Carte Visa Premier - En Savoir +"],["WT.es","vfcartes/cta-carte-visa-premier/en-savoir-plus"])),isBtn4&&tagging([].concat(["WT.dl","99"],["dcsuri","vfcartes/cta-carte-visa-premier/souscrire-en-ligne"],["WT.ti","VF Cartes - Carte Visa Premier - Souscrire en ligne"],["WT.es","vfcartes/cta-carte-visa-premier/souscrire-en-ligne"])),isBtn&&window.setTimeout(function(){document.location=href},500)})}(),function(){"use strict";var PAGE_URL="/fr/notre-offre-pro/credits/financements-de-tresorerie",isGoodUnivers=void 0,isGoodPage=void 0,isGoodEnv=void 0,isGoodContext=void 0,tagging=function(argsa){Webtrends&&window.setTimeout(function(){Webtrends.multiTrack({element:this,argsa:argsa})},500)};if(isGoodUnivers=$("body").is(".pro"),isGoodPage=window.location.pathname.endsWith(PAGE_URL),isGoodEnv=!0,isGoodContext=isGoodUnivers&&isGoodPage&&isGoodEnv){$(function(){tagging([].concat(["WT.dl","0"],["dcsuri","credit/financement-de-tresorerie"],["WT.ti","Page Hub - Financement de tresorerie"],["WT.es","credit/financement-de-tresorerie"]))});var $comprende=$(".financement-tresorerie .col-3.mob-100").eq(0),$comparer=$(".financement-tresorerie .col-3.mob-100").eq(1),$realiser=$(".financement-tresorerie .col-3.mob-100").eq(2);$comprende.on("click",function(event){tagging([].concat(["WT.dl","99"],["dcsuri","credit/financement-de-tresorerie/clic-comprendre-le-credit-de-tresorerie-video"],["WT.ti","Page Hub - Financement de tresorerie - Comprendre le credit de tresorerie en video"],["WT.es","credit/financement-de-tresorerie/clic-comprendre-le-credit-de-tresorerie-video"]))}),$comparer.on("click",function(event){tagging([].concat(["WT.dl","99"],["dcsuri","credit/financement-de-tresorerie/clic-comparer-offres"],["WT.ti","Page Hub - Financement de tresorerie - Comparer les offres"],["WT.es","credit/financement-de-tresorerie/clic-comparer-offres"]))}),$realiser.on("click",function(event){tagging([].concat(["WT.dl","99"],["dcsuri","credit/financement-de-tresorerie/clic-diagnostic-tresorerie"],["WT.ti","Page Hub - Financement de tresorerie - Diagnostic de tresorerie"],["WT.es","credit/financement-de-tresorerie/clic-diagnostic-tresorerie"]))})}}(),function(){"use strict";var isGoodUnivers,isGoodPage,isGoodEnv,isGoodContext,PAGE_URL="/fr/notre-offre-pro/credits/financements-de-tresorerie/autodiagnostic-tresorerie",tagging=function(argsa){Webtrends&&window.setTimeout(function(){Webtrends.multiTrack({element:this,argsa:argsa})},500)};if(isGoodUnivers=$("body").is(".pro"),isGoodPage=window.location.pathname.endsWith(PAGE_URL),isGoodEnv=!0,isGoodContext=isGoodUnivers&&isGoodPage&&isGoodEnv){var $decouvrir=$("#ad-btn-show-result"),$autoDiagnostiForm=$("#auto-diagnosti-form"),$step2Container=$("#ad-top-container-result");$(function(){tagging([].concat(["WT.dl","0"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 1 - Mon Besoin"],["WT.z_outil","avant-vente"],["WT.es","simulation-diagnostic-tresorerie/etape-1/mon-besoin"],["WT.si_n","Simulation Diagnostic Tresorerie"],["WT.si_x","1"]))}),$decouvrir.on("click",function(event){event.preventDefault(),window.setTimeout(function(){var isValid=void 0;$autoDiagnostiForm.submit(),isValid="none"!==$step2Container.css("display"),isValid&&(tagging([].concat(["WT.dl","99"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 1 - Mon Besoin - Decouvrir votre financement"],["WT.es","simulation-diagnostic-tresorerie/etape-1/mon-besoin/decouvrir-financement"])),function(){var argsa=void 0,radioStatusProValue=void 0,radioCycleExploitValue=void 0,radioCaExploitation=void 0,checkSpecEncaissValues=[],radioImpactTresorerieValue=void 0;radioStatusProValue=$("input[type=radio][name=statut-pro]:checked",$autoDiagnostiForm).val(),radioCycleExploitValue=$("input[type=radio][name=cycle-exploitation]:checked",$autoDiagnostiForm).val(),radioCaExploitation=$("input[type=radio][name=ca-exploitation]:checked",$autoDiagnostiForm).val(),$("input[type=checkbox][name=spec-encaissement]:checked",$autoDiagnostiForm).each(function(){var $self=$(this),corresp=($(this).val(),{regulierretard:"regulierement",parfois:"delai",encaissement:"effets de commerce"});checkSpecEncaissValues.push(corresp[$self.val()])}),radioImpactTresorerieValue=$("input[type=radio][name=impact-tresorerie]:checked",$autoDiagnostiForm).val(),argsa=[].concat(["WT.dl","0"],["WT.z_outil","avant-vente"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 2 - Resultat"],["WT.es","simulation-diagnostic-tresorerie/etape-2/resultat"],["WT.si_n","Simulation Diagnostic Tresorerie"],["WT.si_x","2"],["WT.si_cs","1"],["WT.z_diag-tres_statut-pro",{commercant:"commercant","pro-liberal":"liberale de sante","micro-entreprise":"liberale autre","pro-agricole":"agricole"}[radioStatusProValue]],["WT.z_diag-tres_comportement-ventes_type",{regulier:"Regulier",variable:"Variable",saisonnier:"Saisonnier"}[radioCycleExploitValue]],["WT.z_diag-tres_comportement-ventes_ca",{stable:"Stable",croissant:"En croissance"}[radioCaExploitation]],["WT.z_diag-tres_encaissements",checkSpecEncaissValues.join(";")],["WT.z_diag-tres_impacts",{"impact-tresorerie-1":"Decalages rares","impact-tresorerie-2":"Decalages ponctuels","impact-tresorerie-3":"Decalages permanents"}[radioImpactTresorerieValue]]);var $produc1Pushed=$("#ad-top-container-result [id^=produit-]").eq(0),$produc2Pushed=$("#ad-top-container-result [id^=produit-]").eq(1),$produc3Pushed=$("#ad-top-container-result [id^=produit-]").eq(2);if($produc1Pushed.length>0&&(argsa=argsa.concat(["WT.z_diag-tres_push-produit-1",$produc1Pushed.find(".content h2").text()])),$produc2Pushed.length>0&&(argsa=argsa.concat(["WT.z_diag-tres_push-produit-2",$produc2Pushed.find(".content h2").text()])),$produc3Pushed.length>0&&(argsa=argsa.concat(["WT.z_diag-tres_push-produit-3",$produc3Pushed.find(".content h2").text()])),"commercant"===radioStatusProValue){var radioStatutProDetailVal=function(){var v1=$("input[type=radio][name=statut-pro-detail]:checked").attr("id")===$("input[type=radio][name=statut-pro-detail]").eq(0).attr("id")&&"particuliers",v2=$("input[type=radio][name=statut-pro-detail]:checked").attr("id")===$("input[type=radio][name=statut-pro-detail]").eq(1).attr("id")&&"entreprises",v3=$("input[type=radio][name=statut-pro-detail]:checked").attr("id")===$("input[type=radio][name=statut-pro-detail]").eq(2).attr("id")&&"les deux";return v1||v2||v3}();argsa=argsa.concat(["WT.z_diag-tres_statut-pro_type-client",radioStatutProDetailVal])}tagging(argsa)}())},500)}),function(options){var setHandler=function(btnClass,argsaList){var selector="#ad-top-container-result [id^=produit-] "+btnClass;$(selector);$("body").on("click",selector,function(event){event.preventDefault();var positionProduit=function(){var productId=$(this).closest("[id^=produit-]").eq(0).attr("id"),productListIds=$("#ad-top-container-result [id^=produit-]").map(function(){return $(this).attr("id")}).toArray(),position=productListIds.indexOf(productId)+1;return position}.bind(this)(),nomProduit=$(this).closest("[id^=produit-]").find(".content h2").text(),argsa=[].concat(["WT.z_diag-tres_clic-nomproduit",nomProduit],["WT.z_diag-tres_clic-positionproduit",positionProduit]);argsa=argsa.concat.apply(argsa,argsaList),tagging(argsa),window.setTimeout(function(){document.location=$(this).attr("href")}.bind(this),500)})};setHandler(".btn-primary",[["WT.dl","99"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 2 - Resultat - Faire une simulation"],["WT.es","simulation-diagnostic-tresorerie/etape-2/resultat/faire-une-simulation"]]),setHandler(".btn-",[["WT.dl","99"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 2 - Resultat - En savoir plus"],["WT.es","simulation-diagnostic-tresorerie/etape-2/resultat/en-savoir-plus"]])}();var $recommencer=$(".ad-recommencer-simulation a.btn-");$recommencer.on("click",function(event){event.preventDefault();var href=$(this).attr("href");tagging([].concat(["WT.dl","99"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 2 - Resultat - Recommencer simulation"],["WT.es","simulation-diagnostic-tresorerie/etape-2/resultat/recommencer-simulation"])),window.setTimeout(function(){window.location=href},500)});var $prendreRendezVous=$(".ad-recommencer-simulation a.btn-primary");$prendreRendezVous.on("click",function(event){event.preventDefault();var href=$(this).attr("href");tagging([].concat(["WT.dl","99"],["WT.ti","Simulation Diagnostic Tresorerie - Etape 2 - Resultat - Prendre rdv"],["WT.es","simulation-diagnostic-tresorerie/etape-2/resultat/prendre-rdv"])),window.setTimeout(function(){window.location=href},500)})}}(),function(){"use strict";function isAccess1(){return document.location.pathname.endsWith(ACCES1_PATH)}function isAccess2(){return document.location.pathname.endsWith(ACCES2_PATH)}function isAccess3(){return document.location.pathname.endsWith(ACCES3_PATH)}function isAccess4(){return document.location.pathname.endsWith(ACCES4_PATH)}function getCurrentHostname(){return hostName}function getCurrentReferrerHostName(){return referrerHost}function hasReferrer(){var currentReferrerHostName=(getCurrentReferrerHostName()||"").trim(),_hasReferrer=eerTrackingState.hasReferrer;return _hasReferrer||!!currentReferrerHostName&&getCurrentHostname()!==getCurrentReferrerHostName()}function getPerfOrigine(){return GetURLParameter("perf_origine")||eerTrackingState.perfOrigine}function hasPerfOrigin(){var perfOrigine=getPerfOrigine();return!!perfOrigine}function saveEerTracking(){var str=JSON.stringify(eerTrackingState);sessionStorage.setItem("EER_TRACKING_STATE",str)}function transform(){var launchScenario1,launchScenario2,launchScenario3;hasToTransform&&(launchScenario1=function(){hasReferrer()&&!hasPerfOrigin()&&(delete eerTrackingState.perfOrigine,eerTrackingState.hasReferrer=!0,eerTrackingState.transmit=!0,saveEerTracking())},launchScenario2=function(isPageDispatch){if(hasReferrer()||hasPerfOrigin()||(isPageDispatch?eerTrackingState.perfOrigine="STE110":delete eerTrackingState.perfOrigine,delete eerTrackingState.hasReferrer,eerTrackingState.transmit=!0,saveEerTracking()),isPageDispatch&&hasReferrer()&&!hasPerfOrigin())try{$(".devenir-client a[href*=ouvrir-un-compte]:contains('Devenir client'), .main a[href*=ouvrir-un-compte]:contains('Devenir Client')").each(function(){var href=$(this).attr("href"),uri=new URI(href);uri.removeSearch("perf_origine"),$(this).attr("href",uri.toString())})}catch(error){}},launchScenario3=launchScenario2,isAccess1()?launchScenario2():isAccess2()||isAccess3()?(launchScenario1(),launchScenario2(isAccess3())):isAccess4()&&(launchScenario3(),hasPerfOrigin()&&"function"==typeof $.cookie&&$.cookie("perf_origine",getPerfOrigine())))}try{var ACCES1_PATH="/",ACCES2_PATH="/fr/notre-offre/comptes-cartes-et-services/devenir-client-ouvrir-un-compte",ACCES3_PATH="/fr/devenir-client-bnp-paribas",ACCES4_PATH="/fr/ouvrir-un-compte",storageValue=sessionStorage.getItem("EER_TRACKING_STATE")||null,eerTrackingState=JSON.parse(storageValue)||{},refA=(document.referrer,$("<a href='"+document.referrer+"'></a>").get(0)),hostName=document.location.hostname,referrerHost=refA.hostname,hasToTransform=!eerTrackingState.transmit||!0;transform()}catch(error){window.trace&&trace(error)}}()},bannierePokap:function(){return"QUALIF"===window.ENVIRONNEMENT?function(){var pokapData,checkPokapDisplay,processData,processWebtrends,checkInfoClientId,isGoodContext,showPoka=!1,MODE_TO_USE=4,IS_LOA_ACTIVATED=!0,isQualif=(window.location.host.startsWith("prod-m-wea"),"PROD"===window.ENVIRONNEMENT,"QUALIF"===window.ENVIRONNEMENT),isPreview=(window.location.host.startsWith("canalnet-pro-qual-we3"),"PREVIEW"===window.ENVIRONNEMENT);isGoodContext=function(){var isGoodUnivers=$("body").hasClass("pro"),isGoodPage=window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats")!=-1&&window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats/")<0,isGoodEnv=!0;return isGoodUnivers&&isGoodPage&&isGoodEnv}(),isGoodContext&&(checkPokapDisplay=function(callBack){"function"==typeof callBack&&$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(response,status,request){var now=new Date(request.getResponseHeader("date")).getTime();$.getJSON("/rsc/contrib/script/client/pokaConfig.json",function(data){$.each(data.PokaActive,function(index,elem){if(elem.environnement==window.ENVIRONNEMENT){var dateFromArray=elem.from.match(/.{1,2}/g),dateToArray=elem.to.match(/.{1,2}/g),dateFrom=new Date("20"+dateFromArray[0],Number(dateFromArray[1])-1,dateFromArray[2],dateFromArray[3],dateFromArray[4]).getTime(),dateTo=new Date("20"+dateToArray[0],Number(dateToArray[1])-1,dateToArray[2],dateToArray[3],dateToArray[4]).getTime();now>=dateFrom&&now<=dateTo&&(showPoka=!0)}}),showPoka&&callBack()})}})},processWebtrends=function(choice){var isWebtrendsGoodContext,commonWebtrendsProcess,CHOICES_LABELS;CHOICES_LABELS={CTA7:"pokap-triple-loa-flexilia-credit-pro",CTA6:"pokap-double-loa-credit-pro",CTA5:"pokap-double-flexilia-loa",CTA4:"pokap-double-credit-pro-flexilia",CTA3:"pokap-simple-loa",CTA2:"pokap-simple-flexilia",CTA1:"pokap-simple-credit-pro"},isWebtrendsGoodContext=isPreview||isQualif,commonWebtrendsProcess=function(){var label=CHOICES_LABELS[choice],title=document.title;$(".pokap a").on("click",function(event){var href=$(this).attr("href");event.preventDefault(),Webtrends.multiTrack({args:{"WT.dl":"99","WT.ti":title+" - "+label,"WT.z_clickcat":"demande en ligne","WT.z_click":label},callback:function(a){window.location=href}})})},isWebtrendsGoodContext&&commonWebtrendsProcess()},processData=function(data){if(null!=("undefined"!=typeof data&&null!==data?data.data:void 0)){var pokaCapro,pokaFlexilia,pokaLoaPro,ref,ref1,ref2,ref3,ref4,ref5,setWebtrendsCase=function(choiceNumber){setWebtrendsCase["case"]="CTA"+choiceNumber},_processWebtrends=function(){processWebtrends(setWebtrendsCase["case"])},urlBanniere=void 0,montantCapro=void 0,montantFlexilia=void 0,montantLoa=void 0;pokaLoaPro=null!=(ref="undefined"!=typeof data&&null!==data&&null!=(ref1=data.data)?ref1.pokaLoaPro:void 0)?ref:{},pokaCapro=null!=(ref2="undefined"!=typeof data&&null!==data&&null!=(ref3=data.data)?ref3.pokaCapro:void 0)?ref2:{},pokaFlexilia=null!=(ref4="undefined"!=typeof data&&null!==data&&null!=(ref5=data.data)?ref5.pokaFlexilia:void 0)?ref4:{},montantCapro=pokaCapro.montant||0,montantFlexilia=pokaFlexilia.montant||0,montantLoa=pokaLoaPro.montant||0,"undefined"!=typeof data.data.pokaLoaPro?(!pokaCapro.eligible||pokaFlexilia.eligibilite||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-capro.html",setWebtrendsCase(1)),!pokaFlexilia.eligibilite||pokaCapro.eligible||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-flexilia.html",setWebtrendsCase(2)),IS_LOA_ACTIVATED&&(!pokaLoaPro.eligible||pokaCapro.eligible||pokaFlexilia.eligibilite||(urlBanniere="pokap-loa.html",setWebtrendsCase(3))),!pokaCapro.eligible||!pokaFlexilia.eligibilite||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-capro-flexilia.html",setWebtrendsCase(4)),IS_LOA_ACTIVATED&&(pokaLoaPro.eligible&&pokaFlexilia.eligibilite&&!pokaCapro.eligible&&(urlBanniere="pokap-flex-loa.html",setWebtrendsCase(5)),pokaLoaPro.eligible&&pokaCapro.eligible&&!pokaFlexilia.eligibilite&&(urlBanniere="pokap-loa-capro.html",setWebtrendsCase(6)),pokaLoaPro.eligible&&pokaCapro.eligible&&pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro-flex-loa.html",setWebtrendsCase(7)))):(pokaCapro.eligible&&!pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro.html",setWebtrendsCase(1)),pokaFlexilia.eligibilite&&!pokaCapro.eligible&&(urlBanniere="pokap-flexilia.html",setWebtrendsCase(2)),pokaCapro.eligible&&pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro-flexilia.html",setWebtrendsCase(4))),urlBanniere&&showPoka&&$.ajax({url:"/rsc/contrib/html/pokap/"+urlBanniere,dataType:"html"}).done(function(html){GlobalSite.waitFor(function(){return $("[id=zone-publiable-liste-compte-0]").length>0}).then(function(){$("[id=zone-publiable-liste-compte-0]").last().after(html),ShowHideHelper.dataShowHideSection(),montantCapro>0&&$(".montant-capro").text(addThousandsSep(montantCapro," ")),montantFlexilia>0&&$(".montant-flexilia").text(addThousandsSep(montantFlexilia," ")),IS_LOA_ACTIVATED&&montantLoa>0&&$(".montant-loa").text(addThousandsSep(montantLoa," ")),_processWebtrends()})})}},checkPokapDisplay(function(){checkInfoClientId=setInterval(function(){if(sessionStorage.getItem("info_client")){clearInterval(checkInfoClientId);var infoClient=JSON.parse(sessionStorage.getItem("info_client"));if(pokapData=infoClient.pokap)processData(pokapData);else{var postProcess=function(data){processData(data),infoClient.pokap=data,sessionStorage.setItem("info_client",JSON.stringify(infoClient))};$.get("/serviceinfosclient-wspl/rpc/InfosClient?modeAppel="+MODE_TO_USE,function(_data){postProcess(_data)})}}},500)}))}:function(){var pokapData,checkPokapDisplay,processData,checkInfoClientId,isGoodContext,MODE_TO_USE,isMarne,showPoka=!1;isMarne=window.location.host.startsWith("prod-m-wea");var USING_ALT_LOA=function(){var isProd="PROD"===window.ENVIRONNEMENT,isQualif="QUALIF"===window.ENVIRONNEMENT,isQ3=window.location.host.startsWith("canalnet-pro-qual-we3"),isPreview="PREVIEW"===window.ENVIRONNEMENT;window.location.host.startsWith("prev")&&"PREVIEW"===window.ENVIRONNEMENT;return isQualif&&isQ3&&!isPreview&&!isProd}(),USING_MODE_4=function(){var isQualif="QUALIF"===window.ENVIRONNEMENT,isPreview="PREVIEW"===window.ENVIRONNEMENT,isPreviewButBench=window.location.host.startsWith("prev")&&"PREVIEW"===window.ENVIRONNEMENT,isQ1=window.location.host.startsWith("canalnet-pro-qual-we1"),isBenchQ1=window.location.host.startsWith("canalnet-pro-benc-we1"),isProd="PROD"===window.ENVIRONNEMENT;return isQualif&&isQ1||isPreview&&isBenchQ1||isPreviewButBench||isMarne||isProd}(),USING_MODE_3=function(){var isQualif="QUALIF"===window.ENVIRONNEMENT,isProd="PROD"===window.ENVIRONNEMENT,isQ3=window.location.host.startsWith("canalnet-pro-qual-we3"),isPreviewButBench=window.location.host.startsWith("prev")&&"PREVIEW"===window.ENVIRONNEMENT;return isQualif&&isQ3&&!isPreviewButBench&&!isMarne&&!isProd}();MODE_TO_USE=function(){var result=2;return USING_MODE_4&&(result=4),
USING_MODE_3&&(result=3),result}();var ALT_LOA_URL="/loa-pro-wspl/rpc/initialization",IS_LOA_ACTIVATED=function(){var isQualif="QUALIF"===window.ENVIRONNEMENT,isPreview="PREVIEW"===window.ENVIRONNEMENT,isPreviewButBench=window.location.host.startsWith("prev")&&"PREVIEW"===window.ENVIRONNEMENT,isProd="PROD"===window.ENVIRONNEMENT,isQ1=window.location.host.startsWith("canalnet-pro-qual-we1"),isQ3=window.location.host.startsWith("canalnet-pro-qual-we3"),isBenchQ1=window.location.host.startsWith("canalnet-pro-benc-we1");return isQualif&&isQ1||isQualif&&isQ3||isProd||isPreviewButBench||isMarne||isPreview&&isBenchQ1}();isGoodContext=function(){var isGoodUnivers=$("body").hasClass("pro"),isGoodPage=window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats")!=-1&&window.location.pathname.indexOf("/fr/espace-pro/comptes-et-contrats/")<0,isGoodEnv=!0;return isGoodUnivers&&isGoodPage&&isGoodEnv}(),isGoodContext&&(checkPokapDisplay=function(callBack){"function"==typeof callBack&&$.ajax({url:"/icons/small/blank.gif",cache:!1,success:function(response,status,request){var now=new Date(request.getResponseHeader("date")).getTime();$.getJSON("/rsc/contrib/script/client/pokaConfig.json",function(data){$.each(data.PokaActive,function(index,elem){if(elem.environnement==window.ENVIRONNEMENT){var dateFromArray=elem.from.match(/.{1,2}/g),dateToArray=elem.to.match(/.{1,2}/g),dateFrom=new Date("20"+dateFromArray[0],Number(dateFromArray[1])-1,dateFromArray[2],dateFromArray[3],dateFromArray[4]).getTime(),dateTo=new Date("20"+dateToArray[0],Number(dateToArray[1])-1,dateToArray[2],dateToArray[3],dateToArray[4]).getTime();now>=dateFrom&&now<=dateTo&&(showPoka=!0)}}),showPoka&&callBack()})}})},processData=function(data){if(null!=("undefined"!=typeof data&&null!==data?data.data:void 0)){var pokaCapro,pokaFlexilia,pokaLoaPro,ref,ref1,ref2,ref3,ref4,ref5,urlBanniere=void 0,montantCapro=void 0,montantFlexilia=void 0,montantLoa=void 0;pokaLoaPro=null!=(ref="undefined"!=typeof data&&null!==data&&null!=(ref1=data.data)?ref1.pokaLoaPro:void 0)?ref:{},pokaCapro=null!=(ref2="undefined"!=typeof data&&null!==data&&null!=(ref3=data.data)?ref3.pokaCapro:void 0)?ref2:{},pokaFlexilia=null!=(ref4="undefined"!=typeof data&&null!==data&&null!=(ref5=data.data)?ref5.pokaFlexilia:void 0)?ref4:{},montantCapro=pokaCapro.montant||0,montantFlexilia=pokaFlexilia.montant||0,montantLoa=pokaLoaPro.montant||0,"undefined"!=typeof data.data.pokaLoaPro?(!pokaCapro.eligible||pokaFlexilia.eligibilite||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-capro.html"),!pokaFlexilia.eligibilite||pokaCapro.eligible||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-flexilia.html"),IS_LOA_ACTIVATED&&(!pokaLoaPro.eligible||pokaCapro.eligible||pokaFlexilia.eligibilite||(urlBanniere="pokap-loa.html")),!pokaCapro.eligible||!pokaFlexilia.eligibilite||IS_LOA_ACTIVATED&&pokaLoaPro.eligible||(urlBanniere="pokap-capro-flexilia.html"),IS_LOA_ACTIVATED&&(pokaLoaPro.eligible&&pokaFlexilia.eligibilite&&!pokaCapro.eligible&&(urlBanniere="pokap-flex-loa.html"),pokaLoaPro.eligible&&pokaCapro.eligible&&!pokaFlexilia.eligibilite&&(urlBanniere="pokap-loa-capro.html"),pokaLoaPro.eligible&&pokaCapro.eligible&&pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro-flex-loa.html"))):(pokaCapro.eligible&&!pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro.html"),pokaFlexilia.eligibilite&&!pokaCapro.eligible&&(urlBanniere="pokap-flexilia.html"),pokaCapro.eligible&&pokaFlexilia.eligibilite&&(urlBanniere="pokap-capro-flexilia.html")),urlBanniere&&showPoka&&$.ajax({url:"/rsc/contrib/html/pokap/"+urlBanniere,dataType:"html"}).done(function(html){var interval_pokap=setInterval(function(){$("[id=zone-publiable-liste-compte-0]").length>0&&($("[id=zone-publiable-liste-compte-0]").last().after(html),clearInterval(interval_pokap),ShowHideHelper.dataShowHideSection(),montantCapro>0&&$(".montant-capro").text(addThousandsSep(montantCapro," ")),montantFlexilia>0&&$(".montant-flexilia").text(addThousandsSep(montantFlexilia," ")),IS_LOA_ACTIVATED&&montantLoa>0&&$(".montant-loa").text(addThousandsSep(montantLoa," ")))},500)})}},checkPokapDisplay(function(){checkInfoClientId=setInterval(function(){var SESSION_STORAGE_ITEM_NAME="AlreadyPokapLoaProAlt",isAlreadyPokapLoaProAltProcessed=!1;if(sessionStorage.getItem("info_client")){clearInterval(checkInfoClientId);var infoClient=JSON.parse(sessionStorage.getItem("info_client"));if(pokapData=infoClient.pokap)USING_ALT_LOA?(isAlreadyPokapLoaProAltProcessed=!!sessionStorage.getItem(SESSION_STORAGE_ITEM_NAME),isAlreadyPokapLoaProAltProcessed?processData(pokapData):$.get(ALT_LOA_URL,function(data){pokapData.data.pokaLoaPro={eligible:data.data.contexte.isClientEligible,montant:data.data.contexte.montantPreAcceptationLOA},processData(pokapData),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,"true")})):processData(pokapData);else{var postProcess=function(data){processData(data),infoClient.pokap=data,sessionStorage.setItem("info_client",JSON.stringify(infoClient))};$.get("/serviceinfosclient-wspl/rpc/InfosClient?modeAppel="+MODE_TO_USE,function(_data){USING_ALT_LOA?$.get(ALT_LOA_URL,function(data){_data.data.pokaLoaPro={eligible:data.data.contexte.isClientEligible,montant:data.data.contexte.montantPreAcceptationLOA},postProcess(_data),sessionStorage.setItem(SESSION_STORAGE_ITEM_NAME,"true")}):postProcess(_data)})}}},500)}))}}()},ieVersion=function(){var rv=!1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}(),initAll=function(param){param!==!1&&(appli_check&&void 0===param||(DeviceSize.init(),CustomDropdown.init(),HelpText.init($("body")),Datepicker.init(),FormHelper.autofill(),FormHelper.makeCalculations(2),FormHelper.formValidation(),FormHelper.textareaCompteur(),FormHelper.resetButton(),ShowHideHelper.init(),void 0!==ieVersion&&ieVersion!==!1&&ieVersion<=9&&($("body").addClass("ie ie"+ieVersion),FormHelper.placeholderPolyfill()),ieVersion===!1&&$("body").addClass("not-ie"),Popin.init(),GlobalSite.init(),clickableRow.init(),clickablePDF.init(),Conseiller.init(),NavigationGlobal.init(),preventPasteOnConfirm.init(),canvasBuilder.init(),$(".js-build-carrousel-cards").length>0&&buildCarrousel($(".js-build-carrousel-cards"),carrouselDefinitions.cards),$(".js-build-carrousel-acsi").length>0&&buildCarrousel($(".js-build-carrousel-acsi"),carrouselDefinitions.acsi,{type:"acsi"}),Redirections.init(),loadNumTel(),loadcapitalSocialGroupe()))},UDCconfig={limit_big:25,limit_medium:10,delaySearch:0},ROPconfig={delaySearch:0},HistoriqueVirementConfig={delaySearch:0},PPIConfig={yearRange:"-50:+0"},NCIConfig={yearRange:"-100:+0"},rop_icons_types=[{classe:1,title:_get("next.main.rop_icons_types1","Alimentation")},{classe:2,title:_get("next.main.rop_icons_types2","Divers")},{classe:3,title:_get("next.main.rop_icons_types3","Enfant(s)")},{classe:4,title:_get("next.main.rop_icons_types4","Epargne")},{classe:5,title:_get("next.main.rop_icons_types5","Habillement")},{classe:6,title:_get("next.main.rop_icons_types6","Impôts")},{classe:7,title:_get("next.main.rop_icons_types7","Logement")},{classe:8,title:_get("next.main.rop_icons_types8","Loisirs")},{classe:9,title:_get("next.main.rop_icons_types9","Transport")},{classe:10,title:_get("next.main.rop_icons_types10","Santé")},{classe:11,title:_get("next.main.rop_icons_types11","Vacances")},{classe:12,title:_get("next.main.rop_icons_types12","Opérations bancaires")},{classe:13,title:_get("next.main.rop_icons_types13","Non défini")},{classe:14,title:_get("next.main.rop_icons_types14","Multimédia")},{classe:15,title:_get("next.main.rop_icons_types15","Travaux")},{classe:16,title:_get("next.main.rop_icons_types16","Voiture")},{classe:17,title:_get("next.main.rop_icons_types17","Animaux")},{classe:18,title:_get("next.main.rop_icons_types18","Bien-être")},{classe:19,title:_get("next.main.rop_icons_types19","Consommation")},{classe:20,title:_get("next.main.rop_icons_types20","Energies")},{classe:21,title:_get("next.main.rop_icons_types21","Frais professionnel")},{classe:22,title:_get("next.main.rop_icons_types22","Retrait")},{classe:23,title:_get("next.main.rop_icons_types23","Sorties")},{classe:24,title:_get("next.main.rop_icons_types24","Cadeaux")},{classe:51,title:_get("next.main.rop_icons_types25","Prestations sociales")},{classe:52,title:_get("next.main.rop_icons_types26","Salaires")},{classe:53,title:_get("next.main.rop_icons_types27","Rentes")},{classe:54,title:_get("next.main.rop_icons_types28","Pensions")},{classe:55,title:_get("next.main.rop_icons_types29","Intérêts")},{classe:56,title:_get("next.main.rop_icons_types30","Loyers")},{classe:57,title:_get("next.main.rop_icons_types31","Dividendes")},{classe:58,title:_get("next.main.rop_icons_types32","Non défini")},{classe:59,title:_get("next.main.rop_icons_types33","Remboursement")},{classe:60,title:_get("next.main.rop_icons_types34","Shopping Deals")}],getIconTitle=function(classe){for(prop in rop_icons_types)if(rop_icons_types[prop].classe==classe)return rop_icons_types[prop].title;return!1};!function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function(){function delayed(){execAsap||func.apply(obj,args),timeout=null}var obj=this,args=arguments;timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||100)}};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr)}}(jQuery,"smartresize");var clickableRow={init:function(){$("table .clickable-row").on("click",function(){$_row=$(this),$_row.parents("table").hasClass("multiple-row-clickable")?$(this).find(".select-arrow").length>0?($_row.addClass("unfolded").next().removeClass("hidden"),$(this).find("span.select-arrow").removeClass("select-arrow").addClass("icon-carret-up")):($_row.removeClass("unfolded").next().addClass("hidden"),$(this).find("span.icon-carret-up").removeClass("icon-carret-up").addClass("select-arrow")):$_row.find(".select-arrow").length>0?(clickableRow.unfoldAllRows($_row),$_row.addClass("unfolded").next().removeClass("hidden"),$(this).find("span.select-arrow").removeClass("select-arrow").addClass("icon-carret-up")):(clickableRow.unfoldAllRows($(this)),$_row.removeClass("unfolded").next().addClass("hidden"),$(this).find("span.icon-carret-up").removeClass("icon-carret-up").addClass("select-arrow"))})},unfoldAllRows:function(el){el.parents("table").find("tr.clickable-row").each(function(){$(this).removeClass("unfolded").next().addClass("hidden"),$(this).find("span.icon-carret-up").removeClass("icon-carret-up").addClass("select-arrow")})}},clickablePDF={init:function(){if($("body").on("click",".open-viewer",function(){window.open("../viewer/web/viewer.html","_blank")}),$(".pdf-visionneuse").length>0){window.removeViewerIframe=function(){$("#iframe-viewer").remove(),$("body").removeClass("no-vertical-scroll")};var docs=[];$(".pdf-visionneuse").find("a").each(function(){docs.push({name:"",date:"",filename:$(this).attr("href"),id:""})}),window.document_json={current_document:0,documents:docs}}$(".pdf-visionneuse").on("click",function(){var index=$(".pdf-visionneuse").index(this),url="/rsc/contrib/dev/mes-documents/viewer/web/viewer.html";return window.document_json.current_document=index,$("#iframe-viewer").remove(),$("body").append('<iframe id="iframe-viewer" class="iframe-pdf-visionneuse-fullscreen" src="'+url+'?pdfBug=all"></iframe>'),$("#iframe-viewer").height($(window).height()),$("body").addClass("no-vertical-scroll"),!1})}};if("undefined"==typeof pageStatus)var pageStatus="ready";var lastSel=null;jQuery(document).ready(function($){IS_TRANSLATION_ACTIVATED?lgMgt.init(initAll):initAll()});var Conseiller={init:function(){$("#conseiller-section").length>0&&$.get("/conseiller-wspl/rest/monConseiller",function(info_conseiller){"OK"==info_conseiller.message?$(".js-replace-data").each(function(){info_conseiller.data[$(this).data("get")]&&$(this).text(info_conseiller.data[$(this).data("get")])}):$("#conseiller-section").find(".bottom-cont").html('<div class="msg_erreur_tech"><p>Le service est indisponible.</p></div>')})}},NavigationGlobal={init:function(){this.moveElements(),this.toggleMenu(),this.ieZindex(),window.location.pathname.indexOf("connexion")===-1&&"LOCAL"!==ENVIRONNEMENT&&this.fixNav(),window.location.pathname.indexOf("/comptes-et-contrats/releve-operations")>=0&&this.fixRopPointage()},getHeaderHeight:function(){var bottom_header_connecte=$(".bottom-header-connected").outerHeight(!0),bottom_header=$(".bottom-header").outerHeight(!0),div_top_header=$(".top-header"),top_header=div_top_header.length>0&&"auto"!=div_top_header.css("top")?div_top_header.outerHeight(!0)-div_top_header.css("top").replace("px",""):0;return $(".bottom-header-connected").is(":visible")||(bottom_header_connecte=0),$(".bottom-header").is(":visible")||(bottom_header=0),div_top_header.is(":visible")||(top_header=0),bottom_header_connecte+bottom_header+top_header},moveElements:function(){function _buildSubNavMobile(){$("#main-menu-ul>li").each(function(index,elem){"nav1-client"==$(this).attr("id")?$(this).find("li").each(function(index,client_elem){_cloneElements($(client_elem))}):_cloneElements($(elem))}),"PREVIEW"==ENVIRONNEMENT&&($("#nav3-virement-services-child-child0").before('<ul id="nav3-virement-services-child-child1" data-elem="nav3-virement-services-child-li0" class="hide"><li><a href="/fr/connexion/virements-services/virements/virement-permanent"><span>Virement unitaire</span></a></li><li><a href="/fr/connexion/virements-services/virements/virement-permanent"><span>Virement permanent</span></a></li><li><a href="/fr/connexion/virements-services/virements/historique"><span>Historique</span></a></li></ul>'),$("#nav3-virement-services-child-child1").height($(document).height()),$("li[id*=-child-li]").each(function(){var current_id=$(this).attr("id");$("[data-elem="+current_id+"]").length&&$(this).addClass("has-subnav")}))}function _cloneElements($elem){if($elem.find(">ul").length>0){var id=$elem.attr("id"),$nav_children=$elem.find(">ul").attr("id",id+"-child");$nav_children.addClass("hide"),$nav_children.prependTo($("#nav-connect").find("nav")),$nav_children.height($(window).height()),$nav_children.find(">li").each(function(index){$(this).attr("id",id+"-child-li"+index)}),$nav_children.find(">li>ul").each(function(index,elem){var $children=$(this).attr({id:id+"-child-child"+index,"data-elem":$(elem).parent("li").attr("id")});$children.addClass("hide"),$children.prependTo($("#nav-connect").find("nav")),$children.height($(window).height())})}}$("#wcm-l-bottom-header-connected").length>0&&($("#nav1-client").prependTo($("#mainMenu nav > ul")),$("#nav6-produits").insertAfter($("#nav1-client"))),"desktop"==DeviceSize.getDeviceState()&&$("#nav3-virement-services>ul, #nav6-produits>ul>li ul,#nav9-bon-plan>ul>li ul, #nav7-besoins>ul>li ul").prepend('<span class="close pointer">&#10005;</span>'),"mobile"==DeviceSize.getDeviceState()&&($("#mainMenu nav>ul").attr("id","main-menu-ul"),$("#mainMenu nav").appendTo($("#nav-connect")),"PREVIEW"==ENVIRONNEMENT&&$("#nav-connect").prepend('<span class="nav-mobile-back"></span>'),$("#main-menu-ul").height($(document).height()),_buildSubNavMobile(),"PREVIEW"==ENVIRONNEMENT?$('<div class="close-container"><span class="close hidden">&#10005;</span></div>').prependTo($("#nav-connect").find("nav")):$('<span class="close hidden">&#10005;</span>').prependTo($("#nav-connect").find("nav")))},toggleMenu:function(){function _resetActiveClass(){$(".sous-menu-visible").find(".selected").removeClass("selected"),$("."+sous_menu_active_class).removeClass(sous_menu_active_class).hide(),$("."+sous_sous_menu_active_class).removeClass(sous_sous_menu_active_class).hide()}function _closeMenu(){_resetActiveClass(),$elements_to_open.removeClass("selected"),NavigationGlobal.hideCacheNavigation(),$(".nav-mobile-back").removeClass("mobile-back-level1 mobile-back-level2").data("back-text","").text("")}$("#mainMenu nav > ul > li").each(function(){void 0==$(this).attr("id")&&$(this).on("click",function(){$(this).find(">ul.toggled").hide().removeClass("toggled");var _ul=$(this).find(">ul");!_ul.children(".header").length>0&&_ul.prepend('<li class="header"><h3>'+$(this).children("span").text()+'<span class="close">&#10005;</span></h3></li>'),_ul.toggle().addClass("toggled"),$(this).find(">ul.toggled>li").each(function(){void 0==$(this).attr("id")&&$(this).on("click",function(){$("#mainMenu nav > ul  > li > ul > li > ul.toggled").hide().removeClass("toggled");var _ul2=$(this).find(">ul");!_ul2.children(".header").length>0&&_ul2.prepend('<li class="header"><h3>'+$(this).children("span").text()+'<span class="close">&#10005;</span></h3></li>'),_ul2.toggle().addClass("toggled")})})})}),$("#mainMenu nav > ul").on("click","li.header > h3",function(){$(this).parents("ul.toggled").hide().removeClass("toggled")}),"mobile"==DeviceSize.getDeviceState()&&($(".js-toggle-subnav").on("click",function(e){console.log("click burger"),$("#nav-connect-item").addClass("hide hide-right"),$("#nav-connect nav").toggleClass("show"),$("#nav-connect nav").hasClass("show")?(console.log("append .full-cache .cache-navigation .subnav"),$("body").append('<div class="full-cache cache-navigation subnav" />'),$("#nav-connect nav").find(".close").removeClass("hidden")):(console.log(".cache-navigation remove"),$(".cache-navigation").remove(),$("#nav-connect nav").find(".close").addClass("hidden"))}),$(".js-open-subprofil").on("click",function(){$("#nav-connect-item").addClass("hide hide-left"),$("#mon-profil").toggleClass("show"),$("#mon-profil").hasClass("show")?($("body").append('<div class="full-cache cache-navigation subprofil" />'),$("#mon-profil").find(".close").removeClass("hidden")):($(".cache-navigation").remove(),$("#mon-profil").find(".close").addClass("hidden"))}),$("#nav-connect nav").find(".close").on("click",function(){NavigationGlobal.closeNavItems($(this))}),"PREVIEW"==ENVIRONNEMENT&&$("#nav-connect").find(".nav-mobile-back").on("click",function(){NavigationGlobal.closeNavItems($(this))}),$("#mon-profil").find(".close").on("click",function(){NavigationGlobal.closeProfil($(this))}));var $elements_to_open=$(".portefeuille-nav, .tuile-nav "),sous_menu_active_class="sous-menu-visible",sous_sous_menu_active_class="sous-sous-menu-visible",$prev_selected={};if("mobile"==DeviceSize.getDeviceState())$elements_to_open.on("click",function(){if($("#"+this.id+"-child").hasClass("hide")&&($("#"+this.id+"-child").removeClass("hide").addClass("show sous-menu-visible"),"PREVIEW"==ENVIRONNEMENT)){var text=$(this).find("span").text().trim();$(".nav-mobile-back").text(text).data("back-text",text).addClass("mobile-back-level1")}}),$("[id$=-child]").on("click",function(){if($("#"+this.id+"-child").hasClass("hide")&&($("#"+this.id+"-child").removeClass("hide").addClass("show sous-menu-visible"),"PREVIEW"==ENVIRONNEMENT)){var text=$(this).find("span").text().trim();$(".nav-mobile-back").text(text)}}),$("li[id*=-child-li]").on("click",function(){if(!$(this).hasClass("disable")){var $elem=$("[data-elem="+$(this).attr("id")+"]");if($elem.hasClass("hide")&&($elem.removeClass("hide").addClass("show sous-menu-visible"),"PREVIEW"==ENVIRONNEMENT)){var text=$(this).find("span").text().trim();$(".nav-mobile-back").text(text).addClass("mobile-back-level2")}}}),$("#main-menu-ul>li").each(function(){var _id=$(this).attr("id");$("ul[id^="+_id+"-child]").length>0&&$(this).find("a").on("click",function(e){e.preventDefault()})}),$("li[id*=child-li]").each(function(){var _id=$(this).attr("id");$("[data-elem="+_id+"]").length>0&&($(this).find("a").on("click",function(e){e.preventDefault()}),$("[data-elem="+_id+"] li a").on("click",function(e){e.preventDefault()}),$("[data-elem="+_id+"] li").on("click",function(e){console.log("LINK HERE 1"),window.location.href=$(this).find("a").attr("href")}))}),$("body").hasClass("bpf")&&$("#nav3-virement-services-child-li0").on("click",function(){console.log("LINK HERE 2"),window.location.href="/fr/espace-prive/virements-services/virements"});else{var header_height=0,menu_height=0;$(".bottom-header").length>0&&(header_height=$(".bottom-header").outerHeight()),$(".bottom-header-connected").length>0&&(header_height=$(".bottom-header-connected").outerHeight()),menu_height=$(window).height()-header_height,$elements_to_open.find("ul,ul>li> ul").css("height",menu_height),$elements_to_open.children("a").on("click",function(e){e.preventDefault()}),$elements_to_open.on("click",function(e){if("PREVIEW"==ENVIRONNEMENT&&console.log("click2"),!$(this).hasClass("disable"))if($elements_to_open.removeClass("selected"),$(this).find(">ul").is(":visible"))console.log("close menu ul"),_closeMenu();else if($prev_selected=$elements_to_open.add("#nav1-home,#nav2-comptes,#nav8-contact, #nav4-infos-marche").filter(".selected"),$prev_selected.removeClass("selected"),_resetActiveClass(),$(this).addClass("selected"),$(this).find(">ul").show().addClass(sous_menu_active_class),$(this).find(">ul>li").each(function(){$(this).find(">ul").length>0&&$(this).addClass("niveau3")}),"nav3-virement-services"!=$(this).attr("id")&&"PROD"!=ENVIRONNEMENT&&$(this).find(">ul>li").hasClass("niveau3")&&$(this).find(">ul>li").eq(0).find(">ul").length&&($(this).find(">ul>li").eq(0).addClass("selected"),$(this).find(">ul>li").eq(0).find(">ul").show().addClass(sous_sous_menu_active_class),console.log("addClass(sous_sous_menu_active_class)1")),NavigationGlobal.showCacheNavigation(),$(".ident").addClass("hidden"),"PROD"==ENVIRONNEMENT){var titre=$(this).find(">span").length>0?$(this).find(">span"):$(this).find(">a>span");$(this).find("h2").length>0?$(this).find("h2").text(titre.text()):$(this).find(">ul").prepend("<h2>"+titre.text()+'</h2><span class="close">&#10005;</span>')}else{var titre=$(this).find(">span").length>0?$(this).find(">span"):$(this).find(">a>span");$(this).find(">ul").find(">h2").length>0?$(this).find(">ul").find(">h2").text(titre.text()):$(this).find(">ul").prepend("<h2>"+titre.text()+'</h2><span class="close">&#10005;</span>'),$(this).find(".sous-sous-menu-visible>h2").length>0?$(this).find(".sous-sous-menu-visible>h2").text($(".niveau3.selected>a>span").text()):$(this).find(".sous-sous-menu-visible").prepend("<h2>"+$(".niveau3.selected>a>span").text()+'</h2><span class="close">&#10005;</span>')}}),$elements_to_open.find(".close").on("click",function(){return _closeMenu(),!1}),$elements_to_open.find(">ul>li ul>li").on("click",function(event){$(this);$(this).hasClass("disable")}),$elements_to_open.find(">ul>li").on("click",function(e){if(!($(this).parents(".tuile-nav").length>0||$(this).hasClass("disable"))){if($(this).find(">ul").hasClass(sous_sous_menu_active_class))return $("."+sous_sous_menu_active_class).removeClass(sous_sous_menu_active_class).hide(),$(this).removeClass("selected"),void e.stopPropagation();if($("."+sous_sous_menu_active_class).removeClass(sous_sous_menu_active_class).hide(),$(this).siblings(".selected").removeClass("selected"),$(".ident").addClass("hidden"),$(this).find(">ul").length>0){$(this).find(">ul").show().addClass(sous_sous_menu_active_class),$(this).addClass("selected");var titre=$(this).find(">span").length>0?$(this).find(">span"):$(this).find(">a>span");return $(this).find("h2").length>0?$(this).find("h2").text(titre.text()):$(this).find(">ul").prepend("<h2>"+titre.text()+'</h2><span class="close">&#10005;</span>'),!1}}})}$("body").on("click",".cache-navigation",function(){_closeMenu(),$(this).hasClass("subnav")&&NavigationGlobal.closeNavItems($("#nav-connect nav .close")),$(this).hasClass("subprofil")&&NavigationGlobal.closeProfil($("#nav-connect nav .close"))})},closeNavItems:function($current){return $(".sous-menu-visible").length>0?void("PROD"==ENVIRONNEMENT?$(".sous-menu-visible").removeClass("sous-menu-visible show").addClass("hide"):$(".sous-menu-visible").length>=2?$(".sous-menu-visible").each(function(){if($(this).attr("id").indexOf("child-child")!=-1){$(this).removeClass("sous-menu-visible show").addClass("hide");var text=$(".nav-mobile-back").data("back-text");return $(".nav-mobile-back").text(text).removeClass("mobile-back-level2"),!1}}):($(".sous-menu-visible").removeClass("sous-menu-visible show").addClass("hide"),$(".nav-mobile-back").text("").data("back-text","").removeClass("mobile-back-level1"))):($("#nav-connect-item").removeClass("hide hide-right"),$("#nav-connect nav").removeClass("show"),$(".cache-navigation").remove(),void $current.addClass("hidden"))},closeProfil:function($current){$("#nav-connect-item").removeClass("hide hide-left"),$("#mon-profil").removeClass("show"),$(".cache-navigation").remove(),$current.addClass("hidden")},showCacheNavigation:function(){var $cache_navigation=$(".cache-navigation"),top=this.getHeaderHeight();$cache_navigation.length>0?$cache_navigation.removeClass("hidden"):($("body").append('<div class="full-cache cache-navigation" />'),$(".cache-navigation").css({position:"absolute",top:top,height:$("#mainContent").height()}))},hideCacheNavigation:function(){$(".cache-navigation").addClass("hidden")},ieZindex:function(){void 0!==ieVersion&&ieVersion!==!1&&ieVersion<=9&&$(".bottom-header-connected").css("z-index","auto")},fixRopPointage:function(){function createWaypoint(){footer_offset_top=$("#footer").offset().top;try{$footer.waypoint(function(dir){trace(dir),"up"==dir?($(".pointage-wrapper").removeClass("bottom-truncated"),isWrapperRopListgreater()&&($(".rop-pointage").addClass("stuck"),window.setTimeout(function(){$(".rop-pointage").addClass("stuck")},500))):($(".pointage-wrapper").addClass("bottom-truncated"),$(".rop-pointage").removeClass("stuck"),window.setTimeout(function(parms){$(".rop-pointage").removeClass("stuck")},500))},{offset:$nav.height()+NavigationGlobal.getHeaderHeight()})}catch(e){}}trace("fixRopPointage...");var isWrapperRopListgreater=function(){var $wrapperRop1=$(".wrapper-rop-1.pointage-on.list"),$pointageWrapper=$(".pointage-wrapper"),height1=$wrapperRop1.height(),height2=$pointageWrapper.height();return height1>height2},isRopGreaterThanWrapper=function(){var $pointageWrapper=$(".pointage-wrapper"),pointageWrapperOffset=$pointageWrapper.offset(),pointageWrapperOffsetTop=pointageWrapperOffset?pointageWrapperOffset.top:0,$ropPointage=$(".rop-pointage"),ropPointageOffset=$ropPointage.offset(),ropPointageOffsetTop=ropPointageOffset?ropPointageOffset.top:0;return ropPointageOffsetTop<pointageWrapperOffsetTop},$footer=$("#footer");if(!($footer.length<1)){var $nav=$("#mainMenu nav>ul"),footer_offset_top=$("#footer").offset().top;createWaypoint(),window.setInterval(function(){if(footer_offset_top!=$("#footer").offset().top&&0!=$(window).scrollTop())try{$("#footer").waypoint("destroy"),createWaypoint(),isRopGreaterThanWrapper()&&!function(){var $ropP=$(".rop-pointage");$ropP.removeClass("stuck"),window.setTimeout(function(){$ropP.removeClass("stuck")},500)}()}catch(e){}},400)}},fixNav:function(){function createWaypoint(){var nav_css_absolute_top;footer_offset_top=$("#footer").offset().top,nav_css_absolute_top=$("#footer").offset().top-$nav.height();try{$footer.waypoint(function(dir){trace(dir),"up"==dir?1==$(".top-header").length?$nav.css({position:nav_css_position,top:nav_css_top}):$nav.css({position:nav_css_position,top:"70px"}):$nav.css({position:"absolute",top:nav_css_absolute_top})},{offset:$nav.height()+NavigationGlobal.getHeaderHeight()}),$(window).scrollTop()+$("#mainMenu nav ul").height()+110<$("#footer").offset().top&&(1==$(".top-header").length?$nav.css({position:"fixed",top:110}):$nav.css({position:"fixed",top:70}))}catch(e){}}var $footer,$nav,nav_css_position,nav_css_top,footer_offset_top,that=this;$footer=$("#footer"),function(){var isPageBpfContact=$("body").is(".bpf")&&window.location.pathname.includes("/banque-contact/nous-contacter");if(isPageBpfContact&&!that.fixNav.bpfStructAlreadyFixed){var $mainContent=$("#mainContent");$("#wrapper").css("height",$mainContent.innerHeight()).after($footer),"PREVIEW"==ENVIRONNEMENT&&window.location.pathname.endsWith("/nous-contacter/prevenir-et-declarer-un-sinistre/")&&($("body").hasClass("mob")||"mobile"===Device.getDeviceState()||GlobalSite.isMobileTablet())&&$("#wrapper").css("margin-bottom","-20;px"),that.fixNav.bpfStructAlreadyFixed=!0}}(),$footer.length<1||($nav=$("#mainMenu nav>ul"),nav_css_position=$nav.css("position"),nav_css_top=$nav.css("top"),footer_offset_top=$("#footer").offset().top,trace(nav_css_position),trace(nav_css_top),trace(footer_offset_top),createWaypoint(),setInterval(function(){if(footer_offset_top!=$("#footer").offset().top&&0!=$(window).scrollTop())try{$("#footer").waypoint("destroy"),createWaypoint()}catch(e){}},1e3))},showDidacticiel:function(){if(trace("showDidacticiel"),window.location.pathname.indexOf("comptes-et-contrats")!=-1){var urlDidact="LOCAL"==ENVIRONNEMENT?"/rsc/contrib/dev/didacticiel/didacticiel_html.html":"/rsc/contrib/html/particuliers/espaceclient/didacticiel/didacticiel_html.html";$.get(urlDidact,function(html){Popin.showPopin($("body").append($('<div id="didactDiv">'+html+"</div>")).children("#didactDiv"),$("body"),!0);var delayedElements=$("#didactDiv").find("[data-delayed]");if(delayedElements.length>0)var delays=$.map(delayedElements,function(val,i){return $(delayedElements.get(i)).attr("data-delayed")}),maxDelay=Math.max(delays),time=0,delayClock=setInterval(function(){$.inArray(time,delays)&&delayedElements.each(function(){Math.round($(this).attr("data-delayed"))==time&&$(this).animate({opacity:1},500,function(){$(this).removeClass("delayed")})}),time++,1e3*time>maxDelay&&clearInterval(delayClock)},1e3);$("#didactDiv").on("click.popin-close",".popin-close",function(){Popin.hidePopin($(this))})})}}};$(function(){var cpt=0,loop=window.setInterval(function(){function updateNomTitulaire(nom){$("#nomTitulaire, .en .ia-rop .nom-titulaire").html(nom)}function updateDerniereConnexion(date){if("object"==(typeof date).toLowerCase()){var _jour=date.dateDerniereIdentification.substr(0,2)+"/"+date.dateDerniereIdentification.substr(2,2)+"/"+date.dateDerniereIdentification.substr(4,4),_heure=date.heureDerniereIdentification.substr(0,2)+(lgMgt.isEnglish()?":":"h")+date.heureDerniereIdentification.substr(2,2);return void $("#dateDerniereConnexion").html(_jour+_get("next.main.udclastconnexion"," à ")+_heure)}$("#dateDerniereConnexion").html(date)}return cpt>=100?void window.clearInterval(loop):($("#nomTitulaire").length>0&&$("#dateDerniereConnexion").length>0&&window.clearInterval(loop),$("#nomTitulaire, .en .ia-rop .nom-titulaire").length>0&&updateNomTitulaire(lgMgt.isEnglish()?(GlobalSite.headerInfos.nom||"").toLowerCase():GlobalSite.headerInfos.nom),$("#dateDerniereConnexion").length>0&&updateDerniereConnexion(GlobalSite.headerInfos.derniereConnexion),void cpt++)},200);if(void 0!==ieVersion&&ieVersion!==!1&&ieVersion<=9)var cpt2=0,loop2=window.setInterval(function(){return cpt2>=100?void window.clearInterval(loop2):($("[placeholder]").length>0&&(FormHelper.placeholderPolyfill(),window.clearInterval(loop2)),void cpt2++)},200)}),jQuery(document).on("click",".js-webCallback",loadNumTel),$(window).load(function(preFooter){$.ajax({cache:!0,url:"/rsc/contrib/script/client/redirect-prefooter.json"}).then(function(_json){for(var selectorForPage,prefooterHtmlUrl,currPath=window.location.pathname,result=!1,len=_json.length,idx=0;idx<len&&!(result=function(idx){var urlParams=_json[idx],url=urlParams.url,selector=urlParams.selector,isActive=urlParams.active,isUrlAuthorized=currPath.endsWith(url),isSelectorVerified=$(selector).length>0;if(isSelectorVerified&&isActive&&isUrlAuthorized)return selectorForPage=selector,prefooterHtmlUrl=urlParams.prefooterHtmlUrl,!0}(idx));idx++);result&&$.ajax({cache:!0,url:prefooterHtmlUrl,dataType:"html"}).then(function(html){console.log({mess:"recup html + json",html:html,json:_json,
selectorForPage:selectorForPage,result:result}),$(selectorForPage).after(html)}).fail(function(error){console.log({mess:"recup html + json",selectorForPage:selectorForPage,html:html,json:_json,result:result}),console.log({error:error})})}).fail(function(error){console.log({error:error})})});
//# sourceMappingURL=main.min.js.map
