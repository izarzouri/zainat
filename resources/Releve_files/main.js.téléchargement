!function(e,t,r,o,a,n){a("app/rop/utils/constants",[],function(){var e={logger:{isLogEnabled:!1,isInfoEnabled:!1,isDebugEnabled:!1,isErrorEnabled:!1,isWarnEnabled:!1},i18n:{isI18nEnabled:!0},local:{version:"2.1.21-SNAPSHOT",urlServer:!0},client:{isPart:0,isPro:1},rop:{inputDefault:"cid",inputMontant:"soldeDispo",inputAVenir:"soldeAVenir",inputTitulaire:"nomPourTrie",inputPrevisionnel:"previsionnel",filterCategorie:"categorie",filterLibelleOperation:"libelleOperation",filterIdOperation:"idOperation",filterDateExecution:"datePourFiltrage",filterCategories:"libelleCategorie",sortOpByList:"dateOperation",sortOpByGroup:"operationType",sortOpByDateValeur:"dateValeurOperation",familleLiquidite:1,familleEpargneDispo:2,familleEpargneATerme:3,familleTitre:4,familleAssuranceVie:5,familleCapitalisation:6,familleEpargneRetraite:7,familleCreditConso:8,familleCreditImmo:9,statutMan:"M.",statutWoman:"Mme",statutWomanBis:"Mlle",statutCouple:"M/Mme",paramTypeAction:"redir",paramTypeCompte:"types",paramTypeCompteString:"typesString",paramTypeIban:"iban",typeActionMesComptes:"comptes",typeActionAutresComptes:"comptestiers",paramOutIban:"iban",paramOutRedir:"redir",inputIndicCompteTiers:"indicCompteTiers",inputIkpi:"ikpiPourFiltre",compteTitreIsPEA:189,inputCodeEcoCompte:"codeEcoCompte",chqemi:"1",chqrecu:"2",versement:"3",virrecu:"4",viremi:"5",prelev:"6",pcarte:"7",carte:"8",opetitres:"9",effcommerce:"10",retraitesp:"11",opeetranger:"12",remcarte:"13",retraitguich:"14",comm:"15",terceo:"16",divers:"30",pointageValue:1,catDebitValue:13,catCreditValue:58,preferenceDate:"date",preferenceOperation:"operation",preferenceDateValeur:"valeur",icPrelev:"03",icCarte:"08",sortDefault:0,sortDate:1,sortInt:2,sortString:3,sortDateDecroissant:4,sortOnExecDate:"executionDate",sortOnValueDate:"valueDate",libelleO4oav:"libelle",libelleO4op:"libelleOperation",logoPaylib:"PAYLIB",logoClassPaylib:"op-paylib",logoP2P:"P2P-SCTID",logoClassP2P:"op-transfert",logoE2E:"MOTIF E2E",logoClassE2E:"op-facture",logoLucky:"REMB LUCKYME",logoClassLucky:"op-luckyme",opeChqEmi:"Chèques émis",opeChqEmiCode:1,opeChqRecu:"Chèques reçus",opeChqRecuCode:2,opeVersEsp:"Versements espèces",opeVersEspCode:3,opeVirRecu:"Virements reçus",opeVirRecuCode:4,opeVirEmi:"Virements émis",opeVirEmiCode:5,opePrelev:"Prélèvements / amortissements prêts",opePrelevCode:6,opePayCarte:"Paiements carte",opePayCarteCode:7,opeFormulBNPNet:"Carte / Formule BNP Net",opeFormulBNPNetCode:8,opeTitres:"Opérations Titres",opeTitresCode:9,opeEffComm:"Effet de Commerce",opeEffCommCode:10,opeRetrait:"Retraits d'espèces carte",opeRetraitCode:11,opeVirEtrang:"Opérations avec l'étranger",opeVirEtrangCode:12,opeRemCarte:"Remises Carte",opeRemCarteCode:13,opeRetrGuichet:"Retraits guichet",opeRetrGuichetCode:14,opeFrais:"Intérêts/frais et commissions",opeFraisCode:15,opeTerceo:"Tercéo",opeTerceoCode:16,opeDivers:"Divers",opeDiversCode:30,codeCompteCheque:101,codeCompteCheque2:104,codeCompteImpayesPret108:108,codeCompteProvisio:157,codeCompteProvisio2:158,codeComptePEL:123,codeCompteCSL:121,codeComptePEP178:178,codeComptePEP186:186,codeCompteCreditConsoProvisio157:157,codeCompteCreditConsoProvisio158:158,codeCompteCreditImmo136:136,codeCompteCreditImmo152:152,codeCompteCreditWeezbee172:172,codeCompteDATPotentiel:165,paramSiteType:"i18nSiteType",paramLang:"i18nLang",paramVersion:"i18nVersion",codeService:{rib:"00001",releve:"00002",complementaire:"00002",regulier:"00003",arbitrage:"00004",virement:"00006",oppositionCheque:"00025",ropTitre:"00033"}},tagguage:{cg_s:"WT.cg_s",uri:"DCS.dcsuri",dl:"WT.dl",click:"WT.z_click",clickcat:"WT.z_clickcat",ti:"WT.ti",vue:"WT.z_vue",typecpt:"WT.z_typecompte",typeacces:"WT.z_typeacces",error:"WT.z_error",zerrorTechVal:"Erreur technique",typeError:"WT.z_type_error",typeErrorTech:"Technique",typeErrorFonc:"Fonctionnelle",dlLoad:"0",dlClick:"99",accesNav:"Navigation",accesQL:"Quick links",classique:"Classique",timeline:"Timeline",title:"ROP-AVE",clickCat:"ROP",effRopUrl:"/rop",rechLib:"recherche",rechUrl:"/rop",rechClick:"recherche avec criteres",locLib:"contact",locUrl:"/rop",locClick:"localiser une agence",pagiUrl:"rop",pagiClick:"afficher plus operations",catUrl:"/rop",catClick:"categorisation",pointUrl:"/rop",pointClick:"pointage",errTech:"Erreur technique",uriAccueilRop:"/rop",zclickRechercheRop:"recherche avec criteres",zclickCatRechercheRop:"recherche",zclickCatRop:"ROP",zclickCatLocalisationRop:"contact",zclickLocalisationRop:"localiser une agence",zclickCategorisationRop:"categorisation",tiAffichageROPPageView:"/mes comptes et contrats / releve des opérations",tiGraphiqueClick:"/rop/graphique",tiGraphiqueEvolutionSoldesClick:"/rop/graphique/evolution solde",tiGraphiqueEvolutionDepensesClick:"/rop/graphique/evolution depenses",tiGraphiqueEvolutionRecettessClick:"/rop/graphique/evolution recettes",tiLocalisationAgence:"/rop/localiser une agence",tiErreurFonctionnelle:"Erreur Fonctionnelle",tiErreurTechnique:"Erreur Technique",zVueClassique:"Classique",zVueTimeline:"Timeline"},link:{baseUrl:"https://canalnet-part-int1.dev.echonet/aiguillage-wspl/redirect/",effectuerVirement:"virement",editerRib:"rib",cslInterrogation:"cslInterrogation",cslActiverAlimAuto:"cslAlimActivation",cslModifierAlimAuto:"cslAlimModification",cslModifierReacAlimAuto:"cslAlimModifReactivation",cslSupprimerAlimAuto:"cslAlimSuspension",redirRop:"rop",utiliserReserve:"utilreserve",rembourserReserve:"rembreserve",commanderChequier:"cmdchequier",telechargerReleve:"telreleve",telechargerop:"telOp",contacterConseiller:"conseiller",masquerCompte:"masquagecompte"},autonomy:{zpRopAccueil:"zpRopAccueil",zpRopAccueilHaute:"#zone-publiable-haute-accueil",zpRopAccueilBasse:"#zone-publiable-basse-accueil"}};return e}),a("app/rop/utils/logger",["app/rop/utils/constants"],function(e){var t={log:function(t){e.logger.isLogEnabled&&console.log(t)},info:function(t){e.logger.isInfoEnabled&&console.info(t)},debug:function(t){e.logger.isDebugEnabled&&console.debug(t)},error:function(t){e.logger.isErrorEnabled&&console.error(t)},warn:function(t){e.logger.isWarnEnabled&&console.warn(t)}};return t}),a("app/rop/translate/i18nRop",["wrappernext","axes","app/rop/utils/logger"],function(t,i,r){var o,a=t.I18n.extend({url:function(){var t={baseUrl:"/rsc/contrib/document/properties/",appName:"rop",lang:"fr",canal:"pro",version:"V1"};i.language&&(t.lang=i.language()||t.lang),t.canal=e.typeClientPourMultilingue||t.canal,e.versionProperties&&(t.version=versionProperties[t.appName]||t.version);var o=t.baseUrl+t.appName+"-"+t.lang+"-"+t.canal+"-"+t.version+".json";return r.log("[INFO] I18n url - Adresse du fichier d'I18n : "+o),o},defaults:{"app.rop.onglets.menu.moncompte":"Mon compte","app.rop.fondation.mobileonly.repartition":"Découvrir la répartition de vos dépenses","app.rop.fondation.operation.voirave":"Voir les opérations à venir","app.rop.fondation.operation.noave":"Aucune opération à venir","app.rop.fondation.operation.comptabilises":"Voir les opérations comptabilisées","app.rop.fondation.operation.ave":"Les opérations à venir","app.rop.business.message.service.ko":"Suite à un incident technique, ce service est momentanément indisponible. Nous vous prions de bien vouloir accepter nos excuses pour la gêne occasionnée","app.rop.business.message.application.depubliee":"Fonctionnalité en cours de maintenance. Nous vous prions de nous excuser pour la gêne occasionnée","app.rop.business.message.ibancrypte.incorrect":"L'iban crypté indiqué dans l'url n'existe pas dans les comptes de l'utilisateur.","app.rop.categorie.histo.lastSelect":"Vos dernières sélections","app.rop.popin.error.btn.ok":"OK","app.rop.popin.error.lib.big":"Ce service est actuellement indisponible.","app.rop.popin.error.lib.small":"Veuillez renouveler votre saisie ultérieurement.","app.rop.lib.errorFail":"Le libellé n'a pas pu être modifié","app.rop.lib.errorFailTech":"Le libellé n'a pas pu être modifié","app.rop.lib.errorFailFonc":"Le libellé n'a pas pu être modifié","app.rop.lib.errorEmpty":"Veuillez saisir un libellé","app.rop.lib.errorSpec":"Les caractères spéciaux ne sont pas autorisés.","app.rop.arian.acc":"Accueil","app.rop.arian.mcpt":"Mes Comptes et contrats","app.rop.arian.rop":"Relevé d'opérations","app.rop.menu.mesope":"Mes opérations","app.rop.menu.effvir":"Effectuer un virement et autres actions","app.rop.menu.paylib":"Paylib","app.rop.menu.luckyme":"LuckyMe","app.rop.pro.menu.mesope":"Mes opérations","app.rop.pro.menu.actrap":"Actions rapides","app.rop.pro.menu.caract":"Caractéristique","app.rop.pro.menu.autvous":"Autour de vous","app.rop.categorie.c51":"Prestations sociales","app.rop.categorie.c52":"Salaires","app.rop.categorie.c53":"Rentes","app.rop.categorie.c54":"Pensions","app.rop.categorie.c55":"Intérêts","app.rop.categorie.c56":"Loyers","app.rop.categorie.c57":"Dividendes","app.rop.categorie.c58":"Non défini","app.rop.categorie.c59":"Remboursement","app.rop.categorie.c60":"LuckyMe","app.rop.categorie.c1":"alimentation","app.rop.categorie.c17":"animaux","app.rop.categorie.c18":"bien-etre","app.rop.categorie.c24":"cadeaux","app.rop.categorie.c19":"conso","app.rop.categorie.c2":"idivers","app.rop.categorie.c20":"energies","app.rop.categorie.c3":"enfant","app.rop.categorie.c4":"epargne","app.rop.categorie.c21":"frais professionels","app.rop.categorie.c5":"habillement","app.rop.categorie.c6":"impots","app.rop.categorie.c7":"logement","app.rop.categorie.c8":"loisirs","app.rop.categorie.c14":"multimedia","app.rop.categorie.c22":"Operations bancaires","app.rop.categorie.c12":"retrait","app.rop.categorie.c10":"sante","app.rop.categorie.c23":"sorties","app.rop.categorie.c9":"transport","app.rop.categorie.c15":"travaux","app.rop.categorie.c11":"vacances","app.rop.categorie.c16":"voiture","app.rop.categorie.c13":"non defini","app.rop.rech.lib.periode":"Période","app.rop.rech.select.all":"Sélectionner dans la liste","app.rop.rech.select.courant":"Mois courant","app.rop.rech.select.lasttwo":"Les 2 derniers mois","app.rop.rech.select.lasttree":"Les 3 derniers mois","app.rop.rech.lib.from":"Du","app.rop.rech.lib.to":"Au","app.rop.rech.lib.dc":"Débit/Crédit","app.rop.rech.lib.all":"Tous","app.rop.rech.lib.deb":"Débit","app.rop.rech.lib.cred":"Crédit","app.rop.rech.lib.type":"Type d'opération & catégorie","app.rop.rech.lib.dans":"dans","app.rop.rech.lib.montant":"Montant","app.rop.rech.lib.entre":"entre","app.rop.rech.lib.devise":"EUR","app.rop.rech.lib.et":"et","app.rop.rech.lib.affichage":"Affichage","app.rop.rech.lib.opointe":"Opérations pointées","app.rop.rech.lib.oapointe":"Opérations à pointer","app.rop.rech.btn.rech":"Rechercher","app.rop.rech.btn.reinit":"Réinitialiser","app.rop.rech.select.allcat":"Toutes les catégories","app.rop.rech.select.allope":"Toutes les opérations","app.rop.rech.op.lib.chqemi":"Chèques émis","app.rop.rech.op.lib.chqrecu":"Chèques reçus","app.rop.rech.op.lib.versement":"Versements espèces","app.rop.rech.op.lib.virrecu":"Virements reçus","app.rop.rech.op.lib.viremi":"Virements émis","app.rop.rech.op.lib.prelev":"Prélèvements / amortissements prêts","app.rop.rech.op.lib.pcarte":"Paiements carte","app.rop.rech.op.lib.carte":"Carte / Formule BNP Net","app.rop.rech.op.lib.opetitres":"Opérations Titres","app.rop.rech.op.lib.effcommerce":"Effet de Commerce","app.rop.rech.op.lib.retraitesp":"Retraits d'espèces carte","app.rop.rech.op.lib.opeetranger":"Opérations avec l'étranger","app.rop.rech.op.lib.remcarte":"Remises Carte","app.rop.rech.op.lib.retraitguich":"Retraits guichet","app.rop.rech.op.lib.comm":"Intérêts/frais et commissions","app.rop.rech.op.lib.terceo":"Tercéo","app.rop.rech.op.lib.divers":"Divers","app.rop.rech.op.lib.affmore":"Afficher plus d'opérations","app.rop.pointage.lib.pointage":"Pointage","app.rop.pointage.lib.dope":"des opérations","app.rop.pointage.lib.from":"Du","app.rop.pointage.lib.to":"Au","app.rop.pointage.lib.deb":"Débit","app.rop.pointage.lib.cred":"Crédit","app.rop.pointage.lib.total":"Total","app.rop.pointage.lib.devise":"EUR","app.rop.pointage.btn.save":"Enregistrer","app.rop.hope.opecat":"Opérations à catégoriser","app.rop.hope.opepoint":"Opérations pointées","app.rop.hope.voiropeav":"Voir les opérations à venir","app.rop.hope.noOpe":"Ce compte ne comporte aucune opération à venir","app.rop.hope.noOpeAVe":"Aucune opération à venir","app.rop.listeOpe.noOpe":"Ce compte ne comporte aucune opération passée","app.rop.filter.ph.rech":"Recherche","app.rop.filter.lib.pluscrit":"de criteres","app.rop.filter.opt.tridate":"Trier par date","app.rop.filter.opt.triope":"Trier par type d'opérations","app.rop.filter.opt.tridateval":"Trier par date de valeur","app.rop.caract.titre":"Caractéristiques du compte","app.rop.caract.type":"type de compte","app.rop.caract.cass":"Carte Associée","app.rop.caract.detail":"Voir le détail","app.rop.caract.fcaisse":"Facilité de caisses","app.rop.caract.titu":"titulaire","app.rop.caract.agence":"Agence","app.rop.caract.locag":"localiser l'agence","app.rop.qa.ar":"Actions rapides","app.rop.qa.effvir":"Effectuer un virement","app.rop.qa.gererCompte":"Gérer ce compte","app.rop.qa.gererLivret":"Gérer ce livret","app.rop.qa.editrib":"éditer un RIB","app.rop.qa.masquer":"Masquer ce compte","app.rop.qa.comch":"Commander un chéquier","app.rop.qa.tlreleve":"Télécharger le relevé","app.rop.qa.telechargerop":"Télécharger mes opérations","app.rop.qa.contactcons":"Contacter mon conseillier","app.rop.qa.caracteristiques":"Caractéristiques du compte","app.rop.masquage.compte.votreTxt":"Votre","app.rop.masquage.compte.numTxt":"N°","app.rop.masquage.compte.suiteVotreTxt":"n'apparaitra plus sur votre une des comptes.","app.rop.masquage.compte.confirmationMasquage":'Cliquez sur le bouton "Continuer" pour masquer ce compte.',"app.rop.masquage.compte.annuler":"Annuler","app.rop.masquage.compte.continuer":"Continuer","app.rop.meteo.solde":"Solde au","app.rop.meteo.avenir":"À venir","app.rop.meteo.prev":"Prévisionnel","app.rop.meteo.debDepuis":"Débiteur depuis","app.rop.meteo.jour":"jour","app.rop.meteo.jours":"jours","app.rop.ave.soldePrev":"Solde prévisionnel","app.rop.ave.month.01":"Janv","app.rop.ave.month.02":"Févr","app.rop.ave.month.03":"Mars","app.rop.ave.month.04":"Avr","app.rop.ave.month.05":"Mai","app.rop.ave.month.06":"Juin","app.rop.ave.month.07":"Juil","app.rop.ave.month.08":"Août","app.rop.ave.month.09":"Sept","app.rop.ave.month.10":"Oct","app.rop.ave.month.11":"Nov","app.rop.ave.month.12":"Déc","app.rop.search.text.filter.multi":"résultats trouvés","app.rop.search.text.filter.simple":"1 résultat trouvé","app.rop.search.text.filter.none":"Pas de résultat","app.rop.compte.editer.nom.titre":"Modification du libellé","app.rop.compte.editer.nom.placeholder":"Modifier le libellé","app.rop.compte.editer.nom.utiliser":"Utiliser","app.rop.compte.editer.nom.valider":"Valider","app.rop.formulaire.erreur.message.required":"Ce champ est requis.","app.rop.formulaire.erreur.message.remote":"Veuillez remplir ce champ pour continuer.","app.rop.formulaire.erreur.message.email":"Veuillez entrer une adresse email valide.","app.rop.formulaire.erreur.message.url":"Veuillez entrer une URL valide.","app.rop.formulaire.erreur.message.date":"Veuillez entrer une date valide.","app.rop.formulaire.erreur.message.dateISO":"Veuillez entrer une date valide (ISO).","app.rop.formulaire.erreur.message.dateMin":"Erreur date minimum-Veuillez entrer une période exacte. Veuillez entrer une période qui ne dépasse pas 3 mois consécutif","app.rop.formulaire.erreur.message.dateMax":"Erreur date maximum-Veuillez entrer une période exacte. Veuillez entrer une période qui ne dépasse pas 3 mois consécutif","app.rop.formulaire.erreur.message.number":"Veuillez entrer un nombre valide.","app.rop.formulaire.erreur.message.digits":"Veuillez entrer une valeur num&eacute;rique.","app.rop.formulaire.erreur.message.creditcard":"Veuillez entrer un numéro de carte de crédit valide.","app.rop.formulaire.erreur.message.equalTo":"Veuillez entrer une nouvelle fois la même valeur.","app.rop.formulaire.erreur.message.accept":"Veuillez entrer une valeur avec une extension valide.","app.rop.formulaire.erreur.message.maxlength":"Veuillez ne pas entrer plus de {0} caractères.","app.rop.formulaire.erreur.message.minlength":"Veuillez entrer au moins {0} caractères.","app.rop.formulaire.erreur.message.rangelength":"Veuillez entrer entre {0} et {1} caractères.","app.rop.formulaire.erreur.message.range":"Veuillez entrer une valeur entre {0} et {1}.","app.rop.formulaire.erreur.message.rangeDate":"Erreur période-Veuillez entrer une période exacte. Veuillez entrer une période qui ne dépasse pas 3 mois consécutif","app.rop.formulaire.erreur.message.max":"Veuillez entrer une valeur inférieure ou égale à {0}.","app.rop.formulaire.erreur.message.min":"Veuillez entrer une valeur supérieure ou égale à {0}.","app.rop.formulaire.erreur.message.montant.erreur":"Le montant du virement doit être composé de chiffre (ex: (-)1000 ou (-)1000,00).","app.rop.formulaire.erreur.message.dateposterieure.erreur":"Veuillez entrer une date postérieure","app.rop.formulaire.erreur.message.dateanterieure.erreur":"Veuillez entrer une date antérieure","app.rop.formulaire.erreur.message.montantsuperieur.erreur":"Veuillez entrer un montant supérieur","app.rop.formulaire.erreur.message.montantminnonsaisi.erreur":"Veuillez entrer un montant minimum","app.rop.timeline.avenir":"A VENIR","app.rop.pro.operation.date":"Date","app.rop.pro.operation.valeur":"Valeur","app.rop.compte.details.titulaire":"Titulaire","app.rop.compte.details.agence":"Agence","app.rop.compte.details.localiseragence":"Localiser l'agence","app.rop.compte.details.libellecontrat":"Libellé du contrat","app.rop.compte.details.statut.fiscal.0":"Statut 0","app.rop.compte.details.statut.fiscal.1":"Statut 1","app.rop.compte.details.statut.fiscal.2":"Statut 2","app.rop.compte.details.statut.fiscal.3":"Statut 3","app.rop.compte.details.statut.fiscal.4":"Statut 4","app.rop.compte.details.statut.fiscal.5":"Statut 5","app.rop.compte.details.statut.fiscal.6":"Statut 6","app.rop.compte.details.statut.fiscal.7":"Statut 7","app.rop.compte.details.statut.fiscal.8":"Statut 8","app.rop.compte.details.statut.fiscal.9":"Statut 9","app.rop.compte.details.fam1.effvir":"Effectuer un virement","app.rop.compte.details.fam1.telechargerrib":"Télécharger le RIB","app.rop.compte.details.fam1.releve":"Voir le Relevé en ligne","app.rop.compte.details.fam1.masquer":"Masquer ce compte","app.rop.compte.details.fam1.contact":"Contacter un conseiller","app.rop.compte.details.fam1.carte":"Carte Associée","app.rop.compte.details.fam1.detail":"Voir le détail","app.rop.compte.details.fam2.effvir":"Effectuer un virement","app.rop.compte.details.fam2.alimauto":"Alimentation automatique","app.rop.compte.details.fam2.releve":"Voir le Relevé en ligne","app.rop.compte.details.fam2.masquer":"Masquer ce compte","app.rop.compte.details.fam2.contacter":"Contacter un conseiller","app.rop.compte.details.fam2.montantinterets":"Montant des intérêts en cours au","app.rop.compte.details.fam2.soldemax":"Solde maximum du compte","app.rop.compte.details.fam2.taux":"Taux d'interêt","app.rop.compte.details.fam2.interet":"intérêt acquis","app.rop.compte.details.fam2.date":"à la date du","app.rop.compte.details.fam2.finannee":"à la fin de l'année","app.rop.compte.details.fam2.statut":"Statut fiscal","app.rop.compte.details.fam2.illimite":"Illimité","app.rop.compte.details.fam2.defiscalise":"Défiscalisé","app.rop.compte.details.fam2.simuler":"Simuler","app.rop.compte.details.fam2.activer":"Activer","app.rop.compte.details.fam2.supprimer":"Supprimer","app.rop.compte.details.fam2.modifier":"Modifier","app.rop.compte.details.fam2.reactiver":"Reactiver","app.rop.compte.details.fam2.active":"Activée","app.rop.compte.details.fam2.nonactive":"Non","app.rop.compte.details.fam2.creation":"En cours de création","app.rop.compte.details.fam2.inconnu":"Statut inconnu","app.rop.compte.details.fam2.suspendue":"Suspendue sans date de réactivation","app.rop.compte.details.fam2.suspenduereactivation":"Suspendue avec réactivation","app.rop.compte.details.fam2.nonapplicable":"Non applicable","app.rop.compte.details.fam2.dispenseprelevement":"Dispense du prélèvement à titre d'acompte","app.rop.compte.details.fam2.prelevement":"Prélèvement à titre d’acompte","app.rop.compte.details.fam3.effvir":"Effectuer un virement","app.rop.compte.details.fam3.alimauto":"Alimentation automatique","app.rop.compte.details.fam3.releve":"Voir le Relevé en ligne","app.rop.compte.details.fam3.masquer":"Masquer ce compte","app.rop.compte.details.fam3.contacter":"Contacter un conseiller","app.rop.compte.details.fam3.taux":"Taux d'intérêt","app.rop.compte.details.fam3.tauxcumule":"Taux intérêts cumulés","app.rop.compte.details.fam3.total":"Total des versements","app.rop.compte.details.fam3.interet":"intérêt acquis","app.rop.compte.details.fam3.date":"à la date du","app.rop.compte.details.fam3.finannee":"à la fin de l'année","app.rop.compte.details.fam3.statut":"Statut fiscal","app.rop.compte.details.fam3.statuthors":"Statut fiscal (Hors contribution sociale)","app.rop.compte.details.fam3.echeance":"date d'échéance du compte","app.rop.compte.details.fam3.ouverture":"date d'ouverture du compte","app.rop.compte.details.fam3.soldemax":"Solde maximum du compte","app.rop.compte.details.fam3.prime":"Prime d'état","app.rop.compte.details.fam3.interetspep":"Intérêts cumulés PEP","app.rop.compte.details.fam3.tauxfixe":"EPARGNE TAUX FIXE","app.rop.compte.details.fam3.tauxbnp":"EPARGNE TAUX BNP","app.rop.compte.details.fam3.contrat":"Contrat d'assurance","app.rop.compte.details.fam3.booleantrue":"oui","app.rop.compte.details.fam3.booleanfalse":"non","app.rop.compte.details.fam3.montantdepotini":"Montant du dépôt initial","app.rop.compte.details.fam3.periodicitearretes":"Périodicité des arrêtés","app.rop.compte.details.fam4.mouvements":"Relevé des Mouvements","app.rop.compte.details.fam4.carnet":"Carnet d'ordre","app.rop.compte.details.fam4.revenus":"Revenus encaissés","app.rop.compte.details.fam4.passation":"Passation d'ordre","app.rop.compte.details.fam4.relever":"Voir le Relevé en ligne","app.rop.compte.details.fam4.masquer":"Masquer ce compte","app.rop.compte.details.fam4.ouverture":"date d'ouverture","app.rop.compte.details.fam4.effet":"date d'effet","app.rop.compte.details.fam4.versements":"Versements","app.rop.compte.details.fam4.depuisouverture":"depuis l'ouverture","app.rop.compte.details.fam4.annee":"sur l'année en cours","app.rop.compte.details.fam4.retraits":"Retraits","app.rop.compte.details.fam4.cumul":"cumul des retraits","app.rop.compte.details.fam4.premretrait":"Date du premier retrait","app.rop.compte.details.fam4.valorisation":"Valorisation Global de votre Portefeuille","app.rop.compte.details.fam567.arbitrage":"Arbitrage","app.rop.compte.details.fam567.compement":"Versements complémentaires","app.rop.compte.details.fam567.regulier":"Versements réguliers","app.rop.compte.details.fam567.masquer":"Masquer ce compte","app.rop.compte.details.fam89.utiliser":"Utiliser la réserve","app.rop.compte.details.fam89.rembourser":"Rembourser la réserve","app.rop.compte.details.fam89.releve":"Voir le Relevé en ligne","app.rop.compte.details.fam89.masquer":"Masquer ce compte","app.rop.compte.details.fam89.annexe":"* Le taux est exprimé assurance comprise ou hors assurance selon les termes de votre contrat de prêt.","app.rop.compte.details.fam89.taux":"Taux d'intérêt","app.rop.compte.details.fam89.datefin":"Date de fin de prêt","app.rop.compte.details.fam89.mensualite":"Mensualités restantes","app.rop.compte.details.fam89.mois":"mois","app.rop.compte.details.fam89.montantcredit":"Montant du crédit","app.rop.compte.details.fam89.rembourse":"remboursé","app.rop.compte.details.fam89.prochain":"Prochain remboursement le","app.rop.compte.details.fam89.montant":"Montant","app.rop.compte.details.fam89.montantpret":"Montant de votre prêt","app.rop.compte.details.fam89.montantdispo":"Montant disponible","app.rop.compte.details.fam89.reserve":"Montant de la réserve","app.rop.compte.details.fam89.amorti":"Capital Amorti","app.rop.compte.details.fam89.interets":"Intérêts dus","app.rop.compte.details.fam89.impayes":"Impayés du crédit","app.rop.compte.details.fam89.caprestant":"Capital restant dû après remboursement","app.rop.compte.details.fam89.assurance":"Assurance due","app.rop.compte.details.fam89.chremboursees":"Charges remboursées","app.rop.compte.details.fam89.chreportees":"Charges reportées","app.rop.compte.details.fam89.chdues":"Charges dues","app.rop.compte.details.taux.interets.weezbee":"Conditions disponibles auprès de votre agence"}});return function(){return o||(o=new a),o}}),a("app/rop/utils/helpers",["underscore","handlebars","app/rop/utils/constants","app/rop/translate/i18nRop","moment-2.6","jquery","jquery","jquery","jqueryui","jquery.validator"],function(r,o,a,n,s,p,l,c){function d(e){return e.replace(/\./g,"").replace(/\,/g,".")}function m(e,r,o){var a=new Array;null==r&&(r=t),null==o&&(o="*");var n=r.getElementsByTagName(o),s=n.length,p=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0,j=0;s>i;i++)p.test(n[i].className)&&(a[j]=n[i],j++);return a}function u(e,t,i){for(var r=m(e,t,i),o=0;o<r.length;o++)r[o].style.display="none"}function h(e,t){for(var i=0,r=0;r<e.length;r++)e.charAt(r)===t&&i++;return i}function g(e,t){var r=(new n).toJSON(),o=",",a=".",s=Math.round(Math.round(e*Math.pow(10,t)));s=""+s;for(var p=s.substring(s.length-t),l=s.substring(0,s.length-t),c="",d=0;3*d<l.length;d++)c=l.length<=3?l:l.length-3>3*d?a+l.substring(l.length-3*d-3,l.length-3*d)+c:l.substring(0,l.length-3*d)+c;if(null!==t&&""!==t&&"0"!==t){var m=p.length-t;for(i=0;m>i;i++)p="0"+p;c=1>e?"0"+o+p:c+o+p}if("N,aN"===c||"0,0"===c||"NaN"===c)throw r.app.rop.formulaire.erreur.message.montant.erreur;return c}function v(e){var t="",i=0,r=e.split(".");if(r[0].length>3)return 0;i=r[0].length+1;for(var o=i;o<e.length;o++){if("."!==e[o]&&","!==e[o]&&(t+=e[o]),"."===e[o]){if(3!==t.length)return 0;t=""}if(","===e[o])return 3!==t.length?0:1;if(o===e.length-1)return 3!==t.length?0:1}}var f=function(t,i){var t=t,i=i||{};this.redirect=function(r,o){o||(o={});var a=t+r+"?";for(var n in o)a+=n+"="+o[n]+"&";for(var n in i)a+=n+"="+i[n]+"&";var s=a[a.length-1];("?"===s||"&"===s)&&(a=a.substring(0,a.length-1)),e.location=a}},w={unformatMontantBis:function(e){return e.replace(/\./g,"").replace(/\,/g,"")},formaterMontant:function(e,t,i){var r,o=(new n).toJSON(),a=i;r="EUR"===a?2:t;var s="",p=e.substring(0,1),l="";if("-"===p?(s="-",s="-",l=e.substring(1,e.length)):l=e,""===l)return"";if(","===p||"."===p)throw o.app.rop.formulaire.erreur.message.montant.erreur;var c=h(l,","),d=h(l,"."),m=l.split(","),u=l.split(".");if(c>1)throw o.app.rop.formulaire.erreur.message.montant.erreur;if(0===c&&0===d)return s+g(l,r);if(1===c&&0===d&&m[1].length<=2){var f=l.replace(/\,/g,".");return s+g(f,r)}if(0===c&&1===d&&u[1].length<=2)return s+g(l,r);if(1===c&&0===d&&m[1].length>2&&0!==r){var f=m[0]+"."+m[1].substring(0,2);return s+g(f,r)}if(0===c&&1===d&&u[1].length>2&&0!==r){var f=u[0]+"."+u[1].substring(0,2);return s+g(f,r)}var w=v(l);if(0===w)throw o.app.rop.formulaire.erreur.message.montant.erreur;var f=l.replace(/\./g,"").replace(/\,/g,".");return s+g(f,r)},attachAll:function(e){var i=(new n).toJSON(),r=e.split("/"),o=parseInt(r[0]),a=parseInt(r[1]),p=parseInt(r[2]),c=p+"/"+a+"/"+o,d=new Date(c),m=new Date(c);m.setDate(1),function(){var e=l("#input-search-date-from"),r=l("#input-search-date-to");e.datepicker("option",{maxDate:d,minDate:s(d).subtract(13,"months").format("DD/MM/YYYY")}),r.datepicker("option",{maxDate:d,minDate:s(d).subtract(13,"months").format("DD/MM/YYYY")}),""!=e.val()&&""!=r.val()&&u(l(".error"),t,"EM"),l("#select-periode-search").on("change",function(){"1"===l(this).val()&&(e.val(""),r.val("")),"2"===l(this).val()&&(e.datepicker("setDate",m),r.datepicker("setDate",d)),"3"===l(this).val()&&(e.datepicker("setDate",C.addToDate(d,-60)),r.datepicker("setDate",d)),"4"===l(this).val()&&(e.datepicker("setDate",C.addToDate(d,-90)),r.datepicker("setDate",d))}),l.validator.addMethod("periode",function(){var e=!1;return e="1"!==l("#select-periode-search").val()?!0:!1},i.app.rop.formulaire.erreur.message.required),l(".montantMin").on("blur",function(){l(".montantMax").valid(),l(".radio-debit-credit").valid()}),l(".montantMax").on("blur",function(){l(".montantMin").valid()}),l(".custom-radio").on("click",function(){l(".radio-debit-credit").valid()}),l.validator.addMethod("montantMax",function(){var e=!1;if(""!==l(".montantMin").val()&&""!==l(".montantMax").val()){var t=parseInt(w.unformatMontantBis(l(".montantMin").val())),i=parseInt(w.unformatMontantBis(l(".montantMax").val()));e=i>t?!0:!1}else e=!0;return e},i.app.rop.formulaire.erreur.message.montantsuperieur.erreur),l.validator.addMethod("montantMin",function(){var e=!1;return e=""===l(".montantMin").val()&&""!==l(".montantMax").val()?!1:!0},i.app.rop.formulaire.erreur.message.montantminnonsaisi.erreur),l.validator.addMethod("radio-debit-credit",function(){var e=!1;return e=""!==l(".montantMin").val()&&l("input[name=input-debit-credit]:checked").length<=0?!1:!0},i.app.rop.formulaire.erreur.message.required)}(),function(){var e=l(".js-check-checkbox");l(".input-search-tous").on("click.toggle-checkbox",function(){var e=l(this).parents(".checkbox-container").find(".js-check-checkbox");l(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1)}),e.on("click.toggle-checkbox",function(){var e=!1,t=l(this).parents(".checkbox-container").find(".input-search-tous"),i=l(this).parents(".checkbox-container").find(".js-check-checkbox");l(this).is(":checked")||t.prop("checked",!1),i.each(function(){return l(this).is(":checked")?(e=!0,void 0):(e=!1,!1)}),e&&t.prop("checked",!0)})}(),function(){function e(){i.is(":checked")&&!t.is(":checked")&&p.html(o+a),!i.is(":checked")&&t.is(":checked")&&p.html(o+s)}var t=l("#input-credit"),i=l("#input-debit"),r=l("#optgroup-debit"),o=l("#option-categorie-defaut")[0].outerHTML,a=r[0].outerHTML,n=l("#optgroup-credit"),s=n[0].outerHTML,p=l("#select-categorie");i.on("click.toggle-checkbox",function(){e()}),t.on("click.toggle-checkbox",function(){e()})}(),l(".form-advanced-search").on("submit.recherche-avance",function(e){e.preventDefault(),l(".radio-debit-credit").valid()})}},b={formValidation:function(e){var t=(new n).toJSON(),t=(new n).toJSON(),i=e.split("/"),r=parseInt(i[0]),o=parseInt(i[1]),a=parseInt(i[2]),p=a+"/"+o+"/"+r,m=new Date(p);if(c.extend(c.validator.messages,{required:t.app.rop.formulaire.erreur.message.required,remote:t.app.rop.formulaire.erreur.message.remote,email:t.app.rop.formulaire.erreur.message.email,url:t.app.rop.formulaire.erreur.message.url,date:t.app.rop.formulaire.erreur.message.date,dateISO:t.app.rop.formulaire.erreur.message.dateISO,dateMin:t.app.rop.formulaire.erreur.message.dateMin,dateMax:t.app.rop.formulaire.erreur.message.dateMax,number:t.app.rop.formulaire.erreur.message.number,digits:t.app.rop.formulaire.erreur.message.digits,creditcard:t.app.rop.formulaire.erreur.message.creditcard,equalTo:t.app.rop.formulaire.erreur.message.equalTo,accept:t.app.rop.formulaire.erreur.message.accept,maxlength:c.validator.format(t.app.rop.formulaire.erreur.message.maxlength),minlength:c.validator.format(t.app.rop.formulaire.erreur.message.minlength),rangelength:c.validator.format(t.app.rop.formulaire.erreur.message.rangelength),range:c.validator.format(t.app.rop.formulaire.erreur.message.range),rangedate:t.app.rop.formulaire.erreur.message.rangeDate,max:c.validator.format(t.app.rop.formulaire.erreur.message.max),min:c.validator.format(t.app.rop.formulaire.erreur.message.min)}),0!=l(".validate-form").length){l(".validate-form");var u=l("#input-search-montant-from"),h=l("#input-search-montant-to");u.on("keypress",function(e){var t=e.which?e.which:e.keyCode;return t>31&&44!=t&&45!=t&&46!=t&&(48>t||t>57)?!1:!0}),u.on("paste",function(){var e=l(this);setTimeout(function(){var t=/^(\d|\.|\,)+?$/;t.test(e.val())||e.val("")},10)}),h.on("keypress",function(e){var t=e.which?e.which:e.keyCode;
return t>31&&44!=t&&45!=t&&46!=t&&(48>t||t>57)?!1:!0}),h.on("paste",function(){var e=l(this);setTimeout(function(){var t=/^(\d|\.|\,)+?$/;t.test(e.val())||e.val("")},10)}),l.validator.number=function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(e)},l.validator.addMethod("date",function(e,t){var i=!1,r=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(r.test(e)){var o=e.split("/"),a=parseInt(o[0],10),n=parseInt(o[1],10),s=parseInt(o[2],10),p=new Date(s,n-1,a);i=p.getFullYear()==s&&p.getMonth()==n-1&&p.getDate()==a?!0:!1}return this.optional(t)||i}),l.validator.addMethod("dateMin",function(e){var t=s(m).subtract(13,"months").subtract(1,"days"),i=s(e,"DD/MM/YYYY");return t.isBefore(i)?!0:!1}),l.validator.addMethod("dateMax",function(e){var t=s(m).add(1,"days"),i=s(e,"DD/MM/YYYY");return t.isAfter(i)?!0:!1}),l.validator.addMethod("rangedate",function(){var e=l("#input-search-date-to"),t=l("#input-search-date-from");if(""!==e.val()&&""!==t.val()){var i=s(t.val(),"DD/MM/YYYY"),r=s(e.val(),"DD/MM/YYYY"),o=r.diff(i,"months")<3&&r>=i;return o&&(e.removeClass("rangedate"),e.valid(),e.addClass("rangedate"),t.removeClass("rangedate"),t.valid(),t.addClass("rangedate")),o}return!0}),l.validator.addMethod("montantMax",function(e,t,i){var r=d(e);return l(t).attr("formatError")?!0:r>i?!1:!0}),l.validator.addMethod("montantMin",function(e,t,i){var r=d(e);return l(t).attr("formatError")?!0:i>r?!1:!0}),l.validator.addMethod("format",function(e,t){var i=l(t);return i.attr("formatError")?!1:!0}),l(".validate-form").each(function(){l(this).validate(b.form_validator_config)})}},form_validator_config:{errorElement:"em",errorPlacement:function(e,t){return l(t).next("button").length>0?(l(t).parent().after(e),void 0):(e.insertAfter(t),void 0)},onfocusout:function(e){var t=l(e);t.hasClass(".js-disable-auto-validation")||t.hasClass("date")||t.valid()},onkeyup:function(e){$current_element=l(e),$current_element.hasClass(".js-disable-auto-validation")||$current_element.hasClass("error")&&$current_element.valid()},focusInvalid:!1,invalidHandler:function(e,t){var i=t.numberOfInvalids();i?l(".form-error-messages").removeClass("hidden"):l(".form-error-messages").addClass("hidden")}}},C={todayDate:function(){return new Date},formatDateToObject:function(e){if(void 0===e)return!1;var t=e.split("/");if(void 0!==t[0]&&void 0!==t[1]&&void 0!==t[2]){var i=t[0],r=t[1]-1,o=t[2],a=new Date(o,r,i);return a}return!1},addToDate:function(e,t){var i=new Date(e);return i.setDate(e.getDate()+t),i}},T={init:function(){0!=l(".date-picker input").length&&(l.datepicker.regional.fr={closeText:"Fermer",prevText:"Pr&eacute;c",nextText:"Suiv",currentText:"Aujourd'hui",monthNames:["janvier","f&eacute;vrier","mars","avril","mai","juin","juillet","ao&ucirc;t","septembre","octobre","novembre","d&eacute;cembre"],monthNamesShort:["janv.","f&eacute;vr.","mars","avril","mai","juin","juil.","ao&ucirc;t","sept.","oct.","nov.","d&eacute;c."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,gotoCurrent:!0,yearSuffix:"",onClose:function(){l(this).valid()}},l.datepicker.setDefaults(l.datepicker.regional.fr),l(".js-init-datepicker").datepicker())}},E=function(e){var t=!0;switch(e.get("idFamille")){case a.rop.familleAssuranceVie:case a.rop.familleCapitalisation:case a.rop.familleEpargneRetraite:return!1}if(!e.get("typeCompte"))return!0;e.get("typeCompte").label;var i=e.get("typeCompte").code,o=e.get("libelleProduit"),n=[181,"AVA","AVR","AVC","AVP"];return r.contains(n,i)&&(t=!1),189===i&&"PEA Esp�ces"===o&&(t=!1),t},R={formatMontant:function(e){return e||(e=0),e=e.toFixed(2).replace(".",","),-1==e.indexOf(",")&&(e=e.concat(",")),e=e.replace(/(\d)(?=(\d{3})+([,]))/g,"$1.").replace(/([,]\d*)/g,"$100").replace(/([,]\d{2})\d*/g,"$1")},ifCreditImmo:function(e){var t;switch(e){case a.rop.codeCompteCreditImmo136:case a.rop.codeCompteCreditImmo152:t=!0;break;default:t=!1}return t},ifCreditProvisio:function(e){var t;switch(e){case a.rop.codeCompteCreditConsoProvisio157:case a.rop.codeCompteCreditConsoProvisio158:t=!0;break;default:t=!1}return t},ifCreditWeezbee:function(e){var t;switch(e){case a.rop.codeCompteCreditWeezbee172:t=!0;break;default:t=!1}return t},ifPEP:function(e){var t;switch(e){case a.rop.codeComptePEP178:case a.rop.codeComptePEP186:t=!0;break;default:t=!1}return t},soustraction:function(e,t){var i=e-t;return R.formatMontant(i)}},y={drawSimplePie:function(e,t,i){if(0!=e.length&&void 0!=t&&void 0!=i){var r=e.parents("li").css("border-top-color"),o=Math.round(100*i/t),a=Math.round(360*o/100);e.html('<div class="chart-background"></div> <div class="hold"> <div class="pie"></div> </div><div class="hole">'+o+" % </div>"),a>180?(e.find(".hold").after('<div class="hold2"> <div class="pie"></div> </div>'),e.find(".hold .pie").css({"-webkit-transform":"rotate(180deg)","-moz-transform":"rotate(180deg)","-ms-transform":"rotate(180deg)",transform:"rotate(180deg)"}),e.find(".hold2 .pie").css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"})):e.find(".pie").css({"-webkit-transform":"rotate("+a+"deg)","-moz-transform":"rotate("+a+"deg)","-ms-transform":"rotate("+a+"deg)",transform:"rotate("+a+"deg)"}),e.find(".hole").css({color:r})}},drawSimpleBar:function(e,t){if(0!=e.length&&void 0!=t){var r=[];for(i=0;4>i;i++)t[i]?r.push(Math.abs(t[i])):r.push(t[i]);var o=getIndexMaxOfArray(r),a=t[o],n=45;for(i=0;4>i;i++){if(o==i)var s=n;else{0>a&&(a=-1*a);var s=Math.ceil(t[i]*n/a)}t[i]<0&&(e.find(".bar:nth-child("+(i+1)+")").css({top:"0","border-color":"#ce1e43","background-color":"#ba0e32"}),s=Math.ceil(Math.abs(t[i])*n/a)),e.find(".bar:nth-child("+(i+1)+")").css({height:s+"px"})}}},drawSimpleProgressBar:function(e,t,i){if(0!=e.length&&void 0!=t&&void 0!=i){var r=Math.round(Math.abs(100*i/t));e.html('<div class="inner"></div><div class="value">'+r+" % </div>"),e.find(".inner").css({width:r+"%"})}},drawSimpleProgressCircleBar:function(e,t,i){if(0!=e.length&&void 0!=t&&void 0!=i){var r;r=t>i?Math.round(Math.abs(100*i/t)):100,e.find(".graph-inner").text(r+"%"),e.find(".barre-1").css({width:r+"%"}),e.find(".barre-2").css("width",100-r+"%")}}};try{o.registerHelper("if_eq",function(e,t,i){return e==t?i.fn(this):i.inverse(this)}),o.registerHelper("if_diff",function(e,t,i){return e!=t?i.fn(this):i.inverse(this)}),o.registerHelper("if_gt",function(e,t,i){return e>t?i.fn(this):i.inverse(this)}),o.registerHelper("if_lt",function(e,t,i){return t>e?i.fn(this):i.inverse(this)}),o.registerHelper("getClassForCivilite",function(e){if(void 0!==e){var t=null;if(6===e.idCivilite)t="icon-business";else if("true"===e.indicMineur)t="icon-child";else switch(e.civilite){case a.rop.statutMan:t="icon-man";break;case a.rop.statutWoman:case a.rop.statutWomanBis:t="icon-woman";break;case a.rop.statutCouple:t="icon-couple"}return t}}),o.registerHelper("formatMontant",R.formatMontant),o.registerHelper("formatMontant2",function(e){var t;return t=e>0?"+":"",e=e.toFixed(2).replace(".",","),-1==e.indexOf(",")&&(e=e.concat(",")),e=e.replace(/(\d)(?=(\d{3})+([,]))/g,"$1.").replace(/([,]\d*)/g,"$100").replace(/([,]\d{2})\d*/g,"$1"),t.concat(e)}),o.registerHelper("get",function(e,t){return e.get(t.hash.name)}),o.registerHelper("formatDateList",function(e){var t=e.substr(0,5);return t.replace(/-/gi,"/")}),o.registerHelper("getMonth",function(e){var t=(new n).toJSON(),i=s(e,"DD/MM/YYYY").format("MM");return t.app.rop.ave.month[i]}),o.registerHelper("getDay",function(e){return s(e,"DD/MM/YYYY").format("DD")}),o.registerHelper("getIconeForTypeOperation",function(e,t){var i;switch(i=1==t?"irop-av-":"icon-rop-",e){case a.rop.icPrelev:i+="prelevement";break;case a.rop.icCarte:i+="carte"}return i}),o.registerHelper("getLibelleForOperationType",function(e){var t;switch(e){case a.rop.opeChqEmiCode:t=a.rop.opeChqEmi;break;case a.rop.opeChqRecuCode:t=a.rop.opeChqRecu;break;case a.rop.opeVersEspCode:t=a.rop.opeVersEsp;break;case a.rop.opeVirRecuCode:t=a.rop.opeVirRecu;break;case a.rop.opeVirEmiCode:t=a.rop.opeVirEmi;break;case a.rop.opePrelevCode:t=a.rop.opePrelev;break;case a.rop.opePayCarteCode:t=a.rop.opePayCarte;break;case a.rop.opeFormulBNPNetCode:t=a.rop.opeFormulBNPNet;break;case a.rop.opeTitresCode:t=a.rop.opeTitres;break;case a.rop.opeEffCommCode:t=a.rop.opeEffComm;break;case a.rop.opeRetraitCode:t=a.rop.opeRetrait;break;case a.rop.opeVirEtrangCode:t=a.rop.opeVirEtrang;break;case a.rop.opeRemCarteCode:t=a.rop.opeRemCarte;break;case a.rop.opeRetrGuichetCode:t=a.rop.opeRetrGuichet;break;case a.rop.opeFraisCode:t=a.rop.opeFrais;break;case a.rop.opeTerceoCode:t=a.rop.opeTerceo;break;case a.rop.opeDiversCode:t=a.rop.opeDivers;break;default:t=""}return t}),o.registerHelper("ifAvoir",function(e,t){var i;switch(e){case a.rop.familleLiquidite:case a.rop.familleEpargneDispo:case a.rop.familleEpargneATerme:case a.rop.familleTitre:case a.rop.familleAssuranceVie:case a.rop.familleCapitalisation:case a.rop.familleEpargneRetraite:i=t.fn(this);break;case a.rop.familleCreditConso:case a.rop.familleCreditImmo:i=t.inverse(this)}return i}),o.registerHelper("getSymboleForDevise",function(e){var t;switch(e){case"EUR":t="€";break;default:t=e}return t}),o.registerHelper("ifCreditImmo",function(e,t){var i;return i=R.ifCreditImmo(e)?t.fn(this):t.inverse(this)}),o.registerHelper("ifCreditProvisio",function(e,t){var i;return i=R.ifCreditProvisio(e)?t.fn(this):t.inverse(this)}),o.registerHelper("ifCreditWeezbee",function(e,t){var i;return i=R.ifCreditWeezbee(e)?t.fn(this):t.inverse(this)}),o.registerHelper("ifPEP",function(e,t){var i;return i=R.ifPEP(e)?t.fn(this):t.inverse(this)}),o.registerHelper("soustraction",function(e,t){var i=R.soustraction(e,t);return i}),o.registerHelper("getStatutFiscal",function(e){var t=(new n).toJSON();return t.app.rop.compte.details.statut.fiscal[e]})}catch(O){}return{formatMontant:R.formatMontant,ifCreditImmo:R.ifCreditImmo,ifCreditProvisio:R.ifCreditProvisio,ifCreditWeezbee:R.ifCreditWeezbee,ifPEP:R.ifPEP,soustraction:R.soustraction,RopRedirection:f,isCompteEligibleAuRop:E,FormHelper:b,Datepicker:T,Virement:w,Charts:y,DateHelper:C}}),a("app/rop/view/erreurRootView",["underscore","wrappernext","handlebars","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.View.extend({template:null,render:function(){o.log("[ENTER] ErreurRootView render");var e={};e.model=this.model.toJSON(),this.$el.html(this.template(e))}});return a}),a("text!app/rop/template/erreurTechServiceTemplate.html",[],function(){return'<div class="u3c_erreur_tech">\r\n	<p>\r\n		{{ model.message }}\r\n	</p>\r\n</div>'}),a("app/rop/view/erreurTechView",["underscore","wrappernext","handlebars","app/rop/view/erreurRootView","text!app/rop/template/erreurTechServiceTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o,a,n){var s=r.extend({tagName:"section",template:null,initialize:function(){if(n.log("[ENTER] ErreurRootView initialize"),void 0===this.model){var e=(new a).toJSON();this.model=new t.BusinessMessage({message:e.app.rop.business.message.service.ko})}this.template=i.compile(o)}});return s}),a("text!app/rop/template/erreurFoncServiceTemplate.html",[],function(){return'<div class="u3c_erreur">\r\n	<p>\r\n		{{ model.message }}\r\n	</p>\r\n</div>'}),a("app/rop/view/erreurFoncView",["underscore","wrappernext","handlebars","app/rop/view/erreurRootView","text!app/rop/template/erreurFoncServiceTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o,a,n){var s=r.extend({tagName:"section",template:null,initialize:function(){if(n.log("[ENTER] ErreurRootView initialize"),999===this.model.get("codeRetour")){var e=(new a).toJSON();this.model.set({message:e.app.rop.business.message.application.depubliee})}this.template=i.compile(o)}});return s}),a("app/rop/model/typeClient",["underscore","wrappernext","app/rop/utils/logger"],function(e,t,i){var r=t.ModelAjax.extend({url:function(){return cnst.local.urlServer?"/udc-wspl/rest/majlblperso":"/static/rop-pro-htmlpl/"+cnst.local.version+"/app/json/typeClientResponse.json"},postParse:function(e){return i.log("[ENTER] TypeClient postParse"),e},isPart:function(){var e=!0;return 1===this.get("typeClient")&&(e=!1),e}});return r}),a("app/rop/model/preference",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i){var r=t.Model.extend({defaults:{colonne:null,direction:null},isListLayout:function(){var e=!1;return(this.get("colonne")===i.rop.preferenceDate||this.get("colonne")===i.rop.preferenceDateValeur)&&(e=!0),e},isSortOnDateValeur:function(){var e=!1;return this.get("colonne")===i.rop.preferenceDateValeur&&(e=!0),e}});return r}),a("app/rop/model/connectedUser",["underscore","wrappernext"],function(e,t){var i=t.Model.extend({});return i}),a("app/rop/model/service",["underscore","wrappernext"],function(e,t){var i=t.Model.extend({idAttribute:"code"});return i}),a("app/rop/collection/services",["wrappernext","app/rop/model/service"],function(e,t){var i=e.Collection.extend({model:t});return i}),a("app/rop/model/compte",["underscore","wrappernext","app/rop/collection/services"],function(e,t,i){var r=t.Model.extend({idAttribute:"key",parse:function(e){return e.nomPourTrie=e.titulaire.nom,e.prenomPourTrie=e.titulaire.prenom,e.ikpiPourFiltre=e.titulaire.ikpi,e.previsionnel=e.soldeDispo+e.soldeAVenir,e.indicAssuranceVie&&(e.indicCompteTiers=0),e.services=(new i).set(e.services),e}});return r}),a("app/rop/collection/comptes",["wrappernext","app/rop/model/compte","app/rop/utils/helpers"],function(e,t,i){var r=e.Collection.extend({model:t,setComptesFromFamilles:function(e){for(var t=0;t<e.length;t++)for(var r=e.models[t].get("compte"),o=0;o<r.length;o++)i.isCompteEligibleAuRop(r.at(o))&&this.add(r.at(o))}});return r}),a("app/rop/model/familleCompte",["underscore","wrappernext","app/rop/collection/comptes","app/rop/utils/constants"],function(e,t,i){var r=t.Model.extend({parse:function(e){e.soldeDispoTotal=0,e.soldeAVenirTotal=0;for(var t=0;t<e.compte.length;t++)e.soldeDispoTotal+=e.compte[t].soldeDispo,e.soldeAVenirTotal+=e.compte[t].soldeAVenir;e.compte=(new i).set(e.compte,{parse:!0});for(var t=0;t<e.compte.length;t++)e.compte.models[t].set({idFamille:e.idFamilleCompte,libelleFamille:e.libelleFamilleCompte});return e},calculTotaux:function(){for(var e=0,t=0,i=this.get("compte"),r=0;r<i.length;r++)e+=i.models[r].get("soldeDispo"),t+=i.models[r].get("soldeAVenir");this.set({soldeDispoTotal:e,soldeAVenirTotal:t})},extendedWhere:function(e){var t=this.get("compte").where(e);return this.createNewFamilleWithListCompte(t)},extendedFilter:function(t){var i=e.filter(this.get("compte").models,function(i){var r=!1;if(i.get("typeCompte")){var o=i.get("typeCompte").code;r=e.contains(t,o.toString())}else{var a=i.get("typeProduitAV"),n={0:"A",1:"R",2:"C"};r=e.contains(t,n[a])}return r});return this.createNewFamilleWithListCompte(i)},createNewFamilleWithListCompte:function(e){if(0===e.length)return null;var t=this.clone(),i=this.get("compte").clone().reset(e);return t.set({compte:i}),t.calculTotaux(),t}});return r}),a("app/rop/collection/famillesCompte",["underscore","wrappernext","app/rop/model/familleCompte","app/rop/utils/constants"],function(e,t,i,r){var o=t.Collection.extend({model:i,filterAction:function(e){var t={};return t[r.rop.inputIndicCompteTiers]=e===r.rop.typeActionMesComptes?0:1,this.genericFilter(t)},filterIkpi:function(e){var t={};return t[r.rop.inputIkpi]=e,this.genericFilter(t)},genericFilter:function(e){for(var t=this.clone().reset(),i=0;i<this.length;i++){var r=this.models[i].extendedWhere(e);null!==r&&t.push(r)}return t},filterTypes:function(e){for(var t=this.clone().reset(),i=0;i<this.length;i++){var r=this.models[i].extendedFilter(e);null!==r&&t.push(r)}return t}});return o}),a("app/rop/model/initUdc",["underscore","wrappernext","app/rop/model/connectedUser","app/rop/collection/famillesCompte","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a){var n=t.Model.extend({parse:function(e){return a.log("[ENTER] InitUdc parse"),e.familleCompte=(new r).set(e.familleCompte,{parse:!0}),e.titulaireConnecte=(new i).set(e.titulaireConnecte),e}});return n}),a("app/rop/model/meteo",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t){var i=t.Model.extend({defaults:{etatMeteo:"",seuilCritique:"",seuilVigilance:"",comptePrincipal:"",classMeteo:""}});return i}),a("app/rop/model/operation",["underscore","wrappernext","app/rop/collection/services","app/rop/translate/i18nRop"],function(e,t,i,r){var o=t.Model.extend({idAttribute:"idOperation",parse:function(e){return e.datePourFiltrage=e.montant.executionDate,e.dateDeValeurPourFiltrage=e.montant.valueDate,e.codePourGroupe=e.operationType.codeFamille,e.flagPointage=!1,e.dateOperation=e.dateOperation.replace(/-/g,"/"),e.executionDate=e.montant.executionDate.replace(/-/g,"/"),e.valueDate=e.montant.valueDate.replace(/-/g,"/"),this.setIdCategorie(e.idCategorie),e},setIdCategorie:function(e){var t=new r;this.set({idCategorie:e,libelleCategorie:t.get("app").rop.categorie["c"+e]})}});return o}),a("app/rop/collection/operations",["wrappernext","app/rop/model/operation"],function(e,t){var i=e.Collection.extend({model:t});return i}),a("app/rop/model/ave",["underscore","wrappernext","app/rop/collection/services"],function(e,t){var i=t.Model.extend({idAttribute:"idOperation",parse:function(e){return e}});return i}),a("app/rop/collection/aves",["wrappernext","app/rop/model/ave","app/rop/utils/helpers"],function(e,t){var i=e.Collection.extend({model:t});return i}),a("app/rop/model/typeAve",["underscore","wrappernext","app/rop/collection/aves","app/rop/utils/constants"],function(e,t,i,r){var o=t.Model.extend({parse:function(e){var t={};t.codeOperation=e.codeOperation,t.labelOperation=e.labelOperation,t.typeOperation=e.typeOperation,t.operations=(new i).set(e.operation),t.operations.sort(r.rop.sortOnExecDate,r.rop.sortDateDecroissant),t.length=t.operations.length,t.devise=e.devise,t.totaux=0;for(var o=0;o<t.length;o++)t.totaux+=t.operations.models[o].get("montant");return t}});return o}),a("app/rop/collection/typesAve",["wrappernext","app/rop/model/typeAve","app/rop/collection/aves","app/rop/utils/constants"],function(e,t,i,r){var o=e.Collection.extend({model:t,parse:function(e){return e},getAllAves:function(){for(var e=new i,t=0;t<this.length;t++){var o=this.models[t].get("operations");e.add(o.models)}return e.sortBy(r.rop.sortOnExecDate,r.rop.sortByDateDecroissant),e}});return o}),a("app/rop/model/dateAve",["underscore","wrappernext","moment-2.6","app/rop/collection/aves","app/rop/utils/constants"],function(e,t,i){var r=t.Model.extend({parse:function(e){var t={};t.date=e.operations.first().get("executionDate"),t.operations=e.operations,t.length=t.operations.length,t.operations.length>0&&(t.devise=t.operations.models[0].get("devise")),t.totaux=0;var r=i(t.date,"DD-MM-YYYY");for(var o in e.mapDateValeurMontant){var a=i(o,"DD-MM-YYYY");(a.isBefore(r)||a.isSame(r))&&(t.totaux+=e.mapDateValeurMontant[o],delete e.mapDateValeurMontant[o])}return t}});return r}),a("app/rop/model/dateValeurAve",["underscore","wrappernext","app/rop/collection/aves","app/rop/utils/constants"],function(e,t){var i=t.Model.extend({parse:function(e){var t={};t.date=e.operations.first().get("valueDate"),t.operations=e.operations,t.length=t.operations.length,t.operations.length>0&&(t.devise=t.operations.models[0].get("devise")),t.totaux=0;for(var i=0;i<t.length;i++)t.totaux+=t.operations.models[i].get("montant");return t}});return i}),a("app/rop/collection/datesAve",["wrappernext","app/rop/model/dateAve","app/rop/model/dateValeurAve","app/rop/collection/aves","app/rop/utils/constants"],function(e,t,i,r,o){var a=e.Collection.extend({model:t,parse:function(e){return e},setCollectionForAves:function(e,r){this.reset(),e.sort(r,o.rop.sortDateDecroissant);var a={};e.each(function(e){a[e.get("valueDate")]?a[e.get("valueDate")]+=e.get("montant"):a[e.get("valueDate")]=e.get("montant")});for(var n=e.group([r]),s=0;s<n.length;s++){if(r===o.rop.sortOnValueDate)var p=new i;else var p=new t;p.set(p.parse({operations:n[s],mapDateValeurMontant:a})),this.add(p)}},updatePrevisionnel:function(e){for(var e=e,t=0;t<this.length;t++)e+=this.models[t].get("totaux"),this.models[t].set({soldePrevisionnel:e})}});return a}),a("app/rop/model/initRop",["underscore","wrappernext","app/rop/model/preference","app/rop/model/initUdc","app/rop/model/meteo","app/rop/collection/operations","app/rop/collection/typesAve","app/rop/collection/datesAve","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a,n,s,p,l){var c=t.ModelAjax.extend({url:function(){return p.local.urlServer?"/rop-wspl/rest/releveOp":"/static/rop-pro-htmlpl/"+p.local.version+"/app/json/initRopResponse07.json"},postParse:function(e){if(l.log("[ENTER] InitRop postParse"),e.infoUdc=new r(e.infoUdc,{parse:!0}),e.meteo=(new o).set(e.infoUdc.get("meteo"),{parse:!0}),e.meteo.set("classMeteo","icon-meteo-"+Math.abs(5-parseInt(e.meteo.get("etatMeteo")))),e.isAve=!1,e.compte.operationAvenir){e.isAve=!0;for(var t=e.compte.devise,c=0;c<e.compte.operationAvenir.length;c++){var d=e.compte.operationAvenir[c];d.devise=t;for(var m=0;m<d.operation.length;m++)d.operation[m].devise=t;this.setLogo(e.compte.operationAvenir[c].operation,p.rop.libelleO4oav)}e.aveType=(new n).set(e.compte.operationAvenir,{parse:!0});var u=e.aveType.getAllAves();e.aveDate=new s,e.aveDate.setCollectionForAves(u,p.rop.sortOnExecDate),e.aveDate.updatePrevisionnel(e.compte.soldeDispo)}else e.aveType=new n,e.aveDate=new s;return this.setLogo(e.compte.operationPassee,p.rop.libelleO4op),e.operationPassee=(new a).set(e.compte.operationPassee,{parse:!0}),e.preference=(new i).set(e.compte.sort),e},setLogo:function(e,t){var i,r;if(e)for(var o=0;o<e.length;o++){switch(r=e[o][t],!0){case r.indexOf(p.rop.logoPaylib)>-1:i=p.rop.logoClassPaylib;break;case r.indexOf(p.rop.logoP2P)>-1:i=p.rop.logoClassP2P;break;case r.indexOf(p.rop.logoE2E)>-1:i=p.rop.logoClassE2E;break;case r.indexOf(p.rop.logoLucky)>-1:i=p.rop.logoClassLucky;break;default:i=""}e[o].logo=i}},setOperationPassee:function(e){var t=this.get("operationPassee");t.reset(e.models)}});return c}),a("app/rop/model/ropParameter",["underscore","wrappernext","app/rop/collection/services"],function(e,t){var i=t.Model.extend({"default":{ibanCrypte:null,startDate:null,endDate:null,pastOrPending:null,triAV:null},toJSON:function(){var t=e.clone(this.attributes);return t.startDate=t.startDate?t.startDate.replace(/\//g,""):null,t.endDate=t.endDate?t.endDate.replace(/\//g,""):null,t}});return i}),a("app/rop/model/savePreference",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/rop-wspl/rest/saveTri":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/savePreference.json"},postParse:function(e){return r.log("[ENTER] SavePreference postParse"),e}});return o}),a("app/rop/model/pagination",["underscore","wrappernext","moment-2.6","app/rop/model/initRop","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a){var n=t.Model.extend({defaults:{rootCollection:null,subCollection:null,offset:0,limit:0,increment:0,iban:null,startdate:null,enddate:null,today:null,pastorpending:2,flagRequest:!1,flagResearch:!1},updateCollectionToShow:function(){var t=e.difference(this.get("rootCollection").models,this.get("subCollection").models);t.length>this.get("increment")||this.get("flagRequest")?(t=e.first(t,this.get("increment")),this.get("subCollection").add(t,{silent:!0}),this.get("subCollection").trigger("add")):this.get("flagResearch")?(t=e.first(t,this.get("increment")),this.get("subCollection").add(t,{silent:!0}),this.get("subCollection").trigger("add"),this.trigger("endOfCollection")):this.sendRopRequest(),this.set({flagRequest:!1})},sendRopRequest:function(){var e=this.get("startdate");if(e)this.set({startdate:i(e,"DD/MM/YYYY").add("d",-30).format("DD/MM/YYYY"),enddate:e});else{if(a.log("[INFO] Pagination sendRopRequest - Today : "+this.get("today")),this.get("subCollection").last())var t=this.get("subCollection").last().get("montant").executionDate,o=i(t,"DD/MM/YYYY");else var o=i(this.get("today"),"DD/MM/YYYY");var n=i(this.get("today"),"DD/MM/YYYY").add("d",-30);o.isBefore(n)?(a.log("[INFO] Pagination sendRopRequest - Requête en -90 et -60 jours."),this.set({startdate:i(this.get("today"),"DD/MM/YYYY").add("d",-90).format("DD/MM/YYYY"),enddate:i(this.get("today"),"DD/MM/YYYY").add("d",-60).format("DD/MM/YYYY")})):(a.log("[INFO] Pagination sendRopRequest - Requête en -60 et -30 jours."),this.set({startdate:i(this.get("today"),"DD/MM/YYYY").add("d",-60).format("DD/MM/YYYY"),enddate:i(this.get("today"),"DD/MM/YYYY").add("d",-30).format("DD/MM/YYYY")}))}var s={ibanCrypte:this.get("iban"),startDate:this.get("startdate").replace(/\//g,""),endDate:this.get("enddate").replace(/\//g,""),pastOrPending:2},p=new r;p.fetchNext({data:s,type:"POST",successCallback:"updateRootCollection",errorTechCallback:"triggerErrorTechMessage",errorFoncCallback:"triggerErrorFoncMessage"},this)},updateRootCollection:function(e){var t=this.get("rootCollection");t.set(e.get("operationPassee").models,{silent:!0}),this.set({flagRequest:!0}),this.updateCollectionToShow()},updatePagination:function(){var e=this.get("offset"),t=this.get("limit"),i=this.get("increment");this.set({offset:e+i,limit:t+i})},setIncrement:function(e){var t=Number(e);this.set({limit:t,increment:t})},setCollection:function(e){this.set({rootCollection:e})},getCollectionToShow:function(){var t=this.get("rootCollection").clone();t.length<=this.get("increment")&&this.trigger("endOfCollection");var i=e.first(this.get("rootCollection").models,this.get("increment"));return t.reset(i),this.set({subCollection:t}),t},triggerErrorTechMessage:function(e){this.trigger("errorTech",e)},triggerErrorFoncMessage:function(e){this.trigger("errorFonc",e)}});return n}),a("app/rop/model/zonePubliable",["wrappernext"],function(e){var t=e.Model.extend({idAttribute:"idZone",defaults:{idZone:"",lien:""}});return t}),a("app/rop/collection/zonesPubliables",["wrappernext","app/rop/model/zonePubliable"],function(e,t){var i=e.Collection.extend({model:t,parse:function(e){return e}});return i}),a("app/rop/model/initialisationZonesPubliables",["underscore","wrappernext","axes","app/rop/collection/zonesPubliables","app/rop/utils/constants","app/rop/utils/logger"],function(t,i,r,o,a,n){var s=i.ModelZP.extend({url:function(){var t={baseUrl:"/rsc/contrib/conf/zonespubliables/",appName:"rop",lang:"fr",canal:"pro"};r.language&&(t.lang=r.language()||t.lang),t.canal=e.typeClientPourMultilingue||t.canal;var i=t.baseUrl+t.appName+"/"+t.lang+"/"+t.appName+"-zonesPubliables-"+t.canal+"-"+t.lang+".json";return n.log("[INFO] Zones publiables url - Adresse du fichier des zones publiables : "+i),a.local.urlServer?i:"/static/rop-pro-htmlpl/"+a.local.version+"/app/json/zonesPubliablesResponse02.json"},defaults:{pathPagesTechniques:"",zonesPubliables:null},parse:function(e){return e.zonesPubliables=(new o).set(e.zonesPubliables,{parse:!0}),e}});return s}),a("text!app/rop/template/pro/fondationsTemplate.html",[],function(){return'{{!-- \r\n	Conteneur pour la zone publiable haute\r\n--}}\r\n<div id="zone-publiable-haute-accueil"></div>\r\n\r\n{{!-- \r\n	Conteneur pour les liens de navigation entre les pages\r\n	\r\n	View: navigationView\r\n--}}\r\n<ul class="onglet"></ul>\r\n\r\n{{!-- \r\n	Conteneur pour l\'entête de l\'application "Relevé d\'opération".\r\n	\r\n	View: headerView\r\n--}}\r\n<header class="header-page header-select header-pro"></header>\r\n\r\n{{!-- \r\n	Conteneur pour la recherche/filtrage rapide.\r\n	\r\n	View: navigationView\r\n	\r\n	<nav class="barre-recherche"></nav>\r\n	\r\n--}}\r\n\r\n\r\n{{!-- \r\n	Conteneur pour la zone de recherche avancée\r\n	\r\n	View: rechercheAvanceeView\r\n	\r\n	<section class="row"></section>\r\n--}}\r\n\r\n\r\n{{!-- \r\n	Conteneur pour la vue en liste (ou la vue en timeline)\r\n	\r\n	View: layoutOperationListView\r\n--}}\r\n<section class="row wrapper-main-rop-list"></section>\r\n\r\n{{!-- \r\n	Conteneur pour les actions rapides\r\n	\r\n	Note: \r\n		Liste de liens de la vue\r\n		"Effectuer un virement", "éditer un RIB", "Commander un chéquier"...\r\n	\r\n	View: actionsRapidesView\r\n--}}\r\n<section class="wrapper-rop-1 list action-rapide"></section>\r\n\r\n{{!-- \r\n	Conteneur pour les caractéristiques du compte\r\n	\r\n	Note:\r\n		Liste de libellé de la vue\r\n		"type de compte", "Carte Associée", "titulaire"...\r\n	\r\n	View: caracteristiqueCompteView\r\n	\r\n--}}\r\n<section id="rop-caracteristiques" class="rop-caracteristiques"></section>\r\n\r\n\r\n{{!-- ??? --}}\r\n<div id="liste-categories-rop-debit" class="hidden js-container-category-liste"></div>\r\n{{!-- ??? --}}\r\n<div id="liste-categories-rop-credit" class="hidden js-container-category-liste"></div>\r\n\r\n{{!-- \r\n	Conteneur pour la zone publiable basse\r\n--}}\r\n<div id="zone-publiable-basse-accueil"></div>\r\n\r\n{{!-- \r\n	Overlay pour les popup d\'erreur\r\n--}}\r\n<div class="popin-cache hidden"></div>'}),a("app/rop/view/pro/fondationsView",["underscore","wrappernext","handlebars","text!app/rop/template/pro/fondationsTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a){var n=t.View.extend({el:null,template:null,events:{},initialize:function(){a.log("[ENTER] FondationsView initialize"),this.template=i.compile(r)},render:function(){a.log("[ENTER] FondationsView render");var e={};e.i18n=(new o).toJSON(),this.$el.html(this.template(e))}});return n}),a("app/rop/view/pro/compteListeItemView",["underscore","wrappernext","handlebars","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.View.extend({tagName:"li",model:null,template:null,events:{"click ":"gotSelected"},initialize:function(e){o.log("[ENTER] CompteListeItemView initialize"),this.template=e.template,this.views={},this.render()},render:function(){o.log("[ENTER] CompteListeItemView render");var e={};e.model=this.model.toJSON(),e.i18n=(new r).toJSON(),this.$el.html(this.template(e))},gotSelected:function(){this.trigger("gotSelected",{iban:this.model.get("key")})}});return a}),a("text!app/rop/template/pro/compteListeTemplate.html",[],function(){return'<ul style="right: -17px;" tabindex="0" class="dropdown-list-select-header nano-content pointer">\r\n</ul>'}),a("text!app/rop/template/pro/compteListeItemTemplate.html",[],function(){return'\r\n<h2 class="mobile-cut">\r\n	<span class="js-compte-titre">{{#if\r\n		model.libellePersoProduit}}{{model.libellePersoProduit}}{{else}}{{model.libelleProduit}}{{/if}}</span>\r\n	<span class="pull-right js-montant-compte no-mob">\r\n		{{model.soldeDispo}} {{getSymboleForDevise model.devise}} </span>\r\n</h2>\r\n<div class="subtitle">\r\n	<span class="js-compte-type"> <i\r\n		class="icon {{getClassForCivilite model.titulaire}}"></i>{{\r\n		model.value }} </span>\r\n</div>\r\n\r\n\r\n'}),a("app/rop/view/pro/compteListeView",["underscore","wrappernext","handlebars","nanoscroller","app/rop/view/pro/compteListeItemView","text!app/rop/template/pro/compteListeTemplate.html","text!app/rop/template/pro/compteListeItemTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n,s,p){var l=t.View.extend({tagName:"div",className:"nano dropdown-list-header has-scrollbar white-box",collection:null,subCollection:null,itemViewArray:null,template:null,events:{},initialize:function(){p.log("[ENTER] CompteListeView initialize"),this.subCollection=this.collection,this.itemViewArray=new Array,this.template=i.compile(a),this.itemTemplate=i.compile(n)},render:function(){p.log("[ENTER] CompteListeView render");
var e={};e.i18n=(new s).toJSON(),this.$el.html(this.template(e)),this.renderList(this.collection)},renderList:function(e){p.log("[ENTER] CompteListeView renderList");var t=this.$("ul");this.removeOldItemView(),p.log("[INFO] CompteListeView renderList - Taille de la collection: "+e.length);for(var i=0;i<e.length;i++){var r=new o({model:e.models[i],template:this.itemTemplate});this.itemViewArray.push(r),t.append(r.$el),this.listenTo(r,"gotSelected",this.gotCompte)}this.$el.nanoScroller({alwaysVisible:!0})},gotCompte:function(e){p.log("[INFO] CompteListeView renderList - Compte selectionné: "+e.iban),this.trigger("gotCompte",e)},removeOldItemView:function(){for(var e=0;e<this.itemViewArray.length;e++)this.stopListening(this.itemViewArray[e]),this.itemViewArray[e].remove();this.itemViewArray=new Array}});return l}),a("text!app/rop/template/pro/headerTemplate.html",[],function(){return'{{!-- Template de la headerView --}}\r\n\r\n\r\n<div class="breadcrumb">\r\n	{{i18n.app.rop.arian.acc}} &gt; {{i18n.app.rop.arian.mcpt}} &gt; <small>{{i18n.app.rop.arian.rop}}</small>\r\n</div>\r\n\r\n\r\n<div class="col-60 libelle-compte">\r\n	<div class="dropdown-header wrap-helper pointer">\r\n		<div class="dropdown-selected">\r\n\r\n			<h2 class="js-compte-titre-placeholder mobile-cut">{{#if\r\n				model.libellePersoProduit}}{{model.libellePersoProduit}}{{else}}{{model.libelleProduit}}{{/if}}</h2>\r\n			<div class="btn-select">\r\n				<span class="hidden-value hidden">{{ model.value }}</span>\r\n			</div>\r\n			<div class="subtitle">\r\n				<span class="js-compte-type-placeholder"> \r\n					<i class="icon {{getClassForCivilite model.titulaire}}"></i>{{ model.value }} |\r\n					<span class="nom-titulaire">{{model.titulaire.civilite}} {{model.titulaire.prenom}} {{model.titulaire.nom}}</span>\r\n				</span> \r\n			</div>\r\n\r\n		</div>\r\n\r\n		<span class="editable-container no-mob">\r\n			<i class="icon-stylo js-editable"></i> \r\n		</span> \r\n			<input type="hidden" class="input-value" value="{{ model.value }}" name="compte">\r\n	</div>\r\n	<div class="dropdown-container-header hidden"\r\n		id="autre-compte-container">\r\n		<div class="fleche-haut no-mob"></div>\r\n\r\n	</div>\r\n</div>\r\n\r\n<div class="pull-right col-40 infos js-info-initial">\r\n	<div class="date-solde">{{i18n.app.rop.meteo.solde}} {{ rop.dateDuJour }}</div>\r\n	{{#if flagMeteo}}\r\n		<i class="icon {{get model.meteo name=\'classMeteo\'}} big"></i>\r\n	{{/if}}\r\n	<span class="js-solde-dispo-placeholder big">{{formatMontant model.soldeDispo}} {{ model.devise }}</span>\r\n	<!-- Placeholder pour la compilation du template handlebar -->\r\n	<div class="handlebar-template-placeholder" id="template-header-rop">\r\n		<span> <i class="icon-clock-big"></i> \r\n			<span> {{i18n.app.rop.meteo.avenir}} <strong\r\n				class="js-avenir-header">{{formatMontant model.soldeAVenir}}</strong> {{ model.devise }} \r\n			</span> \r\n		</span>| \r\n		<span> \r\n			<span class="meteo"> {{i18n.app.rop.meteo.prev}} <strong class="js-previsionnel">{{formatMontant previ}}</strong>\r\n				{{model.devise }} \r\n			</span> \r\n		</span>\r\n		{{#if_gt model.montantDecouvertAutorise 0}}\r\n		<span class="infos-decouvert" >\r\n        	<span class="js-montant-decouvert">{{#if_eq model.codeLibelleAutorise app.rop.compte.code.C06}} {{i18n.app.rop.compte.texte.C06}} {{else}} {{i18n.app.rop.compte.texte.C09}} {{/if_eq}} : {{formatMontant model.montantDecouvertAutorise}} {{model.devise}} </span>\r\n   		</span>\r\n   		{{/if_gt}}\r\n	</div>\r\n	{{#ifAvoir model.idFamille}} \r\n		{{#if_lt model.soldeDispo 0}}\r\n			{{#if_gt rop.compte.nbJourDebiteur 1}}\r\n				<div class="debit-duree">{{i18n.app.rop.meteo.debDepuis}} {{ rop.compte.nbJourDebiteur }} {{i18n.app.rop.meteo.jours}}</div>\r\n			{{else}}\r\n				<div class="debit-duree">{{i18n.app.rop.meteo.debDepuis}} {{ rop.compte.nbJourDebiteur }} {{i18n.app.rop.meteo.jour}}</div>\r\n			{{/if_gt}}\r\n		{{/if_lt}}\r\n	{{/ifAvoir}}\r\n</div>\r\n'}),a("app/rop/model/editerLibelleCompte",["underscore","wrappernext","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return r.local.urlServer?"/udc-wspl/rest/majlblperso":"/static/rop-pro-htmlpl/"+r.local.version+"/app/json/editerLibelleCompteResponse.json"},postParse:function(e){return i.log("[ENTER] EditerLibelleCompte postParse"),e}});return o}),a("text!app/rop/template/pro/modificationLibelleTemplate.html",[],function(){return'<span class="close">✕</span>\r\n<h3>{{ i18n.app.rop.compte.editer.nom.titre }}</h3>\r\n\r\n<div class="form"> \r\n	<input type="radio" checked="checked" id="newName" class="custom-radio newNameRadio" value="1" name="edit-label">\r\n	<label for="newName" class="radio-label pull-left"></label> \r\n	<input type="text" placeholder="{{ i18n.app.rop.compte.editer.nom.placeholder }}" id="" name="" class="form-control radio-left newName">\r\n	<input type="radio" id="defaultName" class="custom-radio" value="0" name="edit-label">\r\n	<label for="defaultName" class="radio-label">{{ i18n.app.rop.compte.editer.nom.utiliser }} "{{ model.libelleProduit }}"</label>\r\n	<br/>\r\n	<br/>\r\n		<span class="error errorMajLib"></span>\r\n	<br/>\r\n	<button class="btn-primary btn-block">{{ i18n.app.rop.compte.editer.nom.valider }}</button> \r\n</div>'}),a("app/rop/view/pro/modificationLibelleView",["underscore","wrappernext","handlebars","app/rop/model/editerLibelleCompte","text!app/rop/template/pro/modificationLibelleTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,s){var p=t.View.extend({tagName:"div",className:"popover",model:null,nouveauLibelle:null,template:null,models:null,events:{"click .close":"closeView","click button.btn-primary":"doSubmitCustomizedLongLabel"},initialize:function(){s.log("[ENTER] ModificationLibelleView initialize"),n(".popover").remove(),this.models={},this.template=i.compile(o)},render:function(){s.log("[ENTER] ModificationLibelleView render"),this.i18n=(new a).toJSON();var e={};e.model=this.model.toJSON(),e.i18n=this.i18n,this.$el.html(this.template(e))},closeView:function(e,t){t||(t=!1),this.remove(),this.trigger("closeEditLabel",t)},sendEditLibelleRequest:function(){if(s.log("[ENTER] ModificationLibelleView sendEditLibelleRequest"),this.$(".newNameRadio").is(":checked")){if(this.nouveauLibelle=this.$(".newName").val(),0==this.nouveauLibelle.length)return!1}else this.nouveauLibelle=this.model.get("libelleProduit");var e={};e.listeMajLblPerso=new Array,e.listeMajLblPerso.push({ibanCrypte:this.model.get("key"),nouveauLibelle:this.nouveauLibelle}),this.models.editerLibelleCompte=new r,this.models.editerLibelleCompte.setArrayCodeErreurTech(["-10",-10]),this.models.editerLibelleCompte.fetchNext({data:e,type:"POST",successCallback:"updateLibelleCompte",errorTechCallback:"renderErrorTechMessage",errorFoncCallback:"renderErrorFoncMessage"},this)},renderErrorTechMessage:function(){this.setError(this.i18n.app.rop.lib.errorFailTech)},renderErrorFoncMessage:function(){this.setError(this.i18n.app.rop.lib.errorFailFonc)},setError:function(e){void 0===e&&(e=this.i18n.app.rop.lib.errorFail),this.$(".errorMajLib").html(e)},updateLibelleCompte:function(){s.log("[ENTER] ModificationLibelleView updateLibelleCompte"),this.model.set({libellePersoProduit:this.nouveauLibelle}),this.closeView(null,!0)},doSubmitCustomizedLongLabel:function(e){if(e.preventDefault(),this.$(".errorMajLib").html(""),"1"===n("input[name=edit-label]:checked").val()){var t=this.$(".newName").val(),i=new RegExp("((.*)((<)|(</))(ARTICLE|AUDIO|COMMAND|SECTION|SOURCE|VIDEO|ISINDEX|STYLE|BODY|IMG|FORM|JAVASCRIPT|VBSCRIPT|EXPRESSION|APPLET|META|XML|BLINK|LINK|STYLE|SCRIPT|EMBED|OBJECT|IFRAME|FRAME|FRAMESET|ILAYER|LAYER|BGSOUND|TITLE|BASE|BACKGROUND)(.*))|((.*)(ARTICLE|AUDIO|COMMAND|SECTION|SOURCE|VIDEO|ISINDEX|STYLE|BODY|IMG|FORM|JAVASCRIPT|VBSCRIPT|EXPRESSION|APPLET|META|XML|BLINK|LINK|STYLE|SCRIPT|EMBED|OBJECT|IFRAME|FRAME|FRAMESET|ILAYER|LAYER|BGSOUND|TITLE|BASE)( *)(>))|((.*)(CITE|ICON|ONFORMINPUT|ONINPUT|ONINVALID|ONCANPLAY|ONCANPLAYTHROUGH|ONDURATIONCHANGE|ONEMPTIED|ONENDED|ONLOADEDDATA|ONLOADEDMETADATA|ONLOADSTART|ONPAUSE|ONPLAY|ONPLAYING|ONPROGRESS|ONRATECHANGE|ONSEEKED|ONSEEKING|ONSTALLED|ONSUSPEND|ONTIMEUPDATE|ONVOLUMECHANGE|ONWAITING|ONMESSAGE|ONSHOW|ACTION|HREF|STYLE|ONABORT|ONACTIVATE|ONAFTERPRINT|ONAFTERUPDATE|ONBEFOREACTIVATE|ONBEFORECOPY|ONBEFORECUT|ONBEFOREDEACTIVATE|ONBEFOREEDITFOCUS|ONBEFOREPASTE|ONBEFOREPRINT|ONBEFOREUNLOAD|ONBEFOREUPDATE|ONBLUR|ONBOUNCE|ONCELLCHANGE|ONCHANGE|ONCLICK|ONCONTEXTMENU|ONCONTROLSELECT|ONCOPY|ONCUT|ONDATAAVAILABLE|ONDATASETCHANGED|ONDATASETCOMPLETE|ONDBLCLICK|ONDEACTIVATE|ONDRAG|ONDRAGEND|ONDRAGENTER|ONDRAGLEAVE|ONDRAGOVER|ONDRAGSTART|ONDROP|ONERROR|ONERRORUPDATE|ONFILTERCHANGE|ONFINISH|ONFOCUS|ONFOCUSIN|ONFOCUSOUT|ONHELP|ONKEYDOWN|ONKEYPRESS|ONKEYUP|ONLAYOUTCOMPLETE|ONLOAD|ONLOSECAPTURE|ONMOUSEDOWN|ONMOUSEENTER|ONMOUSELEAVE|ONMOUSEMOVE|ONMOUSEOUT|ONMOUSEOVER|ONMOUSEUP|ONMOUSEWHEEL|ONMOVE|ONMOVEEND|ONMOVESTART|ONPASTE|ONPROPERTYCHANGE|ONREADYSTATECHANGE|ONRESET|ONRESIZE|ONRESIZEEND|ONRESIZESTART|ONROWENTER|ONROWEXIT|ONROWSDELETE|ONROWSINSERTED|ONSCROLL|ONSELECT|ONSELECTIONCHANGE|ONSELECTSTART|ONSTART|ONSTOP|ONSUBMIT|ONUNLOAD)(.*)=(.*))|((.*)(URL\\s*)=(.*))","i");if(i.test(t))return n(e.currentTarget).addClass("error"),this.setError(this.i18n.app.rop.lib.errorSpec),!1;if(0==t.length)return this.setError(this.i18n.app.rop.lib.errorEmpty),!1}this.sendEditLibelleRequest()}});return p}),a("app/rop/view/pro/headerView",["underscore","wrappernext","handlebars","app/rop/view/pro/compteListeView","text!app/rop/template/pro/headerTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/view/pro/modificationLibelleView"],function(e,t,i,r,o,a,s,p){var l=t.View.extend({el:".header-page",rop:null,model:null,collection:null,views:null,template:null,events:{"click .dropdown-header":"pretoggle"},initialize:function(e){s.log("[ENTER] HeaderView initialize"),this.rop=e.rop,this.views={},this.model=this.collection.get(e.iban),this.template=i.compile(o)},render:function(){s.log("[ENTER] HeaderView render");var e={};e.model=this.model.toJSON(),this.model.get("meteo")&&(e.flagMeteo=!0),e.rop=this.rop.toJSON(),e.i18n=(new a).toJSON(),e.previ=this.model.get("soldeDispo")+this.model.get("soldeAVenir"),this.$el.html(this.template(e))},pretoggle:function(e){var t=this.$(e.target);t.is("i.icon-stylo")?(this.showEditionLibelleView(),this.views.compteListe&&(this.views.compteListe.remove(),this.stopListening(this.views.compteListe),n("body").off("click.listeCompte"))):this.toggleListeCompte()},toggleListeCompte:function(){s.log("[ENTER] HeaderView toggleListeCompte");var e=this,t=this.$(".dropdown-list-header"),i=n("body");0===t.length?(this.views.compteListe=new r({collection:this.collection}),this.$(".dropdown-header").after(this.views.compteListe.$el),this.views.compteListe.render(),this.$(".fleche-haut").show(),this.listenTo(this.views.compteListe,"gotCompte",this.gotNewCompteToShow),i.on("click.listeCompte",function(t){s.log("[INFO] HeaderView toggleListeCompte - Event jQuery global !!!"),0===e.$(t.target).closest(".dropdown-header").length&&e.toggleListeCompte()})):(this.views.compteListe.remove(),this.$(".fleche-haut").hide(),this.stopListening(this.views.compteListe),i.off("click.listeCompte"))},showEditionLibelleView:function(){this.undelegateEvents(),this.views.popup=new p({model:this.model}),this.views.popup.render(),this.$(".js-editable").after(this.views.popup.$el),this.listenTo(this.views.popup,"closeEditLabel",this.labelClosed)},labelClosed:function(e){this.stopListening(this.views.popup),this.delegateEvents(),e&&this.render()},gotNewCompteToShow:function(e){s.log("[ENTER] HeaderView gotNewCompteToShow");var t=this;e.iban!=this.model.id?(setTimeout(function(){t.model=t.collection.get(e.iban),t.render()},100),n("body").off("click.listeCompte"),this.trigger("gotNewCompteToShow",e)):(this.views.compteListe.remove(),this.stopListening(this.views.compteListe),n("body").off("click.listeCompte"))}});return l}),a("text!app/rop/template/pro/navigationTemplate.html",[],function(){return'{{!-- \r	Template de la navigationView\r--}}\r\r<li><a class="active" href="#total-results">{{i18n.app.rop.pro.menu.mesope}}</a></li>\r<li><a href="#rop-actions-rapides">{{i18n.app.rop.pro.menu.actrap}}</a></li>\r<li><a href="#rop-caracteristiques">{{i18n.app.rop.pro.menu.caract}}</a></li>\r<li><a href="#zone-publiable-basse-accueil">{{i18n.app.rop.pro.menu.autvous}}</a></li>'}),a("app/rop/view/pro/navigationView",["underscore","wrappernext","handlebars","text!app/rop/template/pro/navigationTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(t,i,r,o,a,n,s){var p=i.View.extend({el:"ul.onglet",model:null,collection:null,template:null,events:{"click .action-virement":"actionEffectuerVirement"},initialize:function(){n.log("[ENTER] NavigationView initialize"),this.template=r.compile(o)},render:function(){n.log("[ENTER] NavigationView render");var e={};e.i18n=(new a).toJSON(),this.$el.html(this.template(e))},actionEffectuerVirement:function(){n.log("[ENTER] NavigationView actionEffectuerVirement"),e.udcRedirectApi.redirect(s.link.effectuerVirement)}});return p}),a("text!app/rop/template/pro/meteoTemplate.html",[],function(){return'{{!-- \r	Template de la meteoView\r--}}\r\r<div class="col-60">\r	<div class="meteo">\r		{{#if flagMeteo}}<i class="icon {{get compte.meteo name=\'classMeteo\'}}"></i>{{/if}}\r	</div>\r	<p {{#if_lt compte.soldeDispo 0}} class="op-negatif" {{/if_lt}}>{{formatMontant compte.soldeDispo}} {{compte.devise}}</p><br>\r	<span class="solde">\r		{{i18n.app.rop.meteo.solde}} {{infoCompte.dateDuJour}}\r	</span>\r{{#ifAvoir idFamilleCompte}}\r	{{#if_lt compte.soldeDispo 0}}\r	<span class="op-negatif">{{i18n.app.rop.meteo.debDepuis}} : {{infoCompte.compte.nbJourDebiteur}} {{#if_gt infoCompte.compte.nbJourDebiteur 1}}{{i18n.app.rop.meteo.jours}}{{else}}{{i18n.app.rop.meteo.jour}}{{/if_gt}}</span>\r	{{/if_lt}}\r{{/ifAvoir}}\r</div>\r\r<div class="col-40 avenir">\r{{#if_gt hasOpeAVenir 0}}\r	<div class="col-50">\r		<i class="icon-clock-big"></i>\r		<span {{#if_lt compte.soldeAVenir 0}} class="op-negatif"{{/if_lt}}> {{i18n.app.rop.meteo.avenir}} <br>\r			<strong class="js-avenir-header">{{formatMontant compte.soldeAVenir}} {{compte.devise}} </strong>\r		</span>\r	</div>\r	<div class="col-50">\r{{!--		<i class="icon icon-meteo-2"></i> --}}\r		<span class="meteo {{#if_lt previ 0}}op-negatif{{/if_lt}}">\r			{{i18n.app.rop.meteo.prev}} <br>\r			 <strong class="js-previsionnel">{{formatMontant previ}}</strong> {{compte.devise}}\r		</span>\r	</div>\r{{else}}\r{{i18n.app.rop.hope.noOpe}}\r{{/if_gt}}\r</div>'}),a("app/rop/view/pro/meteoView",["underscore","wrappernext","handlebars","moment-2.6","text!app/rop/template/pro/meteoTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n){var s=t.View.extend({el:"#template-header-rop",model:null,initRop:null,template:null,events:{},initialize:function(e){n.log("[ENTER] MeteoView initialize"),this.initRop=e.initRop,this.template=i.compile(o)},render:function(){n.log("[ENTER] MeteoView render");var e={};e.i18n=(new a).toJSON(),e.compte=this.model.toJSON(),e.previ=this.model.get("soldeDispo")+this.model.get("soldeAVenir"),e.idFamilleCompte=this.model.get("idFamille"),e.hasOpeAVenir=this.initRop.get("aveDate").length,e.infoCompte=this.initRop.toJSON(),e.flagMeteo=this.model.get("meteo")?!0:!1,this.$el.html(this.template(e))}});return s}),a("text!app/rop/template/pro/filterTemplate.html",[],function(){return'{{!-- \r	Template de la filterView\r--}}\r\r<form class="form" onkeypress="return event.keyCode != 13;" novalidate="novalidate">\r	<div class="row">\r		<div class="col-40">   \r			<label class="search">\r				<input type="text" placeholder="{{i18n.app.rop.filter.ph.rech}}" id="input-search-rop" name="" class="form-control" value="{{ statesView.keyWord }}">\r			</label>\r		</div>\r		<div class="col-15 no-mob"><button class="recherche-avancee js-toggle-recherche-avancee {{#if statesView.isAveLayout}}hidden{{/if}}"><span>+</span> {{i18n.app.rop.filter.lib.pluscrit}}</button></div>\r		<div class="col-30 filtre-tri">\r			<div class="custom-select">\r				<select id="list-sort-by" class="form-control" name="">\r					<option value="dateOperation" {{#if_eq statesView.tri "date"}}selected{{/if_eq}}>{{i18n.app.rop.filter.opt.tridate}}</option>\r					<option value="dateValeurOperation" {{#if_eq statesView.tri "valeur"}}selected{{/if_eq}}>{{i18n.app.rop.filter.opt.tridateval}}</option>\r					<option value="operationType" {{#if_eq statesView.tri "operation"}}selected{{/if_eq}}>{{i18n.app.rop.filter.opt.triope}}</option>\r				</select>\r			</div>\r		</div>\r		<div class="col-15 pointage {{#if statesView.pointageOnly}} active {{/if}}" id="button-show-categorie-pointee">\r			<i class="icon-pin-alt"><span class="badge js-nombre-categorie-pointee">{{ statesView.nbOpPointes }}</span></i>\r		</div>\r		{{!--\r		<ul class="col-15 list-vue js-vue-change">\r			<li title="Vue timeline" class="active-timeline" data-vue="timeline"></li>\r			<li title="Vue liste" class="active-liste active" data-vue="liste"></li>\r		</ul>\r		--}}\r	</div>\r</form>'}),a("app/rop/view/pro/filterView",["underscore","wrappernext","handlebars","waypoints","sticky","text!app/rop/template/pro/filterTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o,a,n,s,p){var l=t.View.extend({tagName:"nav",className:"barre-recherche",model:null,collection:null,statesView:null,template:null,events:{"click .js-toggle-recherche-avancee":"toggleAdvanceSearch","keyup #input-search-rop":"filterOperation","change #list-sort-by":"sortOperation","click ul.js-vue-change li":"switchLayout","click #button-show-categorie-pointee":"togglePointageView",submit:"lockSubmit"},lockSubmit:function(){return!1},initialize:function(e){s.log("[ENTER] FilterView initialize"),this.statesView=new t.Model({keyWord:"",isFirstRender:!0,isAveLayout:e.states.get("isAveLayout"),nbOpPointes:this.collection.where({pointage:1}).length}),this.template=i.compile(a),this.listenTo(this.collection,"change",this.updateNbOpPointe),this.listenTo(this.statesView,"change",this.render)},updatePastillePointes:function(e){s.log("[ENTER] FilterView updatePasillePointes"),this.$(".badge.js-nombre-categorie-pointee").text(e)},render:function(e){if(s.log("[ENTER] FilterView render"),this.set({isFirstRender:!0}),e&&"undefined"!=typeof e.changed.nbOpPointes)this.updatePastillePointes(e.changed.nbOpPointes);else{var t={};t.model=this.model.toJSON(),t.i18n=(new n).toJSON(),t.statesView=this.statesView.toJSON(),this.$el.html(this.template(t))}},toggleAdvanceSearch:function(){this.trigger("toggleAdvSearch")},togglePointageView:function(){this.trigger("togglePointageView")},showAdvanceSearch:function(e){var t=this.$el.find(".js-toggle-recherche-avancee");e?t.addClass("active"):t.removeClass("active")},filterOperation:function(e){s.log("[ENTER] FilterView filterOperation");var t=this.$(e.currentTarget).val();this.trigger("filterMainLayout",{keyWord:t}),this.statesView.set({keyWord:t},{silent:!0})},sortOperation:function(e){s.log("[ENTER] FilterView sortOperation");var t,i,r=this.$(e.currentTarget).val();switch(r){case p.rop.sortOpByList:t="1",i="date";break;case p.rop.sortOpByGroup:t="2",i="operation";break;case p.rop.sortOpByDateValeur:t="3",i="valeur"}this.statesView.set({tri:i}),this.trigger("sortMainLayout",{key:t,keyWord:r})},switchLayout:function(e){s.log("[ENTER] FilterView switchLayout"),this.reset();var t=this.$(e.currentTarget),i=this.$("ul.js-vue-change li");i.removeClass("active"),t.addClass("active"),this.trigger("switchMainLayout",{switchToMainListeLayout:t.hasClass("active-liste")?!0:!1})},setOperations:function(e){this.stopListening(this.collection),this.collection=e,this.listenTo(this.collection,"change",this.render)},filtrerOpPointe:function(e){s.log("[ENTER] FilterView filtrerOpPointe");var t={};t.pointageOnly=!this.$(e.currentTarget).hasClass("active"),this.statesView.set({pointageOnly:t.pointageOnly}),this.trigger("quickFilters",t)},reset:function(){this.statesView.set({keyWord:""}),this.render()},remove:function(){var e=this.$el.parent();e.hasClass("sticky-wrapper")&&e.remove(),t.View.prototype.remove.call(this)},updateNbOpPointes:function(){s.log("[ENTER] FilterView updateNbOpPointes");var e=this.collection.where({pointage:1}).length;this.set({nbOpPointes:e})},setNbOpPointes:function(e){this.set({nbOpPointes:e})}});return l}),a("app/rop/model/rechercheAvancee",["underscore","wrappernext","app/rop/utils/constants"],function(e,t){var i=t.Model.extend({defaults:{periode:"",periodeMin:"",periodeMax:"",debitCredit:"",operation:"",categorie:"",montantMin:"",montantMax:"",affichage:""},parse:function(e){return e}});return i}),a("text!app/rop/template/pro/rechercheAvanceeTemplate.html",[],function(){return'<form class="form validate-form form-advanced-search rop" id="recherche-avancee-form" novalidate="novalidate">\r\n	<fieldset>\r\n		<span data-reset-form="#recherche-avancee-form" data-hide-section=".form-advanced-search.rop" class="close pull-right">✕</span>\r\n		<div class="row">\r\n			<div class="col-50">\r\n				<label>{{i18n.app.rop.rech.lib.periode}}</label>\r\n				<div class="custom-select">\r\n                    <select id="select-periode-search" class="form-control" name="select-periode">\r\n                        <option selected="" value="1">{{i18n.app.rop.rech.select.all}}</option>\r\n                        <option value="2">{{i18n.app.rop.rech.select.courant}}</option>\r\n                        <option value="3">{{i18n.app.rop.rech.select.lasttwo}}</option>\r\n                        <option value="4">{{i18n.app.rop.rech.select.lasttree}}</option>\r\n                    </select>\r\n            	</div>							\r\n			</div>\r\n			<div class="col-50">\r\n				<div class="row">\r\n					<div class="col-50">\r\n					<label>{{i18n.app.rop.rech.lib.from}}</label>\r\n						<div class="input-container date-picker">\r\n							<input type="text" placeholder="JJ/MM/AAAA" id="input-search-date-from" name="input-search-date-from" value="" class="form-control date dateMin dateMax rangedate js-init-datepicker js-date-from">\r\n						</div>\r\n					</div>\r\n					<div class="col-50">\r\n						<label>{{i18n.app.rop.rech.lib.to}}</label>\r\n						<div class="input-container date-picker" id="date-picker-container-field">\r\n							<input type="text" placeholder="JJ/MM/AAAA" id="input-search-date-to" name="input-search-date-to" value="" class="form-control date dateMin dateMax rangedate js-init-datepicker js-date-to">\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</fieldset>\r\n	<fieldset>\r\n		<div class="row">\r\n			<label>{{i18n.app.rop.rech.lib.dc}}</label>\r\n			<div class="col-30">\r\n				<div>\r\n					<input type="radio" id="input-credit" class="custom-radio" value="1" name="input-debit-credit">\r\n					<label for="input-credit" class="radio-label">{{i18n.app.rop.rech.lib.cred}}</label>\r\n				</div>\r\n				<div>\r\n					<input type="radio" id="input-debit" class="custom-radio" value="2" name="input-debit-credit">\r\n					<label for="input-debit" class="radio-label">{{i18n.app.rop.rech.lib.deb}}</label>\r\n				</div>\r\n				<input type="text" id="input-debit" class="custom-radio hidden form-control radio-debit-credit">\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<label>{{i18n.app.rop.rech.lib.type}} </label>\r\n			<div class="col-50">\r\n				<div class="custom-select">\r\n                    <select id="select-operation" class="form-control" name="select-operation">\r\n                        <option selected="" value="">{{i18n.app.rop.rech.select.allope}}</option>\r\n                        <option value={{cnst.chqemi}}>{{i18n.app.rop.rech.op.lib.chqemi}}</option>\r\n						<option value={{cnst.chqrecu}}>{{i18n.app.rop.rech.op.lib.chqrecu}}</option>\r\n						<option value={{cnst.versement}}>{{i18n.app.rop.rech.op.lib.versement}}</option>\r\n						<option value={{cnst.virrecu}}>{{i18n.app.rop.rech.op.lib.virrecu}}</option>\r\n						<option value={{cnst.viremi}}>{{i18n.app.rop.rech.op.lib.viremi}}</option>\r\n						<option value={{cnst.prelev}}>{{i18n.app.rop.rech.op.lib.prelev}}</option>\r\n						<option value={{cnst.pcarte}}>{{i18n.app.rop.rech.op.lib.pcarte}}</option>\r\n						<option value={{cnst.carte}}>{{i18n.app.rop.rech.op.lib.carte}}</option>\r\n						<option value={{cnst.opetitres}}>{{i18n.app.rop.rech.op.lib.opetitres}}</option>\r\n						<option value={{cnst.effcommerce}}>{{i18n.app.rop.rech.op.lib.effcommerce}}</option>\r\n						<option value={{cnst.retraitesp}}>{{i18n.app.rop.rech.op.lib.retraitesp}}</option>\r\n						<option value={{cnst.opeetranger}}>{{i18n.app.rop.rech.op.lib.opeetranger}}</option>\r\n						<option value={{cnst.remcarte}}>{{i18n.app.rop.rech.op.lib.remcarte}}</option>\r\n						<option value={{cnst.retraitguich}}>{{i18n.app.rop.rech.op.lib.retraitguich}}</option>\r\n						<option value={{cnst.comm}}>{{i18n.app.rop.rech.op.lib.comm}}</option>\r\n						<option value={{cnst.terceo}}>{{i18n.app.rop.rech.op.lib.terceo}}</option>\r\n						<option value={{cnst.divers}}>{{i18n.app.rop.rech.op.lib.divers}}</option>\r\n                    </select>\r\n           		</div>	\r\n			</div>\r\n			<div class="col-10 range  text-right">{{i18n.app.rop.rech.lib.dans}}</div>\r\n			<div class="col-40">\r\n				<div class="custom-select">\r\n                    <select id="select-categorie" class="form-control" name="select-categorie">\r\n                        <option selected="" value="" id="option-categorie-defaut">{{i18n.app.rop.rech.select.allcat}}</option>\r\n                        <optgroup label="{{i18n.app.rop.rech.lib.deb}}" id="optgroup-debit">\r\n	                        <option value="1">{{i18n.app.rop.categorie.c1}}</option>\r\n	                        <option value="2">{{i18n.app.rop.categorie.c2}}</option>\r\n	                        <option value="3">{{i18n.app.rop.categorie.c3}}</option>\r\n	                        <option value="4">{{i18n.app.rop.categorie.c4}}</option>\r\n	                        <option value="5">{{i18n.app.rop.categorie.c5}}</option>\r\n	                        <option value="6">{{i18n.app.rop.categorie.c6}}</option>\r\n	                        <option value="7">{{i18n.app.rop.categorie.c7}}</option>\r\n	                        <option value="8">{{i18n.app.rop.categorie.c8}}</option>\r\n	                        <option value="9">{{i18n.app.rop.categorie.c9}}</option>\r\n	                        <option value="10">{{i18n.app.rop.categorie.c10}}</option>\r\n	                        <option value="11">{{i18n.app.rop.categorie.c11}}</option>\r\n	                        <option value="12">{{i18n.app.rop.categorie.c12}}</option>\r\n	                        <option value="13">{{i18n.app.rop.categorie.c13}}</option>\r\n	                        <option value="14">{{i18n.app.rop.categorie.c14}}</option>\r\n	                        <option value="15">{{i18n.app.rop.categorie.c15}}</option>\r\n	                        <option value="16">{{i18n.app.rop.categorie.c16}}</option>\r\n	                        <option value="17">{{i18n.app.rop.categorie.c17}}</option>\r\n	                        <option value="18">{{i18n.app.rop.categorie.c18}}</option>\r\n	                        <option value="19">{{i18n.app.rop.categorie.c19}}</option>\r\n	                        <option value="20">{{i18n.app.rop.categorie.c20}}</option>\r\n	                        <option value="21">{{i18n.app.rop.categorie.c21}}</option>\r\n	                        <option value="22">{{i18n.app.rop.categorie.c22}}</option>\r\n	                        <option value="23">{{i18n.app.rop.categorie.c23}}</option>\r\n	                        <option value="24">{{i18n.app.rop.categorie.c24}}</option>\r\n						</optgroup>\r\n                        <optgroup label="{{i18n.app.rop.rech.lib.cred}}" id="optgroup-credit">\r\n	                        <option value="51">{{i18n.app.rop.categorie.c51}}</option>\r\n	                        <option value="52">{{i18n.app.rop.categorie.c52}}</option>\r\n	                        <option value="53">{{i18n.app.rop.categorie.c53}}</option>\r\n	                        <option value="54">{{i18n.app.rop.categorie.c54}}</option>\r\n	                        <option value="55">{{i18n.app.rop.categorie.c55}}</option>\r\n	                        <option value="56">{{i18n.app.rop.categorie.c56}}</option>\r\n	                        <option value="57">{{i18n.app.rop.categorie.c57}}</option>\r\n	                        <option value="58">{{i18n.app.rop.categorie.c58}}</option>\r\n	                        <option value="59">{{i18n.app.rop.categorie.c59}}</option>\r\n	                        <option value="60">{{i18n.app.rop.categorie.c60}}</option>\r\n                        </optgroup>\r\n                    </select>\r\n            	</div>	\r\n			</div>\r\n		</div>\r\n		<div class="row">\r\n			<label>{{i18n.app.rop.rech.lib.montant}}</label>\r\n			<div class="col-10 range">{{i18n.app.rop.rech.lib.entre}}</div>\r\n			<div class="col-40">\r\n				<div class="input-container join-input">\r\n					<input type="text" id="input-search-montant-from" name="input-search-montant-from" class="form-control numeric montant montantMin">\r\n				</div>\r\n				<div class="join-montant">\r\n					<span class="form-control"> {{i18n.app.rop.rech.lib.devise}}</span>\r\n				</div>\r\n			</div>\r\n			<div class="col-10 range text-right">{{i18n.app.rop.rech.lib.et}}</div>\r\n			<div class="col-40">\r\n				<div class="input-container join-input">\r\n					<input type="text" id="input-search-montant-to" name="input-search-montant-to" class="form-control numeric montant montantMax">\r\n				</div>\r\n                <div class="join-montant">\r\n					<span class="form-control "> {{i18n.app.rop.rech.lib.devise}}</span>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</fieldset>\r\n	<fieldset>\r\n		<div class="row">\r\n			<label>{{i18n.app.rop.rech.lib.affichage}}</label>\r\n			<div class="checkbox-container">\r\n				<div class="button-checkbox" id="container-input-search-tous">\r\n					<input type="checkbox" value="2" class="input-search-tous affichage" id="input-search-tous">\r\n					<label for="input-search-tous">{{i18n.app.rop.rech.lib.all}}</label>\r\n				</div>\r\n				<div class="button-checkbox js-type-checkbox">\r\n					<input type="checkbox" value="1" class="js-check-checkbox affichage" id="input-operation-pointee">\r\n					<label for="input-operation-pointee">{{i18n.app.rop.rech.lib.opointe}}</label>\r\n				</div>\r\n				<div class="button-checkbox js-type-checkbox">\r\n					<input type="checkbox" value="0" class="js-check-checkbox affichage" id="input-operation-a-pointer">\r\n					<label for="input-operation-a-pointer">{{i18n.app.rop.rech.lib.oapointe}}</label>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="row"> \r\n			<button class="btn-primary pull-right rechercheAvancee">{{i18n.app.rop.rech.btn.rech}}</button>\r\n			<button class="btn-secondary pull-right resetRecherche" type="reset">{{i18n.app.rop.rech.btn.reinit}}</button>\r\n		</div>\r\n	</fieldset>\r\n</form>'}),a("app/rop/view/pro/rechercheAvanceeView",["underscore","wrappernext","handlebars","app/rop/model/rechercheAvancee","app/rop/model/initRop","app/rop/collection/operations","text!app/rop/template/pro/rechercheAvanceeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/helpers","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o,a,n,s,p,l,c){var d=t.View.extend({tagName:"section",className:"row",model:null,models:null,collection:null,template:null,events:{"click .close":"toggleAdvanceSearch","click .rechercheAvancee":"advanceSearch","click .resetRecherche":"resetRecherche","blur .montantMin":"formaterMontant","blur .montantMax":"formaterMontant"},initialize:function(e){l.log("[ENTER] RechercheAvanceeView initialize"),this.models={},this.models.ropParams=e.ropParams,this.template=i.compile(n)
},render:function(){l.log("[ENTER] RechercheAvanceeView render"),l.log(this.model.get("dateDuJour"));var e={};e.i18n=(new s).toJSON(),e.cnst=c.rop,this.$el.html(this.template(e)),p.FormHelper.formValidation(this.model.get("dateDuJour")),p.Datepicker.init(),p.Virement.attachAll(this.model.get("dateDuJour"))},toggleAdvanceSearch:function(){this.trigger("toggleAdvSearch")},resetRecherche:function(){this.trigger("reset")},advanceSearch:function(){var e=this.$(".form-control");this.$("input.form-control:not([disabled])").valid(),this.$("select.form-control").valid(),e.hasClass("error")||this.doRechercheAvancee()},formaterMontant:function(e){var t=this.$(e.currentTarget);t.removeAttr("formatError");try{var i=p.Virement.formaterMontant(t.val(),2,"EUR");t.val(i)}catch(r){l.log("[Error] Erreur lors du formatage du montant."),t.attr("formatError","true"),t.rules("remove","format"),t.rules("add",{format:!0,messages:{format:r}})}t.valid()},getDoneesFromRecherche:function(){this.models.recherche=new r;var e="",t="",i=this.$("#select-periode-search").val(),o=this.$("#input-search-date-from").val(),a=this.$("#input-search-date-to").val();void 0!==this.$('input[name="input-debit-credit"]:checked').val()&&(e=this.$('input[name="input-debit-credit"]:checked').val());var n=this.$("#select-operation").val(),s=this.$("#select-categorie").val(),p=this.$("#input-search-montant-from").val(),l=this.$("#input-search-montant-to").val();void 0!==this.$(".affichage:checked").val()&&(t=this.$(".affichage:checked").val()),this.models.recherche.set({periode:i,periodeMin:o,periodeMax:a,debitCredit:e,operation:n,categorie:s,montantMin:p,montantMax:l,affichage:t})},doRechercheAvancee:function(){this.getDoneesFromRecherche();var e=2;this.models.ropParams.set({startDate:this.models.recherche.get("periodeMin"),pastOrPending:e}),""!==this.models.recherche.get("periodeMax")&&this.models.ropParams.set({endDate:this.models.recherche.get("periodeMax")});var t=this.models.ropParams.toJSON();this.models.initRop=new o,this.models.initRop.setArrayCodeErreurTech(["-10",-10]),this.models.initRop.fetchNext({data:t,type:"POST",successCallback:"resultRechercheAvancee",errorTechCallback:"sendErrorTechMessage",errorFoncCallback:"sendErrorFoncMessage"},this)},resultRechercheAvancee:function(){var t=this.models.initRop.get("operationPassee");if(this.models.recherche.get("debitCredit"),""!==this.models.recherche.get("debitCredit")){var i="";i="1"===this.models.recherche.get("debitCredit")?"Recette":"Dépense",t=(new a).set(t.where({categorie:i}),{parse:!0})}if(""!==this.models.recherche.get("categorie")&&(t=(new a).set(t.where({idCategorie:parseInt(this.models.recherche.get("categorie"))}),{parse:!0})),""!==this.models.recherche.get("affichage")&&"2"!==this.models.recherche.get("affichage")&&(t=(new a).set(t.where({pointage:parseInt(this.models.recherche.get("affichage"))}),{parse:!0})),""!==this.models.recherche.get("montantMin")){var r=Math.abs(parseInt(p.Virement.unformatMontantBis(this.models.recherche.get("montantMin"))));if(""!==this.models.recherche.get("montantMax")){var o=Math.abs(parseInt(p.Virement.unformatMontantBis(this.models.recherche.get("montantMax")))),n=r,s=o;r>o&&(n=o,s=r),t=new a(e.filter(t.toJSON(),function(e){var t=Math.abs(parseInt(p.Virement.unformatMontantBis(p.Virement.formaterMontant(String(e.montant.montant),2,"EUR"))));return t>=n&&s>=t}))}else t=new a(e.filter(t.toJSON(),function(e){var t=Math.abs(parseInt(p.Virement.unformatMontantBis(p.Virement.formaterMontant(String(e.montant.montant),2,"EUR"))));return t>=r}))}if(""!==this.models.recherche.get("operation")){var l=parseInt(this.models.recherche.get("operation"));t=new a(e.filter(t.toJSON(),function(e){return e.operationType.codeFamille===l}))}if(""!==this.models.recherche.get("periodeMin")){var c=p.DateHelper.formatDateToObject(this.models.recherche.get("periodeMin"));t=new a(e.filter(t.toJSON(),function(e){var t=p.DateHelper.formatDateToObject(e.dateOperation);return t>=c}))}if(""!==this.models.recherche.get("periodeMax")){var d=p.DateHelper.formatDateToObject(this.models.recherche.get("periodeMax"));t=new a(e.filter(t.toJSON(),function(e){var t=p.DateHelper.formatDateToObject(e.dateOperation);return d>=t}))}this.trigger("doRecherche",t)},sendErrorTechMessage:function(e){this.trigger("errorTech",e)},sendErrorFoncMessage:function(e){this.trigger("errorFonc",e)}});return d}),a("text!app/rop/template/pro/actionsRapidesTemplate.html",[],function(){return' {{!-- \r\n		Template de actionRapideView\r\n	--}}\r\n \r\n <div class="rop-actions" id="rop-actions-rapides">\r\n	<h2>{{i18n.app.rop.qa.ar}}</h2>\r\n	<ul class="list- actions-rapides">\r\n		{{#if eligibleThaller}}\r\n				{{#if indicLivret }}\r\n				<li class="col-6 degrade-hover white-box action-csl"><div class="bas"><h3>{{i18n.app.rop.qa.gererLivret}}</h3></div></li>\r\n				{{else}}\r\n				<li class="col-6 degrade-hover white-box action-csl"><div class="bas"><h3>{{i18n.app.rop.qa.gererCompte}}</h3></div></li>\r\n				{{/if}}\r\n			{{/if}}\r\n		{{#if eligibleVirement}}<li class="col-6 degrade-hover white-box action-virement"><i class="icon-faire-virement"></i><div class="bas"><h3>{{i18n.app.rop.qa.effvir}}</h3></div></li>{{/if}}\r\n		{{#if eligibleRib}}<li class="col-6 degrade-hover white-box action-rib"><i class="icon-editer-rib"></i><div class="bas"><h3>{{i18n.app.rop.qa.editrib}}</h3></div></li>{{/if}}\r\n		\r\n		<li class="col-6 degrade-hover white-box action-masquer"><i class="icon-masquer-compte"></i><div class="bas"><h3>{{i18n.app.rop.qa.masquer}}</h3></div></li>\r\n		\r\n		{{#if eligibleUtiliserReserve}}<li class="col-6 degrade-hover white-box action-utiliser"><i class="icon-utiliser-reserve"></i><div class="bas"><h3>{{i18n.app.rop.qa.utiliser}}</h3></div></li>{{/if}}\r\n		{{#if eligibleRembourserReserve}}<li class="col-6 degrade-hover white-box action-rembourser"><i class="icon-rembourser-reserve"></i><div class="bas"><h3>{{i18n.app.rop.qa.rembourser}}</h3></div></li>{{/if}}\r\n		{{!-- lot 2 \r\n		\r\n		<li class="col-6 degrade-hover white-box action-chequier"><i class="icon-phone"></i><div class="bas"><h3>{{i18n.app.rop.qa.comch}}</h3></div></li>\r\n		{{#if eligibleReleve}}<li class="col-6 degrade-hover white-box action-releve"><i class="icon-telecharger-releve"></i><div class="bas"><h3>{{i18n.app.rop.qa.tlreleve}}</h3></div></li>{{/if}}\r\n		--}}\r\n		{{!-- TelechargerOp --}}\r\n		{{#if eligibleTelechargerOp}}<li class="col-6 degrade-hover white-box action-telechargerop"><i class="icon-telecharger-releve"></i><div class="bas"><h3>{{ i18n.app.rop.qa.telechargerop }}</h3></div></li>{{/if}}\r\n		\r\n		<li class="col-6 degrade-hover white-box action-conseiller"><i class="icon-computer"></i><div class="bas"><h3>{{i18n.app.rop.qa.contactcons}}</h3></div></li>\r\n		<li class="col-6 degrade-hover white-box action-caracteristiques"><i class="icon-caracteristiques"></i><div class="bas"><h3>{{i18n.app.rop.qa.caracteristiques}}</h3></div></li>\r\n	</ul>\r\n</div>'}),a("text!app/rop/template/pro/masquerPoppingTemplate.html",[],function(){return'{{!--  <div class="popin popin-fixed white-box  well hidden popin-top" id="masquerComptePopin"> --}}\r\n	<a class="close popin-close">✕</a>\r\n	<div class="popin-content confirmation">\r\n		<div class="icon-form-info"></div>\r\n		<p class="big violet">\r\n			{{i18n.app.rop.masquage.compte.votreTxt}} <span class="js-display-compte">{{model.libelleProduit}} {{i18n.app.rop.masquage.compte.numTxt}}{{model.value}}</span> {{i18n.app.rop.masquage.compte.suiteVotreTxt}}\r\n		</p>\r\n		<p></p>\r\n		<p>{{i18n.app.rop.masquage.compte.confirmationMasquage}}</p>\r\n		<button class="btn-secondary small popin-close">{{i18n.app.rop.masquage.compte.annuler}}</button>\r\n		<button class="btn-primary small popin-close ">{{i18n.app.rop.masquage.compte.continuer}}</button>\r\n	</div>\r\n{{!-- </div> --}}'}),a("app/rop/view/pro/masquerPoppingView",["underscore","wrappernext","app/rop/translate/i18nRop","text!app/rop/template/pro/masquerPoppingTemplate.html","app/rop/utils/logger","app/rop/utils/constants"],function(t,i,r,o,a,n){var s=i.View.extend({tagName:"div",className:"popin popin-fixed white-box  well  popin-top",id:"masquerComptePopin",model:null,views:null,template:null,events:{"click .btn-secondary":"actionAnnulerMasquage","click .btn-primary":"actionContinuerMasquage","click .close":"actionAnnulerMasquage"},initialize:function(){a.log("[ENTER] MasquerPoppingView initialize"),this.views={},this.template=Handlebars.compile(o)},render:function(){a.log("[ENTER] MasquerPoppingView render");var e={};e.model=this.model.toJSON(),a.log(this.model),e.i18n=(new r).toJSON(),this.$el.html(this.template(e))},actionAnnulerMasquage:function(){this.trigger("annulerPopin")},actionContinuerMasquage:function(){a.log("[ENTER] masquerPoppingView - actionContinuerMasquage");var t={};t[n.rop.paramTypeIban]=this.model.get("key"),e.udcRedirectApi.redirect(n.link.masquerCompte,t)}});return s}),a("app/rop/view/pro/actionsRapidesView",["underscore","wrappernext","handlebars","waypoints","sticky","text!app/rop/template/pro/actionsRapidesTemplate.html","app/rop/translate/i18nRop","app/rop/utils/constants","app/rop/utils/logger","app/rop/utils/helpers","axes","app/rop/view/pro/masquerPoppingView"],function(t,i,r,o,a,s,p,l,c,d,m,u){var h=i.View.extend({el:".action-rapide",model:null,collection:null,template:null,events:{"click .action-virement":"actionEffectuerVirement","click .action-csl":"actionCSL","click .action-rib":"actionEditerRib","click .action-chequier":"actionCommanderChequier","click .action-releve":"actionTelechargerReleve","click .action-conseiller":"actionContacterConseiller","click .action-caracteristiques":"actionMontrerCaracteristiques","click .action-telechargerop":"actionTelechargerOp","click .action-masquer":"actionMasquer"},initialize:function(e){c.log("[ENTER] ActionsRapidesView initialize"),this.model=this.collection.get(e.iban),c.log(e),this.set({indicCSLProduction:e.cslProduction,ibanCrypte:e.iban}),this.views={},this.template=r.compile(s)},render:function(){c.log("[ENTER] ActionsRapidesView render");var e={};e.i18n=(new p).toJSON(),e.eligibleThaller=this.model.get("typeCompte").code===l.rop.codeCompteCSL&&this.model.get("produitOpra")&&this.model.get("offreOpra")&&1===this.get("indicCSLProduction"),e.indicLivret=this.model.get("indicLivret");for(var t=0,i=this.model.get("services").length;i>t;t++){var r=this.model.get("services").at(t),o=1===r.get("elligibilite");switch(r.get("code")){case l.rop.codeService.rib:this.model.get("typeCompte").code!==l.rop.codeCompteImpayesPret108&&(e.eligibleRib=o);break;case l.rop.codeService.releve:this.model.get("idFamille")!==l.rop.familleAssuranceVie&&this.model.get("idFamille")!==l.rop.familleCapitalisation&&this.model.get("idFamille")!==l.rop.familleEpargneRetraite&&(e.eligibleRib=o);break;case l.rop.codeService.virement:this.model.get("typeCompte").code===l.rop.codeCompteProvisio?e.eligibleUtiliserReserve=e.eligibleRembourserReserve=!1:this.model.get("typeCompte").code===l.rop.codeCompteProvisio2?e.eligibleUtiliserReserve=e.eligibleRembourserReserve=o:e.eligibleVirement=o;break;case l.rop.codeService.oppositionCheque:this.model.get("typeCompte").code===l.rop.codeCompteProvisio2&&(e.eligibleUtiliserReserve=e.eligibleRembourserReserve=o,e.eligibleVirement=!1)}this.model.get("idFamille")===l.rop.familleLiquidite&&this.model.get("typeCompte")!==l.rop.codeCompteImpayesPret108&&(e.eligibleRib=!0),this.model.get("idFamille")===l.rop.familleLiquidite&&(e.eligibleTelechargerOp=!0)}this.$el.html(this.template(e))},actionCSL:function(){c.log("[ENTER] ActionsRapidesView actionCSL");var t={};t[l.rop.paramOutRedir]=l.link.redirRop,e.udcRedirectApi.redirect(l.link.cslInterrogation,t)},actionEffectuerVirement:function(){c.log("[ENTER] ActionsRapidesView actionEffectuerVirement");var t={};t.redir="create",e.udcRedirectApi.redirect(l.link.effectuerVirement)},actionEditerRib:function(){c.log("[ENTER] ActionsRapidesView actionEditerRib");var t={lang:"fr",canal:"pro",version:"V1"};m.language&&(t.lang=m.language()||t.lang),t.canal=e.typeClientPourMultilingue||t.canal,e.versionProperties&&(t.version=versionProperties[data.appName]||t.version);var i={};i[l.rop.paramSiteType]=t.canal,i[l.rop.paramLang]=t.lang,i[l.rop.paramVersion]=t.version,e.udcRedirectApi.redirect(l.link.editerRib,i,{isEditerRib:!0})},actionCommanderChequier:function(){c.log("[ENTER] ActionsRapidesView actionCommanderChequier"),e.udcRedirectApi.redirect(l.link.commanderChequier)},actionTelechargerReleve:function(){c.log("[ENTER] ActionsRapidesView actionTelechargerReleve"),e.udcRedirectApi.redirect(l.link.telechargerReleve)},actionUtiliserReserve:function(){c.log("[ENTER] ActionsRapidesView actionUtiliserReserve"),e.udcRedirectApi.redirect(l.link.effectuerVirement)},actionRembourserReserve:function(){c.log("[ENTER] ActionsRapidesView actionRembourserReserve"),e.udcRedirectApi.redirect(l.link.effectuerVirement)},actionContacterConseiller:function(){c.log("[ENTER] ActionsRapidesView actionContacterConseiller"),e.udcRedirectApi.redirect(l.link.contacterConseiller)},actionTelechargerOp:function(){var t={};e.udcRedirectApi.redirect(l.link.telechargerop,t)},actionMontrerCaracteristiques:function(){c.log("[ENTER] ActionsRapidesView actionMontrerCaracteristiques"),this.trigger("showAccountDetails")},actionMasquer:function(){c.log("[ENTER] ActionsRapidesView actionMasquerCompte");var e=this,t=n(".popin-cache");t.removeClass("hidden"),t.off("click"),t.one("click",function(){e.annulerPopin()}),this.views.masquerPoppingView=new u({model:this.model}),this.views.masquerPoppingView.render(),c.log(this.views.masquerPoppingView.$el),t.after(this.views.masquerPoppingView.$el),this.listenTo(this.views.masquerPoppingView,"annulerPopin",this.annulerPopin)},annulerPopin:function(){c.log("[ENTER] ActionsRapidesView annulerPopin");var e=n(".popin-cache");e.addClass("hidden"),this.views.masquerPoppingView.remove()}});return h}),a("app/rop/view/pro/detail-compte/rootDetailCompteView",["underscore","wrappernext","app/rop/translate/i18nRop","app/rop/utils/constants","app/rop/utils/logger","app/rop/utils/helpers"],function(e,t,i,r,o,a){var n=t.View.extend({tagName:"div",model:null,template:null,events:{},render:function(){o.log("[ENTER] RootDetailCompteView render"),void 0===this.model.get("detail")?this.sendDetailRequest():this.postRender()},sendDetailRequest:function(){o.log("[ENTER] RootDetailCompteView sendDetailRequest"),this.postRender()},postRender:function(){o.log("[ENTER] RootDetailCompteView postRender");var e={};e.model=this.model.toJSON(),e.i18n=(new i).toJSON(),e.cnst=r,void 0!==this.model.get("detail")&&(e.detail=this.model.get("detail").toJSON()),this.$el.html(this.template(e)),void 0!==this.model.get("detail")&&a.Charts.drawSimpleProgressCircleBar(this.$(".progress-circle-bar"),this.model.get("detail").get("totalInProgressBar"),this.model.get("detail").get("progressInProgressBar"))}});return n}),a("text!app/rop/template/pro/detail-compte/detailCompteChequeTemplate.html",[],function(){return'\r\n{{!-- Pour le lot 2\r\n<div class="row row-border">\r\n	<div class="col-30">\r\n		<h3>{{ app.rop.compte.details.fam1.carte }}</h3>\r\n	</div>\r\n\r\n    <div class="col-65">\r\n        <span class="pull-right"><a href=""><strong>{{ app.rop.compte.details.fam1.detail }}</strong></a></span>\r\n        <div class="dropdown-container select-carte">\r\n            <div class="dropdown ">\r\n                <i class="select-arrow"></i>\r\n                <div class="dropdown-selected">  \r\n                    <i class="icon-carte ic-premier ic-small"></i>Carte Premier | 4974 **** **** 0758\r\n                </div>\r\n                <input type="hidden" class="input-value" value="" name="cb">\r\n            </div>  \r\n            <div class="dropdown-list hidden">\r\n                <ul class="dropdown-list-select list-carte">\r\n                   <li><i class="icon-carte ic-premier ic-small"></i>Carte Premier | 4974 **** **** 0758</li>\r\n                    <li><i class="icon-carte ic-premier ic-small"></i>Carte Premier | 4974 **** **** 0759</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n--}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n         <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p>\r\n    </div>\r\n</div>\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>'}),a("app/rop/utils/tagguage",["app/rop/utils/constants","app/rop/utils/logger","app/rop/utils/helpers"],function(t,i){var r={dcsuri:"DCS.dcsuri",ti:"WT.ti",dl:"WT.dl",sin:"WT.si_n",six:"WT.si_x",sics:"WT.si_cs",cgn:"WT.cg_n",cgs:"WT.cg_s",zclick:"WT.z_click",zclickCat:"WT.z_clickcat",zerror:"WT.z_error",ztypeerror:"WT.z_type_error",zTransfertType0:"WT.z_transfertype0",zTransfertType1:"WT.z_transfertype1",zTransfertType2:"WT.z_transfertype2",zTransfertType3:"WT.z_transfertype3",zTransfertType4:"WT.z_transfertype4",zTransfertType5:"WT.z_transfertype5",zTransfertType6:"WT.z_transfertype6",zTransfertType7:"WT.z_transfertype7",zSearchType1:"WT.z_searchtype1",zSendingType:"WT.z_sendingtype",zTransfertCode:"WT.z_transfertcode",zVue:"WT.z_vue",zTypeCompte:"WT.z_typecompte"},o={zErrorTech:"Erreur technique",zTypeErrorTech:"Technique",zTypeErrorFonc:"Fonctionnelle",dlLoad:"0",dlClick:"99",sicsFinScenario:"1"};e.tagguageNext||(e.tagguageNext=function(e){i.info("[WEBTRENDS] Tagguage de l'application :");for(var t=0,r=e.length;r>t;t+=2)i.info("		"+e[t]+" = "+e[t+1]);i.info("[WEBTRENDS] Fin")});var a={rechercheAvanceeRop:function(e){i.debug("[ENTER] Webtrends rechercheAvanceeRop");var a=[r.dcsuri,t.tagguage.uriAccueilRop,r.dl,o.dlClick,r.zclick,t.tagguage.zclickRechercheRop,r.zclickCat,t.tagguage.zclickCatRechercheRop,r.zVue,t.tagguage.zVueClassique,r.zTypeCompte,e.selectedCompte.get("libelleFamille")];tagguageNext(a)},afficherListeOperationsRop:function(e){i.debug("[ENTER] Webtrends afficherListeOperationsRop");var a=[r.dcsuri,t.tagguage.uriAccueilRop,r.ti,t.tagguage.tiAffichageROPPageView,r.dl,o.dlLoad,r.zVue,e.isVueTimeline?t.tagguage.zVueTimeline:t.tagguage.zVueClassique,r.zTypeCompte,e.selectedCompte.get("libelleFamille")];tagguageNext(a)},clickCategorieRop:function(e){i.debug("[ENTER] Webtrends clickCategorieRop");var a=[r.dcsuri,t.tagguage.uriAccueilRop,r.dl,o.dlClick,r.zVue,e.isVueTimeline?t.tagguage.zVueTimeline:t.tagguage.zVueClassique,r.zTypeCompte,e.libelleFamille,r.zclick,t.tagguage.zclickCategorisationRop,r.zclickCat,t.tagguage.zclickCatRop];tagguageNext(a)},clickLocaliserAgenceRop:function(e){i.debug("[ENTER] Webtrends clickLocaliserAgenceRop");var a=[r.dcsuri,t.tagguage.uriAccueilRop,r.ti,t.tagguage.tiLocalisationAgence,r.dl,o.dlClick,r.zVue,e.isVueTimeline?t.tagguage.zVueTimeline:t.tagguage.zVueClassique,r.zTypeCompte,e.libelleFamille,r.zclick,t.tagguage.zclickLocalisationRop,r.zclickCat,t.tagguage.zclickCatLocalisationRop];tagguageNext(a)},tagErreurFonc:function(e,a){i.debug("[ENTER] Webtrends tagErreurFonc");var n=[r.dcsuri,t.tagguage.uriAccueilRop,r.ti,t.tagguage.tiErreurFonctionnelle,r.dl,o.dlLoad,r.zerror,e.get("codeRetour"),r.ztypeerror,o.zTypeErrorFonc];""!==a.get("actionTag")&&(n.push(r.sin),n.push(a.get("actionTag"))),""!==a.get("steptag")&&(n.push(r.six),n.push(a.get("steptag"))),tagguageNext(n)},tagErreurTech:function(e){i.debug("[ENTER] Webtrends tagErreurTech");var a=[r.dcsuri,t.tagguage.uriAccueilRop,r.ti,t.tagguage.tiErreurTechnique,r.dl,o.dlLoad,r.zerror,o.zErrorTech,r.ztypeerror,o.zTypeErrorTech];""!==e.get("actionTag")&&(a.push(r.sin),a.push(e.get("actionTag"))),""!==e.get("steptag")&&(a.push(r.six),a.push(e.get("steptag"))),tagguageNext(a)}};return a}),a("app/rop/view/pro/detail-compte/detailCompteChequeView",["underscore","backbone","handlebars","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteChequeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c){var d=r.compile(a),m=o.extend({model:null,template:null,events:{"click .qa-fam1-effvir":"actionEffectuerVirement","click .qa-fam1-rib":"actionTelechargerRib","click .qa-fam1-releve":"actionReleveEnLigne","click .qa-fam1-masquer":"actionMasquerCompte","click .qa-fam1-contacte":"actionContacterConseiller","click .link-localisation":"actionLocalisation"},initialize:function(){p.log("[ENTER] DetailCompteChequeView initialize"),this.template=d},actionEffectuerVirement:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),t.redir="create",e.udcRedirectApi.redirect(l.link.effectuerVirement,t)},actionTelechargerRib:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam1TelechargerRib,t,{isEditerRib:!0})},actionReleveEnLigne:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam1ReleveEnLigne,t)},actionMasquerCompte:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam1MasquerCompte,t)},actionContacterConseiller:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam1ContacterConseiller,t)},actionLocalisation:function(){c.clickLocaliserAgenceRop({libelleFamille:this.model.get("libelleFamille"),isVueTimeline:n(".js-vue-change .active-timeline").hasClass("active")});var t={};t[l.udc.paramOutAgence]=this.model.get("nomAgence"),e.udcRedirectApi.redirect(l.link.fam1Localisation,t)}});return m}),a("text!app/rop/template/pro/detail-compte/detailCompteCSLThalerTemplate.html",[],function(){return'\r\n\r\n{{#if model.cslProduction }}\r\n	{{#if detail}}\r\n		<div class="row row-border">\r\n		    <div class="col-30">\r\n		        <h3>{{ i18n.app.rop.compte.details.fam2.soldemax }}</h3>\r\n		    </div>\r\n		    <div class="col-65">\r\n		      	<p>\r\n		   			{{ i18n.app.rop.compte.details.fam2.illimite }}\r\n		   		</p>\r\n		    </div>\r\n		</div>\r\n		<div class="row row-border">\r\n		    <div class="col-30">\r\n		        <h3>{{ i18n.app.rop.compte.details.fam2.montantinterets }} {{ detail.infosContrat.dateCalculProratas }}</h3>\r\n		    </div>\r\n		    <div class="col-65">\r\n		      	<p>\r\n		   			{{formatMontant detail.infosContrat.montantInteretsCourus }} {{getSymboleForDevise model.devise }}\r\n		   		</p>\r\n		    </div>\r\n		</div>\r\n	{{/if}}\r\n{{/if}}\r\n\r\n\r\n{{#if model.cslProduction }}\r\n	{{#if detail}}\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam2.alimauto }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			{{#if detail.indicAAInconnu }}\r\n				<span class="pull-right">\r\n					<!-- Pas de bouron -->\r\n				</span>\r\n				<i class=""></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.inconnu }}</p>\r\n			{{/if}}\r\n			{{#if detail.indicAAActive }}\r\n				<span class="pull-right">\r\n				{{!-- Pas de boutons de modifications si pas en prod --}}\r\n				{{#if model.cslModification }}\r\n	<!-- 				<button type="button" class="btn-epargne small">{{ i18n.app.rop.compte.details.fam2.simuler }}</button> -->\r\n					<button type="button" class="btn-epargne small modifier-alimauto">{{ i18n.app.rop.compte.details.fam2.modifier }}</button>\r\n					<button type="button" class="btn-epargne small supprimer-alimauto">{{ i18n.app.rop.compte.details.fam2.supprimer }}</button>\r\n				{{/if}}\r\n				</span>\r\n				<i class="icon icon-check"></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.active }}</p>\r\n			{{/if}}\r\n			{{#if detail.indicAANonActive }}\r\n				<span class="pull-right">\r\n				{{!-- Pas de boutons de modifications si pas en prod --}}\r\n				{{#if model.cslModification }}\r\n					<button type="button" class="btn-epargne small activer-alimauto">{{ i18n.app.rop.compte.details.fam2.activer }}</button>\r\n				{{/if}}\r\n				</span>\r\n				<i class="icon-opo"></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.nonactive }}</p>\r\n			{{/if}}\r\n			{{#if detail.indicAASuspendue }}\r\n				<span class="pull-right">\r\n				{{!-- Pas de boutons de modifications si pas en prod --}}\r\n				{{#if model.cslModification }}\r\n					<button type="button" class="btn-epargne small">{{ i18n.app.rop.compte.details.fam2.reactiver }}</button>\r\n				{{/if}}\r\n				</span>\r\n				<i class="icon icon-check"></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.suspendue }}</p>\r\n			{{/if}}\r\n			{{#if detail.indicAASuspendueReactivation }}\r\n				<span class="pull-right">\r\n				{{!-- Pas de boutons de modifications si pas en prod --}}\r\n				{{#if model.cslModification }}\r\n					<button type="button" class="btn-epargne small modifier-alimauto-reac">{{ i18n.app.rop.compte.details.fam2.modifier }}</button>\r\n					<button type="button" class="btn-epargne small supprimer-alimauto">{{ i18n.app.rop.compte.details.fam2.supprimer }}</button>\r\n				{{/if}}\r\n				</span>\r\n				<i class="icon-clock-big"></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.suspenduereactivation }}</p>\r\n			{{/if}}\r\n			{{#if detail.indicAACreation }}\r\n				<span class="pull-right">\r\n					<!-- Pas de bouron -->\r\n				</span>\r\n				<i class=""></i>\r\n				<p class="libelleactive">{{ i18n.app.rop.compte.details.fam2.creation }}</p>\r\n			{{/if}}\r\n		</div>\r\n	</div>\r\n	{{/if}}\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n        <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p>  \r\n    </div>\r\n</div>\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{#if model.cslProduction }}\r\n	{{#if detail}}\r\n		 <div class="row row-border">\r\n		    <div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam2.statut }}</h3></div>\r\n		    <div class="col-65">\r\n		        <i class="icon icon-calculette big-icon"></i>\r\n		        <p>{{ detail.titulaire.optionFiscale }}</p>\r\n		    </div>\r\n		</div>\r\n	{{/if}}\r\n{{/if}}\r\n'}),a("app/rop/model/detail-compte/detailCompteEpargneDispoCSLThaler",["underscore","wrappernext","app/rop/utils/constants","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/csl-wspl/rest/caracteristiquesSimples":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteEpargneDispoThaler.json"},postParse:function(e){o.log("[ENTER] DetailCompteEpargneDispoCSLThaler postParse",this);var t=(new r).toJSON();switch(e.titulaire.optionFiscale){case 0:e.titulaire.optionFiscale=t.app.rop.compte.details.fam2.nonapplicable;break;case 1:e.titulaire.optionFiscale=t.app.rop.compte.details.fam2.dispenseprelevement;break;case 2:e.titulaire.optionFiscale=t.app.rop.compte.details.fam2.prelevement}switch(e.alimentationAutomatique.dataAlimentationAutomatique.statusAlimentationAutomatique){case-1:e.indicAAInconnu=!0;break;case 0:e.indicAANonActive=!0;break;case 1:e.indicAAActive=!0;break;case 2:e.indicAASuspendue=!0;break;case 3:e.indicAASuspendueReactivation=!0;break;case 4:e.indicAACreation=!0}return e}});return a}),a("app/rop/view/pro/detail-compte/detailCompteEpargneDispoCSLThalerView",["underscore","wrappernext","handlebars","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteCSLThalerTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/model/detail-compte/detailCompteEpargneDispoCSLThaler"],function(t,i,r,o,a,n,s,p,l){var c=o.extend({model:null,template:null,events:{"click .activer-alimauto":"actionActiverAlimAuto","click .modifier-alimauto":"actionModifierAlimAuto","click .modifier-alimauto-reac":"actionModifierReacAlimAuto","click .supprimer-alimauto":"actionSupprimerAlimAuto"},initialize:function(e){s.log("[ENTER] DetailCompteEpargneDispoThalerView initialize"),this.template=r.compile(a),this.model.set({cslProduction:e.cslProduction,cslModification:e.cslModification})},actionActiverAlimAuto:function(){var t={};t[p.rop.paramOutRedir]=p.link.redirRop,e.udcRedirectApi.redirect(p.link.cslActiverAlimAuto,t)},actionModifierAlimAuto:function(){var t={};t[p.rop.paramOutRedir]=p.link.redirRop,e.udcRedirectApi.redirect(p.link.cslModifierAlimAuto,t)},actionModifierReacAlimAuto:function(){var t={};t[p.rop.paramOutRedir]=p.link.redirRop,e.udcRedirectApi.redirect(p.link.cslModifierReacAlimAuto,t)},actionSupprimerAlimAuto:function(){var t={};t[p.rop.paramOutRedir]=p.link.redirRop,e.udcRedirectApi.redirect(p.link.cslSupprimerAlimAuto,t)},sendDetailRequest:function(){var e=new l;if(e.setOptions({isNoIntermediate:!0}),e.setArrayCodeSessionLost([-20,"-20",-21,"-21"]),1===this.model.get("cslProduction")){var t={};t.pageType="interrogationCsl",t.keyCompte=this.model.get("key"),e.setArrayCodeErreurTech(["-10",-10]),e.fetchNext({data:t,type:"POST",successCallback:"successCallback",errorTechCallback:"errorCallback",errorFoncCallback:"errorCallback"},this)}else this.successCallback(e)},successCallback:function(e){this.model.set({detail:e},{silent:!0}),this.model.get("detail").set({totalInProgressBar:this.model.get("detail").get("soldeMax"),progressInProgressBar:this.model.get("soldeDispo")}),this.postRender()},errorCallback:function(){this.postRender()}});return c}),a("app/rop/model/detail-compte/detailCompteEpargneDispo",["underscore","wrappernext","app/rop/utils/constants","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/epargneDispo":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteEpargneDispoResponse04.json"},postParse:function(e){if(o.log("[ENTER] DetailCompteEpargneDispo postParse",this),"app.caraccomptes.status.defiscalise"===e.statutFiscal){var t=(new r).toJSON();e.statutFiscal=t.app.rop.compte.details.fam2.defiscalise}return e}});return a}),a("text!app/rop/template/pro/detail-compte/detailCompteEpargneDispoTemplate.html",[],function(){return'\r\n{{#if detail}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.fam2.soldemax }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n    	{{!--\r\n    		QC 599\r\n    		\r\n    		Le plafond des comptes suivant (Epargne dispo) est illimité:\r\n    		+ Compte d\'épargne \r\n			+ Compte Weezbee \r\n			+ Compte Z2\r\n			+ Compte Y2\r\n    	--}}\r\n    	{{#if detail.soldeMax}}\r\n    		 <div class="col-70">\r\n	            <figure class="curseur progress-circle-bar">\r\n	                <div class="barre-1">\r\n	                    <div class="graph-circle gc-curseur">\r\n	                        <div class="graph-inner">0%</div>\r\n	                    </div>\r\n	                </div>\r\n	                <div class="barre-2"></div> \r\n	            </figure>\r\n	        </div>\r\n	        <div class="col-30">\r\n	            <h4>\r\n	                {{ formatMontant detail.soldeMax }} {{getSymboleForDevise model.devise }}\r\n	            </h4> \r\n	        </div>\r\n    	{{else}}\r\n       		<p>\r\n    			{{ i18n.app.rop.compte.details.fam2.illimite }}\r\n    		</p>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n        <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p>  \r\n    </div>\r\n</div>\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{#if detail}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam2.taux }}</h3></div>\r\n    <div class="col-65">\r\n        \r\n        {{#ifCreditWeezbee model.typeCompte.code}}\r\n        	<p>{{ i18n.app.rop.compte.details.taux.interets.weezbee }} </p>\r\n        {{ else }}\r\n        	<i class="big-icon">%</i>\r\n        	<p>{{ formatMontant detail.tauxInterets }} %</p>\r\n        {{/ifCreditWeezbee}}\r\n    </div>\r\n</div>\r\n\r\n <div class="row row-border">\r\n    <div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam2.statut }}</h3></div>\r\n    <div class="col-65">\r\n        <i class="icon icon-calculette big-icon"></i>\r\n        {{!--\r\n    		QC 447\r\n    		\r\n    		Afficher le statut fiscal du compte. Le statut fiscal retourné par GFI n\'est\r\n    		pas une clé mais directement la chaine de caractère à afficher.\r\n    	--}}\r\n        <p>{{ detail.statutFiscal }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{/if}}\r\n'
}),a("app/rop/view/pro/detail-compte/detailCompteEpargneDispoView",["underscore","backbone","handlebars","app/rop/model/detail-compte/detailCompteEpargneDispo","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteEpargneDispoTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/helpers","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c,d,m){var u=r.compile(s),h=a.extend({model:null,template:null,events:{"click .qa-fam2-effvir":"actionEffectuerVirement","click .qa-fam2-AlimAuto":"actionAlimentationAutomatique","click .qa-fam2-releve":"actionReleveEnLigne","click .qa-fam2-masquer":"actionMasquerCompte","click .qa-fam2-contacte":"actionContacterConseiller","click .link-localisation":"actionLocalisation"},initialize:function(){l.log("[ENTER] DetailCompteEpargneDispoView initialize"),this.template=u},sendDetailRequest:function(){l.log("[ENTER] DetailCompteEpargneDispoView sendDetailRequest");var e=new o;e.setOptions({isNoIntermediate:!0}),e.setArrayCodeSessionLost([-10,"-10"]),e.url=e.url()+"?iban="+this.model.get("key"),e.setArrayCodeErreurTech(["-10",-10]),e.fetchNext({successCallback:"successCallback",errorTechCallback:"errorCallback",errorFoncCallback:"errorCallback"},this)},successCallback:function(e){this.model.set({detail:e},{silent:!0}),d.ifCreditProvisio(this.model.get("typeCompte").code)||this.model.get("detail").set({totalInProgressBar:this.model.get("detail").get("soldeMax"),progressInProgressBar:this.model.get("soldeDispo")},{silent:!0}),this.postRender()},errorCallback:function(){this.postRender()},actionEffectuerVirement:function(){var t={};t[c.udc.paramOutIban]=this.model.get("key"),t.redir="create",e.udcRedirectApi.redirect(c.link.effectuerVirement,t)},actionAlimentationAutomatique:function(){var t={};t[c.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(c.link.fam2AlimentationAutomatique,t)},actionReleveEnLigne:function(){var t={};t[c.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(c.link.fam2ReleveEnLigne,t)},actionMasquerCompte:function(){var t={};t[c.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(c.link.fam2MasquerCompte,t)},actionContacterConseiller:function(){var t={};t[c.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(c.link.fam2ContacterConseiller,t)},actionLocalisation:function(){m.clickLocaliserAgenceRop({libelleFamille:this.model.get("libelleFamille"),isVueTimeline:n(".js-vue-change .active-timeline").hasClass("active")});var t={};t[c.udc.paramOutAgence]=this.model.get("nomAgence"),e.udcRedirectApi.redirect(c.link.fam1Localisation,t)}});return h}),a("app/rop/model/detail-compte/detailCompteEpargneATerme",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/epargneATerme":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteEpargneATerme.json"},postParse:function(e){return r.log("[ENTER] DetailCompteEpargneATerme postParse"),e}});return o}),a("app/rop/model/detail-compte/detailCompteEpargneATermePro",["underscore","wrappernext","app/rop/utils/constants","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/epargneATerme":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteEpargneATerme.json"},postParse:function(e){if(o.log("[ENTER] DetailCompteEpargneATerme postParse",this),"app.caraccomptes.status.defiscalise"===e.statutFiscal){var t=(new r).toJSON();e.statutFiscal=t.app.rop.compte.details.fam2.defiscalise}return e}});return a}),a("app/rop/model/detail-compte/detailComptePEL",["underscore","wrappernext","app/rop/utils/constants","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/pel":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailComptePEL.json"},postParse:function(e){if(o.log("[ENTER] DetailComptePEL postParse",this),"app.caraccomptes.status.defiscalise"===e.statutFiscal){var t=(new r).toJSON();e.statutFiscal=t.app.rop.compte.details.fam2.defiscalise}return e}});return a}),a("text!app/rop/template/pro/detail-compte/detailCompteEpargneATermeTemplate.html",[],function(){return'{{!-- Correction QC601 pour uniformisation de la barre du solde\r\n		La barre de progression du solde maximal (dans le détail) des PEL et PEP\r\n		doit être située tout en haut (sous les QuickActions) --}}\r\n{{#if detail}}\r\n	<!-- PEP -->\r\n	{{#if_diff model.typeCompte.code cnst.rop.codeComptePEL}}\r\n	\r\n	{{#if_diff model.typeCompte.code cnst.rop.codeCompteDATPotentiel}}\r\n\r\n	{{#if_diff detail.codeRetour \'4\'}}\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{i18n.app.rop.compte.details.fam3.soldemax}}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<div class="col-70">\r\n				<figure class="curseur progress-circle-bar">\r\n						<div class="barre-1">0\r\n							<div class="graph-circle gc-curseur">\r\n								<div class="graph-inner">0%</div>\r\n							</div>\r\n						</div>\r\n						<div class="barre-2"></div>\r\n						\r\n					</figure>\r\n			</div>\r\n			<div class="col-30">\r\n					<h4>{{ formatMontant detail.soldeMax }}\r\n						{{getSymboleForDevise model.devise}}</h4>\r\n				</div>\r\n		</div>\r\n	</div>\r\n\r\n	{{/if_diff}}\r\n	\r\n	{{/if_diff}}\r\n	\r\n	{{/if_diff}}\r\n	\r\n	<!-- PEL -->	\r\n	{{#if_eq model.typeCompte.code cnst.rop.codeComptePEL}}\r\n\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam3.soldemax }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<div class="col-70">\r\n				<figure class="curseur progress-circle-bar">\r\n					<div class="barre-1">\r\n						<div class="graph-circle gc-curseur">\r\n							<div class="graph-inner">0%</div>\r\n						</div>\r\n					</div>\r\n					<div class="barre-2"></div>\r\n				</figure>\r\n			</div>\r\n			<div class="col-30">\r\n				<h4>{{ formatMontant detail.soldeMax }}\r\n					{{getSymboleForDevise model.devise}}</h4>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	\r\n	{{/if_eq}}\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n        <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p>  \r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{#if detail}}\r\n	{{#if_eq model.typeCompte.code cnst.rop.codeComptePEL}}\r\n\r\n	<div class="row row-border">\r\n		<div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam3.taux }}</h3></div>\r\n\r\n		<div class="col-65">\r\n			<i class="big-icon">%</i>\r\n			<p>{{ formatMontant detail.tauxInterets }} %</p>\r\n		</div>\r\n	</div>\r\n\r\n	{{/if_eq}}\r\n\r\n{{#if_diff detail.codeRetour \'4\'}}\r\n{{#if_eq model.typeCompte.code cnst.rop.codeCompteDATPotentiel}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam3.statuthors }}</h3></div>\r\n    <div class="col-65">\r\n        <i class="icon icon-calculette big-icon"></i>\r\n        {{!--\r\n    		QC 447\r\n    		\r\n    		Afficher le statut fiscal du compte. Le statut fiscal retourné par GFI n\'est\r\n    		pas une clé mais directement la chaine de caractère à afficher.\r\n    	--}}\r\n        <p>{{ detail.statutFiscal }}</p>\r\n    </div>\r\n</div>\r\n{{else}}\r\n<div class="row row-border">\r\n    <div class="col-30"><h3>{{ i18n.app.rop.compte.details.fam3.statut }}</h3></div>\r\n    <div class="col-65">\r\n        <i class="icon icon-calculette big-icon"></i>\r\n        <p>{{ detail.statutFiscal }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{/if_eq}}\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.fam3.echeance }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon icon-big-calendar big-icon"></i>\r\n        <p>{{ detail.dateEcheance }}</p>\r\n    </div>\r\n</div>\r\n{{/if_diff}}\r\n\r\n<!-- DAT -->\r\n\r\n{{#if_eq model.typeCompte.code cnst.rop.codeCompteDATPotentiel}}\r\n	<div class="row row-border">\r\n	    <div class="col-30">\r\n	        <h3>{{ i18n.app.rop.compte.details.fam3.montantdepotini }}</h3>\r\n	    </div>\r\n	    <div class="col-65">\r\n	        <i class="icon icon-piece big-icon"></i>\r\n	        <p>{{ formatMontant detail.depotInitial }}</p>\r\n	    </div>\r\n	</div>\r\n	<div class="row row-border">\r\n	    <div class="col-30">\r\n	        <h3>{{ i18n.app.rop.compte.details.fam3.periodicitearretes }}</h3>\r\n	    </div>\r\n	    <div class="col-65">\r\n	        <i class="icon icon-big-calendar big-icon"></i>\r\n	        <p>{{ detail.periodiciteArretes }}</p>\r\n	    </div>\r\n	</div>\r\n{{/if_eq}}\r\n\r\n<!-- PEP -->\r\n\r\n	{{#if_diff model.typeCompte.code cnst.rop.codeComptePEL}}\r\n	\r\n	{{#if_diff model.typeCompte.code cnst.rop.codeCompteDATPotentiel}}\r\n	\r\n	{{#if_diff detail.codeRetour \'4\'}}\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam3.interetspep }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<div class="col-50">\r\n				<i class="icon icon-piece big-icon"></i>\r\n				<p>\r\n					{{ i18n.app.rop.compte.details.fam3.tauxfixe }} : <strong>{{ formatMontant detail.interetsTauxFixe }}</strong>\r\n				</p>\r\n			</div>\r\n			<div class="col-50">\r\n				<i class="icon icon-piece big-icon"></i>\r\n				<p>\r\n					{{ i18n.app.rop.compte.details.fam3.tauxbnp }} : <strong>{{ formatMontant detail.interetsTauxBNP }}</strong>\r\n				</p>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam3.contrat }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<i class="icon irop-51 big-icon"></i>\r\n			{{#if_eq detail.contratAssurance true}}\r\n			<p>{{ i18n.app.rop.compte.details.fam3.booleantrue }}</p>\r\n			{{else}}\r\n			<p>{{ i18n.app.rop.compte.details.fam3.booleanfalse }}</p>\r\n			{{/if_eq}}\r\n		</div>\r\n	</div>\r\n\r\n	{{/if_diff}}\r\n	\r\n	{{/if_diff}}\r\n\r\n	{{/if_diff}}\r\n	<!-- PEL -->\r\n\r\n	{{#if_eq model.typeCompte.code cnst.rop.codeComptePEL}}\r\n\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam3.ouverture }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<i class="icon icon-big-calendar big-icon"></i>\r\n			<p>{{ detail.dateOuverture }}</p>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="row row-border">\r\n		<div class="col-30">\r\n			<h3>{{ i18n.app.rop.compte.details.fam3.prime }}</h3>\r\n		</div>\r\n		<div class="col-65">\r\n			<i class="big-icon">€</i>\r\n			<p>{{ formatMontant detail.primeEtat }} {{getSymboleForDevise model.devise}}</p>\r\n		</div>\r\n	</div>\r\n\r\n	{{/if_eq}}\r\n{{/if}}'}),a("app/rop/view/pro/detail-compte/detailCompteEpargneATermeView",["underscore","backbone","handlebars","app/rop/model/detail-compte/detailCompteEpargneATerme","app/rop/model/detail-compte/detailCompteEpargneATermePro","app/rop/model/detail-compte/detailComptePEL","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteEpargneATermeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/helpers","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c,d,m,u,h){var g=r.compile(l),v=p.extend({model:null,template:null,events:{"click .qa-fam3-effvir":"actionEffectuerVirement","click .qa-fam3-AlimAuto":"actionAlimentationAutomatique","click .qa-fam3-releve":"actionReleveEnLigne","click .qa-fam3-masquer":"actionMasquerCompte","click .qa-fam3-contacte":"actionContacterConseiller","click .link-localisation":"actionLocalisation"},initialize:function(){d.log("[ENTER] DetailCompteEpargneATermeView initialize"),this.template=g},sendDetailRequest:function(){d.log("[ENTER] DetailCompteEpargneATermeView sendDetailRequest");var e;e=this.model.get("typeCompte").code===m.rop.codeComptePEL?new s:0===this.model.get(m.udc.inputCodeEcoCompte)?new o:new a,e.setOptions({isNoIntermediate:!0}),e.setArrayCodeSessionLost([-10,"-10"]),e.url=e.url()+"?iban="+this.model.get("key"),e.setArrayCodeErreurTech(["-10",-10]),e.fetchNext({successCallback:"successCallback",errorTechCallback:"errorCallback",errorFoncCallback:"errorCallback"},this)},successCallback:function(e){this.model.set({detail:e},{silent:!0}),u.ifCreditProvisio(this.model.get("typeCompte").code)||this.model.get("detail").set({totalInProgressBar:this.model.get("detail").get("soldeMax"),progressInProgressBar:this.model.get("soldeDispo")},{silent:!0}),this.postRender()},errorCallback:function(){this.postRender()},actionEffectuerVirement:function(){var t={};t[m.udc.paramOutIban]=this.model.get("key"),t.redir="create",e.udcRedirectApi.redirect(m.link.effectuerVirement,t)},actionAlimentationAutomatique:function(){var t={};t[m.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(m.link.fam3AlimentationAutomatique,t)},actionReleveEnLigne:function(){var t={};t[m.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(m.link.fam3ReleveEnLigne,t)},actionMasquerCompte:function(){var t={};t[m.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(m.link.fam3MasquerCompte,t)},actionContacterConseiller:function(){var t={};t[m.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(m.link.fam3ContacterConseiller,t)},actionLocalisation:function(){h.clickLocaliserAgenceRop({libelleFamille:this.model.get("libelleFamille"),isVueTimeline:n(".js-vue-change .active-timeline").hasClass("active")});var t={};t[m.udc.paramOutAgence]=this.model.get("nomAgence"),e.udcRedirectApi.redirect(m.link.fam1Localisation,t)}});return v}),a("text!app/rop/template/pro/detail-compte/detailComptePlacementTemplate.html",[],function(){return'\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right"><a class="link-contrat"><strong>{{ i18n.app.rop.compte.details.libellecontrat }}</strong></a> </span>\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n        <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p> \r\n        \r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>'}),a("app/rop/view/pro/detail-compte/detailComptePlacementView",["underscore","backbone","handlebars","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailComptePlacementTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c){var d=r.compile(a),m=o.extend({model:null,template:null,events:{"click .qa-fam567-arbitrage":"actionArbitrage","click .qa-fam567-compement":"actionVersementsComplementaires","click .qa-fam567-regulier":"actionVersementsReguliers","click .qa-fam567-masquer":"actionMasquerCompte","click .link-localisation":"actionLocalisation","click .link-contrat":"actionContrat"},initialize:function(){p.log("[ENTER] DetailComptePlacementView initialize"),this.template=d},actionArbitrage:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam567Arbitrage,t)},actionVersementsComplementaires:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam567VersementsComplementaires,t)},actionVersementsReguliers:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam567VersementsReguliers,t)},actionMasquerCompte:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam567MasquerCompte,t)},actionLocalisation:function(){c.clickLocaliserAgenceRop({libelleFamille:this.model.get("libelleFamille"),isVueTimeline:n(".js-vue-change .active-timeline").hasClass("active")});var t={};t[l.udc.paramOutAgence]=this.model.get("nomAgence"),e.udcRedirectApi.redirect(l.link.fam1Localisation,t)},actionContrat:function(){var t={};t[l.udc.paramOutContrat]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam1Localisation,t)}});return m}),a("text!app/rop/template/pro/detail-compte/detailCompteTitreTemplate.html",[],function(){return'\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.titulaire }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n        <p>{{ model.titulaire.civilite }} {{ model.titulaire.nom }} {{ model.titulaire.prenom }}</p>  \r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ i18n.app.rop.compte.details.agence }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <span class="pull-right">\r\n            <a class="link-localisation"><strong>{{ i18n.app.rop.compte.details.localiseragence }}</strong></a>\r\n        </span>\r\n        <i class="icon icon-localisation big-icon"></i>\r\n        <p>{{ model.nomAgence }}</p>\r\n    </div>\r\n</div>\r\n\r\n{{!-- Pour le lot 2\r\n<div class="row row-border">\r\n       <div class="col-30">\r\n            <h3>{{ app.rop.compte.details.fam4.ouverture }}</h3>\r\n        </div>\r\n     <div class="col-65">\r\n        <i class="icon icon-big-calendar big-icon"></i>\r\n        <p>?? </p>\r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n   <div class="col-30">\r\n        <h3>{{ app.rop.compte.details.fam4.effet }}</h3>\r\n    </div>\r\n     <div class="col-65">\r\n        <i class="icon icon-big-calendar big-icon"></i>\r\n        <p>?? </p>\r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n    <div class="col-30"><h3>{{ app.rop.compte.details.fam4.versements }}</h3></div>\r\n    <div class="col-65">\r\n        <div class="col-50">\r\n            <i class="icon big-icon">€</i>\r\n            <p>{{ app.rop.compte.details.fam4.depuisouverture }} : <strong>??</strong></p>\r\n        </div>\r\n        <div class="col-50">\r\n            <i class="icon big-icon">€</i>\r\n            <p>{{ app.rop.compte.details.fam4.annee }} : <strong>??</strong></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="row row-border">\r\n    <div class="col-30"><h3>{{ app.rop.compte.details.fam4.retraits }}</h3></div>\r\n    <div class="col-65">\r\n        <div class="col-50">\r\n            <i class="icon big-icon">€</i>\r\n            <p>{{ app.rop.compte.details.fam4.cumul }} <strong>??</strong></p>\r\n        </div>\r\n        <div class="col-50">\r\n            <i class="icon big-icon icon-big-calendar"></i>\r\n            <p>{{ app.rop.compte.details.fam4.premretrait }} <strong>??</strong></p>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row row-border">\r\n    <div class="col-30">\r\n        <h3>{{ app.rop.compte.details.fam4.valorisation }}</h3>\r\n    </div>\r\n    <div class="col-65">\r\n        <i class="icon big-icon"></i>\r\n        <p>?? </p>\r\n    </div>\r\n</div>\r\n--}}'}),a("app/rop/view/pro/detail-compte/detailCompteTitreView",["underscore","backbone","handlebars","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteTitreTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c){var d=r.compile(a),m=o.extend({model:null,template:null,events:{"click .qa-fam4-mouvements":"actionReleveMouvements","click .qa-fam4-carnet":"actionCarnetOrdre","click .qa-fam4-revenus":"actionRevenusEncaisses","click .qa-fam4-passation":"actionPassationOrdre","click .qa-fam4-relever":"actionReleveEnLigne","click .qa-fam4-masquer":"actionMasquerCompte","click .link-localisation":"actionLocalisation"},initialize:function(){p.log("[ENTER] DetailCompteTitreView initialize"),this.template=d},actionReleveMouvements:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4ReleveMouvements,t)},actionCarnetOrdre:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4CarnetOrdre,t)},actionRevenusEncaisses:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4RevenusEncaisses,t)},actionPassationOrdre:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4PassationOrdre,t)},actionReleveEnLigne:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4ReleveEnLigne,t)},actionMasquerCompte:function(){var t={};t[l.udc.paramOutIban]=this.model.get("key"),e.udcRedirectApi.redirect(l.link.fam4MasquerCompte,t)},actionLocalisation:function(){c.clickLocaliserAgenceRop({libelleFamille:this.model.get("libelleFamille"),isVueTimeline:n(".js-vue-change .active-timeline").hasClass("active")});var t={};t[l.udc.paramOutAgence]=this.model.get("nomAgence"),e.udcRedirectApi.redirect(l.link.fam1Localisation,t)}});return m}),a("app/rop/model/detail-compte/detailCompteCreditPret",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/creditPret":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteCreditPret.json"},postParse:function(e){return r.log("[ENTER] DetailCompteCreditPret postParse"),e}});return o}),a("app/rop/model/detail-compte/detailCompteCreditPretPro",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/creditPretPersoPro":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteCreditPretPro.json"},postParse:function(e){return r.log("[ENTER] DetailCompteCreditPret postParse"),e}});return o}),a("app/rop/model/detail-compte/detailCompteCreditConsoProvisio",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/caraccomptes-wspl/rpc/creditConsoProvisio":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/detail-compte/detailCompteCreditConsoProvisio.json"},postParse:function(e){return r.log("[ENTER] DetailCompteCreditConsoProvisio postParse"),e}});return o}),a("text!app/rop/template/pro/detail-compte/detailCompteCreditTemplate.html",[],function(){return'\r\n{{#ifCreditImmo model.typeCompte.code}}\r\n\r\n{{!-- Type de crédit - crédit Immo --}}\r\n\r\n{{#if detail}}\r\n\r\n<div class="row row-border">\r\n		<div class="col-3">\r\n             <i class="icon big-icon">&nbsp;%</i>\r\n             <p>{{ i18n.app.rop.compte.details.fam89.taux }}<br>\r\n             <span class="udc-solde "> {{ formatMontant detail.tauxRemboursement }} %*</span>\r\n             </p>\r\n    \r\n         </div>\r\n         \r\n         <div class="col-3">\r\n             <i class="icon icon-big-calendar big-icon"></i>\r\n             <p>\r\n                  {{ i18n.app.rop.compte.details.fam89.datefin }}<br>\r\n                 <span class="udc-solde ">\r\n                {{ detail.dateEcheanceRemboursement }}\r\n                 </span>\r\n             </p>\r\n         </div>\r\n         <div class="col-3">\r\n             <i class="icon icon-big-calendar big-icon"></i>\r\n             <p>\r\n                 {{ i18n.app.rop.compte.details.fam89.mensualite }}<br>\r\n                 <span class="udc-solde ">\r\n                    {{ detail.nbRemboursementRestant }}/{{ detail.dureeRemboursement }} {{ i18n.app.rop.compte.details.fam89.mois }}\r\n                 </span>\r\n             </p>\r\n         </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <p class="cap info">\r\n        {{ i18n.app.rop.compte.details.fam89.montantcredit }} \r\n        <span class="udc-solde">{{ formatMontant detail.montantPret }} {{getSymboleForDevise model.devise }}</span>\r\n    </p>\r\n    <div class="col-80">\r\n        <figure class="curseur-2 progress-circle-bar">\r\n            <div class="barre-1">\r\n                <div class="graph-circle gc-curseur">\r\n                    <div class="graph-inner">0%</div>\r\n                </div>\r\n            </div>\r\n            <div class="barre-2"></div> \r\n        </figure>\r\n    </div>\r\n    <div class="col-20 montant-rembourse">{{ soustraction detail.montantPret detail.capitalRestant }} {{getSymboleForDevise model.devise }}<br> {{ i18n.app.rop.compte.details.fam89.rembourse }}</div>\r\n</div>\r\n\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-50">\r\n        <div class="row">\r\n			<i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n			<p class="cap info">{{ i18n.app.rop.compte.details.titulaire }}<br>\r\n				<span class="udc-solde">{{ model.titulaire.nom }} {{ model.titulaire.prenom }}</span>\r\n			</p> \r\n		</div>\r\n		\r\n{{#if detail}}\r\n		\r\n		<div class="row">\r\n            <i class="icon icon-big-calendar big-icon"></i>\r\n            <p class="cap info">\r\n                {{ i18n.app.rop.compte.details.fam89.prochain }} <br>\r\n                <span class="udc-solde">\r\n                   {{ detail.dateProchainAmortissement }}\r\n                </span>\r\n            </p>\r\n        </div> \r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.montant }} :</h3>\r\n            <strong class="col-45 text-right">\r\n                {{ formatMontant detail.montantAmortissement }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>	\r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.amorti }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.capitalAmorti }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.interets }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.interetsDus }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.impayes }} :</h3>\r\n             <strong class="col-45 text-right">\r\n            {{ formatMontant detail.impayes }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n{{/if}}\r\n        \r\n	</div>\r\n	\r\n\r\n    <div class="col-50">\r\n        <div class="row">\r\n            <i class="icon icon-localisation big-icon"></i>\r\n            <p class="cap info">{{ i18n.app.rop.compte.details.agence }}<br>\r\n                <span class="udc-solde">{{ model.nomAgence }}</span>\r\n            </p>   \r\n        </div>\r\n        \r\n{{#if detail}}\r\n        \r\n        <div class="row">\r\n            <i class="icon icon-big-calendar big-icon"></i>\r\n            <p class=" info cap">\r\n                {{ i18n.app.rop.compte.details.fam89.caprestant }} <br>\r\n                <span class="udc-solde">\r\n                   {{ formatMontant detail.capitalRestantDuApresAmortissement }} {{getSymboleForDevise model.devise }}\r\n                </span>\r\n            </p>\r\n        </div> \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.assurance }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.assuranceDue }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chremboursees }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.chargesRemboursees }} {{getSymboleForDevise model.devise }} \r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chreportees }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.chargesReportees }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chdues }} :</h3>\r\n             <strong class="col-45 text-right">\r\n                {{ formatMontant detail.chargesDues }} {{getSymboleForDevise model.devise }}\r\n              </strong>\r\n		</div>\r\n{{/if}}\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n	<p class="text-right"><small>{{ i18n.app.rop.compte.details.fam89.annexe }}</small></p>\r\n</div>\r\n        	\r\n{{else}}\r\n{{#ifCreditProvisio model.typeCompte.code}}\r\n\r\n{{!-- Type de crédit - crédit Conso Provisio --}}\r\n\r\n{{#if detail}}\r\n\r\n<div class="row row-border">	\r\n      <div class="col-3">\r\n             <i class="icon big-icon">&nbsp;%</i>\r\n             <p>{{ i18n.app.rop.compte.details.fam89.taux }}<br>\r\n             <span class="udc-solde "> {{ detail.tauxInterets }} %</span>\r\n             </p>\r\n    \r\n         </div>\r\n</div>\r\n\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-50">\r\n        <div class="row">\r\n			<i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n			<p class="cap info">{{ i18n.app.rop.compte.details.titulaire }}<br>\r\n				<span class="udc-solde">{{ model.titulaire.nom }} {{ model.titulaire.prenom }}</span>\r\n			</p> \r\n		</div>\r\n		\r\n{{#if detail}}\r\n		\r\n		<div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.montantdispo }} :</h3>\r\n            <strong class="col-45 text-right">\r\n                {{ formatMontant detail.montantDisponible }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        \r\n{{/if}}\r\n        \r\n	</div>\r\n\r\n    <div class="col-50">\r\n        <div class="row">\r\n            <i class="icon icon-localisation big-icon"></i>\r\n            <p class="cap info">{{ i18n.app.rop.compte.details.agence }}<br>\r\n                <span class="udc-solde">{{ model.nomAgence }}</span>\r\n            </p>   \r\n        </div>\r\n        \r\n{{#if detail}}\r\n        \r\n		<div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.reserve }} :</h3>\r\n            <strong class="col-45 text-right">\r\n                {{ formatMontant detail.montantReserve }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        \r\n{{/if}}\r\n    </div>\r\n</div>\r\n		\r\n{{else}}\r\n\r\n{{!-- Type de crédit - crédit Conso hors Provisio --}}\r\n\r\n{{#if detail}}\r\n\r\n<div class="row row-border">\r\n		<div class="col-3">\r\n             <i class="icon big-icon">&nbsp;%</i>\r\n             <p>{{ i18n.app.rop.compte.details.fam89.taux }}<br>\r\n             <span class="udc-solde "> {{ detail.tauxRemboursement }} %*</span>\r\n             </p>\r\n    \r\n         </div>\r\n         \r\n         <div class="col-3">\r\n             <i class="icon icon-big-calendar big-icon"></i>\r\n             <p>\r\n                  {{ i18n.app.rop.compte.details.fam89.datefin }}<br>\r\n                 <span class="udc-solde ">\r\n                {{ detail.dateEcheanceRemboursement }}\r\n                 </span>\r\n             </p>\r\n         </div>\r\n         <div class="col-3">\r\n             <i class="icon icon-big-calendar big-icon"></i>\r\n             <p>\r\n                 {{ i18n.app.rop.compte.details.fam89.mensualite }}<br>\r\n                 <span class="udc-solde ">\r\n                    {{ detail.nbRemboursementRestant }}/{{ detail.dureeRemboursement }} {{ i18n.app.rop.compte.details.fam89.mois }}\r\n                 </span>\r\n             </p>\r\n         </div>\r\n</div>\r\n\r\n<div class="row">\r\n    <p class="cap info">\r\n        {{ i18n.app.rop.compte.details.fam89.montantcredit }} \r\n        <span class="udc-solde">{{ formatMontant detail.montantPret }} {{getSymboleForDevise model.devise }}</span>\r\n    </p>\r\n    <div class="col-80">\r\n        <figure class="curseur-2 progress-circle-bar">\r\n            <div class="barre-1">\r\n                <div class="graph-circle gc-curseur">\r\n                    <div class="graph-inner">0%</div>\r\n                </div>\r\n            </div>\r\n            <div class="barre-2"></div> \r\n        </figure>\r\n    </div>\r\n    <div class="col-20 montant-rembourse">{{ soustraction detail.montantPret detail.capitalRestant }} {{getSymboleForDevise model.devise }}<br> {{ i18n.app.rop.compte.details.fam89.rembourse }}</div>\r\n</div>\r\n\r\n{{/if}}\r\n\r\n<div class="row row-border">\r\n    <div class="col-50">\r\n        <div class="row">\r\n			<i class="icon big-icon {{getClassForCivilite model.titulaire}}"></i>\r\n			<p class="cap info">{{ i18n.app.rop.compte.details.titulaire }}<br>\r\n				<span class="udc-solde">{{ model.titulaire.nom }} {{ model.titulaire.prenom }}</span>\r\n			</p> \r\n		</div>\r\n		\r\n{{#if detail}}\r\n		\r\n		<div class="row">\r\n            <i class="icon icon-big-calendar big-icon"></i>\r\n            <p class="cap info">\r\n                {{ i18n.app.rop.compte.details.fam89.prochain }} <br>\r\n                <span class="udc-solde">\r\n                   {{ detail.dateProchainAmortissement }}\r\n                </span>\r\n            </p>\r\n        </div> \r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.montant }} :</h3>\r\n            <strong class="col-45 text-right">\r\n                {{ formatMontant detail.montantAmortissement }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>	\r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.amorti }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.capitalAmorti }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.interets }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.interetsDus }} {{getSymboleForDevise model.devise }}</strong>\r\n        </div>\r\n        \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.impayes }} :</h3>\r\n             <strong class="col-45 text-right">\r\n            {{ formatMontant detail.impayes }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n{{/if}}\r\n        \r\n	</div>\r\n	\r\n\r\n    <div class="col-50">\r\n        <div class="row">\r\n            <i class="icon icon-localisation big-icon"></i>\r\n            <p class="cap info">{{ i18n.app.rop.compte.details.agence }}<br>\r\n                <span class="udc-solde">{{ model.nomAgence }}</span>\r\n            </p>   \r\n        </div>\r\n        \r\n{{#if detail}}\r\n        \r\n        <div class="row">\r\n            <i class="icon icon-big-calendar big-icon"></i>\r\n            <p class=" info cap">\r\n                {{ i18n.app.rop.compte.details.fam89.caprestant }} <br>\r\n                <span class="udc-solde">\r\n                   {{ formatMontant detail.capitalRestantDuApresAmortissement }} {{getSymboleForDevise model.devise }}\r\n                </span>\r\n            </p>\r\n        </div> \r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.assurance }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.assuranceDue }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chremboursees }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.chargesRemboursees }} {{getSymboleForDevise model.devise }} \r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chreportees }} :</h3>\r\n            <strong class="col-45 text-right">\r\n               {{ formatMontant detail.chargesReportees }} {{getSymboleForDevise model.devise }}\r\n            </strong>\r\n        </div>\r\n        <div class="row">\r\n            <h3 class="col-55">{{ i18n.app.rop.compte.details.fam89.chdues }} :</h3>\r\n             <strong class="col-45 text-right">\r\n                {{ formatMontant detail.chargesDues }} {{getSymboleForDevise model.devise }}\r\n              </strong>\r\n		</div>\r\n{{/if}}\r\n    </div>\r\n</div>\r\n\r\n<div class="row">\r\n	<p class="text-right"><small>{{ i18n.app.rop.compte.details.fam89.annexe }}</small></p>\r\n</div>\r\n\r\n{{/ifCreditProvisio}}\r\n{{/ifCreditImmo}}\r\n'
}),a("app/rop/view/pro/detail-compte/detailCompteCreditView",["underscore","backbone","handlebars","app/rop/model/detail-compte/detailCompteCreditPret","app/rop/model/detail-compte/detailCompteCreditPretPro","app/rop/model/detail-compte/detailCompteCreditConsoProvisio","app/rop/view/pro/detail-compte/rootDetailCompteView","text!app/rop/template/pro/detail-compte/detailCompteCreditTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/utils/helpers"],function(t,i,r,o,a,n,s,p,l,c,d,m){var u=r.compile(p),h=s.extend({model:null,template:null,events:{"click .qa-fam89-utiliser":"actionUtiliserReserve","click .qa-fam89-rembourser":"actionRembourserReserve"},initialize:function(){c.log("[ENTER] DetailCompteCreditView initialize"),this.template=u},sendDetailRequest:function(){c.log("[ENTER] DetailCompteCreditView sendDetailRequest");var e;e=m.ifCreditProvisio(this.model.get("typeCompte").code)?new n:0===this.model.get(d.rop.inputCodeEcoCompte)||this.model.get("idFamille")===d.rop.familleCreditImmo?new o:new a,e.setOptions({isNoIntermediate:!0}),e.setArrayCodeSessionLost([-10,"-10"]),e.url=e.url()+"?iban="+this.model.get("key"),e.setArrayCodeErreurTech(["-10",-10]),e.fetchNext({successCallback:"successCallback",errorTechCallback:"errorCallback",errorFoncCallback:"errorCallback"},this)},successCallback:function(e){this.model.set({detail:e},{silent:!0}),m.ifCreditProvisio(this.model.get("typeCompte").code)||this.model.get("detail").set({totalInProgressBar:this.model.get("detail").get("montantPret"),progressInProgressBar:this.model.get("detail").get("montantPret")-this.model.get("detail").get("capitalRestant")},{silent:!0}),this.postRender()},errorCallback:function(){this.postRender()},actionUtiliserReserve:function(){var t={};t[d.udc.paramOutIban]=this.model.get("key"),t.redir="create",e.udcRedirectApi.redirect(d.link.effectuerVirement,t)},actionRembourserReserve:function(){var t={};t[d.udc.paramOutIban]=this.model.get("key"),t.redir="create",e.udcRedirectApi.redirect(d.link.effectuerVirement,t)}});return h}),a("app/rop/view/pro/factory/factoryDetailCompteView",["underscore","backbone","app/rop/view/pro/detail-compte/detailCompteChequeView","app/rop/view/pro/detail-compte/detailCompteEpargneDispoCSLThalerView","app/rop/view/pro/detail-compte/detailCompteEpargneDispoView","app/rop/view/pro/detail-compte/detailCompteEpargneATermeView","app/rop/view/pro/detail-compte/detailComptePlacementView","app/rop/view/pro/detail-compte/detailCompteTitreView","app/rop/view/pro/detail-compte/detailCompteCreditView","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a,n,s,p,l,c){var d=t.View.extend({initialize:function(){c.log("[ENTER] FactoryDetailCompteView initialize")},getDetailView:function(e){c.log("[ENTER] FactoryDetailCompteView getDetailView");var t=null;switch(e.idFamilleCompte){case l.rop.familleLiquidite:t=new i(e);break;case l.rop.familleEpargneDispo:t=e.model.get("typeCompte").code===l.rop.codeCompteCSL&&e.model.get("produitOpra")&&e.model.get("offreOpra")?new r(e):new o(e);break;case l.rop.familleEpargneATerme:t=new a(e);break;case l.rop.familleTitre:t=new s(e);break;case l.rop.familleAssuranceVie:case l.rop.familleCapitalisation:case l.rop.familleEpargneRetraite:t=new n(e);break;case l.rop.familleCreditConso:case l.rop.familleCreditImmo:t=new p(e)}return t}});return d}),a("text!app/rop/template/pro/caracteristiqueCompteTemplate.html",[],function(){return"{{!-- \r\n	Template de la vue CaracteristiqueCompteView\r\n--}}\r\n	\r\n<h3>{{i18n.app.rop.caract.titre}}</h3>\r\n"}),a("app/rop/view/pro/caracteristiqueCompteView",["underscore","wrappernext","handlebars","app/rop/view/pro/factory/factoryDetailCompteView","text!app/rop/template/pro/caracteristiqueCompteTemplate.html","app/rop/translate/i18nRop","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a,s,p){var l=t.View.extend({el:".rop-caracteristiques",model:null,collection:null,template:null,events:{},initialize:function(e){p.log("[ENTER] CaracteristiqueCompteView initialize"),this.template=i.compile(o),this.set({cslProduction:e.cslProduction,cslModification:e.cslModification})},render:function(){p.log("[ENTER] CaracteristiqueCompteView render");var e={};e.i18n=(new a).toJSON(),this.detailView&&this.detailView.remove(),n("#rop-caracteristiques").show(),this.$el.html(this.template(e));var t=new r;this.detailView=t.getDetailView({model:this.model,idFamilleCompte:this.model.get("idFamille"),cslProduction:this.get("cslProduction"),cslModification:this.get("cslModification")}),this.detailView.render(),this.$el.append(this.detailView.$el)}});return l}),a("app/rop/view/zonesPubliablesView",["underscore","wrappernext","axes","wcm","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r,o,a){var s=t.View.extend({el:"body",view:null,oldZPelem:null,events:{},initialize:function(){a.log("[ENTER] zonePubliableView initialize"),this.oldZPelem={}},render:function(e){a.log("[ENTER] zonePubliableView render"),this.collection=this.model.get("zonesPubliables"),this.removeOldZP();var t=e.baseId+"Haute",s=e.baseId+"Basse";if(!this.collection||0===this.collection.length)return a.warn("[NEXT] Le service de restitution des zones publiables n'a retourné aucun élément."),void 0;var p=null;void 0!==this.collection.get(t)?(p=this.collection.get(t).get("lien"),r.load(o.autonomy[t],this.model.get("pathPagesTechniques"),i,"written.page",p,!1)):a.warn("[NEXT] Pas d'URL retourné par le service de restitution des zones publiables pour l'id: "+t+".");var l=null;void 0!==this.collection.get(s)?(l=this.collection.get(s).get("lien"),r.load(o.autonomy[s],this.model.get("pathPagesTechniques"),i,"written.page",l,!1)):a.warn("[NEXT] Pas d'URL retourné par le service de restitution des zones publiables pour l'id: "+s+"."),this.oldZPelem.haut=n(o.autonomy[t]),this.oldZPelem.bas=n(o.autonomy[s])},removeOldZP:function(){void 0!==this.oldZPelem.haut&&void 0!==this.oldZPelem.bas&&(this.oldZPelem.haut.html(""),this.oldZPelem.bas.html(""))},setView:function(e){this.view=e,this.undelegateEvents(),this.listenTo(this.view,"changePage",this.render)}});return s}),a("text!app/rop/template/pro/headerAveListeTemplate.html",[],function(){return'{{!-- \r\n	Template de la headerOpAVenirListeView\r\n--}}\r\n<div class="rop-cat">\r\n	<i class="icon-clock-big pull-left"></i>\r\n</div>\r\n<div class="pull-right rop-montant">\r\n	{{#if_eq hasOpeAve 1}}	\r\n	<strong class="js-avenir{{#if_gt model.soldeAVenir 0}} positif{{/if_gt}}">{{formatMontant2 model.soldeAVenir}}</strong> {{getSymboleForDevise model.devise}}\r\n	{{else}}\r\n	<strong class="js-avenir">{{i18n.app.rop.hope.noOpeAVe}}</strong>\r\n	{{/if_eq}}\r\n</div>\r\n<div class="col-30 cap">{{i18n.app.rop.fondation.operation.ave}}</div>\r\n'}),a("app/rop/view/pro/headerAveListeView",["underscore","wrappernext","handlebars","text!app/rop/template/pro/headerAveListeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a){var n=t.View.extend({el:"#header-avenir-rop",model:null,collection:null,template:null,events:{click:"toggleAve"},initialize:function(){a.log("[ENTER] HeaderAveListeView initialize"),this.template=i.compile(r)},render:function(){a.log("[ENTER] HeaderAveListeView render");var e={};e.i18n=(new o).toJSON(),e.hasOpeAve=this.model.operationAvenir&&this.model.operationAvenir.length>0?1:0,e.model=this.model,this.$el.html(this.template(e))},toggleAve:function(){this.trigger("toggleAve")}});return n}),a("text!app/rop/template/pro/aveListeItemTemplate.html",[],function(){return'{{!-- \r\n	Template du aveListeItemView\r\n--}}\r\n<div class="rop-date">	\r\n	{{ i18n.app.rop.pro.operation.date }}<br>\r\n	{{formatDateList model.executionDate}}</div>\r\n<div class="rop-date">\r\n	{{ i18n.app.rop.pro.operation.valeur }}<br>\r\n	{{formatDateList model.valueDate}}\r\n</div>\r\n\r\n<div class="pull-right rop-montant">\r\n    <strong {{#if_gt model.montant 0}}class="positif"{{/if_gt}}>{{formatMontant2 model.montant}} {{getSymboleForDevise model.devise}}</strong>\r\n</div>\r\n<div class="rop-detail pull-left">\r\n    <p>{{model.libelle}}</p>\r\n</div>'}),a("app/rop/view/pro/aveListeItemView",["underscore","wrappernext","handlebars","moment-2.6","text!app/rop/template/pro/aveListeItemTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n){var s=t.View.extend({tagName:"div",className:"row detail js-detail-toggle",model:null,collection:null,template:null,events:{},initialize:function(e){n.log("[ENTER] AveListeItemView initialize"),this.template=i.compile(o),this.lastCo=e.lastCo},render:function(){n.log("[ENTER] AveListeItemView render");var e={};e.model=this.model.toJSON(),e.devise=this.devise,e.i18n=(new a).toJSON(),this.$el.html(this.template(e));var t="";this.lastCo.isAfter(r(this.model.get("dateOperation"),"DD/MM/YYYY"))||(t="op-new"),this.$el.addClass(this.model.get("logo")+" "+t)}});return s}),a("app/rop/view/pro/aveListeRootView",["underscore","wrappernext","handlebars","app/rop/view/pro/aveListeItemView","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a){var n=t.View.extend({tagName:"li",model:null,itemViewArray:null,isDateLayout:null,template:null,itemTemplate:null,lastCo:null,renderList:function(e){a.log("[ENTER] AveListeRootView renderList");var t=this.$el;this.removeOldItemView();for(var i=0;i<e.length;i++){var o=new r({model:e.models[i],template:this.itemTemplate,lastCo:this.lastCo});this.itemViewArray.push(o),t.append(o.$el),o.render()}},toggleAve:function(){a.log("[ENTER] AveListeRootView toggleAve"),this.$(".js-detail-toggle").toggleClass("hidden");var e=this.$(".folder-btn i");e.hasClass("icon-carret-down")?(e.removeClass("icon-carret-down"),e.addClass("icon-carret-up")):(e.addClass("icon-carret-down"),e.removeClass("icon-carret-up"))},removeOldItemView:function(){for(var e=0;e<this.itemViewArray.length;e++)this.stopListening(this.itemViewArray[e]),this.itemViewArray[e].remove();this.itemViewArray=new Array}});return n}),a("text!app/rop/template/pro/aveListeDateTemplate.html",[],function(){return'<div class="row main pointer">\r\n	<div class="rop-calendar">\r\n		<div class="date-JM">\r\n			{{getDay model.date}}<br><span>{{getMonth model.date}}</span>\r\n		</div>\r\n		<span class="badge">{{model.length}}</span>\r\n	</div>\r\n	<div class="pull-right folder-btn"><i class="icon-carret-up"></i></div>\r\n    \r\n    {{#if model.totaux}}\r\n	<div class="pull-right rop-montant">\r\n		<strong {{#if_gt model.totaux 0}} class="positif" {{/if_gt}}>{{formatMontant2 model.totaux}} {{getSymboleForDevise model.devise}}</strong>\r\n	</div>\r\n    {{/if}}\r\n	<p class="pull-left">{{i18n.app.rop.ave.soldePrev}} {{formatMontant model.soldePrevisionnel}} {{getSymboleForDevise model.devise}}</p>\r\n</div>\r\n\r\n<div class="row fleche js-detail-toggle"></div>\r\n'}),a("text!app/rop/template/pro/conteneurAveListeTemplate.html",[],function(){return'{{!-- \r\n	Template du conteneurAveListeView\r\n--}}\r\n<ul id="js-rop-avenir" class="list-rop-avenir">\r\n</ul>'}),a("app/rop/view/pro/aveListeDateView",["underscore","wrappernext","handlebars","app/rop/view/pro/aveListeRootView","app/rop/view/pro/aveListeItemView","text!app/rop/template/pro/aveListeDateTemplate.html","text!app/rop/template/pro/conteneurAveListeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n,s,p){var l=r.extend({tagName:"li",model:null,itemViewArray:null,isDateLayout:null,template:null,itemTemplate:null,events:{click:"toggleAve"},initialize:function(e){p.log("[ENTER] AveListeDateView initialize"),this.isDateLayout=e.isDateLayout,this.lastCo=e.lastCo,this.itemViewArray=new Array,this.template=i.compile(a),this.itemTemplate=i.compile(n)},render:function(){p.log("[ENTER] AveListeDateView render");var e={};e.model=this.model.toJSON(),e.i18n=(new s).toJSON(),this.$el.html(this.template(e)),this.renderList(this.model.get("operations"))}});return l}),a("text!app/rop/template/pro/aveListeTypeTemplate.html",[],function(){return'<div class="row main">\r\n	<div class="rop-cat">\r\n		<i class="{{getIconeForTypeOperation model.typeOperation}}"></i>\r\n		<span class="badge">{{model.length}}</span>\r\n	</div>\r\n    \r\n	<div class="col-20 rop-montant">\r\n		<strong {{#if_gt model.totaux 0}} class="positif" {{/if_gt}}>{{formatMontant2 model.totaux}} {{getSymboleForDevise model.devise}}</strong>\r\n	</div>\r\n	\r\n	<div class="pull-right folder-btn"><i class="icon-carret-up"></i></div>\r\n</div>\r\n\r\n<div class="row fleche js-detail-toggle"></div>\r\n            '}),a("app/rop/view/pro/aveListeTypeView",["underscore","wrappernext","handlebars","app/rop/view/pro/aveListeRootView","app/rop/view/pro/aveListeItemView","text!app/rop/template/pro/aveListeTypeTemplate.html","text!app/rop/template/pro/conteneurAveListeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n,s,p){var l=r.extend({tagName:"li",model:null,itemViewArray:null,isDateLayout:null,template:null,itemTemplate:null,events:{click:"toggleAve"},initialize:function(e){p.log("[ENTER] AveListeTypeView initialize"),this.isDateLayout=e.isDateLayout,this.lastCo=e.lastCo,this.itemViewArray=new Array,this.template=i.compile(a),this.itemTemplate=i.compile(n)},render:function(){p.log("[ENTER] AveListeTypeView render");var e={};e.model=this.model.toJSON(),e.i18n=(new s).toJSON(),this.$el.html(this.template(e)),this.renderList(this.model.get("operations"))}});return l}),a("app/rop/view/pro/conteneurAveListeView",["underscore","wrappernext","handlebars","app/rop/view/pro/aveListeDateView","app/rop/view/pro/aveListeTypeView","text!app/rop/template/pro/conteneurAveListeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o,a,n,s,p){var l=t.View.extend({tagName:"div",id:"template-avenir-rop-pro",className:"handlebar-template-placeholder",model:null,isDateLayout:null,template:null,events:{},initialize:function(e){s.log("[ENTER] ConteneurAveListeView initialize"),this.lastCo=e.lastCo,this.settings=e.settings,this.itemViewArray=new Array,this.template=i.compile(a)},render:function(){s.log("[ENTER] ConteneurAveListeView render");var e={};e.i18n=(new n).toJSON(),this.$el.html(this.template(e)),this.settings.isListLayout?this.renderListParDate():this.renderListParType()},renderListParDate:function(){var e=this.model.get("aveDate");this.settings.isSortOnDateValeur?e.setCollectionForAves(this.model.get("aveType").getAllAves(),p.rop.sortOnValueDate):e.setCollectionForAves(this.model.get("aveType").getAllAves(),p.rop.sortOnExecDate),e.updatePrevisionnel(this.model.get("compte").soldeDispo),this.renderList(e,r)},renderListParType:function(){var e=this.model.get("aveType");this.renderList(e,o)},renderList:function(e,t){s.log("[ENTER] ConteneurAveListeView renderListParType");var i=this.$("ul");this.removeOldItemView();for(var r=0;r<e.length;r++){var o=new t({model:e.models[r],template:this.itemTemplate,lastCo:this.lastCo});this.itemViewArray.push(o),i.append(o.$el),o.render()}},removeOldItemView:function(){for(var e=0;e<this.itemViewArray.length;e++)this.stopListening(this.itemViewArray[e]),this.itemViewArray[e].remove();this.itemViewArray=new Array},setSettings:function(e){this.settings=e,this.render()}});return l}),a("app/rop/view/pro/operationListeItemView",["underscore","wrappernext","handlebars","moment-2.6","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants"],function(e,t,i,r,o){var a=t.View.extend({tagName:"li",className:"row",model:null,views:null,template:null,events:{"click .js-pin-compte":"togglePointage"},initialize:function(e){this.template=e.template,this.lastCo=e.lastCo,this.views={},this.render(),this.listenTo(this.model,"change",this.render)},render:function(){var e={};e.i18n=(new o).toJSON(),e.model=this.model.toJSON();var t="";this.lastCo.isAfter(r(this.model.get("dateOperation"),"DD/MM/YYYY"))||(t="op-new"),this.$el.removeClass().addClass("row").addClass(t).addClass(this.model.get("logo")),this.$el.html(this.template(e))},togglePointage:function(){this.model.set({flagPointage:!0}),this.model.set({pointage:this.model.get("pointage")?0:1}),this.trigger("getPointage",{id:this.model.get("idOperation")})}});return a}),a("text!app/rop/template/pro/operationListeTemplate.html",[],function(){return"{{!-- Commentaire pour le build jenkins. --}}"}),a("text!app/rop/template/pro/operationListeItemTemplate.html",[],function(){return'<div class="rop-cat">\r\n	{{ i18n.app.rop.pro.operation.date }}\r\n	<br>\r\n	{{formatDateList model.montant.executionDate}}\r\n</div>\r\n\r\n<div class="rop-cat">\r\n	{{ i18n.app.rop.pro.operation.valeur }}<br>\r\n	{{formatDateList model.montant.valueDate}}\r\n</div>\r\n                \r\n<div class="rop-detail col-45">\r\n	<p>{{model.libelleOperation}}</p>\r\n	<span class="rop-logo"></span>\r\n</div>\r\n\r\n<div class="rop-action">\r\n	<i class="js-pin-compte icon-pin {{#if_eq model.pointage 1}}pointee active{{/if_eq}}"></i>\r\n</div>\r\n\r\n<div class="col-20 rop-montant pull-right">\r\n	<strong {{#if_gt model.montant.montant 0 }} class="positif"{{/if_gt}}>\r\n        {{formatMontant2 model.montant.montant}} {{getSymboleForDevise model.montant.currency}} \r\n    </strong>\r\n</div>'}),a("app/rop/view/pro/operationListeView",["underscore","wrappernext","handlebars","app/rop/view/pro/operationListeItemView","text!app/rop/template/pro/operationListeTemplate.html","text!app/rop/template/pro/operationListeItemTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/model/connectedUser","app/rop/utils/constants"],function(e,t,i,r,o,a,n,s,p,l){var c=t.View.extend({tagName:"ul",className:"list-rop",collection:null,subCollection:null,itemViewArray:null,settings:null,template:null,itemTemplate:null,events:{},initialize:function(e){s.log("[ENTER] OperationListeView initialize"),this.lastCo=e.lastCo,this.settings=e.settings,this.subCollection=this.collection,this.itemViewArray=new Array,this.template=i.compile(o),this.itemTemplate=i.compile(a)},render:function(){s.log("[ENTER] OperationListeView render");var e={};e.i18n=(new n).toJSON(),this.$el.html(this.template(e)),this.settings&&this.settings.isSortOnDateValeur&&(this.collection=this.collection.clone(),this.collection.sort("dateDeValeurPourFiltrage",l.rop.sortDate)),this.renderList(this.collection)},renderList:function(e){s.log("[ENTER] OperationListeView renderList");var t=this.$el;this.removeOldItemView(),s.log("[INFO] OperationListeView renderList - Taille de la collection: "+e.length);for(var i=0;i<e.length;i++){var o=new r({model:e.models[i],template:this.itemTemplate,lastCo:this.lastCo});this.itemViewArray.push(o),t.append(o.$el),this.listenTo(o,"getPointage",this.pointageChange)}},removeOldItemView:function(){for(var e=0;e<this.itemViewArray.length;e++)this.stopListening(this.itemViewArray[e]),this.itemViewArray[e].remove();this.itemViewArray=new Array},pointageChange:function(e){s.log("[ENTER] OperationListView pointageChange"),this.trigger("pointageChange",e)}});return c}),a("text!app/rop/template/pro/conteneurOperationListeTemplate.html",[],function(){return"{{!-- Commentaire pour le build jenkins. --}}"}),a("app/rop/view/pro/conteneurOperationListeView",["underscore","wrappernext","handlebars","app/rop/view/pro/operationListeView","text!app/rop/template/pro/conteneurOperationListeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n){var s=t.View.extend({tagName:"div",id:"template-liste-rop-pro",className:"handlebar-template-placeholder",collection:null,views:null,template:null,events:{},initialize:function(e){n.log("[ENTER] ConteneurOperationListeView initialize"),this.lastCo=e.lastCo,this.settings=e.settings,this.views={},this.template=i.compile(o)},render:function(){n.log("[ENTER] ConteneurOperationListeView render");var e={};e.i18n=(new a).toJSON(),this.$el.html(this.template(e)),this.views.operationListe=new r({collection:this.collection,settings:this.settings,lastCo:this.lastCo}),this.$el.append(this.views.operationListe.$el),this.views.operationListe.render(),this.views.operationListe.$el.hasClass("js-main-container-list")||this.views.operationListe.$el.addClass("js-main-container-list"),this.listenTo(this.views.operationListe,"pointageChange",this.pointageChange)},pointageChange:function(e){this.trigger("pointageChange",e)}});return s}),a("text!app/rop/template/pro/operationGroupeTemplate.html",[],function(){return"{{getLibelleForOperationType model.operationType.codeFamille}}\r\n{{!-- model.operationType.libelle --}}"}),a("app/rop/view/pro/operationGroupeView",["underscore","wrappernext","handlebars","app/rop/view/pro/operationListeView","text!app/rop/template/pro/operationGroupeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n){var s=t.View.extend({tagName:"h4",className:"rop-ligne-titre",collection:null,views:null,template:null,events:{},initialize:function(e){n.log("[ENTER] OperationGroupeView initialize"),this.lastCo=e.lastCo,this.views={},this.template=i.compile(o)},render:function(){n.log("[ENTER] OperationGroupeView render");var e={};e.model=this.collection.models[0].toJSON(),e.i18n=(new a).toJSON(),this.$el.html(this.template(e)),this.views.operationListe=new r({collection:this.collection,lastCo:this.lastCo}),this.$el.after(this.views.operationListe.$el),this.views.operationListe.render(),this.listenTo(this.views.operationListe,"pointageChange",this.pointageChange)},pointageChange:function(e){this.trigger("pointageChange",e)}});return s}),a("text!app/rop/template/pro/conteneurOperationGroupeTemplate.html",[],function(){return'<div class="js-main-container-list">\r\n\r\n</div>'}),a("app/rop/view/pro/conteneurOperationGroupeView",["underscore","wrappernext","handlebars","app/rop/view/pro/operationGroupeView","text!app/rop/template/pro/conteneurOperationGroupeTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o,a,n){var s=t.View.extend({tagName:"div",id:"template-liste-rop-pro",className:"handlebar-template-placeholder",collection:null,itemViewArray:null,template:null,events:{},initialize:function(e){n.log("[ENTER] ConteneurOperationGroupeView initialize"),this.lastCo=e.lastCo,this.views={},this.template=i.compile(o),this.itemViewArray=new Array},render:function(){n.log("[ENTER] ConteneurOperationGroupeView render");var e={};e.i18n=(new a).toJSON(),this.$el.html(this.template(e));var t=this.collection.group(["codePourGroupe"]);this.renderList(t)},renderList:function(e){n.log("[ENTER] ConteneurOperationGroupeView renderList");var t=this.$(".js-main-container-list");this.removeOldItemView();for(var i=0;i<e.length;i++){var o=new r({collection:e[i],lastCo:this.lastCo});this.itemViewArray.push(o),t.append(o.$el),o.render(),this.listenTo(o,"pointageChange",this.pointageChange)}},removeOldItemView:function(){for(var e=0;e<this.itemViewArray.length;e++)this.stopListening(this.itemViewArray[e]),this.itemViewArray[e].remove();this.itemViewArray=new Array},pointageChange:function(e){this.trigger("pointageChange",e)}});return s}),a("text!app/rop/template/pro/pointageTemplate.html",[],function(){return'{{!-- \r\n	Template de la pointageView\r\n--}}\r\n\r\n\r\n<div class="arrow-right"></div>\r\n<span class="close pull-right js-close-pointage">✕</span>\r\n<h2>\r\n	<i class="icon-pin-big"></i>{{i18n.app.rop.pointage.lib.pointage}} <br>{{i18n.app.rop.pointage.lib.dope}}\r\n</h2>\r\n{{#if_gt flagNbOpe 0}}<h3>{{i18n.app.rop.pointage.lib.from}} {{DateMin}} {{i18n.app.rop.pointage.lib.to}} {{DateMax}}</h3>\r\n{{else}}\r\n{{/if_gt}}\r\n<ul class="list-pointage-rop">\r\n	<li>\r\n		<span class="big-badge red js-pointage-debit-badge">{{TDebCount}}</span> {{i18n.app.rop.pointage.lib.deb}}\r\n		<strong><span class="js-pointage-debit-montant">{{formatMontant TDeb}}</span> {{i18n.app.rop.pointage.lib.devise}}</strong>\r\n	</li>\r\n	<li>\r\n		<span class="big-badge js-pointage-credit-badge">{{TCredCount}}</span> {{i18n.app.rop.pointage.lib.cred}}\r\n		<strong> <span class="js-pointage-credit-montant">{{formatMontant TCred}}</span> {{i18n.app.rop.pointage.lib.devise}}</strong> \r\n	</li>\r\n	<li>\r\n		<span class="big-badge js-pointage-badge-total {{#if_lt TTotal 0}}red{{/if_lt}}">{{TTotalCount}}</span> {{i18n.app.rop.pointage.lib.total}}\r\n		<strong><span class="js-pointage-montant-total">{{formatMontant TTotal}}</span> {{i18n.app.rop.pointage.lib.devise}}</strong>\r\n	</li>\r\n</ul>\r\n<div class="row center">\r\n	<button class="btn-primary js-close-pointage">{{i18n.app.rop.pointage.btn.save}}</button>\r\n</div>'}),a("app/rop/model/savePointage",["underscore","wrappernext","app/rop/utils/constants","app/rop/utils/logger"],function(e,t,i,r){var o=t.ModelAjax.extend({url:function(){return i.local.urlServer?"/rop-wspl/rest/saveCategorieCheckOff":"/static/rop-pro-htmlpl/"+i.local.version+"/app/json/savePointage.json"},postParse:function(e){return r.log("[ENTER] SavePointage postParse"),e}});return o}),a("app/rop/view/pro/pointageView",["underscore","wrappernext","handlebars","moment-2.6","waypoints","sticky","text!app/rop/template/pro/pointageTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/model/savePointage"],function(e,i,r,o,a,s,p,l,c,d,m){var u=i.View.extend({tagName:"aside",className:"rop-pointage",model:null,collection:null,template:null,events:{"click span.js-close-pointage":"removeView","click button.btn-primary":"save"},initialize:function(e){c.log("[ENTER] PointageView initialize"),this.iban=e.iban,this.template=r.compile(p),this.savePointage=new m,this.initValues(),this.listenTo(this.collection,"add",this.pagination),this.set({isFirstRender:!0})},render:function(){c.log("[ENTER] PointageView render");var e={};if(e.i18n=(new l).toJSON(),e.TTotal=this.TDeb+this.TCred,e.TTotalCount=this.TDebCount+this.TCredCount,e.TDeb=this.TDeb,e.TDebCount=this.TDebCount,e.TCred=this.TCred,e.TCredCount=this.TCredCount,e.DateMin=this.DateMin,e.DateMax=this.DateMax,e.flagNbOpe=this.TDebCount+this.TCredCount,this.$el.html(this.template(e)),c.log("[ENTER] PointageView ROP ACTION DESTROY********"),this.get("isFirstRender")&&DeviceSize){var i=DeviceSize.getDeviceState();"mobile"!==i?this.changeWaypointPointage(this.$el,i):this.$el.waypoint("sticky",{wrapper:"<div class='pointage-wrapper pull-right' />"})}var r=this;n(t).on("breakPointReached",function(e,t){r.changeWaypointPointage(r.$el,t)}),this.set({isFirstRender:!1})},changeWaypointPointage:function(e,t){c.log("[ENTER] PointageView changeWaypointPointage"),c.log("[DEVICE STATE] "+t),"desktop"===t||"tablet"===t?this.waypointPointageNoMobile(e):"mobile"===t?this.waypointPointageMobile(e):this.waypointPointageNoMobile(e)},waypointPointageMobile:function(e){c.log("[ENTER] PointageView waypointPointageMobile"),e.waypoint("disable");var t=n(".rop-actions");t.waypoint("destroy"),n(".pointage-wrapper").waypoint("disable"),e.css({width:"100%",top:"auto"})},waypointPointageNoMobile:function(e){c.log("[ENTER] PointageView waypointPointageNoMobile"),e.waypoint("destroy");var t=140;if(e.css("width",200),this.get("isFirstRender")&&e.waypoint("sticky",{wrapper:'<div class="pointage-wrapper pull-right" />',offset:t,handler:function(){e.css("top",t)}}),e.height()<n(".wrapper-rop-1").outerHeight()){var i=n(".rop-actions"),r=t+e.height()+ +n(".section-list-operation").css("paddingBottom").replace("px","")/2;i.waypoint({offset:r,handler:function(t){if("down"===t){var i=parseInt(n(".wrapper-rop-1").css("paddingTop")),r=n(".total-results"),o=r.outerHeight()+parseInt(r.css("marginTop"))+parseInt(r.css("marginBottom")),a=n(".rop-avenir-header"),s=a.outerHeight()+parseInt(a.css("marginTop"))+parseInt(a.css("marginBottom")),p=n("#template-liste-rop"),l=p.outerHeight()+parseInt(p.css("marginTop"));n(".pointage-wrapper").css({top:i+o+s+l-e.height()}),e.removeClass("stuck")}else"up"===t&&(n(".pointage-wrapper").css({top:"auto"}),e.addClass("stuck"))}})}},pointageChanged:function(e){var t=this.collection.get(e),i=t.get("montant");t.get("pointage")==d.rop.pointageValue?this.changeMontant(i,"+"):this.changeMontant(i,"-"),this.render()},pagination:function(){this.initValues(),this.render()},save:function(){c.log("[ENTER] PointageView save");for(var e,t=new Array,i={ibanCrypte:this.iban,operations:t},r=0;r<this.collection.models.length;r++)e=this.collection.models[r],e.get("flagPointage")&&t.push({idOperation:e.get("idOperation"),date:e.get("montant").executionDate.replace(/-/g,""),pointage:[e.get("pointage")]});this.restCall(i),this.initValues(),this.render()},restCall:function(e){c.log("[ENTER] pointageView resetCall"),this.savePointage.setArrayCodeErreurTech(["-10",-10]),this.savePointage.fetchNext({data:e,type:"POST",successCallback:"succesSavePointage"},this)},succesSavePointage:function(){c.log("[ENTER] pointageView succesSavePointage");for(var e=0;e<this.collection.models.length;e++)this.collection.models[e].set({flagPointage:!1});c.log("[EXIT] succesSavePointage"),this.trigger("remove")},removeView:function(){c.log("[ENTER] pointageView removeView"),this.trigger("remove")},initValues:function(){c.log("[ENTER] pointageView initValues"),this.errorCount=0,this.TDebCount=0,this.TCredCount=0,this.TDeb=0,this.TCred=0,this.DateMin=null,this.DateMax=null;for(var e,t=0;t<this.collection.length;t++)e=this.collection.models[t],e.get("pointage")==d.rop.pointageValue&&this.changeMontant(e.get("montant"),"+")},changeMontant:function(e,t){c.log("[ENTER] pointageView changeMontant"),e.montant>0?"+"===t?(this.TCred+=e.montant,this.TCredCount++,this.addDate(e.executionDate)):(this.TCred-=e.montant,this.TCredCount--,this.removeDate(e.executionDate)):"+"===t?(this.TDeb+=e.montant,this.TDebCount++,this.addDate(e.executionDate)):(this.TDeb-=e.montant,this.TDebCount--,this.removeDate(e.executionDate))},addDate:function(e){c.log("[Enter] pointageView addDate"),this.DateMin?o(e,"DD/MM/YYYY").isAfter(o(this.DateMin,"DD/MM/YYYY"))||(this.DateMin=e):this.DateMin=e,this.DateMax?o(e,"DD/MM/YYYY").isAfter(o(this.DateMax,"DD/MM/YYYY"))&&(this.DateMax=e):this.DateMax=e},removeDate:function(e){c.log("[ENTER] pointageView removeDate");var t=!1;if(e===this.DateMax&&(this.DateMax=null,t=!0),e===this.DateMin&&(this.DateMin=null,t=!0),t)for(var i=0;i<this.collection.models.length;i++){var r=this.collection.models[i];r.get("pointage")===d.rop.pointageValue&&this.addDate(r.get("montant").executionDate)}}});return u}),a("app/rop/view/pro/layoutRootView",["underscore","wrappernext","handlebars","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/view/pro/pointageView"],function(e,t,i,r,o,a,n){var s=t.View.extend({initialize:function(e){o.log("[ENTER] layoutRootView initialize"),this.iban=e.iban,this.lastCo=e.lastCo,this.views={},this.models={},this.collections={},this.settings={},this.dataFilter={keyWord:"",noCategoryOnly:!1,pointageOnly:!1},this.settings.layoutOperation={isListLayout:this.model.get("preference").isListLayout(),isSortOnDateValeur:this.model.get("preference").isSortOnDateValeur()},this.settings.isAdvanceSearchOn=!1,this.settings.noMoreOperation=!1,this.initOperationToShow()},triggerErrorTechMessage:function(e){this.trigger("errorTech",e)},triggerErrorFoncMessage:function(e){this.trigger("errorFonc",e)},hideBtnMore:function(){this.$("div.row-button").hide()},showBtnMore:function(){this.settings.noMoreOperation||this.$("div.row-button").show()},showMoreOperations:function(){this.$(".row-button span").addClass("sm-loader"),this.dataFilter={noCategoryOnly:!1,pointageOnly:!1},this.views.infoFilter.reset(),this.trigger("showMoreOperation")},renderPointageView:function(){o.log("[ENTER] layoutRootView renderPointageView"),this.views.pointage=new n({collection:this.collections.OpPasseesWithPaginate,iban:this.model.get("compte").key}),this.$el.before(this.views.pointage.$el),this.views.pointage.render(),this.$el.addClass("pointage-on"),this.listenTo(this.views.pointage,"remove",this.removePointageView)
},initOperationToShow:function(){this.collections.OpPasseesWithPaginate&&this.stopListening(this.collections.OpPasseesWithPaginate),this.collections.OpPasseesWithPaginate=this.collection,this.collections.OpPasseesToShow=this.collections.OpPasseesWithPaginate,this.listenTo(this.collections.OpPasseesWithPaginate,"add",this.switchLayoutOperation)},removePointageView:function(){o.log("[ENTER] layoutRootView removePointageView"),this.$(".wrapper-main-rop-list"),this.stopListening(this.views.pointage),this.views.pointage.$el.remove(),this.views.pointage=null,this.$el.removeClass("pointage-on")},renderAdvanceResearch:function(){this.showBtnMore(!0),this.initOperationToShow(),this.switchLayoutOperation()},endOfCollection:function(){this.settings.noMoreOperation=!0,this.hideBtnMore()},filterOpByKeyword:function(e){this.dataFilter.keyWord=e,this.filterOpBy()},filterOpBy:function(){var e=[a.rop.filterCategorie,a.rop.filterLibelleOperation,a.rop.filterIdOperation,a.rop.filterDateExecution,a.rop.filterCategories],t=this.collections.OpPasseesWithPaginate.keyWordFilter(this.dataFilter.keyWord,e),i=t.clone();this.dataFilter.noCategoryOnly&&(i.reset(t.where({idCategorie:a.rop.catDebitValue})),i.add(t.where({idCategorie:a.rop.catCreditValue}))),this.dataFilter.pointageOnly&&i.reset(i.where({pointage:1})),this.collections.OpPasseesToShow=i,this.switchLayoutOperation(),this.views.infoFilter.setNbResult(i.length)},goToAveLayout:function(e){o.log("[ENTER] LayoutRootView goToAveLayout"),this.$(e.currentTarget),this.trigger("goToAveLayout")},goToOperationLayout:function(){o.log("[ENTER] LayoutRootView goToOperationLayout"),this.trigger("goToOperationLayout")},pointageChange:function(e){o.log("[ENTER] LayoutRootView pointageChange"),this.views.pointage?this.views.pointage.pointageChanged(e.id):this.renderPointageView(),this.trigger("pointageChange",e)}});return s}),a("app/rop/view/pro/infoFilterView",["underscore","wrappernext","handlebars","app/rop/translate/i18nRop","app/rop/utils/logger"],function(e,t,i,r,o){var a=t.View.extend({el:null,filterElem:null,nbResult:null,events:{},initialize:function(e){o.log("[ENTER] InfoFilterView initialize"),this.filterElem=e.filterElem},render:function(){o.log("[ENTER] InfoFilterView render");var e=(new r).toJSON(),t=n(this.filterElem);void 0===t.val()||"undefined"===this.filterElem.val()||""===t.val()?this.$el.html(""):this.nbResult>1?this.$el.html(this.nbResult+" "+e.app.rop.search.text.filter.multi):1===this.nbResult?this.$el.html(e.app.rop.search.text.filter.simple):this.$el.html(e.app.rop.search.text.filter.none)},setNbResult:function(e){this.nbResult=e,this.render()},reset:function(){this.$el.html("")}});return a}),a("text!app/rop/template/pro/layoutOperationListTemplate.html",[],function(){return'{{!-- \r\n	Conteneur pour le résultat du filtrage\r\n	\r\n	View: infoFilterView\r\n--}}\r\n\r\n<div id="total-results" class="total-results"></div>\r\n\r\n{{!-- \r\n	Conteneur pour les informations complémentaires\r\n	\r\n	Note:\r\n		Informations sur les opérations à catégoriser et les opérations\r\n		à pointées.\r\n	\r\n	View: headerOperationListeView\r\n	\r\n	<div class="row tri header-operation-liste"></div>\r\n--}}\r\n	\r\n\r\n	{{#if model.isAve }}\r\n		<a href="javascript: (function() {})();" class="row rop-avenir-header">\r\n			<i class="icon-clock-big pull-left"></i>\r\n			<span class="cap">\r\n				{{ i18n.app.rop.fondation.operation.voirave }}\r\n			</span>\r\n			<i class="icon-carret-right pull-right"></i>\r\n			<span class="pull-right avenir-montant">\r\n				<span class="js-avenir">\r\n					{{formatMontant2 model.compte.soldeAVenir}}\r\n				</span> \r\n				{{getSymboleForDevise model.compte.devise}}\r\n			</span>\r\n		</a>\r\n	{{else}}\r\n		<a href="javascript: (function() {})();" class="row rop-avenir-header noAVE">\r\n			<i class="icon-clock-big pull-left"></i>\r\n			<span class="cap">\r\n				{{ i18n.app.rop.fondation.operation.noave }}\r\n			</span>\r\n		</a>\r\n	{{/if}}\r\n	<br>\r\n{{!-- \r\n	Conteneur pour la liste des opérations à venir\r\n	\r\n	View: conteneurOpAVenirView\r\n	\r\n	<div id="template-avenir-rop" class="handlebar-template-placeholder"></div>\r\n--}}\r\n\r\n\r\n{{!-- \r\n	Conteneur pour la liste des opérations\r\n	\r\n	View: conteneurOperationsView\r\n	\r\n	<div id="template-liste-rop" class="handlebar-template-placeholder"></div>\r\n--}}\r\n\r\n\r\n\r\n<div class="row-button">\r\n	<span></span>\r\n	{{!--<button class="btn-large btn-more-operation">{{i18n.app.rop.rech.op.lib.affmore}}</button>--}}\r\n</div>\r\n'}),a("app/rop/view/pro/layoutOperationListView",["underscore","wrappernext","handlebars","app/rop/view/pro/headerAveListeView","app/rop/view/pro/conteneurAveListeView","app/rop/view/pro/conteneurOperationListeView","app/rop/view/pro/conteneurOperationGroupeView","app/rop/view/pro/pointageView","app/rop/view/pro/layoutRootView","app/rop/view/pro/infoFilterView","text!app/rop/template/pro/layoutOperationListTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/view/erreurFoncView"],function(e,t,i,r,o,a,s,p,l,c,d,m,u,h,g){var v=l.extend({tagName:"div",className:"wrapper-rop-1 list section-list-operation",model:null,views:null,models:null,collections:null,settings:null,dataFilter:null,template:null,events:{"click .btn-more-operation":"showMoreOperations","click a.rop-avenir-header":"goToAveLayout"},initialize:function(e){u.log("[ENTER] LayoutOperationListView initialize"),this.iban=e.iban,this.lastCo=e.lastCo,this.views={},this.models={},this.collections={},this.settings={},this.dataFilter={keyWord:"",noCategoryOnly:!1,pointageOnly:!1},this.set({selectedCompte:e.selectedCompte}),this.settings.layoutOperation={isListLayout:this.model.get("preference").isListLayout(),isSortOnDateValeur:this.model.get("preference").isSortOnDateValeur()},this.settings.noMoreOperation=!1,this.initOperationToShow(),this.template=i.compile(d)},initOperationToShow:function(){this.collections.OpPasseesWithPaginate&&this.stopListening(this.collections.OpPasseesWithPaginate),this.collections.OpPasseesWithPaginate=this.collection,this.collections.OpPasseesToShow=this.collections.OpPasseesWithPaginate,this.listenTo(this.collections.OpPasseesWithPaginate,"add",this.switchLayoutOperation)},render:function(){u.log("[ENTER] LayoutOperationListView render");var e={};if(e.i18n=(new m).toJSON(),e.model=this.model.toJSON(),e.hasOpePass=this.model.get("compte").operationPassee&&this.model.get("compte").operationPassee.length>0?1:0,u.log(e),this.$el.html(this.template(e)),this.views.headerAveListe=new r({model:this.model.get("compte")}),this.views.headerAveListe.render(),this.views.infoFilter=new c({el:n("#total-results"),filterElem:n("#input-search-rop")}),this.switchLayoutOperation(),this.model.get("compte").operationPassee&&0===this.model.get("compte").operationPassee.length){var i=new t.BusinessMessage({message:e.i18n.app.rop.listeOpe.noOpe});this.views.errorNoOp=new g({model:i}),this.views.errorNoOp.render(),this.$("#header-avenir-rop").after(this.views.errorNoOp.$el)}},toggleRenderOpAvenirListe:function(){u.log("[ENTER] LayoutOperationListView toggleRenderOpAvenirListe"),0===this.$("#template-avenir-rop-pro").length?(this.views.conteneurAveListe=new o({model:this.model,settings:this.settings.layoutOperation,lastCo:this.lastCo}),this.$("#header-avenir-rop").after(this.views.conteneurAveListe.$el),this.$("#header-avenir-rop").addClass("active"),this.views.conteneurAveListe.render()):(this.views.conteneurAveListe.remove(),this.$("#header-avenir-rop").removeClass("active"))},switchLayoutOperation:function(){u.log("[ENTER] LayoutOperationListView switchLayoutOperation");var e=this.settings.layoutOperation;this.views.layoutOperations&&this.views.layoutOperations.remove(),this.$(".row-button span").removeClass("sm-loader"),this.views.errorNoOp&&this.collections.OpPasseesToShow.length>0&&this.views.errorNoOp.remove(),e.isListLayout?(u.log("[INFO] LayoutOperationListView switchLayoutOperation - Affichage de la liste des opérations."),this.views.layoutOperations=new a({collection:this.collections.OpPasseesToShow,settings:e,lastCo:this.lastCo}),this.hideBtnMore()):(u.log("[INFO] LayoutOperationListView switchLayoutOperation - Affichage des opérations par groupe."),this.views.layoutOperations=new s({collection:this.collections.OpPasseesToShow,lastCo:this.lastCo}),this.hideBtnMore()),this.views.layoutOperations.render(),this.$(".row-button").before(this.views.layoutOperations.$el),this.listenTo(this.views.layoutOperations,"pointageChange",this.pointageChange),this.views.infoFilter.setNbResult(this.collections.OpPasseesToShow.length),0!=n("#input-search-date-from").length&&(void 0===this.views.infoSearch&&(this.views.infoSearch=new c({el:n("#total-results"),filterElem:n("#input-search-date-from")})),this.views.infoSearch.setNbResult(this.collections.OpPasseesToShow.length))},filterOpByKeyword:function(e){this.dataFilter.keyWord=e,this.filterOpBy()},filtrerOpByLink:function(e){void 0!==e.noCategoryOnly&&(this.dataFilter.noCategoryOnly=e.noCategoryOnly),void 0!==e.pointageOnly&&(this.dataFilter.pointageOnly=e.pointageOnly),this.filterOpBy()},filterOpBy:function(){var e=[h.rop.filterCategorie,h.rop.filterLibelleOperation,h.rop.filterIdOperation,h.rop.filterDateExecution,h.rop.filterCategories],t=this.collections.OpPasseesWithPaginate.keyWordFilter(this.dataFilter.keyWord,e),i=t.clone();this.dataFilter.noCategoryOnly&&(i.reset(t.where({idCategorie:h.rop.catDebitValue})),i.add(t.where({idCategorie:h.rop.catCreditValue}))),this.dataFilter.pointageOnly&&i.reset(i.where({pointage:1})),this.collections.OpPasseesToShow=i,this.switchLayoutOperation(),this.views.infoFilter.setNbResult(i.length),u.log(t.where({pointage:1}).length),this.set({nbOpPointes:t.where({pointage:1}).length})},sortOpBy:function(e){switch(e){case h.rop.sortOpByList:this.settings.layoutOperation={isListLayout:!0,isSortOnDateValeur:!1};break;case h.rop.sortOpByGroup:this.settings.layoutOperation={isListLayout:!1,isSortOnDateValeur:!1};break;case h.rop.sortOpByDateValeur:this.settings.layoutOperation={isListLayout:!0,isSortOnDateValeur:!0}}this.switchLayoutOperation(),this.views.conteneurAveListe&&this.views.conteneurAveListe.setSettings(this.settings.layoutOperation)},renderPointageView:function(){u.log("[ENTER] LayoutOperationListView renderPointageView"),this.views.pointage=new p({collection:this.collections.OpPasseesWithPaginate,iban:this.model.get("compte").key}),this.$el.before(this.views.pointage.$el),this.views.pointage.render(),this.$el.addClass("pointage-on"),this.listenTo(this.views.pointage,"remove",this.removeViewHandler)},removeViewHandler:function(){u.log("[ENTER] LayoutOperationListView removeViewHandler"),this.trigger("removePointageView")},removePointageView:function(){u.log("[ENTER] LayoutOperationListView removePointageView"),this.$(".wrapper-main-rop-list"),this.stopListening(this.views.pointage),this.views.pointage.$el.remove(),this.views.pointage=null,this.$el.removeClass("pointage-on")},showMoreOperations:function(){this.$(".row-button span").addClass("sm-loader"),this.dataFilter={noCategoryOnly:!1,pointageOnly:!1},this.views.infoFilter.reset(),this.trigger("showMoreOperation")},renderAdvanceResearch:function(){this.showBtnMore(!0),this.initOperationToShow(),this.views.infoFilter.reset(),this.switchLayoutOperation()},endOfCollection:function(){this.settings.noMoreOperation=!0,this.hideBtnMore()},hideBtnMore:function(){this.$("div.row-button").hide()},showBtnMore:function(){this.settings.noMoreOperation||this.$("div.row-button").show()}});return v}),a("text!app/rop/template/pro/layoutAveListTemplate.html",[],function(){return'	{{!-- \r\n		Conteneur pour le résultat du filtrage\r\n		\r\n		View: infoFilterView\r\n	--}}\r\n	<div id="total-results" class="total-results"></div>\r\n	\r\n	{{!-- \r\n		Lien de changement de layout\r\n		Des aves vers les opérations.\r\n	--}}\r\n	<a href="javascript: (function() {})();" class="row rop-avenir-header">\r\n		<div class="pull-left cap">\r\n			{{ i18n.app.rop.fondation.operation.comptabilises }}\r\n		</div>\r\n		<div class="pull-right folder-btn">\r\n			<i class="icon-carret-right"></i>\r\n		</div>\r\n	</a>\r\n	<br>\r\n	\r\n	{{!-- \r\n		Entête des aves\r\n	--}}\r\n	<header id="header-avenir-rop" class="row rop-avenir-header active">\r\n	</header>\r\n	\r\n	{{!--\r\n		Conteneur pour la liste des aves\r\n	--}}\r\n	<div id="template-avenir-rop" class="handlebar-template-placeholder">\r\n	</div>\r\n'}),a("app/rop/view/pro/layoutAveListView",["underscore","wrappernext","handlebars","app/rop/view/pro/headerAveListeView","app/rop/view/pro/conteneurAveListeView","app/rop/view/pro/pointageView","app/rop/view/pro/layoutRootView","app/rop/view/pro/infoFilterView","text!app/rop/template/pro/layoutAveListTemplate.html","app/rop/translate/i18nRop","app/rop/utils/logger","app/rop/utils/constants","app/rop/view/erreurFoncView"],function(e,t,i,r,o,a,s,p,l,c,d,m,u){var h=s.extend({tagName:"div",className:"wrapper-rop-1 list section-list-operation avenir",model:null,views:null,models:null,collections:null,settings:null,dataFilter:null,template:null,events:{"click .btn-more-operation":"showMoreOperations","click a.rop-avenir-header":"goToOperationLayout"},initialize:function(e){d.log("[ENTER] LayoutAveListView initialize"),this.iban=e.iban,this.lastCo=e.lastCo,this.views={},this.models={},this.collections={},this.settings={},this.dataFilter={keyWord:"",noCategoryOnly:!1,pointageOnly:!1},this.set({selectedCompte:e.selectedCompte}),this.settings.layoutOperation={isListLayout:this.model.get("preference").isListLayout(),isSortOnDateValeur:this.model.get("preference").isSortOnDateValeur()},this.settings.noMoreOperation=!1,this.template=i.compile(l)},render:function(){d.log("[ENTER] LayoutAveListView render");var e={};if(e.i18n=(new c).toJSON(),e.hasOpePass=this.model.get("compte").operationPassee&&this.model.get("compte").operationPassee.length>0?1:0,this.$el.html(this.template(e)),this.views.headerAveListe=new r({model:this.model.get("compte")}),this.views.headerAveListe.render(),this.toggleRenderOpAvenirListe(),this.views.infoFilter=new p({el:n("#total-results"),filterElem:n("#input-search-rop")}),this.views.infoSearch=new p({el:n("#total-results"),filterElem:n("#input-search-date-from")}),this.model.get("compte").operationPassee&&0===this.model.get("compte").operationPassee.length){var i=new t.BusinessMessage({message:e.i18n.app.rop.listeOpe.noOpe});this.views.errorNoOp=new u({model:i}),this.views.errorNoOp.render(),this.$("#header-avenir-rop").after(this.views.errorNoOp.$el)}},toggleRenderOpAvenirListe:function(){d.log("[ENTER] LayoutAveListView toggleRenderOpAvenirListe"),0===this.$("#template-avenir-rop-pro").length?(this.views.conteneurAveListe=new o({model:this.model,settings:this.settings.layoutOperation,lastCo:this.lastCo}),this.$("#header-avenir-rop").after(this.views.conteneurAveListe.$el),this.$("#header-avenir-rop").addClass("active"),this.views.conteneurAveListe.render()):(this.views.conteneurAveListe.remove(),this.$("#header-avenir-rop").removeClass("active"))},filterOpByKeyword:function(e){this.dataFilter.keyWord=e,this.filterOpBy()},filtrerOpByLink:function(e){void 0!==e.noCategoryOnly&&(this.dataFilter.noCategoryOnly=e.noCategoryOnly),void 0!==e.pointageOnly&&(this.dataFilter.pointageOnly=e.pointageOnly),this.filterOpBy()},filterOpBy:function(){var e=[m.rop.filterCategorie,m.rop.filterLibelleOperation,m.rop.filterIdOperation,m.rop.filterDateExecution,m.rop.filterCategories],t=this.collections.OpPasseesWithPaginate.keyWordFilter(this.dataFilter.keyWord,e),i=t.clone();this.dataFilter.noCategoryOnly&&(i.reset(t.where({idCategorie:m.rop.catDebitValue})),i.add(t.where({idCategorie:m.rop.catCreditValue}))),this.dataFilter.pointageOnly&&i.reset(i.where({pointage:1})),this.collections.OpPasseesToShow=i,this.views.infoFilter.setNbResult(i.length)},sortOpBy:function(e){switch(e){case m.rop.sortOpByList:this.settings.layoutOperation={isListLayout:!0,isSortOnDateValeur:!1};break;case m.rop.sortOpByGroup:this.settings.layoutOperation={isListLayout:!1,isSortOnDateValeur:!1};break;case m.rop.sortOpByDateValeur:this.settings.layoutOperation={isListLayout:!0,isSortOnDateValeur:!0}}this.views.conteneurAveListe&&this.views.conteneurAveListe.setSettings(this.settings.layoutOperation)},renderPointageView:function(){d.log("[ENTER] LayoutAveListView renderPointageView"),this.views.pointage=new a({collection:this.collections.OpPasseesWithPaginate,iban:this.model.get("compte").key}),this.$el.before(this.views.pointage.$el),this.views.pointage.render(),this.$el.addClass("pointage-on"),this.listenTo(this.views.pointage,"remove",this.removePointageView)},removePointageView:function(){d.log("[ENTER] LayoutAveListView removePointageView"),this.$(".wrapper-main-rop-list"),this.stopListening(this.views.pointage),this.views.pointage.$el.parent().remove(),this.views.pointage=null,this.$el.removeClass("pointage-on")},showMoreOperations:function(){this.$(".row-button span").addClass("sm-loader"),this.dataFilter={noCategoryOnly:!1,pointageOnly:!1},this.views.infoFilter.reset(),this.trigger("showMoreOperation")},pointageChange:function(e){d.log("[ENTER] LayoutAveListView pointageChange"),this.views.pointage?this.views.pointage.pointageChanged(e.id):this.renderPointageView()},renderAdvanceResearch:function(){this.showBtnMore(!0),this.initOperationToShow(),this.views.infoFilter.reset()},endOfCollection:function(){this.settings.noMoreOperation=!0,this.hideBtnMore()},hideBtnMore:function(){this.$("div.row-button").hide()},showBtnMore:function(){this.settings.noMoreOperation||this.$("div.row-button").show()}});return h}),a("app/rop/dispatcher/pro/dispatcher",["underscore","wrappernext","moment-2.6","app/rop/model/initRop","app/rop/model/initUdc","app/rop/model/ropParameter","app/rop/model/savePreference","app/rop/model/meteo","app/rop/model/pagination","app/rop/model/initialisationZonesPubliables","app/rop/collection/comptes","app/rop/view/pro/fondationsView","app/rop/view/pro/headerView","app/rop/view/pro/navigationView","app/rop/view/pro/meteoView","app/rop/view/pro/filterView","app/rop/view/pro/rechercheAvanceeView","app/rop/view/pro/actionsRapidesView","app/rop/view/pro/caracteristiqueCompteView","app/rop/view/erreurTechView","app/rop/view/erreurFoncView","app/rop/view/zonesPubliablesView","app/rop/view/pro/layoutOperationListView","app/rop/view/pro/layoutAveListView","app/rop/view/pro/pointageView","app/rop/view/pro/operationListeItemView","app/rop/utils/constants","app/rop/utils/logger","app/rop/utils/helpers","app/rop/translate/i18nRop","app/rop/utils/tagguage"],function(t,i,r,o,a,s,p,l,c,d,m,u,h,g,v,f,w,b,C,T,E,R,y,O,A,V,P,L,D,N,M){var x=i.Dispatcher.extend({el:null,views:null,models:null,collections:null,flags:null,urlParams:null,initialize:function(t){L.log("[ENTER] Dispatcher initialize"),this.views={},this.models={},this.collections={},this.flags={isDataUdcReady:!1,isDataRopReady:!1,isErrorService:!1},this.set({isDetailsShown:!1,isAveLayout:!1,isPointageVisible:!1}),this.initParams(t.urlParams),this.models.ropParams=new s({ibanCrypte:this.urlParams[P.rop.paramTypeIban],pastOrPending:1,triAV:0}),this.models.initUdc=new a,this.models.initRop=new o,this.models.meteo=new l,this.models.initZonesPubliables=new d,this.views.zonesPubliables=new R({model:this.models.initZonesPubliables}),this.sendInitRopRequest(),e.checkStatus&&checkStatus()},initParams:function(e){L.log("[ENTER] Dispatcher initParams"),this.urlParams=e,this.urlParams[P.rop.paramTypeAction]||(this.urlParams[P.rop.paramTypeAction]=P.rop.typeActionMesComptes);var t=!1,i="";this.urlParams[P.rop.paramTypeIban]&&(i=this.urlParams[P.rop.paramTypeIban]);var r=(new N).toJSON();e[P.rop.paramTypeAction]===r.app.rop.menu.luckyme&&(t=!0),this.set({ibanCrypte:i,avenir:e[P.rop.paramTypeAction],isLuckyMe:t}),L.log(this.urlParams),this.listenTo(this.statesDispatcher,"change:isAveLayout",this.renderRop),this.listenTo(this.statesDispatcher,"change:isTimelineLayout",this.renderRop)},initRedirection:function(){var t=this.models.initUdc.get("urlAiguillage"),r={};this.urlParams.iban&&(r.iban=this.urlParams.iban);var o=new i.UrlRedirection(t,r);e.udcRedirectApi=o},initFamillesCompte:function(){L.log("[ENTER] Dispatcher initFamillesCompte");var e=this.models.initUdc.get("familleCompte");this.collections.familleCompteToDisplay=e},initPagination:function(){this.models.pagination&&this.stopListening(this.models.pagination),this.models.pagination=new c({iban:this.models.initRop.get("compte").key,today:this.models.initRop.get("dateDuJour")}),this.models.pagination.setIncrement(this.models.initRop.get("pagination")),this.models.pagination.setCollection(this.collections.OpPassees),this.listenTo(this.models.pagination,"errorTech",this.renderErrorTechMessage),this.listenTo(this.models.pagination,"errorFonc",this.renderErrorFoncMessage)},initOperationForPagination:function(){this.collections.OpPasseesWithPaginate&&this.stopListening(this.collections.OpPasseesWithPaginate),this.collections.OpPasseesWithPaginate=this.models.pagination.getCollectionToShow()},sendInitRopRequest:function(){L.log("[ENTER] Dispatcher sendInitRopRequest");var e=this.models.ropParams.toJSON();this.models.initRop.setArrayCodeErreurTech(["-10",-10]),this.models.initRop.fetchNext({data:e,type:"POST",successCallback:"syncFirstAjaxRequest",errorTechCallback:"renderErrorTechMessage",errorFoncCallback:"renderErrorFoncMessage"},this)},sendRopRequest:function(){L.log("[ENTER] Dispatcher sendInitRopRequest");var e=this.models.ropParams.toJSON();this.models.initRop.setArrayCodeErreurTech(["-10",-10]),this.models.initRop.fetchNext({data:e,type:"POST",successCallback:"renderRop",errorTechCallback:"renderErrorTechMessage",errorFoncCallback:"renderErrorFoncMessage"},this)},syncFirstAjaxRequest:function(){L.log("[ENTER] Dispatcher syncFirstAjaxRequest"),this.views.fondationsView=new u({el:this.$el}),this.views.fondationsView.render(),this.models.initUdc=this.models.initRop.get("infoUdc"),this.models.meteo=this.models.initRop.get("meteo"),this.flags.isDataUdcReady=!0,this.lastCo=this.models.initUdc.get("titulaireConnecte").get("derniereConnexion").substr(0,10),this.lastCo=r(this.lastCo,"DD/MM/YYYY"),""===this.get("ibanCrypte")&&(this.set({ibanCrypte:this.models.initRop.get("compte").key}),this.models.ropParams=new s({ibanCrypte:this.get("ibanCrypte"),pastOrPending:1,triAV:0})),this.initRedirection(),this.initFamillesCompte(),this.collections.comptesToDisplay=new m,this.collections.comptesToDisplay.setComptesFromFamilles(this.collections.familleCompteToDisplay),this.isIbanValid()&&(this.renderUdc(),this.renderRop())},isIbanValid:function(){L.log("[ENTER] Dispatcher isIbanValid");var e=this.collections.comptesToDisplay.get(this.get("ibanCrypte"));if(!e){L.error("[ERROR] Dispatcher - isIbanValid : L'iban de l'url n'existe pas dans les comptes de l'utilisateur.");var t=(new N).toJSON(),r=new i.BusinessMessage({message:t.app.rop.business.message.ibancrypte.incorrect});return this.renderErrorFoncMessage(r),!1}return this.set({selectedCompte:e}),!0},renderRop:function(){if(L.log("[ENTER] Dispatcher renderRop"),this.collections.OpPassees=this.models.initRop.get("operationPassee"),this.get("isLuckyMe")){var e=this.models.initRop.get("operationPassee").where({logo:P.rop.logoClassLucky});this.collections.OpPassees.reset(e)}this.collections.OpPasseesWithPaginate=this.collections.OpPassees,this.views.filter&&(this.stopListening(this.views.filter),this.views.filter.remove()),this.views.filter=new f({model:this.models.initRop.get("preference"),collection:this.collections.OpPassees,states:this.statesDispatcher}),this.views.header.$el.after(this.views.filter.$el),this.views.filter.render(),this.views.rechercheAvancee&&(this.stopListening(this.views.rechercheAvancee),this.views.rechercheAvancee.remove()),this.get("isRechercheAvanceeVisible")&&this.toggleRenderRechercheAvancee(),this.views.actionsRapides?(this.views.caracteristiqueCompte=null,this.views.actionsRapides.set({collection:this.collections.comptesToDisplay,cslProduction:this.models.initUdc.get("cslProduction"),iban:this.get("ibanCrypte")})):this.views.actionsRapides=new b({collection:this.collections.comptesToDisplay,cslProduction:this.models.initUdc.get("cslProduction"),iban:this.get("ibanCrypte")}),this.views.actionsRapides.render(),n(".rop-caracteristiques").is(":visible")&&n(".rop-caracteristiques").toggle(),"ave"===this.get("avenir")&&(this.switchToAveLayout(),delete this.statesDispatcher.attributes.avenir),this.switchMainLayoutView({switchToMainListeLayout:!0}),this.listenTo(this.views.filter,"toggleAdvSearch",this.toggleRenderRechercheAvancee),this.listenTo(this.views.filter,"filterMainLayout",this.filterMainLayoutView),this.listenTo(this.views.filter,"sortMainLayout",this.sortMainLayoutView),this.listenTo(this.views.filter,"switchMainLayout",this.switchMainLayoutView),this.listenTo(this.views.filter,"quickFilters",this.filtrerOpByLink),this.listenTo(this.views.filter,"togglePointageView",this.togglePointageView),this.listenTo(this.views.actionsRapides,"showAccountDetails",this.etatCaracteristiques)},etatCaracteristiques:function(){L.log("[ENTER] Dispatcher etatCaracteristiques"),this.get("isDetailsShown")===!0?(this.set({isDetailsShown:!1}),n(".rop-caracteristiques").toggle()):(this.set({isDetailsShown:!0}),this.renderDetailsCompte())},renderDetailsCompte:function(){L.log("[ENTER] Dispatcher renderDetailsCompte"),this.views.caracteristiqueCompte?n(".rop-caracteristiques").toggle():(this.views.caracteristiqueCompte=new C({model:this.collections.comptesToDisplay.get(this.get("ibanCrypte")),cslProduction:this.models.initUdc.get("cslProduction"),cslModification:this.models.initUdc.get("cslModification")}),this.views.caracteristiqueCompte.render())},renderUdc:function(){L.log("[ENTER] Dispatcher renderUdc"),this.views.navigation=new g,this.views.navigation.render(),this.updateMeteoInComptes(),this.models.initZonesPubliables.fetchFlat({successCallback:"renderZonesPubliables"},this)},updateMeteoInComptes:function(){for(var e=this.collections.comptesToDisplay,t=0;t<e.length;t++)e.models[t].get("key")===this.models.meteo.get("compteMeteo")&&e.models[t].set({meteo:this.models.meteo});var i=this.models.ropParams.get("ibanCrypte");this.views.header=new h({rop:this.models.initRop,collection:this.collections.comptesToDisplay,iban:i}),this.views.header.render(),this.listenTo(this.views.header,"gotNewCompteToShow",this.setIdCompteToShow)},renderMeteo:function(e){this.views.meteo=new v({model:this.collections.comptesToDisplay.get(e),initRop:this.models.initRop}),this.views.meteo.render()},setIdCompteToShow:function(t){L.log("[ENTER] Dispatcher setIdCompteToShow"),this.models.ropParams.set({ibanCrypte:t.iban}),e.udcRedirectApi.setParams({iban:t.iban}),this.set({iban:t.iban,isDetailsShown:!1,isPointageVisible:!1}),this.sendRopRequest()},switchMainLayoutView:function(e){L.log("[ENTER] Dispatcher switchMainLayoutView");var t=this.$(".wrapper-main-rop-list");this.views.mainConteneurLayout&&(this.stopListening(this.views.mainConteneurLayout),this.views.mainConteneurLayout.remove(),t.empty()),e.switchToMainListeLayout?(L.log("[INFO] Dispatcher switchMainLayoutView - Affichage de la vue en liste des opérations."),this.get("isAveLayout")?this.views.mainConteneurLayout=new O({model:this.models.initRop,collection:this.collections.OpPasseesWithPaginate,iban:this.models.ropParams.get("ibanCrypte"),lastCo:this.lastCo,selectedCompte:this.get("selectedCompte")}):(this.views.mainConteneurLayout=new y({model:this.models.initRop,collection:this.collections.OpPasseesWithPaginate,iban:this.models.ropParams.get("ibanCrypte"),lastCo:this.lastCo,selectedCompte:this.get("selectedCompte")}),this.views.filter.updateNbOpPointes())):(L.log("[INFO] Dispatcher switchMainLayoutView - Affichage de la vue en timeline des opérations."),this.views.mainConteneurLayout=new MainConteneurTimelineView({model:this.models.initRop,collection:this.collections.OpPasseesWithPaginate,iban:this.models.ropParams.get("ibanCrypte"),lastCo:this.lastCo}),this.views.filter.updateNbOpPointes()),t.append(this.views.mainConteneurLayout.$el),this.views.mainConteneurLayout.render(),M.afficherListeOperationsRop({selectedCompte:this.get("selectedCompte"),isVueTimeline:this.get("isTimelineLayout")}),this.listenTo(this.views.mainConteneurLayout,"goToAveLayout",this.switchToAveLayout),this.listenTo(this.views.mainConteneurLayout,"goToOperationLayout",this.switchToOperationLayout),this.listenTo(this.views.mainConteneurLayout,"showMoreOperation",this.showMoreOperation),this.listenTo(this.views.mainConteneurLayout,"errorTech",this.renderErrorTechMessage),this.listenTo(this.views.mainConteneurLayout,"errorFonc",this.renderErrorFoncMessage),this.listenTo(this.views.mainConteneurLayout,"pointageChange",this.pointageChange),this.listenTo(this.views.mainConteneurLayout,"removePointageView",this.togglePointageView)},switchToAveLayout:function(){L.log("[ENTER] Dispatcher switchToAveLayout"),this.set({isAveLayout:!0,isRechercheAvanceeVisible:!1,isPointageVisible:!1})},switchToOperationLayout:function(){L.log("[ENTER] Dispatcher switchToOperationLayout"),this.set({isAveLayout:!1,isRechercheAvanceeVisible:!1})},toggleRenderRechercheAvancee:function(){L.log("[ENTER] Dispatcher toggleRenderRechercheAvancee"),0===this.$(".form-advanced-search").length?(this.views.rechercheAvancee=new w({model:this.models.initRop,ropParams:this.models.ropParams}),this.$(".wrapper-main-rop-list").before(this.views.rechercheAvancee.$el),this.views.rechercheAvancee.render(),this.listenTo(this.views.rechercheAvancee,"toggleAdvSearch",this.toggleRenderRechercheAvancee),this.listenTo(this.views.rechercheAvancee,"doRecherche",this.doRecherche),this.listenTo(this.views.rechercheAvancee,"reset",this.resetRecherche),this.listenTo(this.views.rechercheAvancee,"errorTech",this.renderErrorTechMessage),this.listenTo(this.views.rechercheAvancee,"errorFonc",this.renderErrorFoncMessage),this.views.filter.showAdvanceSearch(!0)):(this.views.rechercheAvancee.remove(),this.stopListening(this.views.rechercheAvancee),this.views.filter.showAdvanceSearch(!1))},doRecherche:function(e){L.log("[ENTER] Dispatcher doRecherche"),this.models.initRop.setOperationPassee(e),L.log("[INFO] Dispatcher doRecherche - Taille de la collection: "+e.length),this.views.mainConteneurLayout.collection=this.collections.OpPassees,this.views.mainConteneurLayout.renderAdvanceResearch(),this.views.filter.setOperations(this.collections.OpPassees),this.views.filter.updateNbOpPointes()},endOfCollection:function(){this.views.mainConteneurLayout.endOfCollection()},resetRecherche:function(){L.log("[ENTER] Dispatcher resetRecherche"),this.models.ropParams.set({startDate:null,endDate:null}),this.set({isAveLayout:!1,isRechercheAvanceeVisible:!0,isOpFromRechercheAvancee:!1}),this.sendRopRequest()},showMoreOperation:function(){this.views.filter.reset(),this.views.mainConteneurLayout.initOperationToShow(),this.views.filter.setOperations(this.collections.OpPasseesWithPaginate),this.models.pagination.updateCollectionToShow()},sortMainLayoutView:function(e){L.log("[ENTER] Dispatcher sortLayoutCompte");var t={tri:e.key};if("1"===t.tri||"2"===t.tri){var i=new p;i.fetchNext({data:t,type:"POST"},this)}this.views.mainConteneurLayout.sortOpBy(e.keyWord)},filterMainLayoutView:function(e){L.log("[ENTER] Dispatcher filterLayoutOp"),this.views.mainConteneurLayout.filterOpByKeyword(e.keyWord)},filtrerOpByLink:function(e){L.log("[ENTER] Dispatcher filterLayoutOp"),this.views.mainConteneurLayout.filtrerOpByLink(e)},togglePointageView:function(){L.log("[ENTER] Dispatcher togglePointageView"),this.views.filter.updateNbOpPointes(),this.get("isPointageVisible")?this.removePointageView():this.renderPointageView(),this.set({isRechercheAvanceeVisible:!1,isPointageVisible:!this.get("isPointageVisible")})},renderPointageView:function(){L.log("[ENTER] MainConteneurRootView renderPointageView"),this.views.mainConteneurLayout.renderPointageView()
},removePointageView:function(){L.log("[ENTER] MainConteneurRootView removePointageView"),this.views.mainConteneurLayout.removePointageView()},renderZonesPubliables:function(){L.log("[ENTER] Dispatcher renderZonesPubliables"),this.views.zonesPubliables.render({baseId:P.autonomy.zpRopAccueil})},renderErrorTechMessage:function(e,t){L.log("[ENTER] Dispatcher renderErrorTechMessage"),this.renderErrorMessage(e,T),M.tagErreurTech(t)},pointageChange:function(){L.log("[ENTER] DISPATCHER pointageChange"),this.set({isPointageVisible:!0}),this.views.filter.updateNbOpPointes()},renderErrorFoncMessage:function(e,t){L.log("[ENTER] Dispatcher renderErrorFoncMessage"),this.renderErrorMessage(e,E),M.tagErreurFonc(e,t)},renderErrorMessage:function(e,t){var i=new t({model:e});this.$el.html(""),this.$el.append(i.$el),i.render()}});return x}),a("roppro",["wrappernext","app/rop/utils/constants","app/rop/utils/logger","app/rop/utils/helpers","app/rop/translate/i18nRop","app/rop/view/erreurTechView","app/rop/view/erreurFoncView","app/rop/model/typeClient","app/rop/dispatcher/pro/dispatcher","jquery","jqueryui","jquery.validator"],function(e,t,i,r,o,a,s,p,l){return function(r){i.log("[INIT] Point d'entrée de l'application \"Relevé d'opération pro\".");var a=e.queryString();a[t.rop.paramTypeCompte]&&(a[t.rop.paramTypeCompteString]=a[t.rop.paramTypeCompte],a[t.rop.paramTypeCompte]=a[t.rop.paramTypeCompte].split("-"));var s=new o;s.fetchI18n({isI18nEnabled:t.i18n.isI18nEnabled,callback:function(){new l({el:r,urlParams:a})}}),n(r).addClass("pro-style")}})}(window,document,bnpp.sf31.requirejs,bnpp.sf31.requirejs,bnpp.sf31.define,bnpp.jquery,bnpp.jquery,bnpp.jquery);
//@ sourceMappingURL=main.js.map